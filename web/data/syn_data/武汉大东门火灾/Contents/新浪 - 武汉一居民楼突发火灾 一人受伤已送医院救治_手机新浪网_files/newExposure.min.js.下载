!function(e,t){var n={_listeningEles:[],timer:0,threshold:300,_init:function(){this._bindEvent()},_bindEvent:function(){this._scrollListener(e)},_checkExposeure:function(e){var t=this,n=0,o=this._listeningEles,i=this._listeningEles.length,l=[],e=e||"scroll";for(n=0;i>n;n++){t.threshold=o[n].threshold;for(var c=0;c<o[n].listeningEles.length;c++)(o[n].listeningEles[c].canRepeat||!o[n].listeningEles[c].doneOnce)&&this._calculateTime(o[n].listeningEles[c],e)&&(l.push(o[n].listeningEles[c].ele),o[n].listeningEles[c].doneOnce=!0);if(l.length>0){if(o[n].action&&o[n].action(l),/exposure=1/.test(location.href))for(var n=0;n<l.length;n++)console.log(l[n].innerHTML);l=[]}}t.scroll_lock=!1},_calculateTime:function(e,t){var n=this;if(!e.ele)return!1;var o=0,i=document.documentElement.clientHeight,l=e.ele.getBoundingClientRect(),c=10,s=Date.now();if(0==l.top&&0==l.bottom)return!1;if(l.top>=0&&l.top<i-c){if("scroll"==t)return!0;null!=e.startTop?(e.startEnd=s,o=e.startEnd-e.startTop):e.startTop=s}return o>n.threshold?!0:void 0},pushListeningEle:function(e,t,n,o){var i={},l=this,c={},s=[],o=o||l.threshold;e.forEach(function(e){i.ele=e,i.canRepeat=n?!0:!1,i.doneOnce=!1,i.startTop=null,i.endTop=null,c=l._clone(i),s.push(c)}),l._listeningEles.push({listeningEles:s,action:t,threshold:o}),l._checkExposeure("scroll")},_actionFactory:function(e){var t=typeof e;return"function"==t?e:"string"==t?function(){var t=e.indexOf("?")>-1?e+"&timestamp="+(new Date).valueOf():e+"?timestamp="+(new Date).valueOf(),n=new Image;n.src=t}:null},scroll_lock:!1,_scrollListener:function(e){function t(e){n.scroll_lock||(n.scroll_lock=!0,n._checkExposeure(e))}var n=this;if(!e)throw new Error("scrollListener needs a object parameter.");e.addEventListener("scroll",function(){t("timegap"),setTimeout(function(){t("timegap")},500)},!1),e.addEventListener("touchstart",function(){t("timegap")},!1),e.addEventListener("touchmove",function(){t("timegap")},!1),e.addEventListener("touchend",function(){t("timegap"),setTimeout(function(){n.scroll_lock=!0,n._checkExposeure("timegap")},500)},!1),e.addEventListener("touchcancel",function(){t("timegap")},!1)},_clone:function(e){var t=null,n=this;switch(this._getType(e)){case"object":t={},Object.keys(e).forEach(function(o){t[o]=n._clone(e[o])});break;case"array":t=[],e.forEach(function(e){t.push(n._clone(e))});break;default:t=e}return t},_getType:function(e){var t=typeof e;return"object"===t?Object.prototype.toString.call(e).match(/\[object (.*)\]/)?RegExp.$1.toLowerCase():"other":t}};n._init(),e.newExposure=n}(window,document);