!function(){function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){return i(t[a][1][e]||e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}return e}()({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="model",o="name",a="type",s="vendor",l="version",u="mobile",c={extend:function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"===(void 0===e?"undefined":n(e))?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},d={rgx:function(e,t){for(var r,i,o,a,s,l,u=0;u<t.length&&!s;){var c=t[u],d=t[u+1];for(r=i=0;r<c.length&&!s;)if(s=c[r++].exec(e))for(o=0;o<d.length;o++)l=s[++i],a=d[o],"object"===(void 0===a?"undefined":n(a))&&a.length>0?2==a.length?"function"==n(a[1])?this[a[0]]=a[1].call(this,l):this[a[0]]=a[1]:3==a.length?"function"!==n(a[1])||a[1].exec&&a[1].test?this[a[0]]=l?l.replace(a[1],a[2]):void 0:this[a[0]]=l?a[1].call(this,l,a[2]):void 0:4==a.length&&(this[a[0]]=l?a[3].call(this,l.replace(a[1],a[2])):void 0):this[a]=l||void 0;u+=2}},str:function(e,t){for(var r in t)if("object"===n(t[r])&&t[r].length>0){for(var i=0;i<t[r].length;i++)if(c.has(t[r][i],e))return"?"===r?void 0:r}else if(c.has(t[r],e))return"?"===r?void 0:r;return e}},f={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[o,l],[/(opios)[\/\s]+([\w\.]+)/i],[[o,"Opera Mini"],l],[/\s(opr)\/([\w\.]+)/i],[[o,"Opera"],l],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[o,l],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[o,"UCBrowser"],l],[/(micromessenger)\/([\w\.]+)/i],[[o,"WeChat"],l],[/(QQ)\/([\d\.]+)/i],[o,l],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[o,l],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[l,[o,"MIUI Browser"]],[/(headlesschrome) ([\w\.]+)/i],[l,[o,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[o,/(.+)/,"$1 WebView"],l],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[o,l],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[o,/(.+(?:g|us))(.+)/,"$1 $2"],l],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[l,[o,"Android Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[o,"Chrome"],l],[/(coast)\/([\w\.]+)/i],[[o,"Opera Coast"],l],[/fxios\/([\w\.-]+)/i],[l,[o,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[l,[o,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[l,o],[/(Weibo)__([\d|\\.]+)/i],[o,l]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[i,s,[a,"tablet"]],[/applecoremedia\/[\w\.]+ \((ipad)/],[i,[s,"Apple"],[a,"tablet"]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[i,s,[a,u]],[/\((ip[honed|\s\w*]+);/i],[i,[s,"Apple"],[a,u]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[s,i,[a,"tablet"]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[s,[i,/_/g," "],[a,u]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[i,[s,"Lenovo"],[a,"tablet"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[s,i,[a,u]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[i,/_/g," "],[s,"Xiaomi"],[a,u]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[i,[s,"Meizu"],[a,"tablet"]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[s,"ZTE"],i,[a,"tablet"]],[/(SM-G900)/i],[[i,"Galaxy S5"],[s,"Samsung"],[a,u]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[i,[s,"LG"],[a,u]],[/android.+a000(1)\s+build/i],[i,[s,"OnePlus"],[a,u]],[/.*?((?:ONEPLUS.[a-z][a-z]*[0-9]+[a-z0-9]*))/i],[i,[s,"OnePlus"],[a,u]]],os:[[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i],[o,l],[/ip[honead]+(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[l,/_/g,"."],[o,"iOS"]]]},p=function e(t,r){if("object"===(void 0===t?"undefined":n(t))&&(r=t,t=void 0),!(this instanceof e))return new e(t,r).getResult();var i=t||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""),o=r?c.extend(f,r):f;return this.getBrowser=function(){var e={name:"",version:""};return d.rgx.call(e,i,o.browser),e},this.getCPU=function(){var e={architecture:void 0};return d.rgx.call(e,i,o.cpu),e},this.getDevice=function(){var e={model:""};return d.rgx.call(e,i,o.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return d.rgx.call(e,i,o.engine),e},this.getOS=function(){var e={name:"",version:""};return d.rgx.call(e,i,o.os),e},this.getResult=function(){return{browser:this.getBrowser(),os:this.getOS(),device:this.getDevice(),ua:this.getUA()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},this.getResult()};p.VERSION="0.7.14",p.BROWSER={NAME:o,MAJOR:"major",VERSION:l},p.CPU={ARCHITECTURE:"architecture"},p.DEVICE={MODEL:i,VENDOR:s,TYPE:a,CONSOLE:"console",MOBILE:u,SMARTTV:"smarttv",TABLET:"tablet",WEARABLE:"wearable",EMBEDDED:"embedded"},p.ENGINE={NAME:o,VERSION:l},p.OS={NAME:o,VERSION:l},window.UAParser=p,r.default=p},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n;n=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t="vh739KAwkGnyHZ0RFsEdMWc62OgeTmP/zolqaUVYj4Sfur8NiCbpLJ+51D=xBtQIX".split(""),r=function(e){for(var t=[];e>0;){var r=e%2;e=Math.floor(e/2),t.push(r)}return t.reverse(),t},n=function(e){for(var t=0,r=0,n=e.length-1;n>=0;--n){1==e[n]&&(t+=Math.pow(2,r)),++r}return t},i=function(e,t){for(var r=8-(e+1)+6*(e-1),n=t.length,i=r-n;--i>=0;)t.unshift(0);for(var o=[],a=e;--a>=0;)o.push(1);o.push(0);for(var s=0,l=8-(e+1);s<l;++s)o.push(t[s]);for(var u=0;u<e-1;++u){o.push(1),o.push(0);for(var c=6;--c>=0;)o.push(t[s++])}return o};return{encode:function(e){for(var o=[],a=[],s=0,l=e.length;s<l;++s){var u=e.charCodeAt(s),c=r(u);if(u<128){for(var d=8-c.length;--d>=0;)c.unshift(0);a=a.concat(c)}else u>=128&&u<=2047?a=a.concat(i(2,c)):u>=2048&&u<=65535?a=a.concat(i(3,c)):u>=65536&&u<=2097151?a=a.concat(i(4,c)):u>=2097152&&u<=67108863?a=a.concat(i(5,c)):u>=4e6&&u<=2147483647&&(a=a.concat(i(6,c)))}for(var f=0,s=0,l=a.length;s<l;s+=6){var p=s+6-l;2==p?f=2:4==p&&(f=4);for(var h=f;--h>=0;)a.push(0);o.push(n(a.slice(s,s+6)))}for(var m="",s=0,l=o.length;s<l;++s)m+=t[o[s]];for(var s=0,l=f/2;s<l;++s)m+=t[t.length-1];return m},encode_default:function(t){for(var o=[],a=[],s=0,l=t.length;s<l;++s){var u=t.charCodeAt(s),c=r(u);if(u<128){for(var d=8-c.length;--d>=0;)c.unshift(0);a=a.concat(c)}else u>=128&&u<=2047?a=a.concat(i(2,c)):u>=2048&&u<=65535?a=a.concat(i(3,c)):u>=65536&&u<=2097151?a=a.concat(i(4,c)):u>=2097152&&u<=67108863?a=a.concat(i(5,c)):u>=4e6&&u<=2147483647&&(a=a.concat(i(6,c)))}for(var f=0,s=0,l=a.length;s<l;s+=6){var p=s+6-l;2==p?f=2:4==p&&(f=4);for(var h=f;--h>=0;)a.push(0);o.push(n(a.slice(s,s+6)))}for(var m="",s=0,l=o.length;s<l;++s)m+=e[o[s]];for(var s=0,l=f/2;s<l;++s)m+=e[e.length-1];return m},decode:function(e){var i=e.length,o=0;"="==e.charAt(i-1)&&("="==e.charAt(i-2)?(o=4,e=e.substring(0,i-2)):(o=2,e=e.substring(0,i-1)));for(var a=[],s=0,l=e.length;s<l;++s)for(var u=e.charAt(s),c=0,d=t.length;c<d;++c)if(u==t[c]){var f=r(c),p=f.length;if(6-p>0)for(var h=6-p;h>0;--h)f.unshift(0);a=a.concat(f);break}o>0&&(a=a.slice(0,a.length-o));for(var m=[],b=[],s=0,l=a.length;s<l;)if(0==a[s])m=m.concat(n(a.slice(s,s+8))),s+=8;else{for(var v=0;s<l&&1==a[s];)++v,++s;for(b=b.concat(a.slice(s+1,s+8-v)),s+=8-v;v>1;)b=b.concat(a.slice(s+2,s+8)),s+=8,--v;m=m.concat(n(b)),b=[]}for(var y="",s=0,l=m.length;s<l;++s)y+=String.fromCharCode(m[s]);return y}}}(),r.default=n},{}],3:[function(e,t,r){"use strict";function n(e,t){var r=e.split("."),n=t.split(".");if(r.length===n.length)for(var i=0;i<r.length;i++){if(1*r[i]>1*n[i])return!0;if(1*r[i]<1*n[i])return!1;if(n.length-1===i)return!0}if(r.length<n.length)for(var o=0;o<r.length;o++){if(1*r[o]>1*n[o])return!0;if(1*r[o]<1*n[o])return!1;if(r.length-1===o)return!1}if(r.length>n.length)for(var a=0;a<n.length;a++){if(1*r[a]>1*n[a])return!0;if(1*r[a]<1*n[a])return!1;if(n.length-1===a)return!0}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./UAParser"),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=new o.default;a.isAndroid=function(){return a.plat?1===a.plat:"Android"===a.os.name},a.isIOS=function(){return a.plat?2===a.plat:"iOS"===a.os.name},a.isIOS9=function(){return"iOS"===a.os.name&&n(a.os.version,"9.3")},a.isUlspecialBrower=function(){return"baidu"===a.browser.name},a.isWx=function(){return"WeChat"===a.browser.name||"wechat"===a.browser.name},a.isQQBrowser=function(){return"QQBrowser"===a.browser.name},a.isChromeMobile=function(){return"Chrome"===a.browser.name},a.isMobileQQ=function(){return"QQ"===a.browser.name||"qqMobile"===a.browser.name},a.isWeibo=function(){return"weibo"===a.browser.name||"Weibo"===a.browser.name},a.returnSysVersion=function(){return a.os.version||""},a.returnBrowser=function(){return a.browser.name+"|"+a.browser.version},a.isWxVer=function(){return"WeChat"===a.browser.name&&n(a.browser.version,"6.5.999")},a.msg={browser:a.browser,os:a.os,device:a.device,ua:a.ua},a.returnModel=function(){return a.device.model?a.device.model:""},a.isguideSpecialBrower=function(){return!!(["BaiduBrowser","Weibo"].indexOf(a.returnBrowser().split("|")[0])>=0||a.isWx())},a.isMobile=function(){return a.isAndroid()||a.isIOS()||/AppleWebKit.*Mobile/i.test(ua)||/MIDP|SymbianOS|NOKIA|SAMSUNG|LG|NEC|TCL|Alcatel|BIRD|DBTEL|Dopod|PHILIPS|HAIER|LENOVO|MOT-|Nokia|SonyEricsson|SIE-|Amoi|ZTE/.test(ua)},r.default=a},{"./UAParser":1}],4:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("./browser-env"),u=n(l),c=e("./base64"),d=n(c),f=e("./tools"),p=n(f),h=!1,m=function(){function e(){a(this,e)}return s(e,[{key:"$",value:function(e){return"string"==typeof e?e.indexOf("#")>-1?(e=e.replace("#",""),document.getElementById(e)?document.getElementById(e):(console.error("nothingness element ID : "+e),null)):e.indexOf(".")>-1?(e=e.replace(".",""),document.getElementsByClassName(e)?document.getElementsByClassName(e):(console.error("nothingness element ClassName : "+e),null)):document.createElement(e):e}},{key:"getJumpMark",value:function(){return u.default.isIOS()?u.default.isIOS9()&&!u.default.isUlspecialBrower()?u.default.isQQBrowser()?"IOS_SCHEME":u.default.isMobileQQ()?"IOS_SCHEME":"IOS_UL":u.default.isWx()?"IOS_YYB":"IOS_SCHEME":u.default.isAndroid()?u.default.isWx()?"AND_YYB":"AND_SCHEME":"env Error"}},{key:"returnURL",value:function(e,t,r,n,i){var o="";switch(e){case"IOS_UL":o="https://"+n;break;case"IOS_YYB":case"AND_YYB":o=i;break;case"IOS_SCHEME":o=r;break;case"AND_DEEP":break;case"AND_SCHEME":o=t;break;default:o="#"}return o}},{key:"a",value:function(e){var t=this.$("a");t.style.display="none",t.href=e,document.body.appendChild(t);var r=new MouseEvent("click");t.dispatchEvent(r)}},{key:"iframe",value:function(e){var t=this.$("iframe");t.style.display="none",t.src=e,document.body.appendChild(t)}}],[{key:"env",value:function(){return u.default}},{key:"base64",value:function(){return d.default}},{key:"getMobid",value:function(){var e=window.location.search;return p.default.toQueryParams.call(e).mobid||""}},{key:"getAppkey",value:function(){for(var e=document.getElementsByTagName("script"),t="",r=0;r<e.length;r++)if(t=e[r].src,t.indexOf("js?appkey")>-1)return p.default.toQueryParams.call(t).appkey}}]),e}(),b=function(e){function t(e){a(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.userConfig=p.default.isArr(e)?e:[e],r.jumpMark=r.getJumpMark(),r.appkey=e.appkey?e.appkey:m.getAppkey(),r.mobid=m.getMobid(),r.jsonData={},r.click_now={},r.plainObj={urls:[]},r.funcObj={modidParams:""},r}return o(t,e),s(t,[{key:"init",value:function(e,t){var r=this,n=this.userConfig,i=[];n.forEach(function(e,t){i.push({params:encodeURIComponent(JSON.stringify(e.params)),path:e.path,mobid:r.mobid})});var o=function(){var e={appkey:r.appkey,list:i,plat:u.default.plat,status:1};p.default.ajax({url:"https://api.moblink.mob.com/link/dataList",type:"POST",data:e,dataType:"json",success:function(e){if(1===u.default.plat){if(!e.res.andscheme)return console.error("android scheme 未配置!");if(!e.res.ul)return console.error("跳转下载页，请配置IOS ul 通用链接!")}if(2===u.default.plat){if(!e.res.iosscheme)return console.error("IOS sscheme 未配置!");if(!e.res.ul)return console.error("跳转下载页，请配置IOS ul 通用链接!")}this.jsonData=e.res,this.elToURL(),t&&t(e.res,u.default,this.userConfig)}.bind(r),error:function(e){t&&t(e),console.log("接口"+e)}.bind(r)})};h?o():p.default.ajax2({url:"https://api.moblink.mob.com/link/device",type:"GET",dataType:"json",success:function(e){if(200!=e.status)return console.error("MonLink报错：请用手机模式打开!");u.default.device.model=e.res.model,u.default.browser.name=e.res.browser,u.default.browser.version=e.res.version,u.default.os.version=e.res.sysver,u.default.os.plat=e.res.plat,u.default.os.name=1===e.res.plat?"Android":"iOS",u.default.plat=e.res.plat,this.jumpMark=this.getJumpMark(),h=!0,o()}.bind(this)})}},{key:"urlFunc",value:function(){var e=this,t=this.jsonData,r=this.jumpMark;switch(r){case"IOS_UL":r=""!==t.ul?"IOS_UL":"IOS_SCHEME";break;case"IOS_YYB":r=t.iosyyb&&""!==t.yyburl?"IOS_YYB":"#";break;case"AND_YYB":r=t.andyyb&&""!==t.yyburl?"AND_YYB":"#";break;case"IOS_SCHEME":r="IOS_SCHEME";break;case"AND_SCHEME":r="AND_SCHEME"}this.jumpMark=r;var n="";return n=u.default.isIOS()?t.ul:""===t.deeplink||null===t.deeplink?t.ul:t.deeplink,this.plainObj.urls=[],t.list.map(function(i,o){var a=e.returnURL(r,t.andscheme,t.iosscheme,t.ul,t.yyburl),s=void 0;s=p.default.isArr(e.userConfig)?e.userConfig[o].data?d.default.encode_default(JSON.stringify(e.userConfig[o].data)):d.default.encode_default("{}"):e.userConfig.data?d.default.encode_default(JSON.stringify(e.userConfig.data)):d.default.encode_default("{}"),e.plainObj.urls.push({ios_ul:"https://"+n+i+"&data="+s,scheme_ios:t.iosscheme+i+"&data="+s,scheme_and:t.andscheme+i+"&data="+s,url:"AND_YYB"===r||"IOS_YYB"===r?a:a+i+"&data="+s})}),this.plainObj.urls}},{key:"elToURL",value:function(){var e=this,t=this.userConfig,r=this.urlFunc(),n=[];t.forEach(function(e,t){if(p.default.isArr(e.el))e.el.forEach(function(i,o){var a=JSON.parse(JSON.stringify(e));a.el=i,a.url=r[t].url,a.ios_ul=r[t].ios_ul,a.scheme_ios=r[t].scheme_ios,a.scheme_and=r[t].scheme_and,n.push(a)});else{var i=e;i.url=r[t].url,i.ios_ul=r[t].ios_ul,i.scheme_ios=r[t].scheme_ios,i.scheme_and=r[t].scheme_and,n.push(i)}}),n.forEach(function(t,r){e.centralized(t)})}},{key:"centralized",value:function(e){if(""===e.el||void 0===e.el)this.render(e);else if("[object HTMLCollection]"===this.$(e.el).toString()||"[object NodeList]"===this.$(e.el).toString()){var t=p.default.makeArray(this.$(e.el));t.forEach(function(t){this.addLink(t,e)}.bind(this))}else this.addLink(this.$(e.el),e)}},{key:"addLink",value:function(e,t){"A"===e.tagName?e.href=t.url:e.setAttribute("url",t.url),e.onclick=function(e){this.openApp(t.url,t,e),e.preventDefault()}.bind(this)}},{key:"jumpFunc",value:function(e){switch(this.jumpMark){case"IOS_UL":return window.location.href=e,!0;case"IOS_YYB":case"AND_YYB":this.log(2,function(){this.a(e)}.bind(this));break;case"IOS_SCHEME":this.a(e);break;case"AND_DEEP":break;case"AND_SCHEME":this.a(e)}return!1}},{key:"openApp",value:function(e,t,r){if(t&&t.beforeClick&&t.beforeClick(e),t&&(this.click_now=t),this.jumpFunc(e))return!1;if(u.default.isWx()&&u.default.isAndroid()&&"AND_YYB"!==this.jumpMark)return this.renderIfr_fixed(t);if(u.default.isWeibo()&&u.default.isAndroid())return this.renderIfr_fixed(t);var n=void 0,i=void 0,o=void 0;n=Date.now(),o=setTimeout(function(){return document.hidden||document.webkitHidden?clearTimeout(o):(i=Date.now(),u.default.isQQBrowser()&&!u.default.isIOS9()&&i-n>1503?clearTimeout(o):void(i-n<1700&&(t&&t.failcallback?t.failcallback(t,this.jsonData,u.default):this.renderIfr(t))))}.bind(this),1500)}},{key:"log",value:function(e,t){var r=this.click_now,n=void 0,i=void 0,o=void 0;switch(e){case 1:i={url:this.urlFunc()};break;case 2:i={url:this.jsonData.yyburl,recoverurl:u.default.isIOS()?r.scheme_ios:r.scheme_and};break;case 3:i={url:u.default.isIOS()?this.jsonData.iosurl:this.jsonData.andurl,recoverurl:u.default.isIOS()?r.scheme_ios:r.scheme_and}}n={appkey:this.appkey,mobid:this.mobid,sysver:u.default.os.version,plat:u.default.os.plat,model:u.default.device.model,status:e,url:"",recoverurl:"",browser:u.default.browser.name},o=p.default.deepMerge(n,i),p.default.ajax3({url:"https://api.moblink.mob.com/event/log",type:"POST",data:{m:d.default.encode(JSON.stringify(o))},dataType:"json",success:function(e){t()}.bind(this),error:function(e){console.log(e)}})}},{key:"renderIfr",value:function(e){location.href=this.click_now.ios_ul}},{key:"renderIfr_fixed",value:function(e){var t=void 0;t=document.createElement("iframe"),t.id="mobifr";var r=document.createElement("style");r.innerHTML="#mobifr{position: fixed;top: 0;left: 0;z-index: 99999;width: 100%;height: 100%;border: 0;overflow: hidden;}",document.head.appendChild(r),t.style="position: fixed;top: 0;left: 0;z-index: 99999;width: 100px;height: 100px;background:#fff;border: 0;overflow: hidden;",t.style="position: fixed;top: 0;left: 0;z-index: 99999;width: 100%;height: 100%;border: 0;background:#000;overflow: hidden;",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.zIndex="9999999",t.style.width="100%",t.style.height="100%",t.style.border="0",t.style.overflow="hidden",t.style.background="#fff";var n=this.jsonData;""===n.iosCustomGuide||null===n.iosCustomGuide?this.jsonData.ui.icon?t.src="https://f.moblink.mob.com/weChatGuide-and.html?icon="+encodeURIComponent(this.jsonData.ui.icon):t.src="https://f.moblink.mob.com/weChatGuide-and.html":t.src=n.iosCustomGuide,document.body.appendChild(t)}},{key:"render",value:function(e){var t=this.jsonData.ui?this.jsonData.ui:{bacolor:"rgba(0, 0, 0, .8)",bucolor:"#376be6",bufontcolor:"#fff",apfontcolor:"#fff",defontcolor:"#fff",icon:"http://via.placeholder.com/50x50",sid:null,viewapp:"应用名称",viewdetail:"应用描述（简介）"},r=document.getElementById("mob-btn"),n=void 0,i=void 0,o=e.url||"";return r?(r.href=o,void(r.onclick=function(t){this.openApp(o,e,t),t.preventDefault()}.bind(this))):(n='<div class="mob-box" id="mob-box"><div class="mob-download-tips" style="background-color:'+t.bacolor+';position: fixed;bottom: 0;left: 0;z-index: 4;box-sizing: border-box;font-size: 14px;width: 100%;padding: 6px 0 6px 4px;display: flex;"><div class="mob-col-left" style="margin-left: 7px;width: 50px;height: 50px"><div class="mob-col-logo" style="width: 100%;height: 100%"><img src="'+t.icon+'" style="display: block;width: 100%"/></div></div><div class="mob-col-center" style=" flex: 1;overflow: hidden;padding: 0 7px"><p data-reactid="39" style="color:'+t.apfontcolor+';margin: 0;font-size: 14px;line-height: 18px;text-overflow: ellipsis;overflow: hidden;white-space: nowrap;padding-top: 5px">'+t.viewapp+'</p><p data-reactid="39" style="color:'+t.defontcolor+';margin: 0;font-size: 14px;line-height: 18px;text-overflow: ellipsis;overflow: hidden;white-space: nowrap;padding-top: 5px">'+t.viewdetail+'</p></div><div class="mob-col-right" style="display: flex;align-items: center;"><a class="mob-btn" id="mob-btn" href="'+o+'" style="background-color:'+t.bucolor+";color:"+t.bufontcolor+';display: inline-block;text-align: center;border-radius: 2px;width: 50px;padding: 4px 0;"><span style="width:100%;"><span style="width:50px;">打开</span></span></a><div class="mob-close" id="mob-close" style="display: inline-block;padding: 0 10px"><img width="13px" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA6klEQVQ4T6WTyQrCMBCGm4Ovpie3VlupXsR38qyguKIiLjf1yazflFSiRmljYJgs839JJhOVJMnN87yhUmqJz93QxQQPFJ0mnSnWA7LJQ0ATEjfCOkoETFRxcoIYyPYXhNg262MsIPacAgzIQkN2NoghbiE+ScwToCE1/Dw9mlJ7E4I4YDzBfNk5W3sBaEgDP8OiDGKIZeejCf4AaEiW2DrjErbGQsSH96tZARpS1om942Xniy0vvwAVBJLU4gCjNopfAbF7EhG7P6OuRrdC+quUEfu6wlw+UyS/8QpAvvPK9s7f5tB1Wes/AL+xjBncJadwAAAAAElFTkSuQmCC" /></div></div></div></div>',i=document.createElement("div"),i.innerHTML=n,i.id="mobLink",document.body.appendChild(i),this.$("#mob-btn").onclick=function(t){"function"==typeof e?e():this.openApp(o,e,t),t.preventDefault()}.bind(this),this.$("#mob-close").onclick=function(e){this.$("#mob-box").style.display="none"}.bind(this),this)}},{key:"init_function",value:function(e,t){var r=this,n=function(){var e={appkey:r.appkey,list:[{mobid:r.mobid}],plat:u.default.plat,status:1};p.default.ajax({url:"https://api.moblink.mob.com/link/dataList",type:"POST",data:e,dataType:"json",success:function(e){var r=this;this.jsonData=e.res,this.funcObj.modidParams=e.res.list[0].split("params=")[1],t&&this.render(function(){return t(e.res,u.default,r.userConfig)})}.bind(r),error:function(e){t&&t(e),console.log("接口"+e)}.bind(r)})};h?n():p.default.ajax2({url:"https://api.moblink.mob.com/link/device",type:"GET",dataType:"json",success:function(e){if(200!=e.status)return console.error("MonLink报错：请用手机模式打开!");u.default.device.model=e.res.model,u.default.browser.name=e.res.browser,u.default.browser.version=e.res.version,u.default.os.version=e.res.sysver,u.default.os.plat=e.res.plat,u.default.os.name=1===e.res.plat?"Android":"iOS",u.default.plat=e.res.plat,h=!0,n()}.bind(this)})}},{key:"openLink",value:function(e){var t=this.jsonData,r=this.jumpMark;switch(r){case"IOS_UL":r=""!==t.ul?"IOS_UL":"IOS_SCHEME";break;case"IOS_YYB":r=t.iosyyb&&""!==t.yyburl?"IOS_YYB":"#";break;case"AND_YYB":r=t.andyyb&&""!==t.yyburl?"AND_YYB":"#";break;case"IOS_SCHEME":r="IOS_SCHEME";break;case"AND_SCHEME":r="AND_SCHEME"}var n=this.returnURL(r,t.andscheme,t.iosscheme,t.ul,t.yyburl),i=this.funcObj.modidParams?"params="+this.funcObj.modidParams:"",o=e.path?e.path+"?":"",a=e.data?"data="+d.default.encode_default(JSON.stringify(e.data)):"",s="";s=""!==i&&""!==a?i+"&"+a:i||a;var l=n+o+s,c="AND_YYB"===r||"IOS_YYB"===r?n:l,f="";f=u.default.isIOS()?t.ul:""===t.deeplink||null===t.deeplink?t.ul:t.deeplink,this.click_now={path:e.path,data:e.data,scheme_ios:t.iosscheme+o+s,scheme_and:t.andscheme+o+s,ios_ul:"https://"+f+o+s},this.openApp(c)}},{key:"update",value:function(e){}}]),t}(m),v=function(e,t,r){if(!r||!1!==r(u.default)){if(!e)return m;var n=new b(e);return"function"===e?n.init_function(e,t):n.init(e,t),n}};window.MobLink=v},{"./base64":2,"./browser-env":3,"./tools":5}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={isArr:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isDOMElement:function(e){return!(!e||"undefined"==typeof window||e!==window&&!e.nodeType)},transformArguments:function(){[].slice.call(arguments)},makeArray:function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e},ajax:function(e){e=e||{},e.type=(e.type||"GET").toUpperCase(),e.dataType=e.dataType||"json";var t=this.formatParams(e.data),r=null;r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),r.onreadystatechange=function(){if(4===r.readyState){var t=r.status;t>=200&&t<300?e.success&&e.success(JSON.parse(r.responseText),r.responseXML):e.error&&e.error(t)}},"GET"===e.type?(r.open("GET",e.url+"?"+t,!0),r.send(null)):"POST"===e.type&&(r.open("POST",e.url,!0),r.setRequestHeader("Content-Type","text/plain"),t+=("&v="+Math.random()).replace(".",""),r.send(JSON.stringify(e.data)))},ajax2:function(e){e=e||{},e.type=(e.type||"GET").toUpperCase(),e.dataType=e.dataType||"json";var t=this.formatParams(e.data),r=null;r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),r.onreadystatechange=function(){if(4===r.readyState){var t=r.status;t>=200&&t<300?e.success&&e.success(JSON.parse(r.responseText),r.responseXML):e.error&&e.error(t)}},"GET"===e.type?(r.open("GET",e.url+"?"+t,!0),r.send(null)):"POST"===e.type&&(r.open("POST",e.url,!0),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t+=("&v="+Math.random()).replace(".",""),r.send(JSON.stringify(e.data)))},ajax3:function(e){e=e||{},e.type=(e.type||"GET").toUpperCase(),e.dataType=e.dataType||"json";var t=this.formatParams(e.data),r=null;r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),r.onreadystatechange=function(){if(4===r.readyState){var t=r.status;t>=200&&t<300?e.success&&e.success(JSON.parse(r.responseText),r.responseXML):e.error&&e.error(t)}},"GET"===e.type?(r.open("GET",e.url+"?"+t,!0),r.send(null)):"POST"===e.type&&(r.open("POST",e.url,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t+=("&v="+Math.random()).replace(".",""),r.send(t))},toQueryParams:function(){var e=this.replace(/^\s+/,"").replace(/\s+$/,"").match(/([^?#]*)(#.*)?$/);if(!e)return{};var t=e[1],r=t.split("&"),n={};return r.forEach(function(e){var t="";if(t=e.split("=",1)[0]){var r=decodeURIComponent(t),i=e.substring(r.length+1);void 0!==i&&(i=decodeURIComponent(i)),r in n?(n[r].constructor!==Array&&(n[r]=[n[r]]),n[r].push(i)):n[r]=i}}),n},formatParams:function(e){var t=[];for(var r in e)t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")},deepMerge:function(e,t){var r;for(r in t)e[r]=e[r]&&"[object Object]"===e[r].toString()?this.deepMerge(e[r],t[r]):e[r]=t[r];return e}};r.default=n},{}]},{},[4]);