/*! Copyright WeiBo, 1548225060392 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["vendor_js/page/show/init"]=t():e["vendor_js/page/show/init"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=173)}([function(module,exports,__webpack_require__){var STK=function(){var e,t={},n="theia",i=[],r=200;t[n]={IE:/msie/i.test(navigator.userAgent),E:function(e){return"string"==typeof e?document.getElementById(e):e},C:function(e){return e=e.toUpperCase(),"TEXT"==e?document.createTextNode(""):"BUFFER"==e?document.createDocumentFragment():document.createElement(e)},log:function(){for(var t,n,o=arguments,a=o.length,s=[].slice.apply(o,[0,a]),l="error";s[--a];)if(s[a]instanceof Error){t=s.splice(a,1)[0];break}if(t||(t=new Error,l="log"),n=[s,l,(new Date).getTime(),t.message,t.stack],e)try{e.apply(null,n)}catch(e){}else i.length>=r&&i.shift(),i.push(n)},_regLogFn:function(t){e=t},_clearLogList:function(){return i.splice(0,i.length)}};var o=t[n];return o.register=function(e,i,r){r&&"string"==typeof r||(r=n),t[r]||(t[r]={});for(var o=t[r],a=e.split("."),s=o,l=null;l=a.shift();)if(a.length)void 0===s[l]&&(s[l]={}),s=s[l];else if(void 0===s[l])try{if(r&&r!==n){if("core.util.listener"===e)return s[l]=t[n].core.util.listener,!0;if("core.util.connect"===e)return s[l]=t[n].core.util.connect,!0}return s[l]=i(o),!0}catch(e){setTimeout(function(){},0)}return!1},o.unRegister=function(e,i){i&&"string"==typeof i||(i=n);for(var r=t[i],o=e.split("."),a=r,s=null;s=o.shift();)if(o.length){if(void 0===a[s])return!1;a=a[s]}else if(void 0!==a[s])return delete a[s],!0;return!1},o.regShort=function(e,t){if(void 0!==o[e])throw"["+e+"] : short : has been register";o[e]=t},o.shortRegister=function(e,i,r){r&&"string"==typeof r||(r=n);var o=t[r],a=e.split(".");if(!i)return!1;if(o[i])return!1;for(var s=o,l=null;l=a.shift();)if(a.length){if(void 0===s[l])return!1;s=s[l]}else if(void 0!==s[l])return!o[i]&&(o[i]=s[l],!0);return!1},o.getPKG=function(e){return e&&"string"==typeof e||(e=n),t[e]},o}();STK.register("core.ani.algorithm",function(e){var t={linear:function(e,t,n,i,r){return n*e/i+t},easeincubic:function(e,t,n,i,r){return n*(e/=i)*e*e+t},easeoutcubic:function(e,t,n,i,r){return(e/=i/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},easeinoutcubic:function(e,t,n,i,r){return void 0==r&&(r=1.70158),n*(e/=i)*e*((r+1)*e-r)+t},easeinback:function(e,t,n,i,r){return void 0==r&&(r=1.70158),n*(e/=i)*e*((r+1)*e-r)+t},easeoutback:function(e,t,n,i,r){return void 0==r&&(r=1.70158),n*((e=e/i-1)*e*((r+1)*e+r)+1)+t},easeinoutback:function(e,t,n,i,r){return void 0==r&&(r=1.70158),(e/=i/2)<1?n/2*e*e*((1+(r*=1.525))*e-r)+t:n/2*((e-=2)*e*((1+(r*=1.525))*e+r)+2)+t}};return{addAlgorithm:function(e,n){if(t[e])throw"[core.ani.tweenValue] this algorithm :"+e+"already exist";t[e]=n},compute:function(e,n,i,r,o,a,s){if("function"!=typeof t[e])throw"[core.ani.tweenValue] this algorithm :"+e+"do not exist";return t[e](r,n,i,o,a,s)}}}),STK.register("core.func.empty",function(){return function(){}}),STK.register("core.obj.parseParam",function(e){return function(e,t,n){var i,r={};t=t||{};for(i in e)r[i]=e[i],null!=t[i]&&(n?e.hasOwnProperty(i)&&(r[i]=t[i]):r[i]=t[i]);return r}}),STK.register("core.ani.tweenArche",function(e){return function(t,n){var i,r,o,a,s,l,c,u;r={},i=e.core.obj.parseParam({animationType:"linear",distance:1,duration:500,callback:e.core.func.empty,algorithmParams:{},extra:5,delay:25},n);var d=function(){o=+new Date-a,o<i.duration?(s=e.core.ani.algorithm.compute(i.animationType,0,i.distance,o,i.duration,i.extra,i.algorithmParams),t(s),l=setTimeout(d,i.delay)):(u="stop",i.callback())};return u="stop",r.getStatus=function(){return u},r.play=function(){return a=+new Date,s=null,d(),u="play",r},r.stop=function(){return clearTimeout(l),u="stop",r},r.resume=function(){return c&&(a+=+new Date-c,d()),r},r.pause=function(){return clearTimeout(l),c=+new Date,u="pause",r},r.destroy=function(){clearTimeout(l),c=0,u="stop"},r}}),STK.register("core.dom.getStyle",function(e){function t(){return"y"in t?t.y:t.y="filters"in e.C("div")}return function(e,n){if(!t()){"float"==n&&(n="cssFloat");try{var i=document.defaultView.getComputedStyle(e,"")}catch(e){}return e.style[n]||i?i[n]:null}switch(n){case"opacity":var r=100;try{r=e.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(t){try{r=e.filters("alpha").opacity}catch(e){}}return r/100;case"float":n="styleFloat";default:var o=e.currentStyle?e.currentStyle[n]:null;return e.style[n]||o}}}),STK.register("core.util.browser",function(e){var t,n,i,r,o,a=navigator.userAgent.toLowerCase(),s=window.external||"",l=function(e){var t=0;return parseFloat(e.replace(/\./g,function(){return 1==t++?"":"."}))};try{/windows|win32/i.test(a)?o="windows":/macintosh/i.test(a)?o="macintosh":/rhino/i.test(a)&&(o="rhino"),(n=a.match(/applewebkit\/([^\s]*)/))&&n[1]?(t="webkit",r=l(n[1])):(n=a.match(/presto\/([\d.]*)/))&&n[1]?(t="presto",r=l(n[1])):(n=a.match(/msie\s([^;]*)/))?(t="trident",r=1,(n=a.match(/trident\/([\d.]*)/))&&n[1]&&(r=l(n[1]))):/gecko/.test(a)&&(t="gecko",r=1,(n=a.match(/rv:([\d.]*)/))&&n[1]&&(r=l(n[1]))),/world/.test(a)?i="world":/360se/.test(a)?i="360":/maxthon/.test(a)||"number"==typeof s.max_version?i="maxthon":/tencenttraveler\s([\d.]*)/.test(a)?i="tt":/se\s([\d.]*)/.test(a)&&(i="sogou")}catch(e){}return{OS:o,CORE:t,Version:r,EXTRA:i||!1,IE:/msie/.test(a),OPERA:/opera/.test(a),MOZ:/gecko/.test(a)&&!/(compatible|webkit)/.test(a),IE5:/msie 5 /.test(a),IE55:/msie 5.5/.test(a),IE6:/msie 6/.test(a),IE7:/msie 7/.test(a),IE8:/msie 8/.test(a),IE9:/msie 9/.test(a),IE10:/msie 10/.test(a),SAFARI:!/chrome\/([\d.]*)/.test(a)&&/\/([\da-f.]*) safari/.test(a),CHROME:/chrome\/([\d.]*)/.test(a),IPAD:/\(ipad/i.test(a),IPHONE:/\(iphone/i.test(a),ITOUCH:/\(itouch/i.test(a),MOBILE:/mobile/i.test(a)}}),STK.register("core.dom.cssText",function(e){var t=function(e){for(var t=0,n=[],i="close",r=!1,o=null,a=function(i){n.push({type:"info",content:e.slice(0,t)}),n.push({type:"sign",content:e.slice(t,t+1)}),e=e.slice(t+1),t=0};e;){var s=e.charAt(t);switch(s){case":":if(!r&&"close"===i){n.push({type:"attr",content:e.slice(0,t)}),n.push({type:"sign",content:e.slice(t,t+1)}),e=e.slice(t+1),t=0,i="open";break}t+=1;break;case";":if(!r){"open"===i&&(n.push({type:"info",content:e.slice(0,t)}),n.push({type:"sign",content:e.slice(t,t+1)})),e=e.slice(t+1),t=0,i="close";break}t+=1;break;case'"':case"'":r?s===o&&(r=!r,o=null):(r=!r,o=s),t+=1;break;case" ":case"!":case",":case"(":case")":a(s);break;case"":n.push({type:"info",content:e.slice(0,t)}),e="",t=0;break;default:t+=1}}return n},n=function(e){for(var t,n={},i=0,r=e.length;i<r;i+=1)if("attr"===e[i].type)t=e[i].content,n[t]="";else{if("sign"===e[i].type&&";"===e[i].content){t=null;continue}if("sign"===e[i].type&&":"===e[i].content)continue;null!==t&&(n[t]+=e[i].content)}return n},i={webkit:"-webkit-",presto:"-o-",trident:"-ms-",gecko:"-moz-"}[e.core.util.browser.CORE],r=["transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function"],o=function(e){for(var t=0,n=r.length;t<n;t+=1)if(e===r[t])return!0;return!1};return function(e){var r=n(t(e||"")),a=function(e,t){return e=e.toLowerCase(),r[e]=t,o(e)&&(r[i+e]=t),s},s={push:a,remove:function(e){return e=e.toLowerCase(),r[e]&&delete r[e],o(e)&&r[i+e]&&delete r[i+e],s},merge:function(e){var i=n(t(e||""));for(var r in i)a(r,i[r])},getCss:function(){var e=[];for(var t in r)e.push(t+":"+r[t]);return e.join(";")}};return s}}),STK.register("core.func.getType",function(e){return function(e){var t;return("object"==(t=typeof e)?null==e&&"null"||Object.prototype.toString.call(e).slice(8,-1):t).toLowerCase()}}),STK.register("core.arr.isArray",function(e){return function(e){return"[object Array]"===Object.prototype.toString.call(e)}}),STK.register("core.arr.foreach",function(e){var t=function(e,t){for(var n=[],i=0,r=e.length;i<r;i+=1){var o=t(e[i],i);if(!1===o)break;null!==o&&(n[i]=o)}return n},n=function(e,t){var n={};for(var i in e){var r=t(e[i],i);if(!1===r)break;null!==r&&(n[i]=r)}return n};return function(i,r){return e.core.arr.isArray(i)||i.length&&void 0!==i[0]?t(i,r):"object"==typeof i?n(i,r):null}}),STK.register("core.arr.indexOf",function(e){return function(e,t){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}}),STK.register("core.arr.inArray",function(e){return function(t,n){return e.core.arr.indexOf(t,n)>-1}}),STK.register("core.dom.isNode",function(e){return function(e){return void 0!=e&&Boolean(e.nodeName)&&Boolean(e.nodeType)}}),STK.register("core.json.merge",function(e){var t=function(t){return void 0===t||(null===t||(!!e.core.arr.inArray(typeof t,["number","string","function","boolean"])||!!e.core.dom.isNode(t)))},n=function(i,r,o){if(t(o))i[r]=o;else{if(e.core.arr.isArray(o)){e.core.arr.isArray(i[r])||(i[r]=[]);for(var a=0,s=o.length;a<s;a+=1)n(i[r],a,o[a]);return}if("object"==typeof o){(t(i[r])||e.core.arr.isArray(i[r]))&&(i[r]={});for(var l in o)n(i[r],l,o[l]);return}}},i=function(e,t,i){var r={};if(i){for(var o in e)n(r,o,e[o]);for(var o in t)n(r,o,t[o])}else{for(var o in e)r[o]=e[o];for(var o in t)r[o]=t[o]}return r};return function(t,n,r){var o=e.core.obj.parseParam({isDeep:!1},r);return i(t,n,o.isDeep)}}),STK.register("core.util.color",function(e){var t=/^#([a-fA-F0-9]{3,8})$/,n=/^rgb[a]?\s*\((\s*([0-9]{1,3})\s*,){2,3}(\s*([0-9]{1,3})\s*)\)$/,i=/([0-9]{1,3})/gi,r=/([a-fA-F0-9]{2})/gi,o=e.core.arr.foreach,a=function(e){var a=[],s=[];return t.test(e)?(s=e.match(t),s[1].length<=4?a=o(s[1].split(""),function(e,t){return parseInt(e+e,16)}):s[1].length<=8&&(a=o(s[1].match(r),function(e,t){return parseInt(e,16)})),a):!!n.test(e)&&(s=e.match(i),a=o(s,function(e,t){return parseInt(e,10)}))};return function(e,t){var n=a(e);if(!n)return!1;var i={};return i.getR=function(){return n[0]},i.getG=function(){return n[1]},i.getB=function(){return n[2]},i.getA=function(){return n[3]},i}}),STK.register("core.ani.tween",function(e){var t=e.core.ani.tweenArche,n=e.core.arr.foreach,i=e.core.dom.getStyle,r=e.core.func.getType,o=e.core.obj.parseParam,a=e.core.json.merge,s=e.core.util.color,l=function(e){var t=/(-?\d\.?\d*)([a-z%]*)/i.exec(e),n=[0,"px"];return t&&(t[1]&&(n[0]=t[1]-0),t[2]&&(n[1]=t[2])),n},c=function(e){for(var t=0,n=e.length;t<n;t+=1){var i=e.charCodeAt(t);if(i>64&&i<90){var r=e.substr(0,t),o=e.substr(t,1),a=e.slice(t+1);return r+"-"+o.toLowerCase()+a}}return e},u=function(e,t,n){var o=i(e,n);"undefined"!==r(o)&&"auto"!==o||("height"===n&&(o=e.offsetHeight),"width"===n&&(o=e.offsetWidth));var a={start:o,end:t,unit:"",key:n,defaultColor:!1};if("number"===r(t)){var c=[0,"px"];"number"===r(o)?c[0]=o:c=l(o),a.start=c[0],a.unit=c[1]}if("string"===r(t)){var u,d;u=s(t),u&&(d=s(o),d||(d=s("#fff")),a.start=d,a.end=u,a.defaultColor=!0)}return e=null,a},d=null,f=function(){return null!==d?d:"y"in f?f.y:d=f.y="filters"in e.C("div")},p={opacity:function(e,t,n,i){var r=e*(n-t)+t,o={};return f()?o.filter="alpha(opacity="+100*r+")":o.opacity=Math.max(Math.min(1,r),0),o.zoom=1,o},defaultColor:function(e,t,n,i,r){var o=Math.max(0,Math.min(255,Math.ceil(e*(n.getR()-t.getR())+t.getR()))),a=Math.max(0,Math.min(255,Math.ceil(e*(n.getG()-t.getG())+t.getG()))),s=Math.max(0,Math.min(255,Math.ceil(e*(n.getB()-t.getB())+t.getB()))),l={};return l[c(r)]="#"+(o<16?"0":"")+o.toString(16)+(a<16?"0":"")+a.toString(16)+(s<16?"0":"")+s.toString(16),l},default:function(e,t,n,i,r){var o=e*(n-t)+t,a={};return a[c(r)]=o+i,a}};return function(i,r){var s,l,c,d,f,m,h,v,g,y;r=r||{},l=o({animationType:"linear",duration:500,algorithmParams:{},extra:5,delay:25},r),l.distance=1;var b,_;l.callback=function(){return _=r.end||e.core.func.empty,b=r.tween||e.core.func.empty,function(){d(1),h(),_(i)}}(),c=a(p,r.propertys||{}),m=null,f={},g=[],d=function(e){n(f,function(t,n){var i;i=c[n]?c[n]:t.defaultColor?c.defaultColor:c.default;var r=i(e,t.start,t.end,t.unit,t.key);for(var o in r)m.push(o,r[o]);try{b(e)}catch(e){}});i.style.cssText=m.getCss()},h=function(){for(var e;e=g.shift();)try{if(e.fn(),"play"===e.type)break;if("destroy"===e.type)break}catch(e){}},y=t(d,l);var w=function(e){"play"!==y.getStatus()?i=e:g.push({fn:w,type:"setNode"})},x=function(t){"play"!==y.getStatus()?(f=n(t,function(e,t){return u(i,e,t)}),m=e.core.dom.cssText(i.style.cssText+(r.staticStyle||"")),y.play()):g.push({fn:function(){x(t)},type:"play"})},k=function(){"play"!==y.getStatus()?(y.destroy(),i=null,s=null,l=null,c=null,d=null,f=null,m=null,h=null,v=null,g=null):g.push({fn:k,type:"destroy"})};return s={},s.play=function(e){return x(e),s},s.stop=function(){return y.stop(),s},s.pause=function(){return y.pause(),s},s.resume=function(){return y.resume(),s},s.finish=function(e){return x(e),k(),s},s.setNode=function(e){return w(e),s},s.destroy=function(){return k(),s},s}}),STK.register("core.dom.hasClassName",function(e){return function(e,t){return new RegExp("(^|\\s)"+t+"($|\\s)").test(e.className)}}),STK.register("core.str.trim",function(e){return function(e){if("string"!=typeof e)throw"trim need a string as parameter";for(var t=e.length,n=0,i=/(\u3000|\s|\t|\u00A0)/;n<t&&i.test(e.charAt(n));)n+=1;for(;t>n&&i.test(e.charAt(t-1));)t-=1;return e.slice(n,t)}}),STK.register("core.dom.addClassName",function(e){return function(t,n){1===t.nodeType&&(e.core.dom.hasClassName(t,n)||(t.className=e.core.str.trim(t.className)+" "+n))}}),STK.register("core.dom.removeClassName",function(e){return function(t,n){1===t.nodeType&&e.core.dom.hasClassName(t,n)&&(t.className=t.className.replace(new RegExp("(^|\\s)"+n+"($|\\s)")," "))}}),STK.register("core.evt.addEvent",function(e){return function(t,n,i){return null!=(t=e.E(t))&&("function"==typeof i&&(t.addEventListener?t.addEventListener(n,i,!1):t.attachEvent?t.attachEvent("on"+n,i):t["on"+n]=i,!0))}}),STK.register("core.evt.removeEvent",function(e){return function(t,n,i){return null!=(t=e.E(t))&&("function"==typeof i&&(t.removeEventListener?t.removeEventListener(n,i,!1):t.detachEvent&&t.detachEvent("on"+n,i),t["on"+n]=null,!0))}}),STK.register("core.evt.eventName",function(e){var t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};return function(n){if("mousewheel"===n)return"onmousewheel"in document?"mousewheel":"DOMMouseScroll";if("transitionend"===n){var i=e.C("div");for(var r in t)if(r in i.style)return t[r]}return n}}),STK.register("core.ani.transition",function(e){var t=function(){var e=document.createElement("style"),t="STK_transition_"+ +new Date,n=null,i={};e.setAttribute("type","text/css"),e.setAttribute("id",t),document.head.appendChild(e);for(var r=0,o=document.styleSheets.length;r<o;r+=1)if(document.styleSheets[r].ownerNode.id===t){n=document.styleSheets[r];break}return i.getCssSheet=function(){return n},i.addRule=function(e,t){var i=n.rules||n.cssRules;n.addRule?n.addRule(e,t,i.length):n.insertRule&&n.insertRule(e+" {"+t+"}",i.length)},i.destory=function(){document.head.removeChild(e),e=null,n=null,t=null},i},n=e.core.evt.eventName("transitionend");return function(i,r){var o=e.core.obj.parseParam({target:"",duration:500,timingFn:[0,0,1,1],callback:function(){}},r),a="all "+o.duration+"ms cubic-bezier("+o.timingFn.join(",")+")",s=e.core.dom.cssText(i.style.cssText),l="test",c=t();s.merge(o.target),s.push("transition",a),c.addRule("."+l,s.getCss()),e.core.evt.addEvent(i,n,function(){e.core.evt.removeEvent(i,n,arguments.callee),i.style.cssText=s.remove("transition").getCss(),e.core.dom.removeClassName(i,l),c.destory(),a=null,s=null,l=null,c=null,o.callback(i),o=null}),e.core.dom.addClassName(i,l),i.style.cssText=""}}),STK.register("core.arr.findout",function(e){return function(t,n){if(!e.core.arr.isArray(t))throw"the findout function needs an array as first parameter";for(var i=[],r=0,o=t.length;r<o;r+=1)t[r]===n&&i.push(r);return i}}),STK.register("core.arr.clear",function(e){return function(t){if(!e.core.arr.isArray(t))throw"the clear function needs an array as first parameter";for(var n=[],i=0,r=t.length;i<r;i+=1)e.core.arr.findout([void 0,null,""],t[i]).length||n.push(t[i]);return n}}),STK.register("core.arr.copy",function(e){return function(t){if(!e.core.arr.isArray(t))throw"the copy function needs an array as first parameter";return t.slice(0)}}),STK.register("core.arr.hasby",function(e){return function(t,n){if(!e.core.arr.isArray(t))throw"the hasBy function needs an array as first parameter";for(var i=[],r=0,o=t.length;r<o;r+=1)n(t[r],r)&&i.push(r);return i}}),STK.register("core.arr.unique",function(e){return function(t){if(!e.core.arr.isArray(t))throw"the unique function needs an array as first parameter";for(var n=[],i=0,r=t.length;i<r;i+=1)-1===e.core.arr.indexOf(t[i],n)&&n.push(t[i]);return n}}),STK.register("core.dom.addHTML",function(e){return function(e,t){if(e.insertAdjacentHTML)e.insertAdjacentHTML("BeforeEnd",t);else{var n=e.ownerDocument.createRange();n.setStartBefore(e);var i=n.createContextualFragment(t);e.appendChild(i)}}}),STK.register("core.dom.sizzle",function(e){function t(e,t,n,i,r,o){for(var a=0,s=i.length;a<s;a++){var c=i[a];if(c){c=c[e];for(var u=!1;c;){if(c.sizcache===n){u=i[c.sizset];break}if(1===c.nodeType)if(o||(c.sizcache=n,c.sizset=a),"string"!=typeof t){if(c===t){u=!0;break}}else if(l.filter(t,[c]).length>0){u=c;break}c=c[e]}i[a]=u}}}function n(e,t,n,i,r,o){for(var a=0,s=i.length;a<s;a++){var l=i[a];if(l){l=l[e];for(var c=!1;l;){if(l.sizcache===n){c=i[l.sizset];break}if(1!==l.nodeType||o||(l.sizcache=n,l.sizset=a),l.nodeName.toLowerCase()===t){c=l;break}l=l[e]}i[a]=c}}}var i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r=0,o=Object.prototype.toString,a=!1,s=!0;[0,0].sort(function(){return s=!1,0});var l=function(e,t,n,r){n=n||[],t=t||document;var a=t;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return n;var s,d,f,m,v,g,y,b,_=[],w=!0,x=l.isXML(t),k=e;do{if(i.exec(""),(s=i.exec(k))&&(k=s[3],_.push(s[1]),s[2])){m=s[3];break}}while(s);if(_.length>1&&u.exec(e))if(2===_.length&&c.relative[_[0]])d=h(_[0]+_[1],t);else for(d=c.relative[_[0]]?[t]:l(_.shift(),t);_.length;)e=_.shift(),c.relative[e]&&(e+=_.shift()),d=h(e,d);else if(!r&&_.length>1&&9===t.nodeType&&!x&&c.match.ID.test(_[0])&&!c.match.ID.test(_[_.length-1])&&(v=l.find(_.shift(),t,x),t=v.expr?l.filter(v.expr,v.set)[0]:v.set[0]),t)for(v=r?{expr:_.pop(),set:p(r)}:l.find(_.pop(),1!==_.length||"~"!==_[0]&&"+"!==_[0]||!t.parentNode?t:t.parentNode,x),d=v.expr?l.filter(v.expr,v.set):v.set,_.length>0?f=p(d):w=!1;_.length;)g=_.pop(),y=g,c.relative[g]?y=_.pop():g="",null==y&&(y=t),c.relative[g](f,y,x);else f=_=[];if(f||(f=d),f||l.error(g||e),"[object Array]"===o.call(f))if(w)if(t&&1===t.nodeType)for(b=0;null!=f[b];b++)f[b]&&(!0===f[b]||1===f[b].nodeType&&l.contains(t,f[b]))&&n.push(d[b]);else for(b=0;null!=f[b];b++)f[b]&&1===f[b].nodeType&&n.push(d[b]);else n.push.apply(n,f);else p(f,n);return m&&(l(m,a,n,r),l.uniqueSort(n)),n};l.uniqueSort=function(e){if(m&&(a=s,e.sort(m),a))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},l.matches=function(e,t){return l(e,null,null,t)},l.find=function(e,t,n){var i;if(!e)return[];for(var r=0,o=c.order.length;r<o;r++){var a,s=c.order[r];if(a=c.leftMatch[s].exec(e)){var l=a[1];if(a.splice(1,1),"\\"!==l.substr(l.length-1)&&(a[1]=(a[1]||"").replace(/\\/g,""),null!=(i=c.find[s](a,t,n)))){e=e.replace(c.match[s],"");break}}}return i||(i=t.getElementsByTagName("*")),{set:i,expr:e}},l.filter=function(e,t,n,i){for(var r,o,a=e,s=[],u=t,d=t&&t[0]&&l.isXML(t[0]);e&&t.length;){for(var f in c.filter)if(null!=(r=c.leftMatch[f].exec(e))&&r[2]){var p,m,h=c.filter[f],v=r[1];if(o=!1,r.splice(1,1),"\\"===v.substr(v.length-1))continue;if(u===s&&(s=[]),c.preFilter[f])if(r=c.preFilter[f](r,u,n,s,i,d)){if(!0===r)continue}else o=p=!0;if(r)for(var g=0;null!=(m=u[g]);g++)if(m){p=h(m,r,g,u);var y=i^!!p;n&&null!=p?y?o=!0:u[g]=!1:y&&(s.push(m),o=!0)}if(void 0!==p){if(n||(u=s),e=e.replace(c.match[f],""),!o)return[];break}}if(e===a){if(null!=o)break;l.error(e)}a=e}return u},l.error=function(e){throw"Syntax error, unrecognized expression: "+e};var c={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{class:"className",for:"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(e,t){var n="string"==typeof t,i=n&&!/\W/.test(t),r=n&&!i;i&&(t=t.toLowerCase());for(var o,a=0,s=e.length;a<s;a++)if(o=e[a]){for(;(o=o.previousSibling)&&1!==o.nodeType;);e[a]=r||o&&o.nodeName.toLowerCase()===t?o||!1:o===t}r&&l.filter(t,e,!0)},">":function(e,t){var n,i="string"==typeof t,r=0,o=e.length;if(i&&!/\W/.test(t)){for(t=t.toLowerCase();r<o;r++)if(n=e[r]){var a=n.parentNode;e[r]=a.nodeName.toLowerCase()===t&&a}}else{for(;r<o;r++)(n=e[r])&&(e[r]=i?n.parentNode:n.parentNode===t);i&&l.filter(t,e,!0)}},"":function(e,i,o){var a,s=r++,l=t;"string"!=typeof i||/\W/.test(i)||(i=i.toLowerCase(),a=i,l=n),l("parentNode",i,s,e,a,o)},"~":function(e,i,o){var a,s=r++,l=t;"string"!=typeof i||/\W/.test(i)||(i=i.toLowerCase(),a=i,l=n),l("previousSibling",i,s,e,a,o)}},find:{ID:function(e,t,n){if(void 0!==t.getElementById&&!n){var i=t.getElementById(e[1]);return i?[i]:[]}},NAME:function(e,t){if(void 0!==t.getElementsByName){for(var n=[],i=t.getElementsByName(e[1]),r=0,o=i.length;r<o;r++)i[r].getAttribute("name")===e[1]&&n.push(i[r]);return 0===n.length?null:n}},TAG:function(e,t){return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,i,r,o){if(e=" "+e[1].replace(/\\/g,"")+" ",o)return e;for(var a,s=0;null!=(a=t[s]);s++)a&&(r^(a.className&&(" "+a.className+" ").replace(/[\t\n]/g," ").indexOf(e)>=0)?n||i.push(a):n&&(t[s]=!1));return!1},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(e,t){return e[1].toLowerCase()},CHILD:function(e){if("nth"===e[1]){var t=/(-?)(\d*)n((?:\+|-)?\d*)/.exec("even"===e[2]&&"2n"||"odd"===e[2]&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}return e[0]=r++,e},ATTR:function(e,t,n,i,r,o){var a=e[1].replace(/\\/g,"");return!o&&c.attrMap[a]&&(e[1]=c.attrMap[a]),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,n,r,o){if("not"===e[1]){if(!((i.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var a=l.filter(e[3],t,n,!0^o);return n||r.push.apply(r,a),!1}e[3]=l(e[3],null,null,t)}else if(c.match.POS.test(e[0])||c.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return!1===e.disabled&&"hidden"!==e.type},disabled:function(e){return!0===e.disabled},checked:function(e){return!0===e.checked},selected:function(e){return e.parentNode.selectedIndex,!0===e.selected},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!l(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||"button"===e.nodeName.toLowerCase()},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,n,i){return t===i.length-1},even:function(e,t){return t%2==0},odd:function(e,t){return t%2==1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,i){var r=t[1],o=c.filters[r];if(o)return o(e,n,t,i);if("contains"===r)return(e.textContent||e.innerText||l.getText([e])||"").indexOf(t[3])>=0;if("not"===r){for(var a=t[3],s=0,u=a.length;s<u;s++)if(a[s]===e)return!1;return!0}l.error("Syntax error, unrecognized expression: "+r)},CHILD:function(e,t){var n=t[1],i=e;switch(n){case"only":case"first":for(;i=i.previousSibling;)if(1===i.nodeType)return!1;if("first"===n)return!0;i=e;case"last":for(;i=i.nextSibling;)if(1===i.nodeType)return!1;return!0;case"nth":var r=t[2],o=t[3];if(1===r&&0===o)return!0;var a=t[0],s=e.parentNode;if(s&&(s.sizcache!==a||!e.nodeIndex)){var l=0;for(i=s.firstChild;i;i=i.nextSibling)1===i.nodeType&&(i.nodeIndex=++l);s.sizcache=a}var c=e.nodeIndex-o;return 0===r?0===c:c%r==0&&c/r>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],i=c.attrHandle[n]?c.attrHandle[n](e):null!=e[n]?e[n]:e.getAttribute(n),r=i+"",o=t[2],a=t[4];return null==i?"!="===o:"="===o?r===a:"*="===o?r.indexOf(a)>=0:"~="===o?(" "+r+" ").indexOf(a)>=0:a?"!="===o?r!==a:"^="===o?0===r.indexOf(a):"$="===o?r.substr(r.length-a.length)===a:"|="===o&&(r===a||r.substr(0,a.length+1)===a+"-"):r&&!1!==i},POS:function(e,t,n,i){var r=t[2],o=c.setFilters[r];if(o)return o(e,n,t,i)}}};l.selectors=c;var u=c.match.POS,d=function(e,t){return"\\"+(t-0+1)};for(var f in c.match)c.match[f]=new RegExp(c.match[f].source+/(?![^\[]*\])(?![^\(]*\))/.source),c.leftMatch[f]=new RegExp(/(^(?:.|\r|\n)*?)/.source+c.match[f].source.replace(/\\(\d+)/g,d));var p=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(e){p=function(e,t){var n=t||[],i=0;if("[object Array]"===o.call(e))Array.prototype.push.apply(n,e);else if("number"==typeof e.length)for(var r=e.length;i<r;i++)n.push(e[i]);else for(;e[i];i++)n.push(e[i]);return n}}var m;document.documentElement.compareDocumentPosition?m=function(e,t){if(!e.compareDocumentPosition||!t.compareDocumentPosition)return e==t&&(a=!0),e.compareDocumentPosition?-1:1;var n=4&e.compareDocumentPosition(t)?-1:e===t?0:1;return 0===n&&(a=!0),n}:"sourceIndex"in document.documentElement?m=function(e,t){if(!e.sourceIndex||!t.sourceIndex)return e==t&&(a=!0),e.sourceIndex?-1:1;var n=e.sourceIndex-t.sourceIndex;return 0===n&&(a=!0),n}:document.createRange&&(m=function(e,t){if(!e.ownerDocument||!t.ownerDocument)return e==t&&(a=!0),e.ownerDocument?-1:1;var n=e.ownerDocument.createRange(),i=t.ownerDocument.createRange();n.setStart(e,0),n.setEnd(e,0),i.setStart(t,0),i.setEnd(t,0);var r=n.compareBoundaryPoints(Range.START_TO_END,i);return 0===r&&(a=!0),r}),l.getText=function(e){for(var t,n="",i=0;e[i];i++)t=e[i],3===t.nodeType||4===t.nodeType?n+=t.nodeValue:8!==t.nodeType&&(n+=l.getText(t.childNodes));return n},function(){var e=document.createElement("div"),t="script"+(new Date).getTime();e.innerHTML="<a name='"+t+"'/>";var n=document.documentElement;n.insertBefore(e,n.firstChild),document.getElementById(t)&&(c.find.ID=function(e,t,n){if(void 0!==t.getElementById&&!n){var i=t.getElementById(e[1]);return i?i.id===e[1]||void 0!==i.getAttributeNode&&i.getAttributeNode("id").nodeValue===e[1]?[i]:void 0:[]}},c.filter.ID=function(e,t){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&n&&n.nodeValue===t}),n.removeChild(e),n=e=null}(),function(){var e=document.createElement("div");e.appendChild(document.createComment("")),e.getElementsByTagName("*").length>0&&(c.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var i=[],r=0;n[r];r++)1===n[r].nodeType&&i.push(n[r]);n=i}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&void 0!==e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(c.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),document.querySelectorAll&&function(){var e=l,t=document.createElement("div");if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){l=function(t,n,i,r){if(n=n||document,!r&&9===n.nodeType&&!l.isXML(n))try{return p(n.querySelectorAll(t),i)}catch(e){}return e(t,n,i,r)};for(var n in e)l[n]=e[n];t=null}}(),function(){var e=document.createElement("div");if(e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length){if(e.lastChild.className="e",1===e.getElementsByClassName("e").length)return;c.order.splice(1,0,"CLASS"),c.find.CLASS=function(e,t,n){if(void 0!==t.getElementsByClassName&&!n)return t.getElementsByClassName(e[1])},e=null}}(),l.contains=document.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:function(e,t){return e!==t&&(!e.contains||e.contains(t))},l.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return!!t&&"HTML"!==t.nodeName};var h=function(e,t){for(var n,i=[],r="",o=t.nodeType?[t]:t;n=c.match.PSEUDO.exec(e);)r+=n[0],e=e.replace(c.match.PSEUDO,"");e=c.relative[e]?e+"*":e;for(var a=0,s=o.length;a<s;a++)l(e,o[a],i);return l.filter(r,i)};return l}),STK.register("core.dom.builder",function(e){return function(t,n){var i="string"==typeof t,r=t;i&&(r=e.C("div"),r.innerHTML=t);var o,a;if(o={},n)for(c in selectorList)o[c]=e.core.dom.sizzle(n[c].toString(),r);else{a=e.core.dom.sizzle("[node-type]",r);for(var s=0,l=a.length;s<l;s+=1){var c=a[s].getAttribute("node-type");o[c]||(o[c]=[]),o[c].push(a[s])}}var u=t;if(i)for(u=e.C("buffer");r.childNodes[0];)u.appendChild(r.childNodes[0]);return{box:u,list:o}}}),STK.register("core.dom.setStyle",function(e){function t(){return"y"in t?t.y:t.y="filters"in e.C("div")}return function(e,n,i){if(t())switch(n){case"opacity":e.style.filter="alpha(opacity="+100*i+")",e.currentStyle&&e.currentStyle.hasLayout||(e.style.zoom=1);break;case"float":n="styleFloat";default:e.style[n]=i}else"float"==n&&(n="cssFloat"),e.style[n]=i}}),STK.register("core.dom.insertAfter",function(e){return function(e,t){var n=t.parentNode;n.lastChild==t?n.appendChild(e):n.insertBefore(e,t.nextSibling)}}),STK.register("core.dom.insertBefore",function(e){return function(e,t){t.parentNode.insertBefore(e,t)}}),STK.register("core.dom.trimNode",function(e){return function(e){for(var t=e.childNodes,n=t.length-1;n>=0;n-=1)t[n]&&(3==t[n].nodeType||8==t[n].nodeType)&&e.removeChild(t[n])}}),STK.register("core.dom.removeNode",function(e){return function(t){t=e.E(t)||t;try{t.parentNode.removeChild(t)}catch(e){}}}),STK.register("core.evt.fireEvent",function(e){return function(t,n){var i=e.E(t);if(i.addEventListener){var r=document.createEvent("HTMLEvents");r.initEvent(n,!0,!0),i.dispatchEvent(r)}else i.fireEvent("on"+n)}}),STK.register("core.util.scrollPos",function(e){return function(e){e=e||document;var t=e.documentElement,n=e.body;return{top:Math.max(window.pageYOffset||0,t.scrollTop,n.scrollTop),left:Math.max(window.pageXOffset||0,t.scrollLeft,n.scrollLeft)}}}),STK.register("core.dom.position",function(e){var t=function(t){var n,i,r,o,a,s;return n=t.getBoundingClientRect(),i=e.core.util.scrollPos(),r=t.ownerDocument.body,o=t.ownerDocument.documentElement,a=o.clientTop||r.clientTop||0,s=o.clientLeft||r.clientLeft||0,{l:parseInt(n.left+i.left-s,10)||0,t:parseInt(n.top+i.top-a,10)||0}},n=function(t,n){var i,r;if(i=[t.offsetLeft,t.offsetTop],(r=t.offsetParent)!==t&&r!==n)for(;r;)i[0]+=r.offsetLeft,i[1]+=r.offsetTop,r=r.offsetParent;for((-1!=e.core.util.browser.OPERA||-1!=e.core.util.browser.SAFARI&&"absolute"==t.style.position)&&(i[0]-=document.body.offsetLeft,i[1]-=document.body.offsetTop),r=t.parentNode?t.parentNode:null;r&&!/^body|html$/i.test(r.tagName)&&r!==n;)r.style.display.search(/^inline|table-row.*$/i)&&(i[0]-=r.scrollLeft,i[1]-=r.scrollTop),r=r.parentNode;return{l:parseInt(i[0],10),t:parseInt(i[1],10)}};return function(i,r){if(i==document.body)return!1;if(null==i.parentNode)return!1;if("none"==i.style.display)return!1;var o=e.core.obj.parseParam({parent:null},r);if(i.getBoundingClientRect){if(o.parent){var a=t(i),s=t(o.parent);return{l:a.l-s.l,t:a.t-s.t}}return t(i)}return n(i,o.parent||document.body)}}),STK.register("core.dom.setXY",function(e){return function(t,n){var i=e.core.dom.getStyle(t,"position");"static"==i&&(e.core.dom.setStyle(t,"position","relative"),i="relative");var r=e.core.dom.position(t);if(0!=r){var o={l:parseInt(e.core.dom.getStyle(t,"left"),10),t:parseInt(e.core.dom.getStyle(t,"top"),10)};isNaN(o.l)&&(o.l="relative"==i?0:t.offsetLeft),isNaN(o.t)&&(o.t="relative"==i?0:t.offsetTop),null!=n.l&&(t.style.left=n.l-r.l+o.l+"px"),null!=n.t&&(t.style.top=n.t-r.t+o.t+"px")}}}),STK.register("core.str.encodeHTML",function(e){return function(e){if("string"!=typeof e)throw"encodeHTML need a string as parameter";return e.replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\'/g,"&#39;").replace(/\u00A0/g,"&nbsp;").replace(/(\u0020|\u000B|\u2028|\u2029|\f)/g,"&#32;")}}),STK.register("core.str.decodeHTML",function(e){return function(e){if("string"!=typeof e)throw"decodeHTML need a string as parameter";return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#39;/g,"'").replace(/&nbsp;/g," ").replace(/&#32;/g," ").replace(/&amp;/g,"&")}}),STK.register("core.dom.cascadeNode",function(e){return function(t){var n={},i=t.style.display||"";i="none"===i?"":i;var r=[];return n.setStyle=function(r,o){return e.core.dom.setStyle(t,r,o),"display"===r&&(i="none"===o?"":o),n},n.insertAfter=function(i){return e.core.dom.insertAfter(i,t),n},n.insertBefore=function(i){return e.core.dom.insertBefore(i,t),n},n.addClassName=function(i){return e.core.dom.addClassName(t,i),n},n.removeClassName=function(i){return e.core.dom.removeClassName(t,i),n},n.trimNode=function(){return e.core.dom.trimNode(t),n},n.removeNode=function(){return e.core.dom.removeNode(t),n},n.on=function(i,o){for(var a=0,s=r.length;a<s;a+=1)if(r[a].fn===o&&r[a].type===i)return n;return r.push({fn:o,type:i}),e.core.evt.addEvent(t,i,o),n},n.unon=function(i,o){for(var a=0,s=r.length;a<s;a+=1)if(r[a].fn===o&&r[a].type===i){e.core.evt.removeEvent(t,o,i),r.splice(a,1);break}return n},n.fire=function(i){return e.core.evt.fireEvent(i,t),n},n.appendChild=function(e){return t.appendChild(e),n},n.removeChild=function(e){return t.removeChild(e),n},n.toggle=function(){return"none"===t.style.display?t.style.display=i:t.style.display="none",n},n.show=function(){return"none"===t.style.display&&(t.style.display="none"===i?"":i),n},n.hidd=function(){return"none"!==t.style.display&&(t.style.display="none"),n},n.hide=n.hidd,n.scrollTo=function(e,i){return"left"===e&&(t.scrollLeft=i),"top"===e&&(t.scrollTop=i),n},n.replaceChild=function(e,i){return t.replaceChild(e,i),n},n.position=function(n){return void 0!==n&&e.core.dom.setXY(t,n),e.core.dom.position(t)},n.setPosition=function(i){return void 0!==i&&e.core.dom.setXY(t,i),n},n.getPosition=function(n){return e.core.dom.position(t)},n.html=function(e){return void 0!==e&&(t.innerHTML=e),t.innerHTML},n.setHTML=function(e){return void 0!==e&&(t.innerHTML=e),n},n.getHTML=function(){return t.innerHTML},n.text=function(n){return void 0!==n&&(t.innerHTML=e.core.str.encodeHTML(n)),e.core.str.decodeHTML(t.innerHTML)},n.ttext=n.text,n.setText=function(i){return void 0!==i&&(t.innerHTML=e.core.str.encodeHTML(i)),n},n.getText=function(){return e.core.str.decodeHTML(t.innerHTML)},n.get=function(n){return"node"===n?t:e.core.dom.getStyle(t,n)},n.getStyle=function(n){return e.core.dom.getStyle(t,n)},n.getOriginNode=function(){return t},n.destroy=function(){for(var n=0,o=r;n<o;n+=1)e.core.evt.removeEvent(t,r[n].fn,r[n].type);i=null,r=null,t=null},n}}),STK.register("core.dom.contains",function(e){return function(e,t){if(e===t)return!1;if(e.compareDocumentPosition)return 16==(16&e.compareDocumentPosition(t));if(e.contains&&1===t.nodeType)return e.contains(t);for(;t=t.parentNode;)if(e===t)return!0;return!1}}),STK.register("core.dom.dir",function(e){var t={parent:"parentNode",next:"nextSibling",prev:"previousSibling"},n=function(n,i){i=e.core.obj.parseParam({dir:"parent",expr:void 0,endpoint:document,matchAll:!1},i);var r=t[i.dir],o=i.expr,a=i.endpoint,s=!!i.matchAll;if(!n)throw"core.dom.dir: el is undefined.";if(!r)throw"core.dom.dir: spec.dir is undefined.";for(var l=[],c=n[r];c&&(1!=c.nodeType||o&&!(e.core.dom.sizzle.matches(o,[c]).length>0)||(l.push(c),s))&&c!=a;)c=c[r];return l};return n.parent=function(e,t){return t=t||{},t.dir="parent",n(e,t)},n.prev=function(e,t){return t=t||{},t.dir="prev",n(e,t)},n.next=function(e,t){return t=t||{},t.dir="next",n(e,t)},n}),STK.register("core.dom.firstChild",function(e){var t=e.core.dom.dir;return function(e){if(e.firstElementChild)return e.firstElementChild;var n=e.firstChild;return n&&1!=n.nodeType&&(n=t.next(n)[0]),n}}),STK.register("core.util.hideContainer",function(e){var t,n=function(){t||(t=e.C("div"),t.style.cssText="position:absolute;top:-9999px;left:-9999px;",document.getElementsByTagName("head")[0].appendChild(t))};return{appendChild:function(i){e.core.dom.isNode(i)&&(n(),t.appendChild(i))},removeChild:function(n){e.core.dom.isNode(n)&&t&&t.removeChild(n)}}}),STK.register("core.dom.getSize",function(e){var t=function(t){if(!e.core.dom.isNode(t))throw"core.dom.getSize need Element as first parameter";return{width:t.offsetWidth,height:t.offsetHeight}},n=function(e){var n=null;return"none"===e.style.display?(e.style.visibility="hidden",e.style.display="",n=t(e),e.style.display="none",e.style.visibility="visible"):n=t(e),n};return function(t){var i={};return t.parentNode?i=n(t):(e.core.util.hideContainer.appendChild(t),i=n(t),e.core.util.hideContainer.removeChild(t)),i}}),STK.register("core.dom.insertHTML",function(e){return function(t,n,i){if(t=e.E(t)||document.body,i=i?i.toLowerCase():"beforeend",t.insertAdjacentHTML){switch(i){case"beforebegin":return t.insertAdjacentHTML("BeforeBegin",n),t.previousSibling;case"afterbegin":return t.insertAdjacentHTML("AfterBegin",n),t.firstChild;case"beforeend":return t.insertAdjacentHTML("BeforeEnd",n),t.lastChild;case"afterend":return t.insertAdjacentHTML("AfterEnd",n),t.nextSibling}throw'Illegal insertion point -> "'+i+'"'}var r,o=t.ownerDocument.createRange();switch(i){case"beforebegin":return o.setStartBefore(t),r=o.createContextualFragment(n),t.parentNode.insertBefore(r,t),t.previousSibling;case"afterbegin":return t.firstChild?(o.setStartBefore(t.firstChild),r=o.createContextualFragment(n),t.insertBefore(r,t.firstChild),t.firstChild):(t.innerHTML=n,t.firstChild);case"beforeend":return t.lastChild?(o.setStartAfter(t.lastChild),r=o.createContextualFragment(n),t.appendChild(r),t.lastChild):(t.innerHTML=n,t.lastChild);case"afterend":return o.setStartAfter(t),r=o.createContextualFragment(n),t.parentNode.insertBefore(r,t.nextSibling),t.nextSibling}throw'Illegal insertion point -> "'+i+'"'}}),STK.register("core.dom.insertElement",function(e){return function(t,n,i){switch(t=e.E(t)||document.body,i=i?i.toLowerCase():"beforeend"){case"beforebegin":t.parentNode.insertBefore(n,t);break;case"afterbegin":t.insertBefore(n,t.firstChild);break;case"beforeend":t.appendChild(n);break;case"afterend":t.nextSibling?t.parentNode.insertBefore(n,t.nextSibling):t.parentNode.appendChild(n)}}}),STK.register("core.dom.ready",function(e){var t=[],n=!1,i=e.core.func.getType,r=(e.core.util.browser,e.core.evt.addEvent),o=function(){return!n&&"complete"===document.readyState||n},a=function(){if(1!=n){n=!0;for(var e=0,r=t.length;e<r;e++)if("function"===i(t[e]))try{t[e].call()}catch(e){}t=[]}},s=function(){if(o())a();else{try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,25)}a()}},l=function(){o()?a():setTimeout(arguments.callee,25)},c=function(){r(document,"DOMContentLoaded",a)},u=function(){r(window,"load",a)};return o()||(e.IE&&window===window.top&&s(),c(),l(),u()),function(e){o()?"function"===i(e)&&e.call():t.push(e)}}),STK.register("core.dom.isDomReady",function(e){var t=!1;return e.core.dom.ready(function(){t=!0}),function(){return t}}),STK.register("core.dom.lastChild",function(e){var t=e.core.dom.dir;return function(e){if(e.lastElementChild)return e.lastElementChild;var n=e.lastChild;return n&&1!=n.nodeType&&(n=t.prev(n)[0]),n}}),STK.register("core.dom.neighbor",function(e){function t(t,n){e.log("warning",t,n)}var n=function(t,n,i){return t&&e.core.dom.dir(t,{dir:n,expr:i})[0]};return function(i){var r=i,o={getCurrent:function(){return r},setCurrent:function(e){return e&&(r=e),o},finish:function(){var e=r;return r=null,e},parent:function(e){var i=n(r,"parent",e);return i?r=i:t("parent",e),o},child:function(n){var i=n?e.core.dom.sizzle(n,r)[0]:e.core.dom.firstChild(r);return i?r=i:t("child",n),o},firstChild:function(){var n=e.core.dom.firstChild(r);return n?r=n:t("firstChild"),o},lastChild:function(){var n=e.core.dom.lastChild(r);return n?r=n:t("lastChild"),o},prev:function(e){var i=n(r,"prev",e);return i?r=i:t("prev",e),o},next:function(e){var i=n(r,"next",e);return i?r=i:t("next",e),o},destroy:function(){r=null}};return o}}),STK.register("core.dom.next",function(e){return function(e){for(var t=e.nextSibling;t&&1!==t.nodeType;)t=t.nextSibling;return t}}),STK.register("core.dom.prev",function(e){return function(e){for(var t=e.previousSibling;t&&1!==t.nodeType;)t=t.previousSibling;return t}}),STK.register("core.dom.replaceNode",function(e){return function(e,t){if(null==e||null==t)throw"replaceNode need node as paramster";t.parentNode.replaceChild(e,t)}}),STK.register("core.dom.selector",function(e){var t=function(t,n,i,r){var o=[];if("string"==typeof t)for(var a=e.core.dom.sizzle(t,n,i,r),s=0,l=a.length;s<l;s+=1)o[s]=a[s];else if(e.core.dom.isNode(t))n?e.core.dom.contains(n,t)&&(o=[t]):o=[t];else if(e.core.arr.isArray(t))if(n)for(var s=0,l=t.length;s<l;s+=1)e.core.dom.contains(n,t[s])&&o.push(t[s]);else o=t;return o};return function(n,i,r,o){var a=t.apply(window,arguments);return a.on=function(t,n){for(var i=0,r=a.length;i<r;i+=1)e.core.evt.addEvent(a[i],t,n);return a},a.css=function(t,n){for(var i=0,r=a.length;i<r;i+=1)e.core.dom.setStyle(a[i],t,n);return a},a.show=function(){for(var e=0,t=a.length;e<t;e+=1)a[e].style.display="";return a},a.hidd=function(){for(var e=0,t=a.length;e<t;e+=1)a[e].style.display="none";return a},a.hide=a.hidd,a}}),STK.register("core.dom.selectText",function(e){return function(e,t){var n=t.start,i=t.len||0;if(e.focus(),e.setSelectionRange)e.setSelectionRange(n,n+i);else if(e.createTextRange){var r=e.createTextRange();r.collapse(1),r.moveStart("character",n),r.moveEnd("character",i),r.select()}}}),STK.register("core.dom.setStyles",function(e){return function(t,n,i){if(!e.core.arr.isArray(t))var t=[t];for(var r=0,o=t.length;r<o;r++)e.core.dom.setStyle(t[r],n,i);return t}}),STK.register("core.dom.textSelectArea",function(e){return function(e){var t={start:0,len:0};if("number"==typeof e.selectionStart)t.start=e.selectionStart,t.len=e.selectionEnd-e.selectionStart;else if(void 0!==document.selection){var n=document.selection.createRange();if("INPUT"===e.tagName)var i=e.createTextRange();else if("TEXTAREA"===e.tagName){var i=n.duplicate();i.moveToElementText(e)}i.setEndPoint("EndToStart",n),t.start=i.text.length,t.len=n.text.length;var r=0;i.moveEnd("character",e.value.length-t.start),i.moveStart("character",t.start);for(var o=t.start;o<e.value.length&&i.compareEndPoints("StartToStart",n)<0;o+=1)i.moveStart("character",1),r+=2;t.start+=r,n=null,i=null}return t}}),STK.register("core.dom.toggleClassName",function(e){return function(t,n){e.core.dom.hasClassName(t,n)?e.core.dom.removeClassName(t,n):e.core.dom.addClassName(t,n)}}),STK.register("core.util.getUniqueKey",function(e){var t=(new Date).getTime().toString(),n=1;return function(){return t+n++}}),STK.register("core.dom.uniqueID",function(e){return function(t){return t&&(t.uniqueID||(t.uniqueID=e.core.util.getUniqueKey()))}}),STK.register("core.evt.custEvent",function(e){var t="__custEventKey__",n=1,i={},r=function(e,n){var r="number"==typeof e?e:e[t];return r&&i[r]&&{obj:"string"==typeof n?i[r][n]:i[r],key:r}},o={},a=function(e,t,n,i,o){if(e&&"string"==typeof t&&n){var a=r(e,t);if(!a||!a.obj)throw"custEvent ("+t+") is undefined !";return a.obj.push({fn:n,data:i,once:o}),a.key}},s=function(t,n,i,o){var a=!0,s=function(){a=!1};if(t&&"string"==typeof n){var l,c=r(t,n);if(c&&(l=c.obj)){i=void 0!==i&&[].concat(i)||[];for(var u=l.length-1;u>-1&&l[u];u--){var d=l[u].fn,f=l[u].once;if(d&&d.apply)try{d.apply(t,[{obj:t,type:n,data:l[u].data,preventDefault:s}].concat(i)),f&&l.splice(u,1)}catch(t){e.log("[error][custEvent]"+t.message,t,t.stack)}}return a&&"function"===e.core.func.getType(o)&&o(),c.key}}},l={define:function(e,r){if(e&&r){var o="number"==typeof e?e:e[t]||(e[t]=n++),a=i[o]||(i[o]={});r=[].concat(r);for(var s=0;s<r.length;s++)a[r[s]]||(a[r[s]]=[]);return o}},undefine:function(e,n){if(e){var r="number"==typeof e?e:e[t];if(r&&i[r])if(n){n=[].concat(n);for(var o=0;o<n.length;o++)n[o]in i[r]&&delete i[r][n[o]]}else delete i[r]}},add:function(e,t,n,i){return a(e,t,n,i,!1)},once:function(e,t,n,i){return a(e,t,n,i,!0)},remove:function(t,n,i){if(t){var o,a=r(t,n);if(a&&(o=a.obj)){if(e.core.arr.isArray(o))if(i){for(var s=0;o[s]&&o[s].fn!==i;)s++;o.splice(s,1)}else o.splice(0,o.length);else for(var s in o)o[s]=[];return a.key}}},fire:function(e,t,n,i){return s(e,t,n,i)},hook:function(e,r,a){if(e&&r&&a){var c,u,d=[],f=e[t],p=f&&i[f],m=r[t]||(r[t]=n++);if(p){u=o[f+"_"+m]||(o[f+"_"+m]={});var h=function(e){var t=!0;s(r,u[e.type].type,Array.prototype.slice.apply(arguments,[1,arguments.length]),function(){t=!1}),t&&e.preventDefault()};for(var v in a){var g=a[v];u[v]||(c=p[v])&&(c.push({fn:h,data:void 0}),u[v]={fn:h,type:g},d.push(g))}l.define(r,d)}}},unhook:function(e,n,i){if(e&&n&&i){var r=e[t],a=n[t],s=o[r+"_"+a];if(s)for(var c in i){i[c];s[c]&&l.remove(e,c,s[c].fn)}}},destroy:function(){i={},n=1,o={}}};return l}),STK.register("core.json.queryToJson",function(e){return function(t,n){for(var i=e.core.str.trim(t).split("&"),r={},o=function(e){return n?decodeURIComponent(e):e},a=0,s=i.length;a<s;a++)if(i[a]){var l=i[a].split("="),c=l[0],u=l[1];l.length<2&&(u=c,c="$nullName"),r[c]?(1!=e.core.arr.isArray(r[c])&&(r[c]=[r[c]]),r[c].push(o(u))):r[c]=o(u)}return r}}),STK.register("core.evt.getEvent",function(e){return function(){return document.addEventListener?function(){var e,t=arguments.callee;do{if((e=t.arguments[0])&&(e.constructor==Event||e.constructor==MouseEvent||e.constructor==KeyboardEvent))return e}while(t=t.caller);return e}:function(e,t,n){return window.event}}()}),STK.register("core.evt.fixEvent",function(e){"clientX clientY pageX pageY screenX screenY".split(" ");return function(t){if(t=t||e.core.evt.getEvent(),t.target||(t.target=t.srcElement||document),null==t.pageX&&null!=t.clientX){var n=document.documentElement,i=document.body;t.pageX=t.clientX+(n.scrollLeft||i&&i.scrollLeft||0)-(n.clientLeft||i&&i.clientLeft||0),t.pageY=t.clientY+(n.scrollTop||i&&i.scrollTop||0)-(n.clientTop||i&&i.clientTop||0)}return!t.which&&t.button&&(1&t.button?t.which=1:4&t.button?t.which=2:2&t.button&&(t.which=3)),void 0===t.relatedTarget&&(t.relatedTarget=t.fromElement||t.toElement),null==t.layerX&&null!=t.offsetX&&(t.layerX=t.offsetX,t.layerY=t.offsetY),t}}),STK.register("core.obj.isEmpty",function(e){return function(e,t){for(var n in e)if(t||e.hasOwnProperty(n))return!1;return!0}}),STK.register("core.evt.delegatedEvent",function(e){var t=function(t,n){for(var i=0,r=t.length;i<r;i+=1)if(e.core.dom.contains(t[i],n))return!0;return!1};return function(n,i){if(!e.core.dom.isNode(n))throw"core.evt.delegatedEvent need an Element as first Parameter";i||(i=[]),e.core.arr.isArray(i)&&(i=[i]);var r={},o=function(t){var n=e.core.evt.fixEvent(t),i=n.target,r=t.type;a(i,r,n)},a=function(o,a,s){var l=null,c=function(){var t,i,r;return t=o.getAttribute("action-target"),t&&(i=e.core.dom.sizzle(t,n),i.length&&(r=s.target=i[0])),c=e.core.func.empty,r},u=function(){var t=c()||o;return!r[a]||!r[a][l]||r[a][l]({evt:s,el:t,box:n,data:e.core.json.queryToJson(t.getAttribute("action-data")||"")})};if(t(i,o))return!1;if(!e.core.dom.contains(n,o))return!1;for(;o&&o!==n&&(1!==o.nodeType||!(l=o.getAttribute("action-type"))||!1!==u());)o=o.parentNode},s={};return s.add=function(t,i,a){r[i]||(r[i]={},e.core.evt.addEvent(n,i,o)),r[i][t]=a},s.remove=function(t,i){r[i]&&(delete r[i][t],e.core.obj.isEmpty(r[i])&&(delete r[i],e.core.evt.removeEvent(n,i,o)))},s.pushExcept=function(e){i.push(e)},s.removeExcept=function(e){if(e)for(var t=0,n=i.length;t<n;t+=1)i[t]===e&&i.splice(t,1);else i=[]},s.clearExcept=function(e){i=[]},s.fireAction=function(t,i,o,a){var s="";a&&a.actionData&&(s=a.actionData),r[i]&&r[i][t]&&r[i][t]({evt:o,el:null,box:n,data:e.core.json.queryToJson(s),fireFrom:"fireAction"})},s.fireInject=function(t,i,o){var a=t.getAttribute("action-type"),s=t.getAttribute("action-data");a&&r[i]&&r[i][a]&&r[i][a]({evt:o,el:t,box:n,data:e.core.json.queryToJson(s||""),fireFrom:"fireInject"})},s.fireDom=function(e,t,n){a(e,t,n||{})},s.destroy=function(){for(var t in r){for(var i in r[t])delete r[t][i];delete r[t],e.core.evt.removeEvent(n,t,o)}},s}}),STK.register("core.evt.getActiveElement",function(e){return function(){try{var t=e.core.evt.getEvent();return document.activeElement?document.activeElement:t.explicitOriginalTarget}catch(e){return document.body}}}),STK.register("core.evt.hasEvent",function(e){var t={};return function(n,i){if("string"!=typeof i)throw new Error("[STK.core.evt.hasEvent] tagName is not a String!");if(i=i.toLowerCase(),n="on"+n,t[i]&&void 0!==t[i][n])return t[i][n];var r=e.C(i),o=n in r;return o||(r.setAttribute(n,"return;"),o="function"==typeof r[n]),t[i]||(t[i]={}),t[i][n]=o,r=null,o}}),STK.register("core.evt.hitTest",function(e){function t(t){var n=STK.E(t),i=e.core.dom.position(n);return{left:i.l,top:i.t,right:i.l+n.offsetWidth,bottom:i.t+n.offsetHeight}}return function(n,i){var r=t(n);if(null==i)i=e.core.evt.getEvent();else{if(1==i.nodeType){var o=t(i);return r.right>o.left&&r.left<o.right&&r.bottom>o.top&&r.top<o.bottom}if(null==i.clientX)throw"core.evt.hitTest: ["+i+":oEvent] is not a valid value"}var a=e.core.util.scrollPos(),s=i.clientX+a.left,l=i.clientY+a.top;return s>=r.left&&s<=r.right&&l>=r.top&&l<=r.bottom}}),STK.register("core.evt.stopEvent",function(e){return function(t){return t=t||e.core.evt.getEvent(),t.preventDefault?(t.preventDefault(),t.stopPropagation()):(t.cancelBubble=!0,t.returnValue=!1),!1}}),STK.register("core.evt.preventDefault",function(e){return function(t){t=t||e.core.evt.getEvent(),t.preventDefault?t.preventDefault():t.returnValue=!1}}),STK.register("core.evt.hotKey",function(e){var t=e.core.dom.uniqueID,n={reg1:/^keypress|keydown|keyup$/,keyMap:{27:"esc",9:"tab",32:"space",10:"enter",13:"enter",8:"backspace",145:"scrollclock",20:"capslock",144:"numlock",19:"pause",45:"insert",36:"home",46:"delete",35:"end",33:"pageup",34:"pagedown",37:"left",38:"up",39:"right",40:"down",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",191:"/",17:"ctrl",16:"shift",109:"-",107:"=",219:"[",221:"]",220:"\\",222:"'",187:"=",188:",",189:"-",190:".",191:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",110:".",111:"/"},keyEvents:{}};n.preventDefault=function(){this.returnValue=!1},n.handler=function(e){e=e||window.event,e.target||(e.target=e.srcElement||document),!e.which&&(e.charCode||0===e.charCode?e.charCode:e.keyCode)&&(e.which=e.charCode||e.keyCode),e.preventDefault||(e.preventDefault=n.preventDefault);var i,r,o=t(this);if(o&&(i=n.keyEvents[o])&&(r=i[e.type])){var a;switch(e.type){case"keypress":if(e.ctrlKey||e.altKey)return;13==e.which&&(a=n.keyMap[13]),32==e.which&&(a=n.keyMap[32]),e.which>=33&&e.which<=126&&(a=String.fromCharCode(e.which));break;case"keyup":case"keydown":n.keyMap[e.which]&&(a=n.keyMap[e.which]),a||(e.which>=48&&e.which<=57?a=String.fromCharCode(e.which):e.which>=65&&e.which<=90&&(a=String.fromCharCode(e.which+32))),a&&"keydown"==e.type&&(i.linkedKey+=i.linkedKey?">"+a:a,e.altKey&&(a="alt+"+a),e.shiftKey&&(a="shift+"+a),e.ctrlKey&&(a="ctrl+"+a))}var s=/^select|textarea|input$/.test(e.target.nodeName.toLowerCase());if(a){var l=[],c=!1;i.linkedKey&&i.linkKeyStr&&(-1!=i.linkKeyStr.indexOf(" "+i.linkedKey)?(-1!=i.linkKeyStr.indexOf(" "+i.linkedKey+" ")&&(l=l.concat(r[i.linkedKey]),i.linkedKey=""),c=!0):i.linkedKey=""),c||(l=l.concat(r[a]));for(var u=0;u<l.length;u++)l[u]&&(!l[u].disableInInput||!s)&&l[u].fn.apply(this,[e,l[u].key])}}};var i=function(t,i,r,o){var a={};if(!e.core.dom.isNode(t)||"function"!==e.core.func.getType(r))return a;if("string"!=typeof i||!(i=i.replace(/\s*/g,"")))return a;if(o||(o={}),o.disableInInput||(o.disableInInput=!1),o.type||(o.type="keypress"),o.type=o.type.replace(/\s*/g,""),!n.reg1.test(o.type)||o.disableInInput&&/^select|textarea|input$/.test(t.nodeName.toLowerCase()))return a;if((i.length>1||"keypress"!=o.type)&&(i=i.toLowerCase()),!/(^(\+|>)$)|(^([^\+>]+)$)/.test(i)){var s="";if(/((ctrl)|(shift)|(alt))\+(\+|([^\+]+))$/.test(i))-1!=i.indexOf("ctrl+")&&(s+="ctr+"),-1!=i.indexOf("shift+")&&(s+="shift+"),-1!=i.indexOf("alt+")&&(s+="alt+"),s+=i.match(/\+(([^\+]+)|(\+))$/)[1];else{if(/(^>)|(>$)|>>/.test(i)||!(i.length>2))return a;a.linkFlag=!0}o.type="keydown"}return a.keys=i,a.fn=r,a.opt=o,a},r={add:function(o,a,s,l){if(e.core.arr.isArray(a))for(var c=0;c<a.length;c++)r.add(o,a[c],s,l);else{var u=i(o,a,s,l);if(!u.keys)return;a=u.keys,s=u.fn,l=u.opt;var d=u.linkFlag,f=t(o);n.keyEvents[f]||(n.keyEvents[f]={linkKeyStr:"",linkedKey:""}),n.keyEvents[f].handler||(n.keyEvents[f].handler=function(){n.handler.apply(o,arguments)}),d&&-1==n.keyEvents[f].linkKeyStr.indexOf(" "+a+" ")&&(n.keyEvents[f].linkKeyStr+=" "+a+" ");var p=l.type;n.keyEvents[f][p]||(n.keyEvents[f][p]={},e.core.evt.addEvent(o,p,n.keyEvents[f].handler)),n.keyEvents[f][p][a]||(n.keyEvents[f][p][a]=[]),n.keyEvents[f][p][a].push({fn:s,disableInInput:l.disableInInput,key:a})}},remove:function(o,a,s,l){if(e.core.arr.isArray(a))for(var c=0;c<a.length;c++)r.remove(o,a[c],s,l);else{var u=i(o,a,s,l);if(!u.keys)return;a=u.keys,s=u.fn,l=u.opt;var d,f,p,m=u.linkFlag,h=t(o),v=l.type;if(h&&(d=n.keyEvents[h])&&(f=d[v])&&d.handler&&(p=f[a])){for(var c=0;c<p.length;)p[c].fn===s?p.splice(c,1):c++;p.length<1&&delete f[a];var g=!1;for(var y in f){g=!0;break}g||(e.core.evt.removeEvent(o,v,d.handler),delete d[v]),m&&d.linkKeyStr&&(d.linkKeyStr=d.linkKeyStr.replace(" "+a+" ",""))}}}};return r}),STK.register("core.func.bind",function(e){return function(t,n,i){return i=e.core.arr.isArray(i)?i:[i],function(){return n.apply(t,i)}}}),STK.register("core.func.memorize",function(e){return function(e,t){if("function"!=typeof e)throw"core.func.memorize need a function as first parameter";t=t||{};var n={};return t.timeout&&setInterval(function(){n={}},t.timeout),function(){var i=Array.prototype.join.call(arguments,"_");return i in n||(n[i]=e.apply(t.context||{},arguments)),n[i]}}}),STK.register("core.func.methodBefore",function(e){return function(){var t=!1,n=[],i={};return i.add=function(i,r){var o=e.core.obj.parseParam({args:[],pointer:window,top:!1},r);return 1==o.top?n.unshift([i,o.args,o.pointer]):n.push([i,o.args,o.pointer]),!t},i.start=function(){var e,i,r,o,a;if(1!=t)for(t=!0,e=0,i=n.length;e<i;e++)r=n[e][0],o=n[e][1],a=n[e][2],r.apply(a,o)},i.reset=function(){n=[],t=!1},i.getList=function(){return n},i}}),STK.register("core.func.timedChunk",function(e){var t={process:function(e){"function"==typeof e&&e()},context:{},callback:null,delay:25,execTime:50};return function(n,i){if(!e.core.arr.isArray(n))throw"core.func.timedChunk need an array as first parameter";var r=n.concat(),o=e.core.obj.parseParam(t,i),a=function(){var e=+new Date;do{o.process.call(o.context,r.shift())}while(r.length>0&&+new Date-e<o.execTime);r.length<=0?o.callback&&o.callback(n):setTimeout(arguments.callee,o.delay)};setTimeout(a,o.delay)}}),STK.register("core.io.getXHR",function(e){return function(){var e=!1;try{e=new XMLHttpRequest}catch(t){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=!1}}}return e}}),STK.register("core.str.parseURL",function(e){return function(e){for(var t=/^(?:([A-Za-z]+):(\/{0,3}))?([0-9.\-A-Za-z]+\.[0-9A-Za-z]+)?(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,n=["url","scheme","slash","host","port","path","query","hash"],i=t.exec(e),r={},o=0,a=n.length;o<a;o+=1)r[n[o]]=i[o]||"";return r}}),STK.register("core.json.jsonToQuery",function(e){var t=function(t,n){return t=null==t?"":t,t=e.core.str.trim(t.toString()),n?encodeURIComponent(t):t};return function(e,n){var i=[];if("object"==typeof e)for(var r in e)if("$nullName"!==r)if(e[r]instanceof Array)for(var o=0,a=e[r].length;o<a;o++)i.push(r+"="+t(e[r][o],n));else"function"!=typeof e[r]&&i.push(r+"="+t(e[r],n));else i=i.concat(e[r]);return i.length?i.join("&"):""}}),STK.register("core.util.URL",function(e){return function(t,n){var i=e.core.obj.parseParam({isEncodeQuery:!1,isEncodeHash:!1},n||{}),r={},o=e.core.str.parseURL(t),a=e.core.json.queryToJson(o.query),s=e.core.json.queryToJson(o.hash);return r.setParam=function(e,t){return a[e]=t,this},r.getParam=function(e){return a[e]},r.setParams=function(e){for(var t in e)r.setParam(t,e[t]);return this},r.setHash=function(e,t){return s[e]=t,this},r.getHash=function(e){return s[e]},r.valueOf=r.toString=function(){var t=[],n=e.core.json.jsonToQuery(a,i.isEncodeQuery),r=e.core.json.jsonToQuery(s,i.isEncodeQuery);return""!=o.scheme&&(t.push(o.scheme+":"),t.push(o.slash)),""!=o.host&&(t.push(o.host),""!=o.port&&(t.push(":"),t.push(o.port))),t.push("/"),t.push(o.path),""!=n&&t.push("?"+n),""!=r&&t.push("#"+r),t.join("")},r}}),STK.register("core.json.strToJson",function($){var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;return function(text,reviver){function walk(e,t){var n,i,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(e,t,r)}if(window.JSON&&window.JSON.parse)return window.JSON.parse(text,reviver);var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}),STK.register("core.io.ajax",function($){return function(oOpts){var opts=$.core.obj.parseParam({url:"",charset:"UTF-8",timeout:3e4,args:{},onComplete:null,onTimeout:$.core.func.empty,uniqueID:null,onFail:$.core.func.empty,method:"get",asynchronous:!0,header:{},isEncode:!1,responseType:"json"},oOpts);if(""==opts.url)throw"ajax need url in parameters object";var tm,trans=$.core.io.getXHR(),cback=function(){if(4==trans.readyState){clearTimeout(tm);var data="";if("xml"===opts.responseType)data=trans.responseXML;else if("text"===opts.responseType)data=trans.responseText;else try{data=trans.responseText&&"string"==typeof trans.responseText?eval("("+trans.responseText+")"):{}}catch(e){data=opts.url+"return error : data error"}200==trans.status?null!=opts.onComplete&&opts.onComplete(data):0!=trans.status&&null!=opts.onFail&&opts.onFail(data,trans)}else null!=opts.onTraning&&opts.onTraning(trans)};if(trans.onreadystatechange=cback,opts.header["Content-Type"]||(opts.header["Content-Type"]="application/x-www-form-urlencoded"),opts.header["X-Requested-With"]||(opts.header["X-Requested-With"]="XMLHttpRequest"),"get"==opts.method.toLocaleLowerCase()){var url=$.core.util.URL(opts.url,{isEncodeQuery:opts.isEncode});url.setParams(opts.args),url.setParam("__rnd",(new Date).valueOf()),trans.open(opts.method,url.toString(),opts.asynchronous);try{for(var k in opts.header)trans.setRequestHeader(k,opts.header[k])}catch(e){}trans.send("")}else{trans.open(opts.method,opts.url,opts.asynchronous);try{for(var k in opts.header)trans.setRequestHeader(k,opts.header[k])}catch(e){}trans.send($.core.json.jsonToQuery(opts.args,opts.isEncode))}return opts.timeout&&(tm=setTimeout(function(){try{trans.abort(),opts.onTimeout({},trans),opts.onFail({},trans)}catch(e){}},opts.timeout)),trans}}),STK.register("core.io.scriptLoader",function(e){var t={},n={url:"",charset:"UTF-8",timeout:3e4,args:{},onComplete:e.core.func.empty,onTimeout:e.core.func.empty,isEncode:!1,uniqueID:null};return function(i){var r,o,a=e.core.obj.parseParam(n,i);if(""==a.url)throw"scriptLoader: url is null";var s=a.uniqueID||e.core.util.getUniqueKey();return r=t[s],null!=r&&1!=e.IE&&(e.core.dom.removeNode(r),r=null),null==r&&(r=t[s]=e.C("script")),r.charset=a.charset,r.id="scriptRequest_script_"+s,r.type="text/javascript",null!=a.onComplete&&(e.IE?r.onreadystatechange=function(){if("loaded"==r.readyState.toLowerCase()||"complete"==r.readyState.toLowerCase()){try{clearTimeout(o),document.getElementsByTagName("head")[0].removeChild(r),r.onreadystatechange=null}catch(e){}a.onComplete()}}:r.onload=function(){try{clearTimeout(o),e.core.dom.removeNode(r)}catch(e){}a.onComplete()}),r.src=e.core.util.URL(a.url,{isEncodeQuery:a.isEncode}).setParams(a.args).toString(),document.getElementsByTagName("head")[0].appendChild(r),a.timeout>0&&(o=setTimeout(function(){try{document.getElementsByTagName("head")[0].removeChild(r)}catch(e){}a.onTimeout()},a.timeout)),r}}),STK.register("core.io.jsonp",function(e){return function(t){var n=e.core.obj.parseParam({url:"",charset:"UTF-8",timeout:3e4,args:{},onComplete:null,onTimeout:null,responseName:null,isEncode:!1,varkey:"callback"},t),i=-1,r=n.responseName||"STK_"+e.core.util.getUniqueKey();n.args[n.varkey]=r;var o=n.onComplete,a=n.onTimeout;return window[r]=function(e){2!=i&&null!=o&&(i=1,o(e))},n.onComplete=null,n.onTimeout=function(){1!=i&&null!=a&&(i=2,a())},e.core.io.scriptLoader(n)}}),STK.register("core.util.templet",function(e){return function(e,t){return e.replace(/#\{(.+?)\}/gi,function(){for(var e=arguments[1].replace(/\s/gi,""),n=arguments[0],i=e.split("||"),r=0,o=i.length;r<o;r+=1){if(/^default:.*$/.test(i[r])){n=i[r].replace(/^default:/,"");break}if(void 0!==t[i[r]]){n=t[i[r]];break}}return n})}}),STK.register("core.io.getIframeTrans",function(e){return function(t){var n,i,r;return i=e.core.obj.parseParam({id:"STK_iframe_"+e.core.util.getUniqueKey()},t),r={},n=e.C("DIV"),n.innerHTML=e.core.util.templet('<iframe id="#{id}" name="#{id}" height="0" width="0" frameborder="no"></iframe>',i),e.core.util.hideContainer.appendChild(n),r.getId=function(){return i.id},r.destroy=function(){n.innerHTML="";try{n.getElementsByTagName("iframe")[0].src="about:blank"}catch(e){}e.core.util.hideContainer.removeChild(n),n=null},r}}),STK.register("core.io.require",function(e){var t="http://js.t.sinajs.cn/STK/js/",n=function(e,t){for(var n=t.split("."),i=e,r=null;r=n.shift();)if(void 0===(i=i[r]))return!1;return!0},i=[],r=function(t){return-1===e.core.arr.indexOf(t,i)&&(i.push(t),e.core.io.scriptLoader({url:t,callback:function(){e.core.arr.foreach(i,function(e,n){if(e===t)return i.splice(n,1),!1})}}),!1)},o=function(i,o,a){for(var s=null,l=0,c=i.length;l<c;l+=1){var u=i[l];"string"==typeof u?n(e,u)||r(t+u.replace(/\./gi,"/")+".js"):n(window,u.NS)||r(u.url)}var d=function(){for(var t=0,r=i.length;t<r;t+=1){var l=i[t];if("string"==typeof l){if(!n(e,l))return s=setTimeout(d,25),!1}else if(!n(window,l.NS))return s=setTimeout(d,25),!1}clearTimeout(s),o.apply({},[].concat(a))};s=setTimeout(d,25)};return o.setBaseURL=function(e){if("string"!=typeof e)throw"[STK.kit.extra.require.setBaseURL] need string as frist parameter";t=e},o}),STK.register("core.io.ijax",function(e){return function(t){var n,i,r,o,a,s,l;if(n=e.core.obj.parseParam({url:"",form:null,args:{},uniqueID:null,timeout:3e4,onComplete:e.core.func.empty,onTimeout:e.core.func.empty,onFail:e.core.func.empty,asynchronous:!0,isEncode:!0,abaurl:null,responseName:null,varkey:"callback",abakey:"callback"},t),l={},""==n.url)throw"ijax need url in parameters object";if(!n.form)throw"ijax need form in parameters object";return i=e.core.io.getIframeTrans(),r=n.responseName||"STK_ijax_"+e.core.util.getUniqueKey(),s={},s[n.varkey]=r,n.abaurl&&(n.abaurl=e.core.util.URL(n.abaurl).setParams(s),s={},s[n.abakey]=n.abaurl.toString()),n.url=e.core.util.URL(n.url,{isEncodeQuery:n.isEncode}).setParams(s).setParams(n.args),a=function(){window[r]=null,i.destroy(),i=null,clearTimeout(o)},o=setTimeout(function(){try{n.onTimeout(),n.onFail()}catch(e){}finally{a()}},n.timeout),window[r]=function(e,t){try{n.onComplete(e,t)}catch(e){}finally{a()}},n.form.action=n.url.toString(),n.form.target=i.getId(),n.form.submit(),l.abort=a,l}}),STK.register("core.json.clone",function(e){function t(e){var n;if(e instanceof Array){n=[];for(var i=e.length;i--;)n[i]=t(e[i]);return n}if(e instanceof Object){n={};for(var r in e)n[r]=t(e[r]);return n}return e}return t}),STK.register("core.json.include",function(e){return function(e,t){for(var n in t)if("object"==typeof t[n])if(t[n]instanceof Array){if(!(e[n]instanceof Array))return!1;if(t[n].length!==e[n].length)return!1;for(var i=0,r=t[n].length;i<r;i+=1)if(!arguments.callee(t[n][i],e[n][i]))return!1}else{if("object"!=typeof e[n])return!1;if(!arguments.callee(t[n],e[n]))return!1}else if("number"==typeof t[n]||"string"==typeof t[n]){if(t[n]!==e[n])return!1}else if(void 0!==t[n]&&null!==t[n]){if(void 0===e[n]||null===e[n])return!1;if(!t[n].toString||!e[n].toString)throw"json1[k] or json2[k] do not have toString method";if(t[n].toString()!==e[n].toString())return!1}return!0}}),STK.register("core.json.compare",function(e){return function(t,n){return!(!e.core.json.include(t,n)||!e.core.json.include(n,t))}}),STK.register("core.json.jsonToStr",function(e){function t(e,i){var s,l,c,u,d,f=r,p=i[e];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),"function"==typeof a&&(p=a.call(i,e,p)),typeof p){case"string":return n(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(r+=o,d=[],"[object Array]"===Object.prototype.toString.apply(p)){for(u=p.length,s=0;s<u;s+=1)d[s]=t(s,p)||"null";return c=0===d.length?"[]":r?"[\n"+r+d.join(",\n"+r)+"\n"+f+"]":"["+d.join(",")+"]",r=f,c}if(a&&"object"==typeof a)for(u=a.length,s=0;s<u;s+=1)"string"==typeof(l=a[s])&&(c=t(l,p))&&d.push(n(l)+(r?": ":":")+c);else for(l in p)Object.hasOwnProperty.call(p,l)&&(c=t(l,p))&&d.push(n(l)+(r?": ":":")+c);return c=0===d.length?"{}":r?"{\n"+r+d.join(",\n"+r)+"\n"+f+"}":"{"+d.join(",")+"}",r=f,c}}function n(e){return s.lastIndex=0,s.test(e)?'"'+e.replace(s,function(e){var t=l[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function i(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var r,o,a,s=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(e,n,i){if(window.JSON&&window.JSON.stringify)return window.JSON.stringify(e,n,i);var s;if(r="",o="","number"==typeof i)for(s=0;s<i;s+=1)o+=" ";else"string"==typeof i&&(o=i);if(a=n,!n||"function"==typeof n||"object"==typeof n&&"number"==typeof n.length)return t("",{"":e});throw new Error("JSON.stringify")}}),STK.register("core.obj.beget",function(e){var t=function(){};return function(e){return t.prototype=e,new t}}),STK.register("core.obj.cascade",function(e){return function(e,t){for(var n=0,i=t.length;n<i;n+=1){if("function"!=typeof e[t[n]])throw"cascade need function list as the second paramsters";e[t[n]]=function(t){return function(){return t.apply(e,arguments),e}}(e[t[n]])}}}),STK.register("core.obj.clear",function(e){return function(e){var t,n={};for(t in e)null!=e[t]&&(n[t]=e[t]);return n}}),STK.register("core.obj.cut",function(e){return function(t,n){var i={};if(!e.core.arr.isArray(n))throw"core.obj.cut need array as second parameter";for(var r in t)e.core.arr.inArray(r,n)||(i[r]=t[r]);return i}}),STK.register("core.obj.sup",function(e){return function(e,t){for(var n={},i=0,r=t.length;i<r;i+=1){if("function"!=typeof e[t[i]])throw"super need function list as the second paramsters";n[t[i]]=function(t){return function(){return t.apply(e,arguments)}}(e[t[i]])}return n}}),STK.register("core.str.bLength",function(e){return function(e){if(!e)return 0;var t=e.match(/[^\x00-\xff]/g);return e.length+(t?t.length:0)}}),STK.register("core.str.dbcToSbc",function(e){return function(e){return e.replace(/[\uff01-\uff5e]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}).replace(/\u3000/g," ")}}),STK.register("core.str.parseHTML",function(e){return function(e){for(var t,n,i=/[^<>]+|<(\/?)([A-Za-z0-9]+)([^<>]*)>/g,r=[];t=i.exec(e);){var o=[];for(n=0;n<t.length;n+=1)o.push(t[n]);r.push(o)}return r}}),STK.register("core.str.leftB",function(e){return function(t,n){var i=t.replace(/\*/g," ").replace(/[^\x00-\xff]/g,"**");return t=t.slice(0,i.slice(0,n).replace(/\*\*/g," ").replace(/\*/g,"").length),e.core.str.bLength(t)>n&&n>0&&(t=t.slice(0,t.length-1)),t}}),STK.register("core.str.queryString",function(e){return function(t,n){var i,r=e.core.obj.parseParam({source:window.location.search.substr(1),split:"&"},n),o=new RegExp("(^|"+r.split+")"+t+"=([^\\"+r.split+"]*)(\\"+r.split+"|$)","gi").exec(r.source);return(i=o)?i[2]:null}}),STK.register("core.util.cookie",function(e){var t={set:function(t,n,i){var r,o,a=[],s=e.core.obj.parseParam({expire:null,path:"/",domain:null,secure:null,encode:!0},i);1==s.encode&&(n=escape(n)),a.push(t+"="+n),null!=s.path&&a.push("path="+s.path),null!=s.domain&&a.push("domain="+s.domain),null!=s.secure&&a.push(s.secure),null!=s.expire&&(r=new Date,o=r.getTime()+36e5*s.expire,r.setTime(o),a.push("expires="+r.toGMTString())),document.cookie=a.join(";")},get:function(e){e=e.replace(/([\.\[\]\$])/g,"\\$1");var t=new RegExp(e+"=([^;]*)?;","i"),n=document.cookie+";",i=n.match(t);return i?i[1]||"":""},remove:function(e,n){n=n||{},n.expire=-10,t.set(e,"",n)}};return t}),STK.register("core.util.connect",function(e){var t={},n={},i=0,r=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o=function(){return++i+""+(new Date).getTime()},a=function(t,i,o,a){if(!r(n,t))return!1;var s=n[t];if(!r(s.callback,i))return!1;var l=s.callback[i].onSuccess,c=s.callback[i].onError,u=e.core.json.jsonToStr(a||{});return setTimeout(function(){var t=e.core.json.strToJson(u);o?(t.type="error",c(t,i)):l(t,i)},0),delete s.callback[i],!0};return t.request=function(t){var i=t.sid;if(!i||"string"!=typeof i)return-1;if(!r(n,i))return-1;var s=n[i],l=o(),c=e.core.json.jsonToStr(t.data||{});s.callback[l]={onSuccess:t.onSuccess||e.core.func.empty,onError:t.onError||e.core.func.empty};var u=function(e){a(i,l,e.error,e.data)};return setTimeout(function(){s.handle(u,e.core.json.strToJson(c),l)},0),l},t.create=function(t){if(!t)return!1;var i=t.sid;if(!i||"string"!=typeof i)return!1;if(r(n,i))return!1;var o=t.handle;return"function"==typeof o&&(n[i]={handle:o,onAbort:t.onAbort||e.core.func.empty,callback:{}},!0)},t.abort=function(e){if(!e)return!1;for(var t in n){var i=n[t];if(r(i.callback,e))return setTimeout(function(){i.onAbort(e)},0),delete i.callback[e],!0}return!1},t.destory=function(e){if(!e||"string"!=typeof e)return!1;if(!r(n,e))return!1;for(var t in n[e].callback)try{n[e].callback[t].onError({type:"destroy"},t)}catch(e){}return delete n[e],!0},t}),STK.register("core.util.drag",function(e){var t=function(e){return e.cancelBubble=!0,!1},n=function(t,n){return t.clientX=n.clientX,t.clientY=n.clientY,t.pageX=n.clientX+e.core.util.scrollPos().left,t.pageY=n.clientY+e.core.util.scrollPos().top,t};return function(i,r){if(!e.core.dom.isNode(i))throw"core.util.drag need Element as first parameter";var o=e.core.obj.parseParam({actRect:[],actObj:{}},r),a={},s=e.core.evt.custEvent.define(o.actObj,"dragStart"),l=(e.core.evt.custEvent.define(o.actObj,"dragEnd"),e.core.evt.custEvent.define(o.actObj,"draging"),function(i){var r=n({},i);return document.body.onselectstart=function(){return!1},e.core.evt.addEvent(document,"mousemove",c),e.core.evt.addEvent(document,"mouseup",u),e.core.evt.addEvent(document,"click",t,!0),i.preventDefault&&(i.preventDefault(),i.stopPropagation()),e.core.evt.custEvent.fire(s,"dragStart",r),!1}),c=function(t){var i=n({},t);t.cancelBubble=!0,e.core.evt.custEvent.fire(s,"draging",i)},u=function(i){var r=n({},i);document.body.onselectstart=function(){return!0},e.core.evt.removeEvent(document,"mousemove",c),e.core.evt.removeEvent(document,"mouseup",u),e.core.evt.removeEvent(document,"click",t,!0),e.core.evt.custEvent.fire(s,"dragEnd",r)};return e.core.evt.addEvent(i,"mousedown",l),a.destroy=function(){e.core.evt.removeEvent(i,"mousedown",l),o=null},a.getActObj=function(){return o.actObj},a}}),STK.register("core.util.easyTemplate",function(e){var t=function(e,n){if(!e)return"";e!==t.template&&(t.template=e,t.aStatement=t.parsing(t.separate(e)));var i=t.aStatement,r=function(e){return e&&(n=e),arguments.callee};return r.toString=function(){return new Function(i[0],i[1])(n)},r};return t.separate=function(e){var t=/\\'/g;return e.replace(/(<(\/?)#(.*?(?:\(.*?\))*)>)|(')|([\r\n\t])|(\$\{([^\}]*?)\})/g,function(e,n,i,r,o,a,s,l){return n?"{|}"+(i?"-":"+")+r+"{|}":o?"\\'":a?"":s?"'+("+l.replace(t,"'")+")+'":void 0})},t.parsing=function(e){var t,n,i,r,o,a,s=["var aRet = [];"];a=e.split(/\{\|\}/);for(var l=/\s/;a.length;)if(i=a.shift())if("+"===(o=i.charAt(0))||"-"===o)switch(r=i.split(l),r[0]){case"+et":t=r[1],n=r[2],s.push('aRet.push("\x3c!--'+t+' start--\x3e");');break;case"-et":s.push('aRet.push("\x3c!--'+t+' end--\x3e");');break;case"+if":r.splice(0,1),s.push("if"+r.join(" ")+"{");break;case"+elseif":r.splice(0,1),s.push("}else if"+r.join(" ")+"{");break;case"-if":s.push("}");break;case"+else":s.push("}else{");break;case"+list":s.push("if("+r[1]+".constructor === Array){with({i:0,l:"+r[1]+".length,"+r[3]+"_index:0,"+r[3]+":null}){for(i=l;i--;){"+r[3]+"_index=(l-i-1);"+r[3]+"="+r[1]+"["+r[3]+"_index];");break;case"-list":s.push("}}}")}else i="'"+i+"'",s.push("aRet.push("+i+");");return s.push('return aRet.join("");'),[n,s.join("")]},t}),STK.register("core.util.htmlParser",function(e){var t=function(e){for(var t={},n=e.split(","),i=0;i<n.length;i++)t[n[i]]=!0;return t},n=/^<(\w+)((?:\s+[\w-\:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,i=/^<\/(\w+)[^>]*>/,r=/([\w|\-]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,o=t("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),a=t("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul"),s=t("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),l=t("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),c=t("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),u=t("script,style");return function(e,t){var d,f,p,m=[],h=e,v=function(n,i,u,d){if(a[i])for(;m.last()&&s[m.last()];)g("",m.last());l[i]&&m.last()==i&&g("",i),(d=o[i]||!!d)||m.push(i);var f=[];if("textarea"===n){var p=e.match(/^(.*)<\/textarea[^>]*>/);f.push({name:"text",value:e.slice(0,p[0].length)}),e=e.substring(p[0].length)}t.start&&"function"==typeof t.start&&(u.replace(r,function(e,t){var n=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:c[t]?t:"";f.push({name:t,value:n,escaped:n.replace(/(^|[^\\])"/g,'$1\\"')})}),t.start(i,f,d))},g=function(e,n){if(n)for(var i=m.length-1;i>=0&&m[i]!=n;i--);else var i=0;if(i>=0){for(var r=m.length-1;r>=i;r--)t.end&&"function"==typeof t.end&&t.end(m[r]);m.length=i}};for(m.last=function(){return this[this.length-1]};e;){if(f=!0,m.last()&&u[m.last()])e=e.replace(new RegExp("(.*)</"+m.last()+"[^>]*>"),function(e,n){return n=n.replace(/<!--(.*?)-->/g,"$1").replace(/<!\[CDATA\[(.*?)]]>/g,"$1"),t.chars&&"function"==typeof t.chars&&t.chars(n),""}),g("",m.last());else if(0===e.indexOf("\x3c!--")?(d=e.indexOf("--\x3e"))>=0&&(t.comment&&"function"==typeof t.comment&&t.comment(e.substring(4,d)),e=e.substring(d+3),f=!1):0===e.indexOf("</")?(p=e.match(i))&&(e=e.substring(p[0].length),p[0].replace(i,g),f=!1):0===e.indexOf("<")&&(p=e.match(n))&&(e=e.substring(p[0].length),p[0].replace(n,v),f=!1),f){d=e.indexOf("<");var y=d<0?e:e.substring(0,d);e=d<0?"":e.substring(d),t.chars&&"function"==typeof t.chars&&t.chars(y)}if(e==h)throw"Parse Error: "+e;h=e}g()}}),STK.register("core.util.nameValue",function(e){return function(t){var n=t.getAttribute("name"),i=t.getAttribute("type"),r=t.tagName,o={name:n,value:""},a=function(t){!1===t?o=!1:o.value?o.value=[e.core.str.trim(t||"")].concat(o.value):o.value=e.core.str.trim(t||"")};if(t.disabled||!n)return!1;switch(r){case"INPUT":a("radio"==i||"checkbox"==i?t.checked?t.value:!1:"reset"==i||"submit"==i||"image"==i?!1:t.value);break;case"SELECT":if(t.multiple)for(var s=t.options,l=0,c=s.length;l<c;l++)s[l].selected&&a(s[l].value);else a(t.value);break;case"TEXTAREA":a(t.value||t.getAttribute("value")||!1);break;case"BUTTON":default:a(t.value||t.getAttribute("value")||t.innerHTML||!1)}return o}}),STK.register("core.util.htmlToJson",function(e){return function(t,n,i){var r={};if(n=n||["INPUT","TEXTAREA","BUTTON","SELECT"],!t||!n)return!1;for(var o=e.core.util.nameValue,a=0,s=n.length;a<s;a++)for(var l=t.getElementsByTagName(n[a]),c=0,u=l.length;c<u;c++){var d=o(l[c]);!d||i&&""===d.value||(r[d.name]?r[d.name]instanceof Array?r[d.name]=r[d.name].concat(d.value):r[d.name]=[r[d.name]].concat(d.value):r[d.name]=d.value)}return r}}),STK.register("core.util.jobsM",function(e){return function(){var t=[],n={},i=!1,r={},o=function(t){var i=t.name,r=t.func;new Date;if(!n[i])try{r(e),r[i]=!0}catch(t){e.log("[error][jobs]"+i)}},a=function(t){t.length?(e.core.func.timedChunk(t,{process:o,callback:arguments.callee}),t.splice(0,t.length)):i=!1};return r.register=function(e,n){t.push({name:e,func:n})},r.start=function(){if(i)return!0;i=!0,a(t)},r.load=function(){},e.core.dom.ready(r.start),r}()}),STK.register("core.util.language",function(e){return function(e,t){for(var n=[],i=2,r=arguments.length;i<r;i+=1)n.push(arguments[i]);return e.replace(/#L\{((.*?)(?:[^\\]))\}/gi,function(){var e,i=arguments[1];return e=t&&void 0!==t[i]?t[i]:i,n.length&&(e=e.replace(/(\%s)/gi,function(){var e=n.shift();return void 0!==e?e:arguments[0]})),e})}}),STK.register("core.util.listener",function(e){return function(){var e,t={},n=[],i=function(){if(0!=n.length){clearTimeout(e);var t=n.splice(0,1)[0];try{t.func.apply(t.func,[].concat(t.data))}catch(e){}e=setTimeout(i,25)}};return{register:function(e,n,i){t[e]=t[e]||{},t[e][n]=t[e][n]||[],t[e][n].push(i)},fire:function(e,r,o){var a,s,l;if(t[e]&&t[e][r]&&t[e][r].length>0){for(a=t[e][r],a.data_cache=o,s=0,l=a.length;s<l;s++)n.push({channel:e,evt:r,func:a[s],data:o});i()}},remove:function(e,n,i){if(t[e]&&t[e][n])for(var r=0,o=t[e][n].length;r<o;r++)if(t[e][n][r]===i){t[e][n].splice(r,1);break}},list:function(){return t},cache:function(e,n){if(t[e]&&t[e][n])return t[e][n].data_cache}}}()}),STK.register("core.util.pageletM",function(e){var t="",n="";"undefined"!=typeof $CONFIG&&(t=$CONFIG.jsPath||t,n=$CONFIG.cssPath||n);var i,r,o,a=e.core.arr.indexOf,s={},l={},c={},u={},d={};e.IE&&(r={},o=function(){var t,n;for(t in r)if(r[t].length<31){n=e.E(t);break}return n||(t="style_"+e.core.util.getUniqueKey(),n=document.createElement("style"),n.setAttribute("type","text/css"),n.setAttribute("id",t),document.getElementsByTagName("head")[0].appendChild(n),r[t]=[]),{styleID:t,styleSheet:n.styleSheet||n.sheet}});var f=function(t,n){if(u[t]={cssURL:n},e.IE){var i=o();i.styleSheet.addImport(n),r[i.styleID].push(t),u[t].styleID=i.styleID}else{var a=e.C("link");a.setAttribute("rel","Stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("charset","utf-8"),a.setAttribute("href",n),a.setAttribute("id",t),document.getElementsByTagName("head")[0].appendChild(a)}},p={},m=function(t,n){var i=e.E(t);if(i){n(i),p[t]&&delete p[t];for(var r in p)m(r,p[r])}else p[t]=n},h=function(t){if(e.IE){var n,i=u[t].styleID,o=r[i],l=e.E(i);(n=a(t,o))>-1&&((l.styleSheet||l.sheet).removeImport(n),o.splice(n,1))}else e.core.dom.removeNode(e.E(t));delete s[u[t].cssURL],delete u[t]},v=function(t,i,r){for(var o in d)e.E(o)||delete d[o];if(d[t]={js:{},css:{}},r)for(var o=0,a=r.length;o<a;++o)d[t].css[n+r[o]]=1},g=function(){for(var e in u){var t=!1,n=u[e].cssURL;for(var i in d)if(d[i].css[n]){t=!0;break}t||h(e)}},y=function(e,t){var n=s[e]||(s[e]={loaded:!1,list:[]});return n.loaded?(t(e),!1):(n.list.push(t),!(n.list.length>1))},b=function(e){var t=s[e].list;if(t){for(var n=0;n<t.length;n++)t[n](e);s[e].loaded=!0,delete s[e].list}},_=function(t){var i=t.url,r=t.load_ID,o=t.complete,a=(t.pid,n+i),s="css_"+e.core.util.getUniqueKey();if(y(a,o)){f(s,a);var l=e.C("div");l.id=r,e.core.util.hideContainer.appendChild(l);var c=3e3,u=function(){42==parseInt(e.core.dom.getStyle(l,"height"))?(e.core.util.hideContainer.removeChild(l),b(a)):--c>0?setTimeout(u,10):(e.log(a+"timeout!"),e.core.util.hideContainer.removeChild(l),b(a),h(s),f(s,a))};setTimeout(u,50)}},w=function(n,i){var r=t+n;!y(r,i)||e.core.io.scriptLoader({url:r,onComplete:function(){b(r)},onTimeout:function(){e.log(r+"timeout!"),delete s[r]}})},x=function(e,t){l[e]||(l[e]=t)},k=function(t){if(t)if(l[t])try{c[t]||(c[t]=l[t](e))}catch(n){e.log(t,n,n.stack)}else e.log("start:ns="+t+" ,have not been registed");else{var n=[];for(t in l)n.push(t);e.core.func.timedChunk(n,{process:function(t){try{c[t]||(c[t]=l[t](e))}catch(n){e.log(t,n,n.stack)}}})}},E=function(t){var n,i,r,o,a,s,l=1;if(t=t||{},n=t.pid,i=t.html,o=t.js?[].concat(t.js):[],r=t.css?[].concat(t.css):[],void 0==n)e.log("node pid["+n+"] is undefined");else{if(v(n,o,r),a=function(){--l>0||m(n,function(e){void 0!=i&&(e.innerHTML=i),o.length>0&&s(),g()})},s=function(e){if(o.length>0&&w(o.shift(),s),e&&-1!=e.indexOf("/pl/")){var t=e.replace(/^.*?\/(pl\/.*)\.js\??.*$/,"$1").replace(/\//g,".");T(t),k(t)}},r.length>0){l+=r.length;for(var c,u=0;c=r[u];u++)_({url:c,load_ID:"js_"+c.replace(/^\/?(.*)\.css\??.*$/i,"$1").replace(/\//g,"_"),complete:a,pid:n})}a()}},T=function(t){if(t){if(c[t]){e.log("destroy:"+t);try{c[t].destroy()}catch(t){e.log(t,t.stack)}delete c[t]}}else{for(t in c){e.log("destroy:"+t);try{c[t]&&c[t].destroy&&c[t].destroy()}catch(n){e.log(t,n,n.stack)}}c={}}},S={register:x,start:k,view:E,clear:T,destroy:function(){S.clear(),s={},c={},l={},i=void 0}};return e.core.dom.ready(function(){e.core.evt.addEvent(window,"unload",function(){e.core.evt.removeEvent(window,"unload",arguments.callee),S.destroy()})}),S}),STK.register("core.util.winSize",function(e){return function(e){var t,n,i;return i=e?e.document:document,"CSS1Compat"===i.compatMode?(t=i.documentElement.clientWidth,n=i.documentElement.clientHeight):self.innerHeight?(i=e?e.self:self,t=i.innerWidth,n=i.innerHeight):i.documentElement&&i.documentElement.clientHeight?(t=i.documentElement.clientWidth,n=i.documentElement.clientHeight):i.body&&(t=i.body.clientWidth,n=i.body.clientHeight),{width:t,height:n}}}),STK.register("core.util.pageSize",function(e){return function(t){var n;n=t?t.document:document;var i,r,o,a,s="CSS1Compat"==n.compatMode?n.documentElement:n.body;window.innerHeight&&window.scrollMaxY?(i=s.scrollWidth,r=window.innerHeight+window.scrollMaxY):s.scrollHeight>s.offsetHeight?(i=s.scrollWidth,r=s.scrollHeight):(i=s.offsetWidth,r=s.offsetHeight);var l=e.core.util.winSize(t);return o=r<l.height?l.height:r,a=i<l.width?l.width:i,{page:{width:a,height:o},win:{width:l.width,height:l.height}}}}),STK.register("core.util.queue",function(e){return function(){var e={},t=[];return e.add=function(n){return t.push(n),e},e.get=function(){return t.length>0&&t.shift()},e}}),STK.register("core.util.timer",function(e){return function(){var e={},t={},n=0,i=null,r=25,o=function(){for(var n in t)t[n].pause||t[n].fun();return e};return e.add=function(i){if("function"!=typeof i)throw"The timer needs add a function as a parameters";var r=""+(new Date).getTime()+Math.random()*Math.pow(10,17);return t[r]={fun:i,pause:!1},n<=0&&e.start(),n++,r},e.remove=function(i){return t[i]&&(delete t[i],n--),n<=0&&e.stop(),e},e.pause=function(n){return t[n]&&(t[n].pause=!0),e},e.play=function(n){return t[n]&&(t[n].pause=!1),e},e.stop=function(){return clearInterval(i),i=null,e},e.start=function(){return i=setInterval(o,r),e},e.loop=o,e.get=function(e){return"delay"===e?r:"functionList"===e?t:void 0},e.set=function(e,t){"delay"===e&&"number"==typeof t&&(r=Math.max(25,Math.min(t,200)))},e}()}),STK.register("core.util.scrollTo",function(e){return function(t,n){if(!e.core.dom.isNode(t))throw"core.dom.isNode need element as the first parameter";var i=e.core.obj.parseParam({box:document.documentElement,top:0,step:2,onMoveStop:null},n);i.step=Math.max(2,Math.min(10,i.step));var r,o=[],a=e.core.dom.position(t);r=i.box==document.documentElement?{t:0}:e.core.dom.position(i.box);for(var s=Math.max(0,(a?a.t:0)-(r?r.t:0)-i.top),l=i.box===document.documentElement?i.box.scrollTop||document.body.scrollTop||window.pageYOffset:i.box.scrollTop;Math.abs(l-s)>i.step&&l>=0;)o.push(Math.round(l+(s-l)*i.step/10)),l=o[o.length-1];o.length||o.push(s);var c=e.core.util.timer.add(function(){o.length?i.box===document.documentElement?window.scrollTo(0,o.shift()):i.box.scrollTop=o.shift():(i.box===document.documentElement?window.scrollTo(0,s):i.box.scrollTop=s,e.core.util.timer.remove(c),"function"==typeof i.onMoveStop&&i.onMoveStop())})}}),STK.register("core.util.stack",function(e){return function(){var e={},t=[];return e.add=function(n){return t.push(n),e},e.get=function(){return t.length>0&&t.pop()},e}}),STK.register("core.util.swf",function(e){function t(t,n){var i=e.core.obj.parseParam({id:"swf_"+parseInt(1e4*Math.random(),10),width:1,height:1,attrs:{},paras:{},flashvars:{},html:""},n);if(null==t)throw"swf: [sURL] ";var r,o=[],a=[];for(r in i.attrs)a.push(r+'="'+i.attrs[r]+'" ');var s=[];for(r in i.flashvars)s.push(r+"="+i.flashvars[r]);if(i.paras.flashvars=s.join("&"),e.IE){o.push('<object width="'+i.width+'" height="'+i.height+'" id="'+i.id+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" '),o.push(a.join("")),o.push('><param name="movie" value="'+t+'" />');for(r in i.paras)o.push('<param name="'+r+'" value="'+i.paras[r]+'" />');o.push("</object>")}else{o.push('<embed width="'+i.width+'" height="'+i.height+'" id="'+i.id+'" src="'+t+'" type="application/x-shockwave-flash" '),o.push(a.join(""));for(r in i.paras)o.push(r+'="'+i.paras[r]+'" ');o.push(" />")}return i.html=o.join(""),i}var n={};return n.create=function(n,i,r){var o=e.E(n);if(null==o)throw"swf: ["+n+"] ";var a=t(i,r);return o.innerHTML=a.html,e.E(a.id)},n.html=function(e,n){return t(e,n).html},n.check=function(){var t=-1;if(e.IE)try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(e){}else navigator.plugins["Shockwave Flash"]&&(t=navigator.plugins["Shockwave Flash"].description);return t},n}),STK.register("core.util.storage",function(e){var t=window.localStorage;if(t)return{get:function(e){return unescape(t.getItem(e))},set:function(e,n,i){t.setItem(e,escape(n))},del:function(e){t.removeItem(e)},clear:function(){t.clear()},getAll:function(){for(var e=t.length,n=null,i=[],r=0;r<e;r++)n=t.key(r),i.push(n+"="+t.getItem(n));return i.join("; ")}};if(window.ActiveXObject){var n=document.documentElement,i="localstorage";try{n.addBehavior("#default#userdata"),n.save("localstorage")}catch(e){}return{set:function(e,t){n.setAttribute(e,t),n.save(i)},get:function(e){return n.load(i),n.getAttribute(e)},del:function(e){n.removeAttribute(e),n.save(i)}}}return{get:function(e){for(var t=document.cookie.split("; "),n=t.length,i=[],r=0;r<n;r++)if(i=t[r].split("="),e===i[0])return unescape(i[1]);return null},set:function(e,t,n){n&&n instanceof Date||(n=new Date,n.setDate(n.getDate()+1)),document.cookie=e+"="+escape(t)+"; expires="+n.toGMTString()},del:function(e){document.cookie=e+"=''; expires=Fri, 31 Dec 1999 23:59:59 GMT;"},clear:function(){for(var e=document.cookie.split("; "),t=e.length,n=[],i=0;i<t;i++)n=e[i].split("="),this.deleteKey(n[0])},getAll:function(){return unescape(document.cookie.toString())}}}),function(){var e=(STK.core,{tween:"core.ani.tween",tweenArche:"core.ani.tweenArche",arrCopy:"core.arr.copy",arrClear:"core.arr.clear",hasby:"core.arr.hasby",unique:"core.arr.unique",foreach:"core.arr.foreach",isArray:"core.arr.isArray",inArray:"core.arr.inArray",arrIndexOf:"core.arr.indexOf",findout:"core.arr.findout",domNext:"core.dom.next",domPrev:"core.dom.prev",isNode:"core.dom.isNode",addHTML:"core.dom.addHTML",insertHTML:"core.dom.insertHTML",setXY:"core.dom.setXY",contains:"core.dom.contains",position:"core.dom.position",trimNode:"core.dom.trimNode",insertAfter:"core.dom.insertAfter",insertBefore:"core.dom.insertBefore",removeNode:"core.dom.removeNode",replaceNode:"core.dom.replaceNode",Ready:"core.dom.ready",setStyle:"core.dom.setStyle",setStyles:"core.dom.setStyles",getStyle:"core.dom.getStyle",addClassName:"core.dom.addClassName",hasClassName:"core.dom.hasClassName",removeClassName:"core.dom.removeClassName",builder:"core.dom.builder",cascadeNode:"core.dom.cascadeNode",selector:"core.dom.selector",sizzle:"core.dom.sizzle",addEvent:"core.evt.addEvent",custEvent:"core.evt.custEvent",removeEvent:"core.evt.removeEvent",fireEvent:"core.evt.fireEvent",fixEvent:"core.evt.fixEvent",getEvent:"core.evt.getEvent",stopEvent:"core.evt.stopEvent",delegatedEvent:"core.evt.delegatedEvent",preventDefault:"core.evt.preventDefault",hotKey:"core.evt.hotKey",memorize:"core.func.memorize",bind:"core.func.bind",getType:"core.func.getType",methodBefore:"core.func.methodBefore",timedChunk:"core.func.timedChunk",funcEmpty:"core.func.empty",ajax:"core.io.ajax",jsonp:"core.io.jsonp",ijax:"core.io.ijax",scriptLoader:"core.io.scriptLoader",require:"core.io.require",jsonInclude:"core.json.include",jsonCompare:"core.json.compare",jsonClone:"core.json.clone",jsonToQuery:"core.json.jsonToQuery",queryToJson:"core.json.queryToJson",jsonToStr:"core.json.jsonToStr",strToJson:"core.json.strToJson",objIsEmpty:"core.obj.isEmpty",beget:"core.obj.beget",cascade:"core.obj.cascade",objSup:"core.obj.sup",parseParam:"core.obj.parseParam",bLength:"core.str.bLength",dbcToSbc:"core.str.dbcToSbc",leftB:"core.str.leftB",trim:"core.str.trim",encodeHTML:"core.str.encodeHTML",decodeHTML:"core.str.decodeHTML",parseURL:"core.str.parseURL",parseHTML:"core.str.parseHTML",queryString:"core.str.queryString",htmlToJson:"core.util.htmlToJson",cookie:"core.util.cookie",drag:"core.util.drag",timer:"core.util.timer",jobsM:"core.util.jobsM",listener:"core.util.listener",winSize:"core.util.winSize",pageSize:"core.util.pageSize",templet:"core.util.templet",queue:"core.util.queue",stack:"core.util.stack",swf:"core.util.swf",URL:"core.util.URL",scrollPos:"core.util.scrollPos",scrollTo:"core.util.scrollTo",getUniqueKey:"core.util.getUniqueKey",storage:"core.util.storage",pageletM:"core.util.pageletM"});for(var t in e)STK.shortRegister(e[t],t,"theia")}(),module.exports=STK},function(e,t,n){(function(e){e.register("lib.kit.extra.language",function(e){return window.$LANG||(window.$LANG={}),function(t){var n=[].splice.call(arguments,1,arguments.length),i=[t,$LANG].concat(n);return e.core.util.language.apply(this,i)}})}).call(t,n(0))},function(e,t,n){(function(e){n(63),n(64),n(65),e.register("lib.kit.io.inter",function(e){var t=e.core.json.merge;return function(){var n={},i={},r={},o=function(e,t){return function(n,i){try{t.onComplete(n,i)}catch(e){}try{"100000"==n.code?t.onSuccess(n,i):t.onError(n,i)}catch(e){}for(var o in r[e])try{r[e][o](n,i)}catch(e){}}},a=function(e,t,n){return function(i){try{t.onComplete(i,n)}catch(e){}try{"100000"==i.code?t.onSuccess(i,n):t.onError(i,n)}catch(e){}for(var o in r[e])try{r[e][o](i,n)}catch(e){}}};return n.register=function(e,t){if(void 0!==i[e])throw e+" registered";i[e]=t,r[e]={}},n.addHook=function(t,n){var i=e.core.util.getUniqueKey();return r[t][i]=n,i},n.rmHook=function(e,t){r[e]&&r[e][t]&&delete r[e][t]},n.getTrans=function(n,r){var a=t(i[n],r);a.onComplete=o(n,r),a.url+=(a.url.indexOf("?")>=0?"&":"?")+"ajwvr=6",a.withDomain&&(a.url+="&domain="+$CONFIG.domain);var s=i[n].requestMode,l="ajax";return"jsonp"!==s&&"ijax"!==s||(l=s),e.lib.kit.io[l](a)},n.request=function(n,r,o){var s=t(i[n],r);s.onComplete=a(n,r,o),s.url+=(s.url.indexOf("?")>=0?"&":"?")+"ajwvr=6",s.withDomain&&(s.url+="&domain="+$CONFIG.domain),s=e.core.obj.cut(s,["noqueue"]),s.args=o;var l=i[n].requestMode;return"jsonp"===l?e.jsonp(s):"ijax"===l?e.ijax(s):e.ajax(s)},n}})}).call(t,n(0))},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){(function(e){n(1),n(39),n(125),e.register("lib.dialog.ioError",function(e){var t,n=e.lib.kit.extra.language;return function(i,r,o){var a,s,l={},c=function(){},u={init:function(){u.data()},data:function(){s=e.parseParam({auto:!0,call:c,ok:c,cancel:c,beside:null},o),a=e.parseParam({location:"",oKText:n("#L{ }"),cancelText:n("#L{ }"),suda:""},r.data),a.msg=r.msg||n("#L{}"),r.data&&r.data.OKText&&(a.okText=r.data.OKText),a.OK=function(){e.preventDefault();var t=e.queryToJson(a.suda||"");t=t.ok||{},window.SUDA&&SUDA.uaTrack&&t.key&&SUDA.uaTrack(t.key,t.value),s.ok(),a.location&&(window.location.href=a.location)},a.cancel=function(){e.preventDefault();var t=e.queryToJson(a.suda||"");t=t.cancel||{},window.SUDA&&SUDA.uaTrack&&t.key&&SUDA.uaTrack(t.key,t.value),s.cancel()}},run:function(){return(d[r.code]||d[100001])()||s.call(a,r)},destroy:function(){t&&t.destroy()}},d={100001:function(){s.beside?e.ui.tipAlert(a.msg,e.core.json.merge(a,{autoHide:!1,icon:"warnS"})).beside(s.beside):e.ui.alert(a.msg.split("\\n"),e.core.json.merge(a,{icon:"warnB"}))},100002:function(){e.lib.dialog.loginLayer({lang:window.$CONFIG&&window.$CONFIG.lang||"zh-cn"})},100003:function(){s.beside?e.ui.tipConfirm(a.msg,a).beside(s.beside):e.ui.confirm(a.msg.split("\n"),a)},100004:function(){t||(t=e.lib.dialog.authentication()),t.show()},100008:function(){e.lib.dialog.loginLayer({lang:window.$CONFIG&&window.$CONFIG.lang||"zh-cn"})}};return u.init(),l.getdata=function(){return a},l.getAction=function(e){return e?d[e]:d},l.getCode=function(){return r.code||""},l.run=u.run,s.auto&&u.run(),l}})}).call(t,n(0))},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){(function(e){e.register("lib.kit.dom.parseDOM",function(e){return function(e){for(var t in e)e[t]&&1==e[t].length&&(e[t]=e[t][0]);return e}})}).call(t,n(0))},function(e,t,n){var i=n(17),r=n(42),o=n(26),a=Object.defineProperty;t.f=n(8)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(15)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(e,t,n){var i=n(7),r=n(18);e.exports=n(8)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(78),r=n(24);e.exports=function(e){return i(r(e))}},function(e,t,n){var i=n(29)("wks"),r=n(19),o=n(3).Symbol,a="function"==typeof o;(e.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:r)("Symbol."+e))}).store=i},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){(function(e){e.register("lib.kit.extra.merge",function(e){return function(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n}})}).call(t,n(0))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=!0},function(e,t,n){var i=n(13);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t,n){(function(e){e.register("lib.kit.extra.textareaUtils",function(t){var n={},i=document.selection;return n.selectionStart=function(e){if(!i)try{return e.selectionStart}catch(e){return 0}var t=i.createRange(),n=0,r=document.body.createTextRange();try{r.moveToElementText(e)}catch(e){}for(n;r.compareEndPoints("StartToStart",t)<0;n++)r.moveStart("character",1);return n},n.selectionBefore=function(e){return e.value.slice(0,n.selectionStart(e))},n.selectText=function(e,t,n){if(e.focus(),!i)return void e.setSelectionRange(t,n);var r=e.createTextRange();r.collapse(1),r.moveStart("character",t),r.moveEnd("character",n-t),r.select()},n.insertText=function(e,t,r,o){if(e.focus(),o=o||0,!i){var a=e.value,s=r-o,l=s+t.length;return e.value=a.slice(0,s)+t+a.slice(r,a.length),void n.selectText(e,l,l)}var c=i.createRange();c.moveStart("character",-o),c.text=t},n.replaceText=function(e,t){e.focus();var r=e.value,o=n.getSelectedText(e),a=o.length;if(0==o.length)n.insertText(e,t,n.getCursorPos(e));else{var s=n.getCursorPos(e);if(!i){o.length;return e.value=r.slice(0,s)+t+r.slice(s+a,r.length),void n.setCursor(e,s+t.length)}i.createRange().text=t,n.setCursor(e,s+t.length)}},n.getCursorPos=function(t){var n=0;if(e.core.util.browser.IE){t.focus();var r=null;r=i.createRange();var o=r.duplicate();o.moveToElementText(t),o.setEndPoint("EndToEnd",r),t.selectionStartIE=o.text.length-r.text.length,t.selectionEndIE=t.selectionStartIE+r.text.length,n=t.selectionStartIE}else(t.selectionStart||"0"==t.selectionStart)&&(n=t.selectionStart);return n},n.getSelectedText=function(e){var t=function(e){return void 0!=e.selectionStart&&void 0!=e.selectionEnd?e.value.substring(e.selectionStart,e.selectionEnd):""};return window.getSelection?t(e):i.createRange().text},n.setCursor=function(e,t,n){if(t=null==t?e.value.length:t,n=null==n?0:n,e.focus(),e.createTextRange){var i=e.createTextRange();i.move("character",t),i.moveEnd("character",n),i.select()}else e.setSelectionRange&&e.setSelectionRange(t,t+n)},n.unCoverInsertText=function(e,t,n){n=null==n?{}:n,n.rcs=null==n.rcs?e.value.length:1*n.rcs,n.rccl=null==n.rccl?0:1*n.rccl;var i=e.value,r=i.slice(0,n.rcs),o=i.slice(n.rcs+n.rccl,""==i?0:i.length);e.value=r+t+o,this.setCursor(e,n.rcs+(null==t?0:t.length))},n})}).call(t,n(0))},function(e,t,n){var i=n(46),r=n(30);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(57),o=i(r),a=n(59),s=i(a),l="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===l(o.default)?function(e){return void 0===e?"undefined":l(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":l(e)}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var i=n(3),r=n(9),o=n(74),a=n(10),s=n(5),l="prototype",c=function(e,t,n){var u,d,f,p=e&c.F,m=e&c.G,h=e&c.S,v=e&c.P,g=e&c.B,y=e&c.W,b=m?r:r[t]||(r[t]={}),_=b[l],w=m?i:h?i[t]:(i[t]||{})[l];m&&(n=t);for(u in n)(d=!p&&w&&void 0!==w[u])&&s(b,u)||(f=d?w[u]:n[u],b[u]=m&&"function"!=typeof w[u]?n[u]:g&&d?o(f,i):y&&w[u]==f?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t[l]=e[l],t}(f):v&&"function"==typeof f?o(Function.call,f):f,v&&((b.virtual||(b.virtual={}))[u]=f,e&c.R&&_&&!_[u]&&a(_,u,f)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){var i=n(13);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports={}},function(e,t,n){var i=n(29)("keys"),r=n(19);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t,n){var i=n(9),r=n(3),o="__core-js_shared__",a=r[o]||(r[o]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n(16)?"pure":"global",copyright:" 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var i=n(7).f,r=n(5),o=n(12)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},function(e,t,n){t.f=n(12)},function(e,t,n){var i=n(3),r=n(9),o=n(16),a=n(32),s=n(7).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){(function(e){n(66),e.register("conf.channel.feed",function(e){var t=["forward","publish","comment","delete","refresh","reply","feedTagUpdate","feedTagMoreUpdate","qfaceAdd","qfaceCount","timeFeedPublish"];return e.lib.kit.extra.listener.define("conf.channel.feed",t)})}).call(t,n(0))},function(e,t,n){(function(e){n(2),e.register("conf.trans.publisher",function(e){var t=e.lib.kit.io.inter(),n=t.register;return n("publish",{url:"/p/aj/v6/mblog/add",method:"post",withDomain:!0}),n("publishDialog",{url:"/aj/mblog/add",method:"post"}),n("publishPro",{url:"/aj/mblog/add",method:"post"}),n("interactive",{url:"/aj/mblog/interactive",method:"post"}),n("timingPublish",{url:"/aj/v6/mblog/addtime",method:"post"}),n("getpublish",{url:"/p/aj/v6/publish",method:"get"}),n("reviewadd",{url:"/p/aj/review/add",method:"post"}),n("follow",{url:"/aj/f/followed",method:"post"}),n("proxy",{url:"/p/aj/proxy",method:"post"}),t})}).call(t,n(0))},function(e,t,n){(function(e){n(139),n(14),e.register("lib.kit.extra.getDiss",function(e){return function(){var t={},n=0,i={location:$CONFIG.location||""};return arguments[0]&&!e.core.dom.isNode(arguments[0])&&(t=arguments[n++]),t=e.lib.kit.extra.merge(t,i),arguments[n]?t=e.lib.kit.extra.merge(t,e.core.json.queryToJson(e.lib.kit.dom.parentAttr(arguments[n++],"diss-data",arguments[n])||"")):t}})}).call(t,n(0))},function(e,t,n){(function(e){n(118),n(119),n(123),n(124),n(127),n(14),n(134),n(104),n(136),e.register("lib.editor.base",function(e){var t,n=(e.lib.editor.service,e.lib.editor.plugin);return function(i,r){var o,a,s,l={};r=e.lib.kit.extra.merge({limitNum:140},r);var c=function(t){var n=e.fixEvent(t).target;if(e.contains(a.nodeList.more,n)||n==a.nodeList.more){u.showMenu();var i=e.lib.kit.dom.firstChild(a.nodeList.more);i&&e.addClassName(i,"W_arrow_turn")}else{u.hideMenu();var i=e.lib.kit.dom.firstChild(a.nodeList.more);i&&e.removeClassName(i,"W_arrow_turn")}},u={init:function(){u.build(),u.bind()},build:function(){a=e.lib.editor.editor(i,r),t=a.nodeList,s=n.at(a,r),void 0!==r.count&&"enable"!=r.count||n.count(a);var l=n.sucTip(a,r);n.score(a,r);o=n.morePlugin(a,r),s.init(),a.init(),l.init()},bind:function(){a.nodeList.more&&e.addEvent(document.body,"click",c)},showMenu:function(){o.show(a.nodeList.more)},hideMenu:function(){o.hide()},destroy:function(){a.destroy&&a.destroy(),s.destroy&&s.destroy(),o.destroy()},closeWidget:function(){}};return u.init(),l.editor=a,l.nodeList=t,l.destroy=u.destroy,l.closeWidget=u.closeWidget,l}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.dialog.loginLayer",function(e){var t;return function(n){if(n=e.core.obj.parseParam({lang:"zh-cn",loginSuccessUrl:encodeURIComponent(window.location.href),currentTab:""},n||{}),window.WBtopGlobal_loginLayer)WBtopGlobal_loginLayer(n);else{if(t)return;t=!0,e.core.io.scriptLoader({url:"//tjs.sjs.sinajs.cn/t5/register/js/page/remote/loginLayer.js",onComplete:function(){t=!1,window.WBtopGlobal_loginLayer(n)},timeout:1e4,onTimeout:function(){t=!1}})}}})}).call(t,n(0))},function(e,t,n){(function(e){n(128),e.register("lib.publisher.widget.face",function(e){var t=e.lib.face.face;return function(n,i){var r,o,a={};i=e.core.json.merge({t:0,l:-15,refer:n.nodeList.textEl,useAlign:!0,arrowOffset:2,clickToHide:!1},i||{});var s=function(e,t){var o=n.API.getCurrentLogType();n.API.addShortUrlLog(o),n.API.insertText(t.value),i.clickToHide&&r.getBub().hide()},l=function(){e.core.evt.preventDefault();var o;o=e.fixEvent(e.getEvent()).target,r=t(o,i),e.custEvent.add(r,"insert",s),e.custEvent.define(n,"close"),e.custEvent.add(n,"close",a.hide),e.custEvent.add(r,"hide",function(){e.custEvent.remove(r,"hide",arguments.callee),e.custEvent.remove(r,"insert",s),e.custEvent.remove(n,"close",a.hide)})};return a.init=function(t,i,r){n=t,o=i,e.addEvent(t.nodeList[o],"click",l)},a.show=l,a.hide=function(){r&&r.getBub().hide()},a.destroy=function(){n=null},a}})}).call(t,n(0))},function(e,t,n){"use strict";var i=n(16),r=n(25),o=n(44),a=n(10),s=n(27),l=n(76),c=n(31),u=n(83),d=n(12)("iterator"),f=!([].keys&&"next"in[].keys()),p="keys",m="values",h=function(){return this};e.exports=function(e,t,n,v,g,y,b){l(n,t,v);var _,w,x,k=function(e){if(!f&&e in C)return C[e];switch(e){case p:case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",T=g==m,S=!1,C=e.prototype,L=C[d]||C["@@iterator"]||g&&C[g],A=L||k(g),N=g?T?k("entries"):A:void 0,D="Array"==t?C.entries||L:L;if(D&&(x=u(D.call(new e)))!==Object.prototype&&x.next&&(c(x,E,!0),i||"function"==typeof x[d]||a(x,d,h)),T&&L&&L.name!==m&&(S=!0,A=function(){return L.call(this)}),i&&!b||!f&&!S&&C[d]||a(C,d,A),s[t]=A,s[E]=h,g)if(_={values:T?A:k(m),keys:y?A:k(p),entries:N},b)for(w in _)w in C||o(C,w,_[w]);else r(r.P+r.F*(f||S),t,_);return _}},function(e,t,n){e.exports=!n(8)&&!n(15)(function(){return 7!=Object.defineProperty(n(43)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(13),r=n(3).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){e.exports=n(10)},function(e,t,n){var i=n(17),r=n(77),o=n(30),a=n(28)("IE_PROTO"),s=function(){},l="prototype",c=function(){var e,t=n(43)("iframe"),i=o.length,r="<",a=">";for(t.style.display="none",n(82).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(r+"script"+a+"document.F=Object"+r+"/script"+a),e.close(),c=e.F;i--;)delete c[l][o[i]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[l]=i(e),n=new s,s[l]=null,n[a]=e):n=c(),void 0===t?n:r(n,t)}},function(e,t,n){var i=n(5),r=n(11),o=n(79)(!1),a=n(28)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),l=0,c=[];for(n in s)n!=a&&i(s,n)&&c.push(n);for(;t.length>l;)i(s,n=t[l++])&&(~o(c,n)||c.push(n));return c}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(46),r=n(30).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){(function(e){e.register("lib.kit.extra.keySubmit",function(e){function t(t){t=e.fixEvent(t);var n=e.core.dom.uniqueID(t.target);(13===t.keyCode||10===t.keyCode)&&(o&&t.metaKey||!o&&t.ctrlKey)&&r[n]&&e.foreach(r[n],function(e){e(t)})}function n(n,i){var o=e.core.dom.uniqueID(n);o in r?e.core.arr.inArray(i,r[o])||r[o].push(i):(r[o]=[i],e.addEvent(n,"keydown",t))}function i(n,i){var o=e.core.dom.uniqueID(n);if(o in r){var a=e.core.arr.indexOf(i,r[o]);a>=0&&r[o].splice(a,1),0==r[o].length&&(delete r[o],e.removeEvent(n,"keydown",t))}}var r={},o="macintosh"===e.core.util.browser.OS;return{on:n,off:i}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.extra.actionData",function(e){return function(t){return{set:function(n,i){if(e.isNode(t)){var r=e.queryToJson(t.getAttribute("action-data")||"")||{};r[n]=i,t.setAttribute("action-data",e.jsonToQuery(r))}},del:function(n){if(e.isNode(t)){var i=e.queryToJson(t.getAttribute("action-data")||"")||{};delete i[n],t.setAttribute("action-data",e.jsonToQuery(i))}},get:function(n){return e.isNode(t)?(e.queryToJson(t.getAttribute("action-data")||"")||{})[n]||"":""}}}})}).call(t,n(0))},function(e,t,n){(function(e){function t(e){return e&&e.__esModule?e:{default:e}}var i=n(22),r=t(i);n(14),n(1),n(138),n(56),n(4),e.register("lib.dialog.validateCode",function(e){var t,n=(window.$LANG,e.lib.kit.extra.language),i="/aj/pincode/pin?_wv=5&type=rule&lang="+$CONFIG.lang+"&ts=",o={dialog_html:'<div class="layer_point layer_verification"><div class="clearfix"><div class="v_img W_fl"><img height="25" width="250" class="yzm_img"/></div><div class="v_change W_fl"><a href="javascript:void(0);" class="yzm_change" action-type="yzm_change"><span class="W_ficon ficon_rotate S_ficon">e</span><span class="font S_txt1">#L{}</span></a></div></div><div class="v_text yzm_wng"><span class="v_text">#L{}</span><input type="text" class="yzm_input ontext W_input" action-type="yzm_input"/></div><div class="W_layer W_layer_pop yzm_error" style="display:none;top:70px;left:200px;"><div class="content layer_mini_info"><p class="main_txt"><i class="W_icon icon_rederrorS"></i><span class="txt S_txt1"></span><a class="W_ficon ficon_close S_ficon yzm_hideError">X</a></p><div class="W_layer_arrow"><span class="W_arrow_bor W_arrow_bor_b"><i class="S_line3"></i><em class="S_bg2_br"></em></span></div></div></div></div><div class="W_layer_btn S_bg1"><a class="W_btn_a btn_34px yzm_submit" href="javascript:void(0);" action-type="yzm_submit">#L{}</a><a class="W_btn_b btn_34px yzm_cancel" href="javascript:void(0);" action-type="yzm_cancel" action-data="value=frombtn">#L{}</a></div>'};return function(){if(t)return t;var a,s,l,c,u={},d={},f=function(){d.yzm_error.innerHTML="",d.yzm_error_layer.style.display="none",e.removeClassName(d.yzm_wng,"v_wrong")},p=function(t){d.yzm_error.innerHTML=t,d.yzm_error_layer.style.display="",e.addClassName(d.yzm_wng,"v_wrong")},m=function(){e.lib.kit.io.cssLoader("style/css/module/layer/layer_verifycode.css","js_style_css_module_layer_layer_verifycode",function(){a||h(),f(),a.setTop(),a.show(),b.changesrc(),a.setMiddle(),d.input_text.value="",e.hotKey.add(document.documentElement,["esc"],b.closeDialog,{type:"keyup",disableInInput:!0})})},h=function(){a=e.ui.dialog({isHold:!0}),a.setTitle(n("#L{}")),a.setContent(n(o.dialog_html)),a.on("hide",b.closeEvt);var t=a.getBox();y(t),_()},v=function(t){e.conf.trans.validateCode.request("checkValidate",{onError:function(){p(n("#L{}")),b.changesrc(),l=!1,d.input_text.value=""},onFail:function(){p(n("#L{}")),b.changesrc(),d.input_text.value="",l=!1},onSuccess:function(t,n){l=!1;var i=t.data.retcode;f(),d.input_text.value="",a.hide();var r=s.requestAjax,o=e.lib.kit.extra.merge(s.param,{retcode:i});r.request(o)}},t)},g=function(){},y=function(t){d.vImg=e.core.dom.sizzle("img.yzm_img",t)[0],d.yzm_change=e.core.dom.sizzle("a.yzm_change",t)[0],d.yzm_submit=e.core.dom.sizzle("a.yzm_submit",t)[0],d.yzm_cancel=e.core.dom.sizzle("a.yzm_cancel",t)[0],d.input_text=e.core.dom.sizzle("input.yzm_input",t)[0],d.yzm_wng=e.core.dom.sizzle("div.yzm_wng",t)[0],d.yzm_error=e.core.dom.sizzle("div.yzm_error span.txt",t)[0],d.yzm_error_layer=e.core.dom.sizzle("div.yzm_error",t)[0],d.yzm_hideError=e.core.dom.sizzle(".yzm_hideError",t)[0]},b={enter:function(){e.fireEvent(d.yzm_submit,"click")},changesrc:function(){var t=i+e.getUniqueKey();d.vImg.setAttribute("src",t);try{d.yzm_change.blur()}catch(e){}},checkValidateCode:function(){f();var t=e.core.str.trim(d.input_text.value);t?l||v({secode:t,type:"rule"}):p(n("#L{}"));try{d.yzm_submit.blur()}catch(e){}},closeEvt:function(){"object"==(void 0===s?"undefined":(0,r.default)(s))&&s.onRelease&&"function"==typeof s.onRelease&&s.onRelease(),e.hotKey.remove(document.documentElement,["esc"],b.closeDialog,{type:"keyup"})},closeDialog:function(t){"object"==(void 0===t?"undefined":(0,r.default)(t))&&t.el&&a.hide(),"object"==(void 0===s?"undefined":(0,r.default)(s))&&s.onRelease&&"function"==typeof s.onRelease&&s.onRelease(),e.hotKey.remove(document.documentElement,["esc"],b.closeDialog,{type:"keyup"});try{e.preventDefault()}catch(e){}},onFocus:function(t){t=e.core.evt.getEvent(),(t.target||t.srcElement).value||f()}},_=function(){var t=a.getBox();c=e.core.evt.delegatedEvent(t),c.add("yzm_change","click",function(){b.changesrc(),e.preventDefault()}),c.add("yzm_submit","click",function(){b.checkValidateCode(),e.preventDefault()}),c.add("yzm_cancel","click",b.closeDialog),e.core.evt.addEvent(d.yzm_hideError,"click",f),e.core.evt.addEvent(d.input_text,"focus",b.onFocus),e.core.evt.addEvent(d.input_text,"blur",b.onFocus),e.hotKey.add(d.input_text,["enter"],b.enter,{type:"keyup"})},w=function(){a&&(c.destroy(),e.core.evt.removeEvent(d.yzm_hideError,"click",f),e.core.evt.removeEvent(d.input_text,"focus",b.onFocus),e.core.evt.removeEvent(d.input_text,"blur",b.onFocus),a&&a.destroy&&a.destroy()),l=a=t=null},x=function(e,t,n){if("100027"==e.code)s=n,m();else if("100000"===e.code)try{var i=n.onSuccess;i&&i(e,t)}catch(e){}else try{var i=n.onError;i&&i(e,t)}catch(e){}};return g(),g=null,u.destroy=w,u.validateIntercept=x,u.addUnloadEvent=function(){a&&e.core.evt.addEvent(window,"unload",w)},t=u,u}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.dom.parentElementBy",function(e){return function(e,t,n){if(!e||!t)throw new Error("");var i,r=0;for(e=e.parentNode;e&&e.parentNode;){if(r++,!1===(i=n(e)))return!1;if(!0===i)return e;if(i===t)return null;if(e=e.parentNode,r>3e4)return!1}return null}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.extra.asyncThrottle",function(e){return function(e,t,n){t|=0,t=t||300;var i=0;return function(){if(!i){var r=arguments;i=setTimeout(function(){e.apply(n,r),i=0},t)}}}})}).call(t,n(0))},function(e,t,n){(function(t){!function(t){var n={},i=function(e){return n[e]},r=function(e){if(!n[e]){var o={exports:{}};t[e].call(o.exports,o,o.exports,r,i),n[e]=o.exports}return n[e]};e.exports=r("/ui")}({"/ui":function(e,n,i,r){function o(e,t){function n(e){var t=l.tipAlert(e.msg).on("hide",e.hideCallback);return{setLayerXY:function(e){return t.beside(e)},aniShow:function(){},aniHide:function(){},destroy:function(){}}}function i(e){var t=l.tipConfirm(e.msg).on("hide",e.hideCallback).ok(e.okCallback).cancel(e.cancelCallback);return{setLayerXY:function(e){return t.beside(e)},aniShow:function(){},aniHide:function(){},destroy:function(){}}}function r(e){return l.notice(e.msg).on("hide",e.hideCallback)}switch(e){case"alert":return n(t);case"confirm":return i(t);case"lite":return r(t)}}var a=i("/css"),s=i("/helpers/toFunction"),l={mlayer:s(i("/Class_mlayer"),"mlayer"),layer:s(i("/Class_layer"),"layer"),dialog:s(i("/Class_dialog"),"dialog"),alert:s(i("/Class_alert"),"alert"),confirm:s(i("/Class_confirm"),"confirm"),notice:s(i("/Class_notice"),"notice"),bubble:s(i("/Class_bubble"),"bubble"),card:s(i("/Class_card"),"card"),tipAlert:s(i("/Class_tipAlert"),"tipAlert"),tipConfirm:s(i("/Class_tipConfirm"),"tipConfirm"),mask:i("/mask"),scrollView:i("/Widget_scrollView"),badge:i("/Widget_badge"),suggest:i("/Widget_suggest"),effect:a.effect};l.focusHistory=i("/core/utils/focusHistory"),l.mod={layer:l.mlayer,suggest:i("/core/utils/suggest"),tab:i("/core/utils/tab")},l.tip=o,l.slider=i("/core/utils/slider"),l.calendar=i("/calendar"),"object"==typeof t?t&&t.register("ui",function(){return l}):window.UI=l,e.exports=l},"/css":function(e,t,n,i){function r(e){return"number"==typeof e?e:{fast:200,normal:500,slow:1e3}[e]||500}function o(){var e,t=d("div"),n=d("div");return t.style.cssText="width:50px;overflow:auto;height:50px;position:absolute;top:-100px;",n.style.cssText="height:100px;",document.body.insertBefore(t,document.body.firstChild).appendChild(n),e=t.offsetWidth-n.offsetWidth,f(t),t=n=null,o=function(){return e},e}function a(){var e=document.body.style;return void 0!==e.WebkitAnimation?"-webkit-":void 0!==e.webkitAnimation?"-webkit-":void 0!==e.MozAnimation?"-moz-":void 0!==e.OAnimation?"-o-":void 0!==e.msAnimation?"-ms-":void 0!==e.animation&&""}function s(e,t,n){e.insertRule?e.insertRule(t+" {"+n+"}",0):e.addRule(t,n,1)}function l(e,t,n,i,o){function a(t){p(e,k,a),clearTimeout(s),g(l,function(t){v(e,t)}),i&&i()}var s,l,o="boolean"==typeof arguments[arguments.length-1]&&arguments[arguments.length-1];if("function"==typeof n&&(i=n,n=void 0),!w)return void y(function(){i&&i()});n=n||"normal",t=t||"shake",l=["UI_animated","UI_speed_"+n,"UI_ani_"+t],m(e,k,a),s=setTimeout(a,r(n)+100),!0===o?y(function(){g(l,function(t){h(e,t)})}):g(l,function(t){h(e,t)})}var c=n("/$")[0],u=n("/$")[1],d=c.C,f=c.removeNode,p=c.removeEvent,m=c.addEvent,h=c.addClassName,v=c.removeClassName,g=c.foreach,y=u.setImmediate,b={".UI_frame":"position:fixed;top:0;left:0;right:0;bottom:0;overflow-y:scroll;-webkit-overflow-scrolling: touch;",".UI_freezed":"overflow-y:hidden;",".UI_freezed .WB_miniblog":"overflow-y:scroll;",".UI_autoHeight .UI_autoHeightCtnt":"overflow:hidden;height:0;",".UI_autoHeight.UI_autoHeight_animated":"-v-transition:top 0.2s ease",".UI_autoHeight.UI_autoHeight_animated .UI_autoResizeCtnt":"-v-transition:height 0.2s ease",".UI_autoHeight.UI_autoHeightCtnt":"overflow:hidden;height:0;",".UI_autoHeight.UI_autoHeight_animated.UI_autoResizeCtnt":"-v-transition:height 0.2s ease, top 0.2s ease",".UI_scrolling":"-v-user-select:none",".UI_scrollView .UI_scrollContainer":"overflow:hidden;width:100%;height:100%;position:relative;_background:url(about:blank);",".UI_scrollView .UI_scrollContent":"position:relative;height:100%;width:100%;overflow-y:scroll;overflow-x:hidden;-webkit-overflow-scrolling:touch;margin-right:-30px;padding-right:30px;",".UI_badge":"display:inline-block;vertical-align:middle;overflow:hidden;",".UI_animated":"-v-animation-fill-mode: both;",".UI_animated.UI_speed_normal":"-v-animation-duration:  0.5s;",".UI_animated.UI_speed_fast":"-v-animation-duration:  0.2s;",".UI_animated.UI_speed_slow":"-v-animation-duration:  1s;"},_=document.getElementsByTagName("head")[0].appendChild(d("style"));_=_.sheet?_.sheet:_.styleSheet;var w=a(),x=/\-v\-/g,k={"-webkit-":"webkitAnimationEnd","-moz-":"animationend","-o-":"OAnimationEnd","-ms-":"msAnimationEnd","":"animationend"}[w],E={"-webkit-":"webkitTransitionEnd","-moz-":"transitionend","-o-":"OTransitionEnd","-ms-":"msTransitionEnd","":"transitionend"}[w];for(var T in b)s(_,T,b[T].replace(x,w||""));t.transitionend=E,t.animationend=k,t.effectSuport=!!w,t.effect=l,t.scrollWidth=o},"/$":function(e,n,i,r){e.exports=[r("/core/theia")||t,i("/core/utils/index")]},"/core/utils/index":function(e,t,n,i){e.exports={count:n("/core/utils/count"),cssText:n("/core/utils/cssText"),drag:n("/core/utils/drag"),extend:n("/core/utils/extend"),fix:n("/core/utils/fix"),language:n("/core/utils/language"),layoutPos:n("/core/utils/layoutPos"),merge:n("/core/utils/merge"),parseDOM:n("/core/utils/parseDOM"),proxy:n("/core/utils/proxy"),rects:n("/core/utils/rects"),smartInput:n("/core/utils/smartInput"),textareaUtils:n("/core/utils/textareaUtils"),textSelection:n("/core/utils/textSelection"),setImmediate:n("/core/utils/setImmediate")}},"/core/utils/count":function(e,n,i,r){function o(e){for(var t=41,n=140,i=20,r=e,o=e.match(/http:\/\/[a-zA-Z0-9]+(\.[a-zA-Z0-9]+)+([-A-Z0-9a-z_\$\.\+\!\*\(\)\/,:;@&=\?\~\#\%]*)*/gi)||[],s=0,l=0,c=o.length;l<c;l++){var u=a.core.str.bLength(o[l]);/^(http:\/\/t.cn)/.test(o[l])||(/^(http:\/\/)+(t.sina.com.cn|t.sina.cn)/.test(o[l])||/^(http:\/\/)+(weibo.com|weibo.cn)/.test(o[l])?s+=u<=t?u:u<=n?i:u-n+i:s+=u<=n?i:u-n+i,r=r.replace(o[l],""))}return Math.ceil((s+a.core.str.bLength(r))/2)}var a=r("/core/theia")||t;e.exports=function(e){return e=e.replace(/\r\n/g,"\n"),o(e)}},"/core/utils/cssText":function(e,t,n,i){var r=(i("/core/theia"),function(e,t){for(var n,i=(e+";"+t).replace(/(\s*(;)\s*)|(\s*(:)\s*)/g,"$2$4");i&&(n=i.match(/(^|;)([\w\-]+:)([^;]*);(.*;)?\2/i));)i=i.replace(n[1]+n[2]+n[3],"");return i});e.exports=function(e){e=e||"";var t=[],n={push:function(e,i){return t.push(e+":"+i),n},remove:function(e){for(var i=0;i<t.length;i++)0==t[i].indexOf(e+":")&&t.splice(i,1);return n},getStyleList:function(){return t.slice()},getCss:function(){return r(e,t.join(";"))}};return n}},"/core/utils/drag":function(e,n,i,r){var o=r("/core/theia")||t;e.exports=function(e,t){var n,i,r,a,s,l,c,u,d=function(){f(),p()},f=function(){n=o.parseParam({moveDom:e,perchStyle:"border:solid #999999 2px;",dragtype:null,actObj:{},pagePadding:[5,5,5,5]},t),r=n.moveDom,i={},a={},s=o.drag(e,{actObj:n.actObj}),"perch"===n.dragtype&&(l=o.C("div"),c=!1,u=!1,r=l),e.style.cursor="move"},p=function(){o.custEvent.add(n.actObj,"dragStart",m),o.custEvent.add(n.actObj,"dragEnd",h),o.custEvent.add(n.actObj,"draging",v)},m=function(t,i){document.body.style.cursor="move";var r=o.core.util.pageSize().page;if(a=o.core.dom.position(n.moveDom),a.pageX=i.pageX,a.pageY=i.pageY,a.height=n.moveDom.offsetHeight,a.width=n.moveDom.offsetWidth,a.pageHeight=r.height,a.pageWidth=r.width,"perch"===n.dragtype){var s=[];s.push(n.perchStyle),s.push("position:absolute"),s.push("z-index:"+(n.moveDom.style.zIndex+10)),s.push("width:"+n.moveDom.offsetWidth+"px"),s.push("height:"+n.moveDom.offsetHeight+"px"),s.push("left:"+a.l+"px"),s.push("top:"+a.t+"px"),l.style.cssText=s.join(";"),u=!0,setTimeout(function(){u&&(document.body.appendChild(l),c=!0)},100)}void 0!==e.setCapture&&e.setCapture()},h=function(t,i){document.body.style.cursor="auto",void 0!==e.setCapture&&e.releaseCapture(),"perch"===n.dragtype&&(u=!1,n.moveDom.style.top=l.style.top,n.moveDom.style.left=l.style.left,c&&(document.body.removeChild(l),c=!1))},v=function(e,t){var i=a.t+(t.pageY-a.pageY),o=a.l+(t.pageX-a.pageX),s=i+a.height,l=o+a.width,c=a.pageHeight-n.pagePadding[2],u=a.pageWidth-n.pagePadding[1];if(s<c&&i>0)r.style.top=i+"px";else{var d;s>=c&&(d=c-a.height),(i<0+n.pagePadding[3]||d<0+n.pagePadding[3])&&(d=n.pagePadding[3]),r.style.top=d+"px"}if(l<u&&o>0)r.style.left=o+"px";else{var f;l>=u&&(f=u-a.width),(o<0+n.pagePadding[0]||f<0+n.pagePadding[0])&&(f=n.pagePadding[0]),r.style.left=f+"px"}};return d(),i.destroy=function(){document.body.style.cursor="auto","function"==typeof r.setCapture&&r.releaseCapture(),"perch"===n.dragtype&&(u=!1,c&&(document.body.removeChild(l),c=!1)),o.custEvent.remove(n.actObj,"dragStart",m),o.custEvent.remove(n.actObj,"dragEnd",h),o.custEvent.remove(n.actObj,"draging",v),s.destroy&&s.destroy(),n=null,r=null,a=null,s=null,l=null,c=null,u=null},i.getActObj=function(){return n.actObj},i}},"/core/utils/extend":function(e,t,n,i){function r(e){for(var t,n=arguments.length,i=1;i<n;){t=arguments[i++];for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}return e}e.exports=r},"/core/utils/fix":function(e,n,i,r){function o(e){return"none"!=l.core.dom.getStyle(e,"display")}function a(e){e=l.core.arr.isArray(e)?e:[0,0];for(var t=0;t<2;t++)"number"!=typeof e[t]&&(e[t]=0);return e}function s(e,t,n){if(o(e)){var i,r,a,s,u="fixed",d=e.offsetWidth,f=e.offsetHeight,p=l.core.util.winSize(),m=0,h=0,v=l.core.dom.cssText(e.style.cssText);if(c)switch(i=s=n[1],r=a=n[0],t){case"lt":s=a="";break;case"lb":i=a="";break;case"rt":r=s="";break;case"rb":i=r="";break;case"c":default:i=(p.height-f)/2+n[1],r=(p.width-d)/2+n[0],s=a=""}else{u="absolute";var g=l.core.util.scrollPos();switch(m=i=g.top,h=r=g.left,t){case"lt":i+=n[1],r+=n[0];break;case"lb":i+=p.height-f-n[1],r+=n[0];break;case"rt":i+=n[1],r+=p.width-d-n[0];break;case"rb":i+=p.height-f-n[1],r+=p.width-d-n[0];break;case"c":default:i+=(p.height-f)/2+n[1],r+=(p.width-d)/2+n[0]}a=s=""}"c"==t&&(i<m&&(i=m),r<h&&(r=h)),v.push("position",u).push("top",i+"px").push("left",r+"px").push("right",a+"px").push("bottom",s+"px"),e.style.cssText=v.getCss()}}var l=r("/core/theia")||t,c=!(l.core.util.browser.IE6||"CSS1Compat"!==document.compatMode&&l.IE),u=/^(c)|(lt)|(lb)|(rt)|(rb)$/;e.exports=function(e,t,n){function i(t){t=t||window.event,l.core.evt.custEvent.fire(d,"beforeFix",t.type),!f||c&&"c"!=r||s(e,r,o)}var r,o,d,f=!0;if(l.core.dom.isNode(e)&&u.test(t)){var p={getNode:function(){return e},isFixed:function(){return f},setFixed:function(t){return(f=!!t)&&s(e,r,o),this},setAlign:function(t,n){return u.test(t)&&(r=t,o=a(n),f&&s(e,r,o)),this},destroy:function(){c||c&&l.core.evt.removeEvent(window,"scroll",i),l.core.evt.removeEvent(window,"resize",i),l.core.evt.custEvent.undefine(d)}};return d=l.core.evt.custEvent.define(p,"beforeFix"),p.setAlign(t,n),c||l.core.evt.addEvent(window,"scroll",i),l.core.evt.addEvent(window,"resize",i),p}}},"/core/utils/language":function(e,n,i,r){var o=r("/core/theia")||t;window.$LANG||(window.$LANG={}),e.exports=function(e){var t=[].splice.call(arguments,1,arguments.length),n=[e,$LANG].concat(t);return o.core.util.language.apply(this,n)}},"/core/utils/layoutPos":function(e,n,i,r){var o=r("/core/theia")||t;e.exports=function(e,t,n){if(!o.isNode(t))throw"kit.dom.layerOutElement need element as first parameter";if(t===document.body)return!1;if(!t.parentNode)return!1;if("none"===t.style.display)return!1;var i,r,a,s,l,c,u;if(i=o.parseParam({pos:"left-bottom",offsetX:0,offsetY:0,appendTo:void 0},n),i.appendTo&&(c=o.getStyle(i.appendTo,"position"),i.appendTo===document.body||"absolute"===c||"fixed"===c||"relative"===c||(i.appendTo=void 0)),i.appendTo)r=i.appendTo,r.appendChild(e);else{if(!(r=t))return!1;for(;r!==document.body;){if(r=r.parentNode,"none"===r.style.display)return!1;if(c=o.getStyle(r,"position"),u=r.getAttribute("layout-shell"),"absolute"===c||"fixed"===c){if("false"===u)continue;break}if("true"===u&&"relative"===c)break}r.appendChild(e)}return a=o.position(t,{parent:r}),s={w:t.offsetWidth,h:t.offsetHeight},l=i.pos.split("-"),"left"===l[0]?e.style.left=a.l+i.offsetX+"px":"right"===l[0]?e.style.left=a.l+s.w+i.offsetX+"px":"center"===l[0]&&(e.style.left=a.l+s.w/2+i.offsetX+"px"),"top"===l[1]?e.style.top=a.t+i.offsetY+"px":"bottom"===l[1]?e.style.top=a.t+s.h+i.offsetY+"px":"middle"===l[1]&&(e.style.top=a.t+s.h/2+i.offsetY+"px"),!0}},"/core/utils/merge":function(e,t,n,i){e.exports=function(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n}},"/core/utils/parseDOM":function(e,t,n,i){e.exports=function(e){for(var t in e)e[t]&&1==e[t].length&&(e[t]=e[t][0]);return e}},"/core/utils/proxy":function(e,t,n,i){function r(e,t){var n=[].slice.call(arguments,2);return function(){return e.apply(t,[].slice.call(arguments).concat(n))}}e.exports=r},"/core/utils/rects":function(e,n,i,r){var o=r("/core/theia")||t,a=o.core.util.browser,s={},l=5,c=20,u={t:function(e,t){return e.t>t.h},b:function(e,t){return e.b>t.h},l:function(e,t){return e.l>t.w},r:function(e,t){return e.r>t.w}},d={domSize:function(e){var t=o.core.dom.getSize(e);return{w:Math.max(t.width,o.getStyle(e,"width").replace(/px|auto/gi,"")),h:Math.max(t.height,o.getStyle(e,"height").replace(/px|auto/gi,""))}},mouseXY:function(e){var t={x:e.pageX,y:e.pageY};if(a.IE6||a.IE7){var n=o.core.util.scrollPos();t.x=t.x+n.left,t.y=t.y+n.top}return t},getRows:function(e){var t=e.getClientRects();if(a.IE6||a.IE7){for(var n=[],i={},r=0,o=t.length;r<o;r++){var s=t[r];i[s.top]||(i[s.top]=[]),i[s.top].push(s)}for(var l in i){var c=i[l],o=c.length,u=c[0];o>1&&(u.right=c[o-1].right),n.push(u)}t=n}return t},getTextRect:function(e,t){var n,i=o.parseParam({evt:""},t),r=o.core.util.scrollPos();if(e.getClientRects){for(var a={rows:d.getRows(e)},s=d.mouseXY(i.evt),l={x:s.x-r.left,y:s.y-r.top},c=0,u=a.rows.length;c<u;c++){var f=a.rows[c];if(0==c&&(n=f),l.y>f.top&&l.y<f.bottom){n=f;break}}if(o.IE){var p=d.domSize(e);n=o.parseParam({width:p.w,height:p.h,left:"",right:"",top:"",bottom:""},n)}return n}var p=d.domSize(e);return{width:p.w,height:p.h,left:"",right:"",top:"",bottom:""}},getDistance:function(e,t){var n=o.core.util.winSize(),i=d.getTextRect(e,t);return{win:n,rect:i,w:i.width,h:i.height,t:i.top,l:i.left,r:n.width-i.right,b:n.height-i.bottom}},getSeat:function(e,t,n){var i=o.parseParam({distance:c,priority:"trbl"},n),r=d.getDistance(e,n),a=d.domSize(t);r.area="b";for(var s=i.priority.split(""),l=0,f=s.length;l<f;l++){var p=s[l];if(!u[p])throw'priority error, random use "tbrl" combination';if(u[p](r,a)){r.area=p;break}}return r},setArrow:function(e){var t=o.parseParam({evt:"",node:"",layer:"",arrow:"",priority:"trbl",css_t:"W_arrow_bor W_arrow_bor_b",css_r:"W_arrow_bor W_arrow_bor_l",css_b:"W_arrow_bor W_arrow_bor_t",css_l:"W_arrow_bor W_arrow_bor_r",offset:l,distance:0},e);if(!t.node)throw"target node is undefined";if(!t.layer)throw"layer node is undefined";if(!t.arrow)throw"arrow node is undefined";var n=d.getSeat(t.node,t.layer,t),i=n.area,r=n.rect;t.arrow.className=t["css_"+i],t.arrow.style.cssText="";var a=d.domSize(t.layer),s=o.winSize().width,c=o.winSize().height,u=o.scrollPos();window.navigator.userAgent.indexOf("iPad")>-1&&window.navigator.userAgent.indexOf("Version/7.0")>-1&&(u.top=0);var f,p,m,h,v=5,g=16,y=0;return"t"!=i&&"b"!=i||(t.distance+=(r.right-r.left)/2,r.left<s/3?y=(.5-1/3)*a.w:r.left>s/3*2&&(y=(.5-2/3)*a.w),f=r.left+t.distance+a.w/2+y>s-2*v?u.left+s-v-a.w:r.left+t.distance-a.w/2+y<v?u.left+v:u.left+r.left+t.distance-a.w/2+y,"t"==i?p=r.top+u.top-t.offset-a.h:"b"==i&&(p=r.bottom+u.top+t.offset),m=r.left+u.left+t.distance-f-g/2),"l"!=i&&"r"!=i||(r.left<s/2?(i="r",t.arrow.className=t["css_"+i]):r.left>s/2&&(i="l",t.arrow.className=t["css_"+i]),t.distance+=(r.bottom-r.top)/2,r.top<c/3?y=(.5-1/3)*a.h:r.top>c/3*2&&(y=(.5-2/3)*a.h),p=r.top+t.distance+a.h/2+y>c-2*v?u.top+c-v-a.h:r.top+t.distance-a.h/2+y<v?u.top+v:r.top+u.top+t.distance-a.h/2+y,"l"==i?f=r.left+u.left-t.offset-a.w:"r"==i&&(f=r.right+u.left+t.offset),h=r.top+u.top+t.distance-p-g/2),t.layer.style.left=f+"px",t.layer.style.top=p+"px",void 0!=m?(m<10&&(m=10),m>a.w-g-10&&(m=a.w-g-10),t.arrow.style.left=m+"px"):void 0!=h&&(h<0&&(h=0),h>a.h&&(h=a.h),t.arrow.style.top=h+"px"),i},setLayer:function(e){var t=o.parseParam({evt:"",node:"",layer:"",priority:"btrl",offsetX:0,offsetY:0},e);if(!t.node)throw"target node is undefined";if(!t.layer)throw"layer node is undefined";var n,i,r,a=d.getSeat(t.node,t.layer,t),s=a.area,l=a.rect,c=d.domSize(t.layer),u=o.scrollPos(),f=o.winSize().width,p=c.w;return"t"==s||"b"==s?(n="t"==s?l.top+u.top-c.h+t.offsetY:l.bottom+u.top-t.offsetY,i=l.left+u.left+t.offsetX,(r=l.right+u.left-p+t.distance)>0&&i+p>f+u.left&&(i=r)):(n=l.top+u.top+t.offsetY,i="r"==s?l.right+u.left-t.offsetX:l.left+u.left-c.w+t.offsetX),t.layer.style.top=n+"px",t.layer.style.left=i+"px",s}};s.getTextRect=d.getTextRect,s.getDistance=d.getDistance,s.getSeat=d.getSeat,s.setArrow=d.setArrow,s.setLayer=d.setLayer,e.exports=s},"/core/utils/smartInput":function(e,n,i,r){var o=r("/core/theia")||t,a=i("/core/utils/textSelection");e.exports=function(e,t){var n,i,r,s,l,c,u,d,f,p,m,h,v,g,y="stop";return n=o.parseParam({notice:"",currentClass:null,noticeClass:null,noticeStyle:null,maxLength:null,needLazyInput:!1,LazyInputDelay:200},t),i=o.cascadeNode(e),l=a(e),o.custEvent.define(i,"enter"),o.custEvent.define(i,"ctrlEnter"),o.custEvent.define(i,"lazyInput"),r=function(){n.maxLength&&o.bLength(e.value)>n.maxLength&&(e.value=o.leftB(e.value,n.maxLength))},m=function(){e.value===n.notice&&(e.value="",null!=n.noticeClass&&o.removeClassName(e,n.noticeClass)),null!=n.currentClass&&o.addClassName(e.parentNode,n.currentClass)},h=function(){""===e.value&&(e.value=n.notice,null!=n.noticeClass&&o.addClassName(e,n.noticeClass)),null!=n.currentClass&&o.removeClassName(e.parentNode,n.currentClass)},s=function(){return r(),e.value===n.notice?"":e.value},v=function(e){13===e.keyCode&&o.custEvent.fire(i,"enter",s())},g=function(e){13!==e.keyCode&&10!==e.keyCode||!e.ctrlKey||o.custEvent.fire(i,"ctrlEnter",s())},c=function(){"stop"===y&&(f=setInterval(d,n.LazyInputDelay),y="sleep")},u=function(){clearInterval(f),y="stop"},d=function(){p===e.value?"weakup"===y?(o.custEvent.fire(i,"lazyInput",e.value),y="sleep"):"waiting"===y&&(y="weakup"):y="waiting",p=e.value},n.needLazyInput&&(o.addEvent(e,"focus",c),o.addEvent(e,"blur",u)),o.addEvent(e,"focus",m),o.addEvent(e,"blur",h),o.addEvent(e,"keyup",r),o.addEvent(e,"keydown",v),o.addEvent(e,"keydown",g),i.getValue=s,i.setValue=function(t){return e.value=t,r(),i},i.setNotice=function(e){return n.notice=e,i},i.setNoticeClass=function(e){return n.noticeClass=e,i},i.setNoticeStyle=function(e){return n.noticeStyle=e,i},i.setMaxLength=function(e){return n.maxLength=e,i},i.restart=function(){h()},i.startLazyInput=c,i.stopLazyInput=u,i.setCursor=l.setCursor,i.getCursor=l.getCursor,i.insertCursor=l.insertCursor,i.insertText=l.insertText,i.destroy=function(){n.needLazyInput&&(o.removeEvent(e,"focus",m),o.removeEvent(e,"blur",h)),u(),o.removeEvent(e,"focus",m),o.removeEvent(e,"blur",h),o.removeEvent(e,"keyup",r),o.removeEvent(e,"keydown",v),o.removeEvent(e,"keydown",g),o.custEvent.undefine(i,"enter"),o.custEvent.undefine(i,"ctrlEnter"),o.custEvent.undefine(i,"lazyInput"),l.destroy(),i=null},i}},"/core/utils/textSelection":function(e,n,i,r){var o=r("/core/theia")||t;e.exports=function(e,t){var n;n={},o.parseParam({},t);var i=function(t){return o.core.dom.selectText(e,t)},r=function(){e.__areaQuery=o.jsonToQuery(o.core.dom.textSelectArea(e))},a=function(){e.__areaQuery=!1};o.addEvent(e,"beforedeactivate",r),o.addEvent(e,"active",a);var s=function(){var t=null;try{t=o.core.dom.textSelectArea(e)}catch(n){t=o.queryToJson(e.__areaQuery)}return 0===t.start&&0===t.len&&e.__areaQuery&&(t=o.queryToJson(e.__areaQuery)),t.start=parseInt(t.start,10),t.len=parseInt(t.len,10),t},l=function(t,n){var i=e.value,r=n.start,o=n.len||0,a=i.slice(0,r),s=i.slice(r+o,i.length);e.value=a+t+s,i=null,a=null,s=null;var r=null,o=null};return n.setCursor=function(e){i(e)},n.getCursor=function(){return s()},n.insertCursor=function(e){var t=s();l(e,t),t.len=e.length,i(t)},n.TempletCursor=function(t){var n,r,a;n=s(),r=n.len>0?e.value.substr(n.start,n.len):"",a=o.templet(t,{origin:r}),l(a,n),n.start=n.start+t.indexOf("#{origin"),n.len=a.length-t.replace(/#\{[origin].+?\}/,"").length,i(n)},n.insertText=l,n.destroy=function(){o.removeEvent(e,"beforedeactivate",r),o.removeEvent(e,"active",a),e=null},n}},"/core/utils/textareaUtils":function(e,n,i,r){var o=r("/core/theia")||t,a={},s=document.selection;a.selectionStart=function(e){if(!s)try{return e.selectionStart}catch(e){return 0}var t=s.createRange(),n=0,i=document.body.createTextRange();try{i.moveToElementText(e)}catch(e){}for(n;i.compareEndPoints("StartToStart",t)<0;n++)i.moveStart("character",1);return n},a.selectionBefore=function(e){return e.value.slice(0,a.selectionStart(e))},a.selectText=function(e,t,n){if(e.focus(),!s)return void e.setSelectionRange(t,n);var i=e.createTextRange();i.collapse(1),i.moveStart("character",t),i.moveEnd("character",n-t),i.select()},a.insertText=function(e,t,n,i){if(e.focus(),i=i||0,!s){var r=e.value,o=n-i,l=o+t.length;return e.value=r.slice(0,o)+t+r.slice(n,r.length),void a.selectText(e,l,l)}var c=s.createRange();c.moveStart("character",-i),c.text=t},a.replaceText=function(e,t){e.focus();var n=e.value,i=a.getSelectedText(e),r=i.length;if(0==i.length)a.insertText(e,t,a.getCursorPos(e));else{var o=a.getCursorPos(e);if(!s){i.length;return e.value=n.slice(0,o)+t+n.slice(o+r,n.length),void a.setCursor(e,o+t.length)}s.createRange().text=t,a.setCursor(e,o+t.length)}},a.getCursorPos=function(e){var t=0;if(o.core.util.browser.IE){e.focus();var n=null;n=s.createRange();var i=n.duplicate();i.moveToElementText(e),i.setEndPoint("EndToEnd",n),e.selectionStartIE=i.text.length-n.text.length,e.selectionEndIE=e.selectionStartIE+n.text.length,t=e.selectionStartIE}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t},a.getSelectedText=function(e){var t=function(e){return void 0!=e.selectionStart&&void 0!=e.selectionEnd?e.value.substring(e.selectionStart,e.selectionEnd):""};return window.getSelection?t(e):s.createRange().text},a.setCursor=function(e,t,n){if(t=null==t?e.value.length:t,n=null==n?0:n,e.focus(),e.createTextRange){var i=e.createTextRange();i.move("character",t),i.moveEnd("character",n),i.select()}else e.setSelectionRange(t,t+n)},a.unCoverInsertText=function(e,t,n){n=null==n?{}:n,n.rcs=null==n.rcs?e.value.length:1*n.rcs,n.rccl=null==n.rccl?0:1*n.rccl;var i=e.value,r=i.slice(0,n.rcs),o=i.slice(n.rcs+n.rccl,""==i?0:i.length);e.value=r+t+o,this.setCursor(e,n.rcs+(null==t?0:t.length))},e.exports=a},"/core/utils/setImmediate":function(e,n,i,r){var o=r("/core/theia")||t,a=function(){return window.setImmediate?window.setImmediate:"onreadystatechange"in document.createElement("script")?function(e){function t(){n.onreadystatechange=null,o.removeNode(n),e()}var n=document.createElement("script");n.onreadystatechange=t,document.documentElement.appendChild(n)}:window.postMessage?function(e){function t(i){i.data===n&&(window.removeEventListener("message",t,!0),e())}var n="UI_setImmediate_"+o.getUniqueKey();window.addEventListener("message",t,!0),window.postMessage(n,"*")}:window.setTimeout}();e.exports=a},"/helpers/toFunction":function(e,t,n,i){function r(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function o(e,t,n){return n=n||{},r(t)===m?l(n,n):"alert"===e||"confirm"===e||"notice"===e||"tipAlert"===e||"tipConfirm"===e?r(t)===p?l(n,t):(n.notice=t,n):r(t)===f&&(t=c(t))&&0!==t.indexOf("<")?(n.id=t,n.node=u(t),n):r(t)===f&&(t=c(t))&&0===t.indexOf("<")?(n.template=t,n):d(t)?(n.node=t,n):r(t)!==p||d(t)?n:l(n,t)}function a(e,t){function n(n,i){return new e(o(t,n,i))}return n.constructor=e,n}var s=n("/$")[0],l=(n("/$")[1],s.core.json.merge),c=s.trim,u=s.E,d=s.isNode,f="string",p="object",m="undefined";e.exports=a},"/Class_mlayer":function(e,t,n,i){function r(e,t){e.style.top=t.top+"px",e.style.left=t.left+"px"}function o(e){var t=document.createDocumentFragment();return t.appendChild(e),{node:e,nodes:f(D(t).list)}}function a(e){var t=D(p(e));return{node:N(t.box),nodes:f(t.list)}}var s=n("/$")[0],l=n("/$")[1],c=n("/templates/layer.html"),u=n("/css"),d=l.layoutPos,f=l.parseDOM,p=l.language,m=l.fix,h=l.drag,v=l.extend,g=l.proxy,y=l.setImmediate,b=s.addEvent,_=s.removeEvent,w=s.stopEvent,x=s.fixEvent,k=s.addClassName,E=s.removeClassName,T=s.custEvent,S=s.core.json.merge,C=s.core.dom.position,L=s.core.dom.getSize,A=s.core.dom.setXY,N=s.core.dom.firstChild,D=s.builder,I=s.removeNode,M=s.contains,W=s.core.util.winSize,j=s.core.util.scrollPos,F=s.delegatedEvent,B=s.isNode,z="string",O="node-type",H=n("/Class_base").extend({init:function(e){H.__super__.init.apply(this,arguments),T.define(this,["show","shown","beforeShow","hide","hidden","beforeHide"]);var t=this._;if(t.node?v(t,o(t.node)):v(t,a(t.template)),t.node.id=t.id,t.dEvent=F(t.node),t.draggable){var n=!0===t.draggable?t.node:this.getDomList(!0)[t.draggable];n&&(t.drag=h(n,{actObj:t.node,moveDom:t.node,pagePadding:t.draggPadding}))}t.stopClickPropagation&&(t.proxyStopClickPropagation=function(e){w(e)},b(t.node,"click",t.proxyStopClickPropagation)),t.proxyClickBlankToHide=g(function(e){e=x(e);try{t.node==e.target||M(t.node,e.target)||this.hide()}catch(e){}},this),t.heightWithAni&&(k(t.node,"UI_autoHeight"),k(this.getDomList(!0).autoHeight||t.node,"UI_autoHeightCtnt"))},startBoxClose:function(){var e=this._;e.clickBlankToHide=!0,this.getState()&&(_(document,"click",e.proxyClickBlankToHide),b(document,"click",e.proxyClickBlankToHide))},stopBoxClose:function(){var e=this._;e.clickBlankToHide=!1,_(document,"click",e.proxyClickBlankToHide)},on:function(e,t,n){return arguments.length>2?this._.dEvent.add(e,t,n):H.__super__.on.apply(this,arguments),this},off:function(e,t,n){return arguments.length>2?this._.dEvent.remove(e,t,n):H.__super__.off.apply(this,arguments),this},trigger:function(e,t,n){return B(e)?this._.dEvent.fireDom(e,t,n):H.__super__.trigger.apply(this,arguments),this},dEvent:function(){return this._.dEvent},autoHeight:function(e){function t(){_(i,u.transitionend,t),_(r,u.transitionend,t),clearTimeout(s),E(i,"UI_autoHeight_animated"),E(r,"UI_autoHeight_animated")}if(this._.heightWithAni){var n,i=this._.node,r=this.getDomList(!0).autoHeight||i,o=r.offsetHeight;r.style.height="auto",n=r.offsetHeight,r.style.height="auto",r.style.height=o+"px";var a,s;switch(e){case"top":a=0;break;case"bottom":a=o-n;break;case"center":case"middle":default:a=(o-n)/2}setTimeout(function(){k(i,"UI_autoHeight_animated"),k(r,"UI_autoHeight_animated"),b(i,u.transitionend,t),b(r,u.transitionend,t),s=setTimeout(t,250),i.style.top=parseInt(i.style.top)+a+"px",r.style.height=n+"px"},10)}return this},show:function(e){var t=this._;if(t){if(e=B(e)?e:t.node,_(document,"click",t.proxyClickBlankToHide),this.trigger("beforeShow"),delete t.hidding,t.appendTo.appendChild(e),this.trigger("show"),t.showWithAni){var n=t.showWithAni.split(":");u.effect(t.node,n[0],n[1],g(function(){this.trigger("shown")},this))}else this.trigger("shown");if(t.heightWithAni){var i=this.getDomList(!0).autoHeight||t.node;i&&(i.style.height="auto",i.style.height=i.offsetHeight+"px")}return t.clickBlankToHide&&setTimeout(g(function(){b(document,"click",t.proxyClickBlankToHide)},this),100),this}},hide:function(e){var t=this._;if(t){e=B(e)?e:t.node,this.trigger("beforeHide"),t.hidding=!0;var n=g(function(){!0===t.hidding&&(I(e),delete t.hidding),this.trigger("hidden")},this);if(t.hideWithAni){var i=t.hideWithAni.split(":");u.effect(t.node,i[0],i[1],n),this.trigger("hide")}else this.trigger("hide"),y(n);return t.clickBlankToHide&&_(document,"click",t.proxyClickBlankToHide),t.autoRelease&&setTimeout(g(this.destroy,this),5e3),this}},setTop:function(e){return this.show(e)},getDomList:function(e){var t=this._;if(e){var n=t.node.getAttribute(O),i=D(t.node).list;n&&(void 0===i[n]?i[n]=[t.node]:i[n].push(t.node)),t.nodes=f(i)}return t.nodes},getState:function(){return!!this._&&M(document.body,this._.node)&&"hidden"!=this._.node.style.visibility},getID:function(){return this._.node.id},getOuter:function(){return this._.node},getBox:function(){return this._.node},html:function(e,t){return t=t||this._.node,t.innerHTML="",typeof e===z?t.innerHTML=e||"":t.appendChild(e),this},setPosition:function(e){return e.top=e.t=e.top||e.t||0,e.left=e.l=e.left||e.l||0,this._.node.parentNode===document.body?r(this._.node,e):A(this._.node,e),this},getPosition:function(e){var t=this._,n=L(t.node),i=C(t.node);switch(e){case"topright":i.l=i.left=i.left+n.width;break;case"bottomleft":i.t=i.top=i.top+n.height;break;case"bottomright":i.l=i.left=i.left+n.width,i.t=i.top=i.top+n.height}return i},setLayoutPos:function(e,t){return d(this._.node,e,t),this},beside:function(e,t){t=t||{};var n=t.pos||"bottom-middle",i=n.split("-"),r=this.getSize(),o=i[0],a=i[1],s=t.offsetX||0,l=t.offsetY||0;switch(o){case"top":l-=r.height;break;case"left":s-=r.width}switch(a){case"right":"top"!==o&&"bottom"!==o||(s-=r.width);break;case"bottom":"left"!==o&&"right"!==o||(l-=r.height);break;case"middle":"left"!==o&&"right"!==o||(l-=r.height/2),"top"!==o&&"bottom"!==o||(s-=r.width/2)}return n={"top-left":"left-top","top-right":"right-top","top-middle":"center-top","top-center":"center-top","right-top":"right-top","right-bottom":"right-bottom","right-middle":"right-middle","right-center":"right-middle","bottom-left":"left-bottom","bottom-right":"right-bottom","bottom-middle":"center-bottom","bottom-center":"center-bottom","left-top":"left-top","left-bottom":"left-bottom","left-middle":"left-middle","left-center":"left-middle"}[n],this.setLayoutPos(e,{pos:n,offsetX:s,offsetY:l,appendTo:t.appendTo})},setMiddle:function(){var e=W(),t=this.getSize(),n=j(),i=Math.max((e.height-t.height)/2,0)+n.top,r=Math.max((e.width-t.width)/2,0)+n.left;return this.setPosition({top:i,left:r})},setAlign:function(e){return e=S({type:"c",offset:[0,0]},e),this._.domFix=m(this._.node,e.type,e.offset),this},getSize:function(){return L(this._.node)},setIndex:function(e){return this._.node.style.zIndex=e,this},destroy:function(){var e=this._;e&&(e.node&&I(e.node),e.dEvent&&e.dEvent.destroy(),e.domFix&&e.domFix.destroy(),e.drag&&e.drag.destroy(),this._.proxyStopClickPropagation&&_(e.node,"click",this._.proxyStopClickPropagation),this._.proxyClickBlankToHide&&_(document,"click",this._.proxyClickBlankToHide),e.domFix=e.drag=e.dEvent=null,H.__super__.destroy.apply(this,arguments))}});H.defalutOpts=v({},H.defalutOpts,{id:"layer_"+s.core.util.getUniqueKey(),node:null,template:c,appendTo:document.body,draggable:!1,draggPadding:[5,5,5,5],showWithAni:"fadeInDown:fast",hideWithAni:"fadeOutUp:fast",heightWithAni:!1,stopClickPropagation:!1,clickBlankToHide:!1,autoRelease:!1}),e.exports=H},"/templates/layer.html":function(e,t,n,i){e.exports='<div class="W_layer"></div>'},"/Class_base":function(e,t,n,i){function r(e,t){var n,i=this;n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return i.apply(this,arguments)},c(n,i,t);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,e&&c(n.prototype,e),n.__super__=i.prototype,n}function o(){this.init.apply(this,arguments)}var a=n("/$")[0],s=n("/$")[1],l=a.core.json.merge,c=s.extend,u=a.custEvent;c(o.prototype,{init:function(e){this._=l(this.constructor.defalutOpts,e)},destroy:function(){u.undefine(this),this._=null}},{on:function(e,t){return u.define(this,e),u.add(this,e,t),this},once:function(e,t){return u.define(this,e),u.once(this,e,t),this},off:function(e,t){return u.remove(this,e,t),this},trigger:function(e,t){return u.fire(this,e,t),this}}),o.extend=r,o.defalutOpts={},e.exports=o},"/Class_layer":function(e,t,n,i){function r(){for(var e;e=v[v.length-1];){if(e&&e.getState())return e;e.pop()}return null}var o=n("/$")[0],a=n("/$")[1],s=n("/mask"),l=(n("/css"),o.C),c=(o.builder,o.core.dom.firstChild,o.scrollPos,o.removeNode,o.foreach,o.arrIndexOf),u=o.addClassName,d=o.removeClassName,f=o.core.dom.hasClassName,p=o.hotKey,m=a.extend,h=a.proxy,v=[],g=(document.body,document.documentElement,"UI_freezed"),y="px";p.add(document.documentElement,"esc",function(){var e=r();e&&e.hide()},{type:"keyup",disableInInput:!0});var b=n("/Class_mlayer").extend({init:function(){b.__super__.init.apply(this,arguments),this.on("show",h(function(){this._.showWithSetMiddle&&this.setMiddle(),this._.needMask&&s.showUnderNode(this._.node)},this)),this.on("beforeShow",function(){this._.autoFocus&&(this._.lastFocus=document.activeElement)}),this.on("hidden",function(){this._.autoFocus&&(this._.lastFocus.focus(),delete this._.lastFocus)})},show:function(){return b.__super__.show.apply(this,arguments),this._.focusNode||(this._.focusNode=l("div"),this._.focusNode.setAttribute("tabIndex","0")),this._.node.firstChild?this._.node.insertBefore(this._.focusNode,this._.node.firstChild).focus():this._.node.appendChild(this._.focusNode).focus(),v.push(this),this},hide:function(){var e=this.getState();return b.__super__.hide.apply(this,arguments),e&&(this._.needMask&&s.back(),v.splice(c(this,v),1)),this},setTop:function(){return b.__super__.setTop.apply(this,[this._.frame])},isFreeze:function(){return f(this._.frame,g)},freeze:function(){var e=this._.frame;if(!0!==this.isFreeze()&&!$IE6)return e.style.top=-scrollTop(e)+y,u(e,g),setScrollTop(e,0),this},unfreeze:function(){var e,t=this._.frame;if(!1!==this.isFreeze()&&!$IE6)return e=-parseInt(t.style.top),d(t,g),t.style.top="",setScrollTop(t,e),this}});b.defalutOpts=m({},b.defalutOpts,{needMask:!0,showWithAni:"bounceIn:fast",hideWithAni:"bounceOut:fast",showWithSetMiddle:!0}),e.exports=b},"/mask":function(e,t,n,i){function r(){s=c.C("div");var e='<div node-type="outer">';c.core.util.browser.IE6&&(e+='<div style="position:absolute;width:100%;height:100%;"></div>'),e+="</div>",s=c.builder(e).list.outer[0],document.body.appendChild(s),p=!0,l=d(s,"lt");var t=function(){var e=c.core.util.winSize();s.style.cssText=c.core.dom.cssText(s.style.cssText).push("width",e.width+"px").push("height",e.height+"px").getCss()};g.add(l,"beforeFix",t),t()}function o(e){var t;return(t=e.getAttribute(m))||e.setAttribute(m,t=c.getUniqueKey()),">"+e.tagName.toLowerCase()+"["+m+'="'+t+'"]'}var a,s,l,c=n("/$")[0],u=n("/$")[1],d=u.fix,f=[],p=!1,m="STK-Mask-Key",h=c.core.dom.setStyle,v=c.core.dom.getStyle,g=c.core.evt.custEvent,y={getNode:function(){return s},show:function(e,t){return clearTimeout(a),p?(e=c.core.obj.parseParam({opacity:.3,background:"#000000"},e),s.style.background=e.background,h(s,"opacity",e.opacity),s.style.display="",l.setAlign("lt"),t&&t()):(r(),y.show(e,t)),y},hide:function(){return a=setTimeout(function(){s.style.display="none"},10),f=[],y},showUnderNode:function(e,t){return c.isNode(e)&&y.show(t,function(){h(s,"zIndex",v(e,"zIndex"));var t=o(e),n=c.core.arr.indexOf(t,f);-1!=n&&f.splice(n,1),f.push(t),c.core.dom.insertElement(e,s,"beforebegin")}),y},back:function(){if(f.length<1)return y;var e,t;return f.pop(),f.length<1?y.hide():(t=f[f.length-1])&&(e=c.sizzle(t,document.body)[0])?(h(s,"zIndex",v(e,"zIndex")),c.core.dom.insertElement(e,s,"beforebegin")):y.back(),y},resetSize:function(){var e=c.core.util.winSize();return s.style.cssText=c.core.dom.cssText(s.style.cssText).push("width",e.width+"px").push("height",e.height+22+"px").getCss(),y},destroy:function(){g.remove(l),s.style.display="none"}};e.exports=y},"/Class_dialog":function(e,t,n,i){var r=n("/$")[0],o=n("/$")[1],a=(r.IE,o.extend),s=n("/templates/dialog.html"),l=o.proxy,c=r.addEvent,u=r.removeEvent,d=(r.core.json.merge,r.core.dom.insertElement),f=n("/Class_layer").extend({init:function(e){f.__super__.init.apply(this,arguments),this._.title&&this.setTitle(this._.title),this._.content&&this.setContent(this._.content),this._.proxyClose=l(this.hide,this),this.getDomList().close&&c(this.getDomList().close,"click",this._.proxyClose)},setTitle:function(e){return this.html(e||"",this.getDomList(!0).title)},setContent:function(e){return this.html(e||"",this.getDomList(!0).inner)},appendChild:function(e){return this.getDomList(!0).inner.appendChild(e),this},insertElement:function(e,t){return d(this.getDomList(!0).inner,e,t),this},hide:function(){return(!this.getState()||"function"!=typeof this._.beforeHideFn||!1!==this._.beforeHideFn())&&f.__super__.hide.apply(this,arguments)},clearContent:function(){return this.setContent("")},setBeforeHideFn:function(e){return this._.beforeHideFn=e,this},clearBeforeHideFn:function(){return this._.beforeHideFn=null,this},rebindClose:function(){return this.getDomList().close&&u(this.getDomList().close,"click",this._.proxyClose),this.getDomList(!0).close&&(u(this.getDomList().close,"click",this._.proxyClose),c(this.getDomList().close,"click",this._.proxyClose)),this},destroy:function(){if(this._)return this.getDomList(!0).close&&this._.proxyClose&&u(this.getDomList().close,"click",this._.proxyClose),f.__super__.destroy.apply(this,arguments)}});f.defalutOpts=a({},f.defalutOpts,{template:s,draggable:"title",autoFocus:!0}),e.exports=f},"/templates/dialog.html":function(e,t,n,i){e.exports='<div class="W_layer">\n   <div class="content" node-type="autoHeight">\n      <div node-type="title" class="W_layer_title"></div>\n       <div class="W_layer_close"><a node-type="close" href="javascript:void(0);" class="W_ficon ficon_close S_ficon">X</a></div>\n        <div node-type="inner"></div>\n </div>\n</div>'},"/Class_alert":function(e,t,n,i){var r=n("/$")[0],o=n("/$")[1],a=r.foreach,s=r.funcEmpty,l=r.custEvent,c=o.language,u=o.proxy,d=o.extend,f=n("/templates/alert.html"),p=n("/jsons/icons.json"),m=n("/helpers/render"),h=n("/Class_dialog").extend({init:function(e){h.__super__.init.apply(this,arguments),l.define(this,["ok"]),this._.textSmall&&(this._.notice=[this._.notice,this._.textSmall]),this._.notice=[].concat(this._.notice),this.setTitle(this._.title),this.setNotice(this._.notice),this.setIcon(this._.icon),this.ok(this._.okText,this._.OK),this.on("ok","click",u(function(){this._.alertIsOK=!0,this.hide()},this)),this.show()},setTitle:function(e){h.__super__.setTitle.apply(this,arguments),this.getDomList().title.style.borderBottomStyle="&nbsp;"===e?"none":"solid"},setNotice:function(e){var t="";return a([].concat(e),function(e,n){t+=m('<p class="{className}">{text}</p>',{className:0===n?"S_txt1":"S_txt2",text:e||""})}),this.getDomList(!0).text.innerHTML=t,this},setIcon:function(e){return this.getDomList(!0).icon.innerHTML=p[e]||"",this},ok:function(e,t){return"function"==typeof e&&(t=e,e=void 0),"string"==typeof e&&(this._.okText="<span>"+e+"</span>"),this.getDomList(!0).ok.innerHTML=this._.okText,this.on("ok",t||s),this},show:function(){var e=h.__super__.show.apply(this,arguments);return this.getDomList(!0).ok.focus(),e},hide:function(){return this._.alertIsOK&&this.trigger("ok"),h.__super__.hide.apply(this,arguments),setTimeout(u(this.destroy,this),2e3),this}});h.defalutOpts=d({},h.defalutOpts,{template:f,title:"&nbsp;",okText:c(""),icon:"succB"}),e.exports=h},"/templates/alert.html":function(e,t,n,i){e.exports='<div class="W_layer">\n   <div class="content">\n     <div node-type="title" class="W_layer_title"></div>\n       <div class="W_layer_close"><a href="javascript:void(0);" node-type="close" class="W_ficon ficon_close S_ficon">X</a></div>\n        <div node-type="inner">\n           <div class="layer_point" >\n                <dl class="point clearfix">\n                   <dt node-type="icon"></dt>\n                    <dd node-type="text"></dd>\n                </dl>\n         </div>\n        </div>\n        <div class="W_layer_btn S_bg1">\n           <a href="javascript:void(0);" class="W_btn_b btn_34px" action-type="ok" node-type="ok"></a>\n       </div>\n    </div>\n</div>'},"/jsons/icons.json":function(e,t,n,i){e.exports={succ:'<span class="W_icon icon_succ"></span>',succM:'<span class="W_icon icon_succM"></span>',succB:'<span class="W_icon icon_succB"></span>',delS:'<span class="W_icon icon_delS"></span>',delM:'<span class="W_icon icon_delM"></span>',delB:'<span class="W_icon icon_delB"></span>',errorS:'<span class="W_icon icon_errorS"></span>',errorM:'<span class="W_icon icon_errorM"></span>',errorB:'<span class="W_icon icon_errorB"></span>',askS:'<span class="W_icon icon_askS"></span>',questionM:'<span class="W_icon icon_questionM"></span>',questionB:'<span class="W_icon icon_questionB"></span>',warnS:'<span class="W_icon icon_warnS"></span>',warnM:'<span class="W_icon icon_warnM"></span>',warnB:'<span class="W_icon icon_warnB"></span>',rederrorS:'<span class="W_icon icon_rederrorS"></span>',rederrorM:'<span class="W_icon icon_rederrorM"></span>',rederrorB:'<span class="W_icon icon_rederrorB"></span>'}},"/helpers/render":function(e,t,n,i){function r(e,t){return e.replace(/\{([0-9a-zA-Z_]+)\}/g,function(e,n){return t[n]})}e.exports=r},"/Class_confirm":function(e,t,n,i){var r=n("/$")[0],o=n("/$")[1],a=r.foreach,s=r.custEvent,l=r.funcEmpty,c=o.language,u=o.proxy,d=o.extend,f=n("/templates/confirm.html"),p=n("/jsons/icons.json"),m=n("/helpers/render"),h=n("/Class_dialog").extend({init:function(){h.__super__.init.apply(this,arguments),s.define(this,["ok","cancel"]),this._.textSmall&&(this._.notice=[this._.notice,this._.textSmall]),this._.notice=[].concat(this._.notice),this.setTitle(this._.title),this.setNotice(this._.notice),this.setIcon(this._.icon),this.ok(this._.okText,this._.OK),this.cancel(this._.cancelText,this._.cancel),this.on("ok","click",u(function(){this._.confirmIsOK=!0,this.hide()},this)),this.on("cancel","click",u(this.hide,this)),this.show()},setTitle:function(e){h.__super__.setTitle.apply(this,arguments),this.getDomList().title.style.borderBottomStyle="&nbsp;"===e?"none":"solid"},setNotice:function(e){var t="";return a([].concat(e),function(e,n){t+=m('<p class="{className}">{text}</p>',{className:0===n?"S_txt1":"S_txt2",text:e||""})}),this.getDomList(!0).text.innerHTML=t,this},setIcon:function(e){return this.getDomList(!0).icon.innerHTML=p[e]||"",this},ok:function(e,t){return"function"==typeof e&&(t=e,e=void 0),"string"==typeof e&&(this._.okText="<span>"+e+"</span>"),this.getDomList(!0).ok.innerHTML=this._.okText,this.on("ok",t||l),this},cancel:function(e,t){return"function"==typeof e&&(t=e,e=void 0),"string"==typeof e&&(this._.cancelText="<span>"+e+"</span>"),this.getDomList(!0).cancel.innerHTML=this._.cancelText,this.on("cancel",t||l),this},show:function(){var e=h.__super__.show.apply(this,arguments);return this.getDomList(!0).ok.focus(),e},hide:function(){return this._.confirmIsOK?this.trigger("ok"):this.trigger("cancel"),h.__super__.hide.apply(this,arguments),setTimeout(u(this.destroy,this),2e3),this}});h.defalutOpts=d({},h.defalutOpts,{template:f,title:"&nbsp;",okText:c(""),cancelText:c(""),icon:"questionB"}),e.exports=h},"/templates/confirm.html":function(e,t,n,i){e.exports='<div class="W_layer">\n   <div class="content">\n     <div node-type="title" class="W_layer_title"></div>\n       <div class="W_layer_close"><a href="javascript:void(0);" node-type="close" class="W_ficon ficon_close S_ficon">X</a></div>\n        <div node-type="inner">\n           <div class="layer_point" >\n                <dl class="point clearfix">\n                   <dt node-type="icon"></dt>\n                    <dd node-type="text"></dd>\n                </dl>\n         </div>\n        </div>\n        <div class="W_layer_btn S_bg1">\n           <a href="javascript:void(0);" class="W_btn_a btn_34px" node-type="ok" action-type="ok"></a>\n           <a href="javascript:void(0);" class="W_btn_b btn_34px" node-type="cancel" action-type="cancel"></a>\n       </div>\n    </div>\n</div>\n'},"/Class_notice":function(e,t,n,i){var r=n("/$")[0],o=n("/$")[1],a=r.foreach,s=(r.funcEmpty,o.language,o.proxy),l=o.extend,c=n("/jsons/icons.json"),u=n("/templates/notice.html"),d=n("/helpers/render"),f=n("/Class_layer").extend({init:function(e){f.__super__.init.apply(this,arguments),(this._textLarge||this._textSmall)&&(this._.notice=[this._textLarge,this._textSmall]),this._.notice=[].concat(this._.notice),this.setNotice(this._.notice),this.setIcon(this._.icon),this.show().setMiddle(),setTimeout(s(this.hide,this),this._.hideDelay)},setNotice:function(e){var t="";return a([].concat(e),function(e,n){t+=d('<p class="{className}">{text}</p>',{className:0===n?"S_txt1":"S_txt2",text:e||""})}),this.getDomList(!0).text.innerHTML=t,this},setIcon:function(e){return this.getDomList(!0).icon.innerHTML=c[e]||"",this},hide:function(){return f.__super__.hide.apply(this,arguments),setTimeout(s(this.destroy,this),2e3),this}});f.defalutOpts=l({},f.defalutOpts,{template:u,icon:"succB",hideDelay:1e3}),e.exports=f},"/templates/notice.html":function(e,t,n,i){e.exports='<div class="W_layer">\n   <div class="content">\n     <div node-type="inner">\n           <div class="layer_point" >\n                <dl class="point clearfix">\n                   <dt node-type="icon"></dt>\n                    <dd node-type="text"></dd>\n                </dl>\n         </div>\n        </div>\n    </div>\n</div>'},"/Class_bubble":function(e,t,n,i){var r=n("/$")[0],o=n("/$")[1],a=(r.C,r.replaceNode),s=r.core.dom.getSize,l=r.isNode,c=(r.funcEmpty,r.getStyle,r.position),u=r.contains,s=r.core.dom.getSize,d=r.core.dom.insertElement,f=r.removeEvent,p=r.addEvent,m=o.proxy,h=o.extend,v=n("/templates/bubble.html"),g=14,y=n("/Class_mlayer").extend({init:function(){y.__super__.init.apply(this,arguments),this._.proxyClose=m(this.hide,this),this.getDomList().close&&p(this.getDomList().close,"click",this._.proxyClose),this.on("show",m(function(){this._.showWithSetWidth&&!this.getBox().style.width.length&&this.fixWidth()},this))},setContent:function(e){return this.html(e||"",this.getDomList(!0).inner)},fixWidth:function(){var e=this.getBox();if(u(document.body,e)){var t=r.C("span");a(t,e),document.body.appendChild(e),this.getBox().style.width="",this.getBox().style.width=this.getBox().offsetWidth+1+"px",a(e,t)}},appendChild:function(e){return this.getDomList(!0).inner.appendChild(e),this},insertElement:function(e,t){return d(this.getDomList(!0).inner,e,t),this},clearContent:function(){return this.setContent("")},setArrow:function(e,t,n){var i,r,o=this.getDomList(!0).arrow,a=this.getSize(),s={left:"right",top:"bottom",right:"left",bottom:"top"};switch(e){case"top":i="W_arrow_bor W_arrow_bor_t",r="left";break;case"right":i="W_arrow_bor W_arrow_bor_r",r="top";break;case"bottom":i="W_arrow_bor W_arrow_bor_b",r="left";break;case"left":i="W_arrow_bor W_arrow_bor_l",r="top"}return i&&(o.className=i,void 0!==t&&(a=a[{left:"width",top:"height"}[r]],t=parseFloat(t),o.style.top=o.style.right=o.style.bottom=o.style.left="",n&&(r=s[r]),o.style[r]=Math.min(Math.max(t,0),a-g)+"px",o.style[s[r]]="auto")),this},beside:function(e,t){t=t||{};var n,i,r=t.pos||"top-middle",o=r.split("-"),a=t.offsetX||0,s=t.offsetY||0,l=this.getSize();switch(o[0]){case"top":switch(n="bottom",s-=g,o[1]){case"left":i=10;break;case"right":i=-10;break;case"middle":i=(l.width-g)/2}break;case"right":switch(n="left",a+=g,o[1]){case"top":i=10;break;case"bottom":i=-10;break;case"middle":i=(l.height-g)/2}break;case"bottom":switch(n="top",s+=g,o[1]){case"left":i=10;break;case"right":i=-10;break;case"middle":i=(l.width-g)/2}break;case"left":switch(n="right",a-=g,o[1]){case"top":i=10;break;case"bottom":i=-10;break;case"middle":i=(l.height-g)/2}}return this.setArrow(n,Math.abs(i),i<0),y.__super__.beside.apply(this,[e,{pos:r,offsetX:a,offsetY:s,appendTo:t.appendTo}]),this},setAlignPos:function(e,t,n){var i=this.getBox(),o=this.getDomList(!0).arrow;if(n=h({offset:{left:0,top:0},arrowOffset:0,align:"left",fail:m(function(){this.beside(e,{pos:"bottom-middle"})},this)},n),l(e)&&l(t)){for(var a,u=e;u!==document.body;){if(u=u.parentNode,"none"===u.style.display)return!1;if(a=r.getStyle(u,"position"),shellAttr=u.getAttribute("layout-shell"),"absolute"===a||"fixed"===a){if("false"===shellAttr)continue;break}if("true"===shellAttr&&"relative"===a)break}u.appendChild(i),a=c(u),a||(a={l:0,t:0});var d,f,p,v=c(t),y=c(e),b=s(e),_=6,w=n.offset,x=n.arrowOffset,k=s(i),E=s(t),T=2;if("left"===n.align){if(k.width<y.l-v.l+Math.ceil(b.width/2))return void n.fail()}else if(v.l+E.width-y.l-Math.ceil(b.width/2)>k.width)return void n.fail();return d="left"===n.align?v.l-T:"center"===n.align?v.l+E.width-k.width/2+T:v.l+E.width-k.width+T,f=y.t+b.height+_,p=y.l+Math.ceil((b.width-g)/2)-d,f-=a.t,d-=a.l,f+=w.top,d+=w.left,p+=x,i.style.left=d+"px",i.style.top=f+"px",o&&(o.style.left=p+"px"),this}},rebindClose:function(){return this.getDomList().close&&f(this.getDomList().close,"click",this._.proxyClose),this.getDomList(!0).close&&(f(this.getDomList().close,"click",this._.proxyClose),p(this.getDomList().close,"click",this._.proxyClose)),this},destroy:function(){if(this._)return this.getDomList(!0).close&&this._.proxyClose&&f(this.getDomList().close,"click",this._.proxyClose),y.__super__.destroy.apply(this,arguments)}});y.defalutOpts=h({},y.defalutOpts,{template:v,showWithAni:"fadeInUp:fast",hideWithAni:"fadeOutDown:fast",showWithSetWidth:!0}),e.exports=y},"/templates/bubble.html":function(e,t,n,i){e.exports='<div class="W_layer W_layer_pop">\n   <div class="content">\n <div class="W_layer_close"><a href="javascript:void(0)" node-type="close" class="W_ficon ficon_close S_ficon">X</a></div>\n     <div node-type="inner">\n           <div class="layer_point"></div>\n       </div>\n        <div class="W_layer_arrow">\n           <span node-type="arrow" class="W_arrow_bor"><i class="S_line3"></i><em class="S_bg2_br"></em></span>\n      <div>\n </div>\n</div>'},"/Class_card":function(e,t,n,i){var r=(n("/$")[0],n("/$")[1]),o=r.rects,a=(r.setImmediate,r.proxy,r.extend),s=(n("/css"),{t:["showWithAniOnTop","hideWithAniOnTop"],r:["showWithAniOnRight","hideWithAniOnRight"],b:["showWithAniOnBottom","hideWithAniOnBottom"],l:["showWithAniOnLeft","hideWithAniOnLeft"]}),l=n("/Class_bubble").extend({showByTarget:function(e,t){this._.lastTarget=e;var n,i=this.getState();return document.body.appendChild(this.getBox()),this._.lastPos=n=o.setArrow({evt:t,node:e,layer:this.getBox(),arrow:this.getDomList(!0).arrow,priority:this._.priority}),i||(this._.showWithAni=this._[s[n]&&s[n][0]],this.show()),this},hide:function(){var e=s[this._.lastPos]&&s[this._.lastPos][1];this._.hideWithAni=this._[e],l.__super__.hide.apply(this,arguments)},setPriority:function(e){return this._.priority=e,this},lastTarget:function(e){return this._.lastTarget}});l.defalutOpts=a({},l.defalutOpts,{lastPos:null,lastTarget:null,priority:"tbrl",showWithAniOnTop:"fadeInUp:fast",showWithAniOnRight:"fadeInRight:fast",showWithAniOnBottom:"fadeInDown:fast",hideWithAniOnLeft:"fadeOutLeft:fast",hideWithAniOnTop:"fadeOutDown:fast",hideWithAniOnRight:"fadeOutLeft:fast",hideWithAniOnBottom:"fadeOutUp:fast",hideWithAniOnLeft:"fadeOutRight:fast"}),e.exports=l},"/Class_tipAlert":function(e,t,n,i){var r=n("/$")[0],o=n("/$")[1],a=r.foreach,s=(r.funcEmpty,r.core.dom.uniqueID),l=(o.language,o.proxy),c=o.extend,u=n("/templates/tipAlert.html"),d=n("/jsons/icons.json"),f=n("/helpers/render"),p={},m=n("/Class_bubble").extend({init:function(e){m.__super__.init.apply(this,arguments),(this._textLarge||this._textSmall)&&(this._.notice=[this._textLarge,this._textSmall]),this._.notice=[].concat(this._.notice),this.setNotice(this._.notice),this.setIcon(this._.icon),this._.autoHide&&setTimeout(l(this.hide,this),this._.hideDelay),this.show()},setNotice:function(e){var t="";return a([].concat(e),l(function(e,n){0===n?this.getDomList().text.innerHTML=e+(this._.autoHide?"":' <a node-type="close" href="javascript:void(0);" class="W_ficon ficon_close S_ficon">X</a>'):t+=f('<p class="sub_txt S_txt2">{text}</p>',{text:e||""})},this)),this.getDomList().otherText.innerHTML=t,this.rebindClose(),this.fixWidth(),this},beside:function(e){var t=s(e);if(this._.besideDOM=t,p[t])try{p[t].hide()}catch(e){}return p[t]=this,m.__super__.beside.apply(this,arguments)},setIcon:function(e){return this.getDomList(!0).icon.innerHTML=d[e]||"",this},hide:function(){return this._&&p[this._.besideDOM]===this&&delete p[this._.besideDOM],m.__super__.hide.apply(this,arguments),setTimeout(l(this.destroy,this),2e3),this}});m.defalutOpts=c({},m.defalutOpts,{template:u,icon:"succ",autoHide:!0,stopClickPropagation:!0,hideDelay:1e3}),e.exports=m},"/templates/tipAlert.html":function(e,t,n,i){e.exports='<div class="W_layer W_layer_pop">\n   <div class="content layer_mini_info">\n     <p class="main_txt">\n          <span node-type="icon"></span>\n            <span node-type="text"></span>\n        </p>\n      <div node-type="otherText"></div>\n     \n      <div class="W_layer_arrow">\n           <span node-type="arrow" class="W_arrow_bor"><i class="S_line3"></i><em class="S_bg2_br"></em></span>\n      <div>\n </div>\n</div>'},"/Class_tipConfirm":function(e,t,n,i){var r=n("/$")[0],o=n("/$")[1],a=r.foreach,s=r.funcEmpty,l=r.core.dom.uniqueID,c=r.custEvent,u=o.language,d=o.proxy,f=o.extend,p=n("/templates/tipConfirm.html"),m=n("/jsons/icons.json"),h=n("/helpers/render"),v={},g=n("/Class_bubble").extend({init:function(e){g.__super__.init.apply(this,arguments),c.define(this,["ok","cancel"]),(this._textLarge||this._textSmall)&&(this._.notice=[this._textLarge,this._textSmall]),this._.notice=[].concat(this._.notice),this.setNotice(this._.notice),this.setIcon(this._.icon),this.ok(this._.okText,this._.ok),this.cancel(this._.cancelText,this._.cancel),this.on("ok","click",d(function(){this._.confirmIsOK=!0,this.hide()},this)),this.on("cancel","click",d(this.hide,this)),this.show()},setNotice:function(e){var t="";return a([].concat(e),d(function(e,n){0===n?this.getDomList(!0).text.innerHTML=e:t+=h('<p class="sub_txt S_txt2">{text}</p>',{text:e||""})},this)),this.getDomList(!0).otherText.innerHTML=t,this.fixWidth(),this},ok:function(e,t){return"function"==typeof e&&(t=e,e=void 0),"string"==typeof e&&(this._.okText="<span>"+e+"</span>"),this.getDomList(!0).ok.innerHTML=this._.okText,this.on("ok",t||s),this.fixWidth(),this},cancel:function(e,t){return"function"==typeof e&&(t=e,e=void 0),"string"==typeof e&&(this._.cancelText="<span>"+e+"</span>"),this.getDomList(!0).cancel.innerHTML=this._.cancelText,this.on("cancel",t||s),this.fixWidth(),this},setIcon:function(e){return this.getDomList(!0).icon.innerHTML=m[e]||"",this},show:function(){var e=g.__super__.show.apply(this,arguments);return setTimeout(d(function(){this.getDomList(!0).ok.focus()},this),100),e},beside:function(e){var t=l(e);if(this._.besideDOM=t,v[t])try{v[t].hide()}catch(e){}return v[t]=this,g.__super__.beside.apply(this,arguments)},hide:function(){return this._&&v[this._.besideDOM]===this&&delete v[this._.besideDOM],this._.confirmIsOK?this.trigger("ok"):this.trigger("cancel"),g.__super__.hide.apply(this,arguments),setTimeout(d(this.destroy,this),2e3),this}});g.defalutOpts=f({},g.defalutOpts,{template:p,icon:"askS",okText:u(""),cancelText:u(""),stopClickPropagation:!0}),e.exports=g},"/templates/tipConfirm.html":function(e,t,n,i){e.exports='<div class="W_layer W_layer_pop">\n   <div class="content layer_mini_opt">\n      <p class="main_txt">\n          <span node-type="icon"></span>\n            <span node-type="text"></span>\n        </p>\n      <div node-type="otherText"></div>\n     <p class="btn">\n           <a href="javascript:void(0);" node-type="ok" action-type="ok" class="W_btn_a"></a>\n            <a href="javascript:void(0);" node-type="cancel" action-type="cancel" class="W_btn_b"></a>\n        </p>\n      <div class="W_layer_arrow">\n           <span node-type="arrow" class="W_arrow_bor"><i class="S_line3"></i><em class="S_bg2_br"></em></span>\n      <div>\n </div>\n</div>'},"/Widget_scrollView":function(e,t,n,i){function r(e){function t(e){return arguments.length>0?C.content.scrollTop=e:C.content.scrollTop}function n(){return C.content.scrollHeight}function i(){return C.content.offsetHeight}function r(e){if(A){e=m(e);var r=-e.wheelDelta;isNaN(r)&&(r=e.deltaY);var o=r<0,a=r>0;(o&&t()<=0||a&&n()-t()-i()<=0)&&h(e)}}function a(e){e=m(e);var i=e.target;1===e.which&&(l(document.body,"UI_scrolling"),i===C.barContent?(L=!0,T=e.clientY-parseInt(C.barContent.style.top,10)/100*C.barContainer.offsetHeight):t(C.barContent.getBoundingClientRect().top<e.clientY?t()+.1*n():t()-.1*n()))}function b(e){e=m(e),!0===L&&t((e.clientY-T)/C.barContainer.offsetHeight*n())}function _(e){L=!1,c(document.body,"UI_scrolling")}function w(e){return"absolute"===o.getStyle(e,"position")||e!==document.body&&(!!e.parentNode&&w(e.parentNode))}function x(){try{var e=s.scrollWidth();v&&w(C.content)&&(e=0),C.content.style.width=C.container.offsetWidth+e+"px",C.barContent.style.height=i()/n()*100+"%",C.barContent.style.top=t()/n()*100+"%",C.barContainer.style.visibility=(A=n()>i())?"":"hidden"}catch(e){}}function k(){for(f(C.content,"scroll",x),f(C.barContainer,"mousedown",a),f(document,"mousemove",b),f(document,"mouseup",_),p(C.container),p(C.barContainer),clearInterval(S);N=C.container.firstChild;)e.appendChild(N)}var E,T,S,C=g(u(y).list),L=!1,A=!1;for(E in C)C.hasOwnProperty(E)&&C[E].removeAttribute("node-type");for(var N;N=e.firstChild;)C.content.appendChild(N);return l(e,"UI_scrollView"),e.appendChild(C.container),e.appendChild(C.barContainer),d(C.content,"scroll",x),d(C.barContainer,"mousedown",a),d(document,"mousemove",b),d(document,"mouseup",_),d(C.content,"mousewheel",r),d(C.content,"DOMMouseScroll",r),S=setInterval(function(){try{C.container.scrollLeft=0}catch(e){}},1e3),x(),{reset:x,destroy:k,scrollHeight:n,scrollTop:t,offsetHeight:i,scrollEl:C.content}}var o=n("/$")[0],a=n("/$")[1],s=n("/css"),l=(o.C,o.addClassName),c=o.removeClassName,u=o.builder,d=o.addEvent,f=o.removeEvent,p=o.removeNode,m=o.fixEvent,h=o.stopEvent,v=o.core.util.browser.IE6||o.core.util.browser.IE7,g=a.parseDOM,y=n("/templates/scrollview.html");e.exports=r},"/templates/scrollview.html":function(e,t,n,i){e.exports='<div class="UI_scrollContainer" node-type="container">\n  <div class="UI_scrollContent" node-type="content"></div>\n</div>\n<div class="UI_scrollBar W_scroll_y S_bg1" node-type="barContainer"><div class="bar S_txt2_bg" node-type="barContent" style="top:0%; height:0;"></div></div>'},"/Widget_badge":function(e,t,n,i){function r(e,t,n){if(s.effectSuport){var i=e.innerHTML,r=t;n&&(i=[r,r=i][0]);var o=parseInt(a(e,"line-height")),f=l(d(u,{oldValue:i,newValue:r,height:(o||e.offsetHeight)-1})),p=f.list.t[0],m=f.box;e.innerHTML="",e.appendChild(m),p.style.lineHeight=p.parentNode.offsetHeight+"px",s.effect(p,n?"badgeDown":"badgeUp","fast",function(){c(e,p)&&(e.innerHTML=t)})}else e.innerHTML=t}var o=n("/$")[0],a=(n("/$")[1],o.getStyle),s=n("/css"),l=o.builder,c=o.contains,u=n("/templates/badge.html"),d=n("/helpers/render");e.exports=r},"/templates/badge.html":function(e,t,n,i){e.exports='<span class="UI_badge" style="height:{height}px"><span class="UI_badge" node-type="t">{oldValue}<br/>{newValue}</span></span>'},"/Widget_suggest":function(e,t,n,i){function r(e){for(var t=e.length;t--;)if(c(e[t],"cur"))return e[t];return null}var o=n("/$")[0],a=n("/$")[1],s=(n("/Class_mlayer"),n("/css"),o.C,o.addClassName),l=o.removeClassName,c=o.core.dom.hasClassName,u=o.addEvent,d=o.removeEvent,f=(o.builder,o.foreach),p=o.fixEvent,m=o.preventDefault,h=o.stopEvent,v=o.getUniqueKey,g=o.custEvent,y=(a.parseDOM,a.extend),b=a.proxy,_={ENTER:13,ESC:27,UP:38,DOWN:40,LEFT:37,RIGHT:39},w=n("/Class_mlayer").extend({init:function(){w.__super__.init.apply(this,arguments),g.define(this,["suggest","submit"]);var e=this._,t=e.input,n=e.proxyShow=b(this.show,this),i=e.proxyHide=b(this.hide,this),o=e.proxyKey=b(function(e){e=p(e);var n,i;if((n=this.getDomList().list.childNodes)&&n.length)switch(i=r(n),e.keyCode){case _.ENTER:i&&(t.value=decodeURIComponent(i.getAttribute("value"))),t.blur(),this.trigger("submit",[t.value]),m(e);break;case _.ESC:t.blur(),h(e);break;case _.UP:var o=i?i.previousSibling:n[n.length-1];i&&l(i,"cur"),o&&s(o,"cur"),t.value=o?decodeURIComponent(o.getAttribute("value")):t._value,h(e);break;case _.DOWN:var o=i?i.nextSibling:n[0];i&&l(i,"cur"),o&&s(o,"cur"),t.value=o?decodeURIComponent(o.getAttribute("value")):t._value,h(e);break;case _.LEFT:case _.RIGHT:break;default:setTimeout(function(){t._value=t.value})}},this),a=e.proxyOnkeydownIE9=b(function(){window.event.keyCode},this);u(t,"focus",n),u(t,"blur",i),u(t,"keydown",o),window.addEventListener?t.addEventListener("input",n,!1):t.attachEvent("onpropertychange",n),window.VBArray&&window.addEventListener&&window.attachEvent&&(t.attachEvent("onkeydown",a),t.attachEvent("oncut",n)),this.on("select","click",b(function(e){t.value=decodeURIComponent(e.el.getAttribute("value")),this.trigger("submit",[t.value])},this)),t.setAttribute("autocomplete","off"),t._value=t.value},html:function(e){return w.__super__.html.apply(this,[e,this.getDomList().list])},show:function(){function e(e,n){if(this._.input!=document.activeElement)return this.hide();if(n!=this._.lastkey)return this;if(!e||e.length<=0)return this.hide();var i="";f(e,function(e,t){e=[].concat(e),e[1]=e[1]||e[0],i+='<li action-type="select" value="'+encodeURIComponent(e[1])+'"><a href="javascript:void(0);">'+e[0]+"</a></li>"}),w.__super__.show.apply(this,t),this.beside(this._.input,{pos:this._.pos,offsetX:this._.offsetX,offsetY:this._.offsetY});var r=this._.width||this._.input.offsetWidth-6;return this._.node.style.cssText+=";min-width:"+r+"px;_width:"+r+"px;",this.html(i),s(this._.node,"UI_autoHeight"),this.autoHeight(),this}var t=arguments;return this._.input!=document.activeElement?this:(this.trigger("suggest",[this._.input.value,b(e,this,this._.lastkey=v())]),this)},hide:function(){return this.getBox().style.height="",setTimeout(b(function(){this.html(""),w.__super__.hide.apply(this,arguments)},this),200),this},destroy:function(){var e=this._,t=e.input;return d(t,"focus",e.proxyShow),d(t,"blur",e.proxyHide),d(t,"keydown",e.proxyKey),window.addEventListener?t.removeEventListener("input",e.proxyShow,!1):t.detachEvent("onpropertychange",e.proxyShow),window.VBArray&&window.addEventListener&&window.attachEvent&&(t.detachEvent("onkeydown",e.proxyOnkeydownIE9),t.detachEvent("oncut",e.proxyShow)),w.__super__.destroy.apply(this,arguments)}});w.defalutOpts=y({},w.defalutOpts),w.defalutOpts.template='<div class="layer_menu_list" style="overflow:hidden;"><ul node-type="list"></ul></div>',w.defalutOpts.pos="bottom-left",w.defalutOpts.offsetX=0,w.defalutOpts.offsetY=0,w.defalutOpts.width=!1,w.defalutOpts.showWithAni=null,w.defalutOpts.hideWithAni=null,w.defalutOpts.heightWidthAni=!0,e.exports=function(e,t){return t=t||{},e&&(t.input=e),new w(t)}},"/core/utils/focusHistory":function(e,n,i,r){var o=r("/core/theia")||t;e.exports=function(e,t){var n=[],i=function(e){if(!e||e==document.body)return!1;if(e.getAttribute("action-history")){var t=o.core.json.queryToJson(e.getAttribute("action-history"));if(t&&t.rec&&1==t.rec)return e}return arguments.callee(e.parentNode)},r=function(e){var e=o.fixEvent(e),t=i(e.target);t&&a.push(t)},a={push:function(e){n.push(e),n.length>3&&n.shift()},focusback:function(e){var t=n.pop();t&&(t.getAttribute("tabIndex")||t.setAttribute("tabIndex","0"),setTimeout(function(){t.focus()},200))},destroy:function(){o.removeEvent(document.body,"click",r),n=null}};return function(){o.addEvent(document.body,"click",r)}(),a}},"/core/utils/suggest":function(e,n,i,r){var o=r("/core/theia")||t,a=null,s=o.custEvent,l=s.define,c=s.fire,u=s.add,d=o.addEvent,f=o.removeEvent,p=o.stopEvent,m=[],h={},v={ENTER:13,ESC:27,UP:38,DOWN:40,TAB:9},g=function(e){var t=-1,n=e.textNode,i=e.uiNode,r=o.core.evt.delegatedEvent(i),a=l(n,["open","close","indexChange","onSelect","onIndexChange","onClose","onOpen","openSetFlag"]);a.setFlag=s;var s=function(t){e.flag=t},m=function(){return o.sizzle(["[action-type=",e.actionType,"]"].join(""),i)},h=function(){t=-1,f(n,"keydown",g),r.destroy()},g=function(i){var r,s;if((r=i)&&(s=r.keyCode)){if(s==v.ENTER&&(c(a,"onSelect",[t,n,e.flag]),o.preventDefault()),s==v.UP){p();var l=m().length;return t=t<1?l-1:t-1,c(a,"onIndexChange",[t]),!1}if(s==v.DOWN){p();var l=m().length;return t=t==l-1?0:t+1,c(a,"onIndexChange",[t]),!1}return s==v.ESC?(p(),h(),c(a,"onClose"),!1):s==v.TAB?(h(),c(a,"onClose"),!1):void 0}},y=function(t){c(a,"onSelect",[o.core.arr.indexOf(t.el,m()),n,e.flag])},b=function(e){t=o.core.arr.indexOf(e.el,m()),c(a,"onIndexChange",[o.core.arr.indexOf(e.el,m())])};return u(a,"open",function(t,i){n=i,h(),d(i,"keydown",g),r.add(e.actionType,"mouseover",b),r.add(e.actionType,"click",y),c(a,"onOpen",[e.flag])}),u(a,"openSetFlag",function(e,t){s(t)}),u(a,"close",function(){h(),c(a,"onClose",[e.flag])}),u(a,"indexChange",function(n,i){t=i,c(a,"onIndexChange",[t,e.flag])}),a},y=function(e){var t=e.textNode,n=o.core.arr.indexOf(t,m);return h[n]||(m[n=m.length]=t,h[n]=g(e)),h[n]};e.exports=function(e){if(e.textNode&&e.uiNode)return e=o.parseParam({textNode:a,uiNode:a,actionType:"item",actionData:"index",flag:""},e),y(e)}},"/core/utils/tab":function(e,n,i,r){var o=r("/core/theia")||t;e.exports=function(e){var t,n,i,r,a,s={},l={},c=null,u={selectTab:function(e){l[e]||(o.custEvent.fire(f,"tabInit",e),l[e]=!0),u.showTab(e),c&&o.custEvent.fire(f,"tabOut",c),o.custEvent.fire(f,"tabIn",e),c=e},showTab:function(e){c&&(n[c][0].className=s.defaultClassName,n[c][1]&&o.core.dom.setStyle(n[c][1],"display","none")),n[e][0].className=s.currentClassName,n[e][1]&&o.core.dom.setStyle(n[e][1],"display","")}},d={tabSwitch:function(e){var t=e.el,n=t.getAttribute("node-type")||"";n!=c&&u.selectTab(n)}},f={getOuter:function(){return r},getDEvent:function(){return a},getDom:function(e){return n[e]?n[e]:null},setContent:function(e,t){"string"==typeof t?n[e].innerHTML=t:o.isNode(t)&&n[e].appendChild(t)},destroy:function(){a.destroy(),l=null}},p={init:function(){p.pars(),p.build(),p.bind(),u.selectTab(s.currentTab)},pars:function(){s=o.core.obj.parseParam({templete:"",currentTab:"tab1",eventType:"click",currentClassName:"pftb_lk current S_line5 S_txt1 S_bg5",defaultClassName:"pftb_lk S_line5 S_txt1 S_bg1"},e||{})},build:function(){t=o.core.dom.builder(s.templete),n=t.list,i=n.content[0],r=t.list.tabs[0]},bind:function(){o.custEvent.define(f,["tabInit","tabIn","tabOut"]),a=o.core.evt.delegatedEvent(r),a.add("tab",s.eventType,d.tabSwitch)}};return p.init(),f}},"/core/utils/slider":function(e,n,i,r){var o=r("/core/theia")||t,a=i("/core/utils/children"),s=i("/core/utils/parseDOM");e.exports=function(e,t){o.core.dom.isNode(e)||o.log("[kit.extra.slider]: node is not a Node!");var n,i,r,l,c,u,d={},f={},p=!1,m=!1,h=o.core.dom.setStyle,v={isMouseLeaveOrEnter:function(e,t){if(e&&"mouseout"!=e.type&&"mouseover"!=e.type)return!1;for(var n=e.relatedTarget?e.relatedTarget:"mouseout"==e.type?e.toElement:e.fromElement;n&&n!=t;)n=n.parentNode;return n!=t},onMouseover:function(e){v.isMouseLeaveOrEnter(e,i)&&clearInterval(c)},onMouseout:function(e){v.isMouseLeaveOrEnter(e,i)&&(p&&!t.autoRun||(c=setInterval(b.autoSlideLeft,t.speed_banner)))}},g={choice:function(e){var n=e.data;p=!0,m=!0;var r=a(i),s=e.el;o.core.arr.foreach(r,function(e,n){e!=s?o.core.dom.removeClassName(e,t.className):o.hasClassName(e,t.className)?(o.core.dom.removeClassName(e,t.className),p=!1,m=!1):o.core.dom.addClassName(e,t.className)}),o.core.evt.custEvent.fire(d,"choice",n)},clickLeft:function(){f.newTime=new Date,f.stepTime=f.newTime-f.oldTime,f.stepTime>300?f.stepTime=t.speed_tween_fast:f.stepTime=50,f.oldTime=f.newTime,clearInterval(c),b.handleSlideRight(f.stepTime),p&&0!=t.autoRun||(c=setInterval(b.autoSlideLeft,t.speed_banner))},clickRight:function(){f.newTime=new Date,f.stepTime=f.newTime-f.oldTime,f.stepTime>300?f.stepTime=t.speed_tween_fast:f.stepTime=50,f.oldTime=f.newTime,clearInterval(c),b.autoSlideLeft(f.stepTime),p&&0!=t.autoRun||(c=setInterval(b.autoSlideLeft,t.speed_banner))}},y={slideDot:function(e,n){clearInterval(c);var r=n.toPage-n.currentPage>0?n.toPage-n.currentPage:n.totalPage-n.currentPage+n.toPage,a=(t.eleWidth+t.eleMargin)*Math.abs(r),s=n.speed||t.speed_tween;l=o.core.ani.tween(i,{animationType:t.tween_algorithm,duration:s,end:function(){for(var e=0,t=r;e<t;e++){var n=o.core.dom.firstChild(i);o.core.dom.insertElement(i,n,"beforeend")}h(i,"left","0px")}}).play({left:-a}),c=setInterval(b.autoSlideLeft,t.speed_banner)}},b={autoSlideLeft:function(e){b.animate("left",function(){for(var e=0,n=t.num_everyTurn;e<n;e++){var r=o.core.dom.firstChild(i);o.core.dom.insertElement(i,r,"beforeend")}h(i,"left","0px")},e),o.core.evt.custEvent.fire(d,"left")},handleSlideRight:function(e){for(var n=0,r=t.num_everyTurn;n<r;n++){var a=o.core.dom.lastChild(i);o.core.dom.insertElement(i,a,"afterbegin")}h(i,"left",-(u-t.fix_right)+"px"),b.animate("right",function(){},e),o.core.evt.custEvent.fire(d,"right")},animate:function(e,n,r){e="left"==e?u:0,r=r||t.speed_tween,l=o.core.ani.tween(i,{animationType:t.tween_algorithm,duration:r,end:n}).play({left:-e})}},_={init:function(){if(_.pars(),_.build(),_.bind(),t.num_all>t.num_everyTurn){if(t.num_all<2*t.num_everyTurn){for(var e=2*t.num_everyTurn-t.num_all,n=0,r=e;n<r;n++){var s=a(i)[n],l=s.cloneNode(!0);o.core.dom.insertElement(i,l,"beforeend")}var u=2*(t.eleWidth+t.eleMargin)*t.num_everyTurn+t.fix;h(i,"width",u+"px")}t.autoRun&&(c=setInterval(b.autoSlideLeft,t.speed_banner))}},pars:function(){t=o.core.obj.parseParam({speed_banner:3e3,speed_tween:500,speed_tween_fast:300,tween_algorithm:"easeoutcubic",num_everyTurn:1,eleMargin:0,fix:0,fix_right:0,actionType:"choice",className:"current",autoRun:!0},t||{}),n=s(o.builder(e).list),i=n.innerSlide,t.num_all=a(i).length,t.eleWidth=o.core.dom.firstChild(i).offsetWidth,f.oldTime=new Date},build:function(){i.style.left||h(i,"left","0px"),h(i,"position","relative");var e=(t.eleWidth+t.eleMargin)*t.num_all+t.fix;h(i,"width",e+"px"),u=(t.eleWidth+t.eleMargin)*t.num_everyTurn},bind:function(){o.addEvent(i,"mouseover",v.onMouseover),o.addEvent(i,"mouseout",v.onMouseout),r=o.core.evt.delegatedEvent(e),r.add("prev","click",g.clickLeft),r.add("next","click",g.clickRight),t.actionType&&r.add(t.actionType,"click",g.choice),o.core.evt.custEvent.define(d,["left","right","choice","changePage"]),o.core.evt.custEvent.add(d,"changePage",y.slideDot)},destroy:function(){clearInterval(c),l.destroy(),o.removeEvent(i,"mouseover",v.onMouseover),o.removeEvent(i,"mouseout",v.onMouseout),o.core.evt.custEvent.remove(d),r.destroy()}};return _.init(),d.destroy=_.destroy,d}},"/core/utils/children":function(e,n,i,r){var o=r("/core/theia")||t;e.exports=function(e){if(!o.core.dom.isNode(e))throw"Parameter must be an HTMLEelement!";for(var t=[],n=0,i=e.childNodes.length;n<i;n++)1==e.childNodes[n].nodeType&&t.push(e.childNodes[n]);return t}},"/calendar":function(e,t,n,i){var r=n("/$")[0],o=n("/$")[1].language,a=n("/Class_mlayer"),s=n("/templates/calendar.html");e.exports=function(e){var t,n={},i={id:"",data:{},chooseDate:"",source:null,calNode:null,layer:null,today:{},showDate:{},start:null,end:null,count:null,firstWeek:null,format:[],years:[],changeDom:{},defaultStartDate:new Date(2009,7,16,0,0,0,0),daysOfMonth:[31,28,31,30,31,30,31,31,30,31,30,31],dateOfMonth:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]},l={close:function(){r.core.evt.stopEvent(),r.removeEvent(document.body,"click",l.close),i.layer.hide()},changeYear:function(e){e=r.fixEvent(e);var t=e.target,n=t.value;n!=i.showDate.year&&(i.showDate.year=n,n==i.start.year&&(i.showDate.month=i.start.month),n==i.end.year&&(i.showDate.month=i.end.month),u.getCurrentMonthInfo(i.data.hidePastMonth),d.drawCal())},changeMonth:function(e){e=r.fixEvent(e);var t=e.target,n=t.value;n!=i.showDate.month&&(i.showDate.month=1*n,u.getCurrentMonthInfo(i.data.hidePastMonth),d.drawCal())}},c={date:function(e){var t=e.el.title;if(t=t.replace(/(\d+)/g,function(e,t){return 1==t.length?"0"+t:t}),i.chooseDate=t,r.custEvent.fire(n,"choose",{date:t}),i.callback&&"function"==typeof i.callback){var o={};o.start=i.data.start,o.end=i.data.end,i.callback(t,o)}}},u={parseDate:function(e){var t,n,i,r,o,a,s=/^(\d{4})[-\/](\d{1,2})[-\/](\d{1,2})$/;return e?"string"==typeof e&&s.test(e)?(t=e.match(s),n=1*t[1],i=1*t[2]-1,r=1*t[3],t=new Date(n,i,r,0,0,0,0)):t=e.constructor==Date?e:"object"==typeof e?new Date(e.year,e.month,e.date,0,0,0,0):"string"==typeof e?new Date(e):new Date:t=new Date,a={year:t.getFullYear(),month:t.getMonth(),date:t.getDate()},o=u.getMaxDays(a.year,a.month),a.max=o,a},getMaxDays:function(e,t){return 1==t?e%4==0&&e%100!=0||e%400==0?29:28:i.daysOfMonth[t]},getStartAndEndDays:function(e){e?(i.start=null!=e.start?e.start:i.defaultStartDate,i.end=null!=e.end?e.end:new Date,-1!=i.start.toString().indexOf("-")&&(i.start=i.start.replace(/-/g,"/")),-1!=i.end.toString().indexOf("-")&&(i.end=i.end.replace(/-/g,"/")),i.defaultStartDate=new Date(i.start)):(i.start=i.defaultStartDate,i.end=new Date),i.start=u.parseDate(i.start),i.end=u.parseDate(i.end)},getCurrentMonthInfo:function(){var e=i.showDate,t=e.year,n=e.month,o=(e.date,new Date(t,n,1,0,0,0,0));i.count=u.getMaxDays(t,n),i.firstWeek=o.getDay();var a=r.core.arr.copy(i.dateOfMonth),s=0==i.firstWeek?[]:new Array(i.firstWeek).join().split(",");i.format=s.concat(a.splice(0,i.count))},drawYear:function(){var e=i.defaultStartDate.getFullYear(),t=new Date(new Date(i.end.year,i.end.month,i.end.date).getTime()).getFullYear(),n=t-e,r=0;for(i.years=[];r<=n;)i.years.push(e+r),r++},getDate:function(){return i.chooseDate},getDateOffset:function(e){var t=e;return new Date(t.year,t.month,t.date).getTime()}},d={drawCal:function(e){i.data={today:i.today,showDate:i.showDate,start:i.start,end:i.end,dates:i.format,years:i.years,hidePastMonth:e,currDate:u.getMaxDays()},i.data.showDateOffset=u.getDateOffset(i.showDate),i.data.startOffset=u.getDateOffset(i.start),i.data.endOffset=u.getDateOffset(i.end),i.data.datesOffset=[];for(var t=0,n=i.data.dates.length;t<n;t++){var l={year:i.showDate.year,month:i.showDate.month,date:i.data.dates[t]};i.data.datesOffset.push({d:i.data.dates[t],dOffset:u.getDateOffset(l)})}if(i.layer)i.layer.html(o(r.core.util.easyTemplate(s,i.data).toString())),d.removeMonthYear(),d.bindMonthYear();else{var c=new a({id:"calendar_layer"+r.getUniqueKey(),showWithAni:null,hideWithAni:null});c.html(o(r.core.util.easyTemplate(s,i.data).toString())),i.calNode=c.getBox(),i.calNode.className="pc_caldr W_layer",i.layer=c,d.bind(),d.bindMonthYear()}r.core.evt.stopEvent()},show:function(e,t){return r.core.evt.stopEvent(),i.layer.show(),i.layer.beside(e,t),r.addEvent(document.body,"click",l.close),n},hide:function(){return r.removeEvent(document.body,"click",l.close),i.layer.hide(),n},state:function(){return i.layer.getState()},bind:function(){t=r.delegatedEvent(i.calNode),t.add("date","click",c.date),r.custEvent.define(n,["choose"])},bindMonthYear:function(){var e=i.layer.getDomList(!0);i.changeDom.year=e.year,i.changeDom.month=e.month,r.addEvent(i.changeDom.year,"change",l.changeYear),r.addEvent(i.changeDom.month,"change",l.changeMonth)},removeMonthYear:function(){i.changeDom&&i.changeDom.year&&r.removeEvent(i.changeDom.year,"change",l.changeYear),i.changeDom&&i.changeDom.month&&r.removeEvent(i.changeDom.month,"change",l.changeMonth)}},f={init:function(){f.pars(),f.build(),f.bind()},pars:function(){i.callback=e.callback,i.currentDate=e.currentDate},build:function(){i.today=u.parseDate();for(var t in i.today)i.showDate[t]=i.today[t];u.getStartAndEndDays(e),u.getCurrentMonthInfo(),u.drawYear(),d.drawCal(e.hidePastMonth)},bind:function(){r.addEvent(i.calNode,"click",function(){r.core.evt.stopEvent()})},destroy:function(){i.layer&&i.layer.destroy(),i.layer=null,d.removeMonthYear()}};return f.init(),n.show=d.show,n.hide=d.hide,n.state=d.state,n.getDate=u.getDate,n.destroy=f.destroy,n}},"/templates/calendar.html":function(e,t,n,i){e.exports='<#et userlist data>\n <div class="selector">\n        <select node-type="month" class="month htc_select">\n       <#if (data.hidePastMonth)>\n            <#if (!(data.start.year == data.showDate.year&& data.currDate.month>0))><option value="0" ${data.showDate.month==0?\\\'selected=""\\\':\\\'\\\'}>#L{}</option></#if>\n            <#if (!((data.start.year == data.showDate.year&& data.currDate.month>1)||(data.end.year == data.showDate.year&& data.currDate.month<1)))><option value="1" ${data.showDate.month==1?\\\'selected=""\\\':\\\'\\\'}>#L{}</option></#if>\n           <#if (!((data.start.year == data.showDate.year&& data.currDate.month>2)||(data.end.year == data.showDate.year&& data.currDate.month<2)))><option value="2" ${data.showDate.month==2?\\\'selected=""\\\':\\\'\\\'}>#L{}</option></#if>\n           <#if (!((data.start.year == data.showDate.year&& data.currDate.month>3)||(data.end.year == data.showDate.year&& data.currDate.month<3)))><option value="3" ${data.showDate.month==3?\\\'selected=""\\\':\\\'\\\'}>#L{}</option></#if>\n           <#if (!((data.start.year == data.showDate.year&& data.currDate.month>4)||(data.end.year == data.showDate.year&& data.currDate.month<4)))><option value="4" ${data.showDate.month==4?\\\'selected=""\\\':\\\'\\\'}>#L{}</option></#if>\n           <#if (!((data.start.year == data.showDate.year&& data.currDate.month>5)||(data.end.year == data.showDate.year&& data.currDate.month<5)))><option value="5" ${data.showDate.month==5?\\\'selected=""\\\':\\\'\\\'}>#L{}</option></#if>\n           <#if (!((data.start.year == data.showDate.year&& data.currDate.month>6)||(data.end.year == data.showDate.year&& data.currDate.month<6)))><option value="6" ${data.showDate.month==6?\\\'selected=""\\\':\\\'\\\'}>#L{}</option></#if>\n           <#if (!((data.start.year == data.showDate.year&& data.currDate.month>7)||(data.end.year == data.showDate.year&& data.currDate.month<7)))><option value="7" ${data.showDate.month==7?\\\'selected=""\\\':\\\'\\\'}>#L{}</option></#if>\n           <#if (!((data.start.year == data.showDate.year&& data.currDate.month>8)||(data.end.year == data.showDate.year&& data.currDate.month<8)))><option value="8" ${data.showDate.month==8?\\\'selected=""\\\':\\\'\\\'}>#L{}</option></#if>\n           <#if (!((data.start.year == data.showDate.year&& data.currDate.month>9)||(data.end.year == data.showDate.year&& data.currDate.month<9)))><option value="9" ${data.showDate.month==9?\\\'selected=""\\\':\\\'\\\'}>#L{}</option></#if>\n           <#if (!((data.start.year == data.showDate.year&& data.currDate.month>10)||(data.end.year == data.showDate.year&& data.currDate.month<10)))><option value="10" ${data.showDate.month==10?\\\'selected=""\\\':\\\'\\\'}>#L{}</option></#if>\n          <#if (!(data.end.year == data.showDate.year&& data.currDate.month<11))><option value="11" ${data.showDate.month==11?\\\'selected=""\\\':\\\'\\\'}>#L{}</option></#if>\n      <#else>\n           <option value="0"  ${data.showDate.month==0?\\\'selected=""\\\':\\\'\\\'}>#L{}</option>\n         <option value="1"  ${data.showDate.month==1?\\\'selected=""\\\':\\\'\\\'}>#L{}</option>\n         <option value="2"  ${data.showDate.month==2?\\\'selected=""\\\':\\\'\\\'}>#L{}</option>\n         <option value="3"  ${data.showDate.month==3?\\\'selected=""\\\':\\\'\\\'}>#L{}</option>\n         <option value="4"  ${data.showDate.month==4?\\\'selected=""\\\':\\\'\\\'}>#L{}</option>\n         <option value="5"  ${data.showDate.month==5?\\\'selected=""\\\':\\\'\\\'}>#L{}</option>\n         <option value="6"  ${data.showDate.month==6?\\\'selected=""\\\':\\\'\\\'}>#L{}</option>\n         <option value="7"  ${data.showDate.month==7?\\\'selected=""\\\':\\\'\\\'}>#L{}</option>\n         <option value="8"  ${data.showDate.month==8?\\\'selected=""\\\':\\\'\\\'}>#L{}</option>\n         <option value="9"  ${data.showDate.month==9?\\\'selected=""\\\':\\\'\\\'}>#L{}</option>\n         <option value="10" ${data.showDate.month==10?\\\'selected=""\\\':\\\'\\\'}>#L{}</option>\n           <option value="11" ${data.showDate.month==11?\\\'selected=""\\\':\\\'\\\'}>#L{}</option>\n       </#if>\n        </select>\n     <select node-type="year" class="year htc_select">\n         <#list data.years as year>\n                <option value="${year}"${(data.showDate.year==year)?\\\' selected=""\\\':""}>${year}</option>\n         </#list>\n      </select>\n </div>\n    <ul class="weeks">\n        <li>#L{}</li><li>#L{}</li><li>#L{}</li><li>#L{}</li><li>#L{}</li><li>#L{}</li><li>#L{}</li>\n    </ul>\n <ul class="days">\n <#list data.datesOffset as list>\n      <li>\n      <#if (list!="")>\n          <#if (data.startOffset <= list.dOffset && list.dOffset <=data.endOffset)>\n             <a action-type="date" href="#date" style="visibility:${list.d?\\\'visible\\\':\\\'hidden\\\'}" onclick="return false;" \n                   title="${data.showDate.year}-${data.showDate.month+1}-${list.d}"\n                  year="${data.showDate.year}" month="${data.showDate.month+1}" day="${list.d}"\n                 ${(data.today.year==data.showDate.year&&data.today.month==data.showDate.month&&list.d==data.showDate.date)?\\\' class="day"\\\':\\\'\\\'}><strong>${list.d}</strong></a>\n          <#else>\n               ${list.d}\n         </#if>\n        </#if> \n       </li>\n </#list>\n  </ul>\n</#et>'}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.io.cssLoader",function(e){var t="",n="//img.t.sinajs.cn/t4/",i="//timg.sjs.sinajs.cn/t4/";"undefined"!=typeof $CONFIG&&(n=$CONFIG.cssPath||n,t=$CONFIG.version||"");var r={};return function(o,a,s,l,c){l=l||t,s=s||function(){};var u=function(e){for(var t=r[e].list,n=0;n<t.length;n++)t[n](e);r[e].loaded=!0,delete r[e].list};if(function(e,t){var n=r[e]||(r[e]={loaded:!1,list:[]});return n.loaded?(t(e),!1):(n.list.push(t),!(n.list.length>1))}(o,s)){var d;d=c?i+o:n+o+"?version="+l;var f=e.C("link");f.setAttribute("rel","Stylesheet"),f.setAttribute("type","text/css"),f.setAttribute("charset","utf-8"),f.setAttribute("href",d),document.getElementsByTagName("head")[0].appendChild(f);var p=e.C("div");p.id=a,e.core.util.hideContainer.appendChild(p);var m=3e3,h=function t(){if(42==parseInt(e.core.dom.getStyle(p,"height")))return e.core.util.hideContainer.removeChild(p),void u(o);--m>0?setTimeout(t,10):(e.log(o+"timeout!"),e.core.util.hideContainer.removeChild(p),delete r[o])};setTimeout(h,50)}}})}).call(t,n(0))},function(e,t,n){e.exports={default:n(71),__esModule:!0}},function(e,t,n){var i=n(24);e.exports=function(e){return Object(i(e))}},function(e,t,n){e.exports={default:n(88),__esModule:!0}},function(e,t,n){(function(e){e.register("lib.kit.extra.shine",function(e){var t=function(e){return e.slice(0,e.length-1).concat(e.concat([]).reverse())};return function(n,i){for(var r=e.parseParam({start:"#fff",color:"#fbb",times:2,step:5,length:4},i),o=r.start.split(""),a=r.color.split(""),s=[],l=0;l<r.step;l+=1){for(var c=o[0],u=1;u<r.length;u+=1){var d=parseInt(o[u],16),f=parseInt(a[u],16);c+=Math.floor(parseInt(d+(f-d)*l/r.step,10)).toString(16)}s.push(c)}for(var l=0;l<r.times;l+=1)s=t(s);var p=!1,m=e.timer.add(function(){return s.length?p?void(p=!1):(p=!0,void(n.style.backgroundColor=s.pop())):void e.timer.remove(m)})}})}).call(t,n(0))},,,function(e,t,n){(function(e){e.register("lib.kit.io.ajax",function(e){var t=function(e,t,n){return};return function(n){var i={},r=[],o=null,a=!1,s=e.parseParam({url:"",method:"get",responseType:"json",timeout:3e4,onTraning:e.funcEmpty,isEncode:!0},n);s.onComplete=function(e){a=!1,n.onComplete(e,s.args),setTimeout(l,0)},s.onFail=function(e){if(a=!1,"function"==typeof n.onFail)try{n.onFail(e,s.args)}catch(e){}setTimeout(l,0);try{t(s)}catch(e){}},s.onTimeout=function(e){try{t(s),n.onTimeout(e)}catch(e){}};var l=function(){if(r.length&&!0!==a){if(a=!0,s.args=r.shift(),"post"==s.method.toLowerCase()){var t=e.core.util.URL(s.url);t.setParam("__rnd",+new Date),s.url=t.toString()}o=e.ajax(s)}},c=function(e){for(;r.length;)r.shift();if(a=!1,o)try{o.abort()}catch(e){}o=null};return i.request=function(e){e||(e={}),n.noQueue&&c(),n.uniqueRequest&&o||(r.push(e),e._t=0,l())},i.abort=c,i}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.io.jsonp",function(e){return function(t){var n=e.parseParam({url:"",method:"get",responseType:"json",varkey:"_v",timeout:3e4,onComplete:e.funcEmpty,onTraning:e.funcEmpty,onFail:e.funcEmpty,isEncode:!0},t),i=[],r={},o=!1,a=function t(){i.length&&!0!==o&&(o=!0,r.args=i.shift(),r.onComplete=function(e){o=!1,n.onComplete(e,r.args),setTimeout(t,0)},r.onFail=function(e){o=!1,n.onFail(e),setTimeout(t,0)},e.jsonp(e.core.json.merge(n,{args:r.args,onComplete:function(e){r.onComplete(e)},onFail:function(e){try{r.onFail(e)}catch(e){}}})))},s={};return s.request=function(e){e||(e={}),i.push(e),e._t=1,a()},s.abort=function(e){for(;i.length;)i.shift();o=!1,r=null},s}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.io.ijax",function(e){return function(t){var n=e.parseParam({url:"",timeout:3e4,isEncode:!0,abaurl:null,responseName:null,varkey:"callback",abakey:"callback"},t),i=[],r=null,o=!1;n.onComplete=function(e,i){o=!1,t.onComplete(e,n.form,i),n.form=null,n.args=null,setTimeout(a,0)},n.onFail=function(e,i){o=!1,t.onFail(e,n.form,i),n.form=null,n.args=null,setTimeout(a,0)};var a=function(){var t;i.length&&!0!==o&&(o=!0,t=i.shift(),n.args=t.args,n.form=t.form,r=e.ijax(n))},s=function(e){for(;i.length;)i.shift();if(o=!1,r)try{r.abort()}catch(e){}r=null},l={};return l.request=function(n,r){if(!e.isNode(n))throw"[lib.kit.io.ijax.request] need a form as first parameter";r||(r={}),t.noQueue&&s(),i.push({form:n,args:r}),a()},l.abort=s,l}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.extra.listener",function(e){var t={},n={};return n.define=function(n,i){if(null!=t[n])throw"lib.kit.extra.listener.define: ";t[n]=i;var r={};return r.register=function(i,r){if(null==t[n])throw"lib.kit.extra.listener.define: ";e.listener.register(n,i,r)},r.fire=function(i,r){if(null==t[n])throw"commonlistener.define: ";e.listener.fire(n,i,r)},r.remove=function(t,i){e.listener.remove(n,t,i)},r.cache=function(t){return e.listener.cache(n,t)},r},n})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.extra.setPlainHash",function(e){return function(t){try{var n=window.$CONFIG;n&&"true"===n.bigpipe&&e.historyM?e.historyM.setPlainHash(t):window.location.hash=t}catch(e){}}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.dom.layoutPos",function(e){return function(t,n,i){if(!e.isNode(n))throw"lib.kit.dom.layerOutElement need element as first parameter";if(n===document.body)return!1;if(!n.parentNode)return!1;if("none"===n.style.display)return!1;var r,o,a,s,l,c,u;if(r=e.parseParam({pos:"left-bottom",offsetX:0,offsetY:0},i),!(o=n))return!1;for(;o!==document.body;){if(o=o.parentNode,"none"===o.style.display)return!1;if(c=e.getStyle(o,"position"),u=o.getAttribute("layout-shell"),"absolute"===c||"fixed"===c)break;if("true"===u&&"relative"===c)break}return o.appendChild(t),a=e.position(n,{parent:o}),s={w:n.offsetWidth,h:n.offsetHeight},l=r.pos.split("-"),"left"===l[0]?t.style.left=a.l+r.offsetX+"px":"right"===l[0]?t.style.left=a.l+s.w+r.offsetX+"px":"center"===l[0]&&(t.style.left=a.l+s.w/2+r.offsetX+"px"),"top"===l[1]?t.style.top=a.t+r.offsetY+"px":"bottom"===l[1]?t.style.top=a.t+s.h+r.offsetY+"px":"middle"===l[1]&&(t.style.top=a.t+s.h/2+r.offsetY+"px"),!0}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.publisher.source.formdata",function(e){return function(t){function n(n){var i=e.sizzle('[name="'+n+'"]',t);return i[0]?i[0].getAttribute("value"):"ABSENT"}function i(n,i){var r=e.sizzle('[name="'+n+'"]',t);r[0]&&r[0].setAttribute("value",i)}function r(n){var i=e.sizzle('[name="'+n+'"]',t);i[0]&&e.removeNode(i[0])}function o(){var n={},i=e.sizzle("[name]",t);for(var r in i){var o=i[r].getAttribute("name"),a=i[r].getAttribute("value");o&&a&&(n[o]=a)}return n}if(!t)return!1;var t=t;return{get:n,set:i,del:r,read:o,node:t}}})}).call(t,n(0))},function(e,t,n){(function(e){n(40),n(130),n(133),e.register("lib.publisher.widget.widgetloader",function(e){return function(t,n){var i=e.lib.publisher.widget;n=e.parseParam({widget:t.nodeList.widget,devent:""},n||{});var r,o,a,s={},l={list:["face","topic","settime"],entity:{},widgetList:{},func:function(e){return function(n){n.data.isimage?t.API.setImageLogType(n.data.log):t.API.setCurrentLogType(n.data.log),l.widgetList[e]||(l.widgetList[e]=i[e](t)),l.widgetList[e].show()}}},c={init:function(){c.bind()},bind:function(){e.custEvent.define(t,"close"),r=n.devent?n.devent:e.delegatedEvent(n.widget);for(var s=0,c=l.list.length;s<c;s++){var u=l.list[s];l.entity[u]=l.func(u),r.add(u,"click",l.entity[u])}o=i.plugin(t,n),a=i.imgPreview(t)},close:function(){e.custEvent.fire(t,"close",{type:"publish"})},destroy:function(){for(var e=0,t=l.list.length;e<t;e++){var n=l.list[e];r.remove(n,"click",l.entity[n])}for(var i in l.widgetList)l.widgetList[i].destroy&&l.widgetList[i].destroy();o.destroy(),a.destroy()}};return c.init(),s.close=c.close,s.destroy=c.destroy,s}})}).call(t,n(0))},function(e,t,n){n(72),n(84),e.exports=n(32).f("iterator")},function(e,t,n){"use strict";var i=n(73)(!0);n(41)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var i=n(23),r=n(24);e.exports=function(e){return function(t,n){var o,a,s=String(r(t)),l=i(n),c=s.length;return l<0||l>=c?e?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){var i=n(75);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var i=n(45),r=n(18),o=n(31),a={};n(10)(a,n(12)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(a,{next:r(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var i=n(7),r=n(17),o=n(21);e.exports=n(8)?Object.defineProperties:function(e,t){r(e);for(var n,a=o(t),s=a.length,l=0;s>l;)i.f(e,n=a[l++],t[n]);return e}},function(e,t,n){var i=n(47);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t,n){var i=n(11),r=n(80),o=n(81);e.exports=function(e){return function(t,n,a){var s,l=i(t),c=r(l.length),u=o(a,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},function(e,t,n){var i=n(23),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t,n){var i=n(23),r=Math.max,o=Math.min;e.exports=function(e,t){return e=i(e),e<0?r(e+t,0):o(e,t)}},function(e,t,n){var i=n(3).document;e.exports=i&&i.documentElement},function(e,t,n){var i=n(5),r=n(58),o=n(28)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){n(85);for(var i=n(3),r=n(10),o=n(27),a=n(12)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var c=s[l],u=i[c],d=u&&u.prototype;d&&!d[a]&&r(d,a,c),o[c]=o.Array}},function(e,t,n){"use strict";var i=n(86),r=n(87),o=n(27),a=n(11);e.exports=n(41)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):"keys"==t?r(0,n):"values"==t?r(0,e[n]):r(0,[n,e[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){n(89),n(95),n(96),n(97),e.exports=n(9).Symbol},function(e,t,n){"use strict";var i=n(3),r=n(5),o=n(8),a=n(25),s=n(44),l=n(90).KEY,c=n(15),u=n(29),d=n(31),f=n(19),p=n(12),m=n(32),h=n(33),v=n(91),g=n(92),y=n(17),b=n(13),_=n(11),w=n(26),x=n(18),k=n(45),E=n(93),T=n(94),S=n(7),C=n(21),L=T.f,A=S.f,N=E.f,D=i.Symbol,I=i.JSON,M=I&&I.stringify,W="prototype",j=p("_hidden"),F=p("toPrimitive"),B={}.propertyIsEnumerable,z=u("symbol-registry"),O=u("symbols"),H=u("op-symbols"),P=Object[W],$="function"==typeof D,R=i.QObject,U=!R||!R[W]||!R[W].findChild,K=o&&c(function(){return 7!=k(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=L(P,t);i&&delete P[t],A(e,t,n),i&&e!==P&&A(P,t,i)}:A,q=function(e){var t=O[e]=k(D[W]);return t._k=e,t},G=$&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},X=function(e,t,n){return e===P&&X(H,t,n),y(e),t=w(t,!0),y(n),r(O,t)?(n.enumerable?(r(e,j)&&e[j][t]&&(e[j][t]=!1),n=k(n,{enumerable:x(0,!1)})):(r(e,j)||A(e,j,x(1,{})),e[j][t]=!0),K(e,t,n)):A(e,t,n)},V=function(e,t){y(e);for(var n,i=v(t=_(t)),r=0,o=i.length;o>r;)X(e,n=i[r++],t[n]);return e},Y=function(e,t){return void 0===t?k(e):V(k(e),t)},J=function(e){var t=B.call(this,e=w(e,!0));return!(this===P&&r(O,e)&&!r(H,e))&&(!(t||!r(this,e)||!r(O,e)||r(this,j)&&this[j][e])||t)},Q=function(e,t){if(e=_(e),t=w(t,!0),e!==P||!r(O,t)||r(H,t)){var n=L(e,t);return!n||!r(O,t)||r(e,j)&&e[j][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=N(_(e)),i=[],o=0;n.length>o;)r(O,t=n[o++])||t==j||t==l||i.push(t);return i},ee=function(e){for(var t,n=e===P,i=N(n?H:_(e)),o=[],a=0;i.length>a;)!r(O,t=i[a++])||n&&!r(P,t)||o.push(O[t]);return o};$||(D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===P&&t.call(H,n),r(this,j)&&r(this[j],e)&&(this[j][e]=!1),K(this,e,x(1,n))};return o&&U&&K(P,e,{configurable:!0,set:t}),q(e)},s(D[W],"toString",function(){return this._k}),T.f=Q,S.f=X,n(49).f=E.f=Z,n(34).f=J,n(48).f=ee,o&&!n(16)&&s(P,"propertyIsEnumerable",J,!0),m.f=function(e){return q(p(e))}),a(a.G+a.W+a.F*!$,{Symbol:D});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var ie=C(p.store),re=0;ie.length>re;)h(ie[re++]);a(a.S+a.F*!$,"Symbol",{for:function(e){return r(z,e+="")?z[e]:z[e]=D(e)},keyFor:function(e){if(!G(e))throw TypeError(e+" is not a symbol!");for(var t in z)if(z[t]===e)return t},useSetter:function(){U=!0},useSimple:function(){U=!1}}),a(a.S+a.F*!$,"Object",{create:Y,defineProperty:X,defineProperties:V,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:ee}),I&&a(a.S+a.F*(!$||c(function(){var e=D();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(b(t)||void 0!==e)&&!G(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!G(t))return t}),i[1]=t,M.apply(I,i)}}),D[W][F]||n(10)(D[W],F,D[W].valueOf),d(D,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(e,t,n){var i=n(19)("meta"),r=n(13),o=n(5),a=n(7).f,s=0,l=Object.isExtensible||function(){return!0},c=!n(15)(function(){return l(Object.preventExtensions({}))}),u=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[i].i},f=function(e,t){if(!o(e,i)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[i].w},p=function(e){return c&&m.NEED&&l(e)&&!o(e,i)&&u(e),e},m=e.exports={KEY:i,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}},function(e,t,n){var i=n(21),r=n(48),o=n(34);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var a,s=n(e),l=o.f,c=0;s.length>c;)l.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var i=n(47);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(11),r=n(49).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return r(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):r(i(e))}},function(e,t,n){var i=n(34),r=n(18),o=n(11),a=n(26),s=n(5),l=n(42),c=Object.getOwnPropertyDescriptor;t.f=n(8)?c:function(e,t){if(e=o(e),t=a(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return r(!i.f.call(e,t),e[t])}},function(e,t){},function(e,t,n){n(33)("asyncIterator")},function(e,t,n){n(33)("observable")},function(e,t,n){(function(e){n(179),e.register("lib.kit.dom.autoHeightTextArea",function(e){var t=e.core.util.browser.MOZ,n=e.core.util.browser.IE6||e.core.util.browser.IE7||e.core.util.browser.IE8,i=function(i){var r,o=e.core.dom.getStyle;if(i.defaultHeight||(i.defaultHeight=parseInt(o(i,"height"),10)||parseInt(i.offsetHeight,10)||20),n){var a=parseInt(o(i,"paddingTop"),10)+parseInt(o(i,"paddingBottom"),10);r=Math.max(i.scrollHeight-a,i.defaultHeight)}else{var a=t?0:parseInt(o(i,"paddingTop"),10)+parseInt(o(i,"paddingBottom"),10),s=e.E("_____textarea_____");if(s||(s=e.C("textarea"),s.id="_____textarea_____",document.body.appendChild(s)),s.currentTarget!=i){var l=[];l.push("width:"+o(i,"width")),l.push("font-size:"+o(i,"fontSize")),l.push("font-family:"+o(i,"fontFamily")),l.push("line-height:"+o(i,"lineHeight")),l.push("padding-left:"+o(i,"paddingLeft")),l.push("padding-right:"+o(i,"paddingRight")),l.push("padding-top:"+o(i,"paddingTop")),l.push("padding-bottom:"+o(i,"paddingBottom")),l.push("top:-1000px"),l.push("height:0px"),l.push("position:absolute"),l.push("overflow:hidden"),l.push(""),l=l.join(";"),s.style.cssText=l}s.value=i.value,r=Math.max(s.scrollHeight-a,i.defaultHeight),s.currentTarget=i}return r};return function(t){function n(t){var n=e.core.dom.getStyle,i=[];return i.push("width:"+n(t,"width")),i.push("font-size:"+n(t,"fontSize")),i.push("font-family:"+n(t,"fontFamily")),i.push("line-height:"+n(t,"lineHeight")),i.push("padding-left:"+n(t,"paddingLeft")),i.push("padding-right:"+n(t,"paddingRight")),i.push("padding-top:"+n(t,"paddingTop")),i.push("padding-bottom:"+n(t,"paddingBottom")),i.push("top:-1000px"),i.push("height:0px"),i.push("position:absolute"),i.push("overflow:hidden"),i.push(""),i=i.join(";")}var r,o=t.textArea,a=t.maxHeight,s=t.inputListener,l=o.style;if((r=function(){"function"==typeof s&&s(),setTimeout(function(){var e=i(o);a=a||e;var t=e>a;l.overflowY=t?"auto":"hidden",l.height=Math.min(a,e)+"px"},0)})(),!e.core.util.browser.IE)try{e.conf.channel.at.register("open",function(){e.E("_____textarea_____").style.cssText=n(o)})}catch(t){e.log(t)}o.binded||(e.addEvent(o,"keyup",r),e.addEvent(o,"focus",r),e.addEvent(o,"blur",r),o.binded=!0,o.style.overflow="hidden")}})}).call(t,n(0))},function(e,t,n){(function(e){n(143),e.register("lib.kit.extra.imageURL",function(e){return function(t,n){var i={size:"small",https:!0};i=e.core.obj.parseParam(i,n);var r,o=i.size,a=i.https?"https://":"http://";if("w"==t[9]||"y"==t[9]&&t.length>=32){var s=1+(3&e.lib.kit.extra.crc32(t)),l="g"==t[21]?"gif":"jpg";r="w"==t[9]?a+"ww"+s+".sinaimg.cn/"+o+"/"+t+"."+l:a+"wx"+s+".sinaimg.cn/"+o+"/"+t+"."+l}else{var s=1+(15&(t.substr(-2,2),16));r=a+"ss"+s+".sinaimg.cn/"+o+"/"+t+"&690"}return r}})}).call(t,n(0))},function(e,t,n){(function(e){n(2),e.register("conf.trans.groupMember",function(e){var t=e.lib.kit.io.inter(),n=t.register;return n("create",{url:"/aj/groupchat/create",method:"post"}),n("update",{url:"/aj/groupchat/edit",method:"post"}),n("userList",{url:"/aj/relation/groupallmembers",method:"get"}),n("info",{url:"/aj/groupchat/query",method:"get"}),n("setSummary",{url:"/aj/groupchat/setsummary",method:"post"}),n("setAdmin",{url:"/aj/groupchat/setadmin",method:"post"}),n("unsetAdmin",{url:"/aj/groupchat/unsetadmin",method:"post"}),n("suggest",{url:"/aj/groupchat/attention",method:"get"}),n("groupList",{url:"/aj/relation/grouplist",method:"get"}),n("check",{url:"/aj/groupchat/getuser",method:"get"}),n("getUser",{url:"/aj/groupchat/getlist",method:"get"}),n("editGroup",{url:"/p/aj/groupchat/updategroupcard",method:"post"}),n("fansgroup",{url:"/aj/groupchat/queryjoingroups",method:"get"}),n("addFans",{url:"/aj/groupchat/addaffiliation",method:"post"}),t})}).call(t,n(0))},function(e,t,n){(function(e){n(36),n(1),n(154),e.register("lib.publisher.publisherDialog",function(e){var t={title:"#L{?}"},n=e.lib.kit.extra.language,i=e.lib.publisher.publisher,r=e.core.util.easyTemplate,o=window.$CONFIG||{},a=e.ui.tipAlert,s={limitNum:140,extendText:'<a target="_blank" class="S_txt2" href="//weibo.com/z/guize/gongyue.html">#L{}</a>'};return function(l){var c,u,d={};conf=e.parseParam({trans:e.conf.trans.article,transName:"publish",template:n('<#et temp data><div class="detail" node-type="outer"><div class="send_weibo clearfix" node-type="wrap"><div class="title_area clearfix"><div class="title" node-type="info"></div><div class="num S_txt2" node-type="num">#L{}<span>140</span>#L{}</div><div class="key S_textb"></div></div><div class="input" node-type="textElDiv"><textarea placeholder="" class="W_input" name="" node-type="textEl" range="26&amp;0"></textarea><div class="send_succpic" style="display:none" node-type="successTip"><span class="W_icon icon_succB"></span><span class="txt"></span></div><form style="display:none;" node-type="extradata"></form></div><div class="func_area clearfix"><div class="func" <#if (data.topic_id)>style="width: auto;"</#if> ><#if (data.draft_type == "super_topic")><span class="opt"><label class="W_label"><input node-type="topic" type="checkbox" value="${data.topic_id}" class="W_checkbox" checked><span></span></label></span></#if><#if (data.dci_setting_switch==1)><span class="opt_v2"><i class="W_icon icon_succ"></i></span></#if><a href="javascript:void(0);" node-type="prev" class="W_btn_b btn_30px"></a><a href="javascript:void(0)" class="W_btn_a btn_30px" node-type="submit">#L{}</a></div><div class="kind" node-type="widget"><#if (data.face)><a href="javascript:void(0);" class="S_txt1" action-type="face" action-data="type=500&amp;action=1&amp;log=face&amp;cate=1" title="#L{}" node-type="smileyBtn" suda-uatrack="key=tblog_home_edit&amp;value=phiz_button"><em class="W_ficon ficon_face">o</em></a></#if></div></div></div><#if (data.isWemedia)><div class="W_layer_btn_v2 S_bg1"><div><label class="W_label"><input node-type="rightsAgree" type="checkbox" value="" class="W_checkbox"><span><a href="//weibo.com/ttarticle/p/show?id=2309403965998205109836" target="_blank"></a></span></label><a href="//weibo.com/ttarticle/p/show?id=2309403965998205109836" target="_blank" class="W_icon icon_warnS"></a></div><div class="tips" node-type="rightsRemind" style="display:none"><i class="W_icon icon_rederrorS"></i><a href="javascript:" node-type="similarArticle" target="_blank" ></a>80%</div></div></#if><#if (data.isFollowToRead)><div class="W_layer_btn_v2 S_bg1" node-type="followToRead"><div class="opt">#L{}<label for="ss1" class="W_label"><input name="follow_to_read" type="radio" checked value="1" class="W_radio"><span>50%</span></label><label for="ss2" class="W_label"><input name="follow_to_read" type="radio" value="0" class="W_radio"><span></span></label></div></div></#if><#if (data.isShowFollowOfficial)><div class="W_layer_btn_v2 S_bg1" node-type="followOfficial">   <div class="opt opt_nobor">      <label class="W_label"><input name="follow_official" type="checkbox" value="1" class="W_radio" checked><span>@</span></label>   </div></div></#if></div></#et>'),appkey:"",styleId:"1",face:!0,image:!0,pid:"",content:"",info:"",title:n(t.title),extraUrl:"",extraSend:{},html:null,dialog:"true",storage:!1,asyncBeforePublish:void 0,draft_id:"",draft_title:"",draft_writer:"",draft_image:"",draft_summary:"",draft_content:"",draft_free_content:"",draft_type:"",pay_setting:"{}",isWemedia:0,topic_id:!1,extparams:!1,isFollowToRead:!1,follow_official:!1,article_extra:{},dci_setting_switch:0},l),1==o.follow_official&&"fans"==conf.draft_type&&(conf.isShowFollowOfficial=1==o.follow_official),conf.extraSend.location=conf.extraSend.location||o.location||"";var f=r(n(conf.template),conf).toString();conf.html&&(f=conf.html),conf.editorOpts=s,e.custEvent.define(d,["show","hide","publishShare"]);var p=function(i){var r=e.parseParam({appkey:"",content:"",info:"",pid:"",title:n(t.title),extraSend:{}},i);r.extraSend.location=r.extraSend.location||o.location||"",u.setTitle(r.title),u.show(),e.custEvent.add(u,"hidden",g),c.rend(r),c.editor.API.focus(),e.custEvent.fire(d,"show"),e.core.evt.addEvent(u._.nodes.prev,"click",g)},m=function(){setTimeout(g,1500)},h=function(t,n,i){e.custEvent.fire(d,"publishShare",[n,i])},v=function(){e.custEvent.add(c,"publish",m),e.custEvent.add(c,"publish",h)},g=function t(){e.custEvent.remove(u,"hidden",t),c.close(),u.hide(),e.custEvent.fire(d,"hide")},y=function(){e.core.evt.removeEvent(u._.nodes.prev,"click",g),e.custEvent.remove(c,"publish",m),c.destroy(),u.destroy()};return function(){u||(u=e.ui.dialog(),u.setContent(f)),conf.node=u.getBox(),c=i(conf),e.custEvent.hook(c,d,{publish:"publish",hide:"hide"}),v(),p(conf);var t=e.sizzle("input[name=follow_to_read]",u.getBox());t[0]&&!e.core.util.cookie.get("_ARTICLE_AFTR")&&setTimeout(function(){var n=a("",{icon:"rederrorS",autoHide:!1});n.beside(t[0]),n.on("hide",function(){e.core.util.cookie.set("_ARTICLE_AFTR",1)})},1e3)}(),d.dialog=u,d.publishTo=c.publishTo,d.addExtraInfo=c.addExtraInfo,d.disableEditor=c.disableEditor,d.show=p,d.hide=g,d.destroy=y,d}})}).call(t,n(0))},function(e,t,n){(function(e){n(2),e.register("conf.trans.feed.comment",function(e){var t=e.lib.kit.io.inter(),n=t.register;return n("smallList",{url:"/aj/v6/comment/small",method:"get"}),n("add",{url:"/aj/v6/comment/add",method:"post"}),n("delete",{url:"/aj/comment/del",method:"post"}),n("hotChange",{url:"/aj/comment/hotchange"}),n("privateSetting",{url:"/aj/account/setcommentprivacy",method:"post"}),n("privateNoMore",{url:"/aj/bubble/closebubble",method:"get"}),n("cfilter",{url:"/aj/v6/comment/small",method:"get"}),n("isComment",{url:"/aj/comment/privacy",method:"get"}),n("getIn",{url:"/aj/commentbox/in",method:"get"}),n("getOut",{url:"/aj/commentbox/out",method:"get"}),n("getComment",{url:"/aj/at/comment/comment",method:"get"}),n("getCommonComent",{url:"/aj/commentbox/common",method:"get"}),n("dialogue",{url:"/aj/v6/comment/conversation",method:"get"}),t})}).call(t,n(0))},function(e,t,n){(function(e){n(2),e.register("conf.trans.at",function(e){var t=e.lib.kit.io.inter(),n=t.register;return n("followList",{url:"/aj/mblog/attention"}),n("topicList",{url:"/aj/mblog/topic"}),n("stockList",{url:"/aj/mblog/stock"}),t})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.dom.firstChild",function(e){var t=e.core.dom.next;return function(e){var n=e.firstChild;return n&&1!=n.nodeType&&(n=t(n)),n}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.publisher.source.shine",function(e){var t=function(e){return e.slice(0,e.length-1).concat(e.concat([]).reverse())};return function(n,i){for(var r=e.parseParam({start:"#fff",color:"#fbb",times:2,step:5,length:4},i),o=r.start.split(""),a=r.color.split(""),s=[],l=0;l<r.step;l+=1){for(var c=o[0],u=1;u<r.length;u+=1){var d=parseInt(o[u],16),f=parseInt(a[u],16);c+=Math.floor(parseInt(d+(f-d)*l/r.step,10)).toString(16)}s.push(c)}for(var l=0;l<r.times;l+=1)s=t(s);var p=!1,m=e.timer.add(function(){return s.length?p?void(p=!1):(p=!0,void(n.style.backgroundColor=s.pop())):void e.timer.remove(m)})}})}).call(t,n(0))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(107),o=i(r);t.default=function(e,t,n){return t in e?(0,o.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){e.exports={default:n(141),__esModule:!0}},function(e,t,n){(function(e){function t(e){return e&&e.__esModule?e:{default:e}}var i=n(22),r=t(i);n(53),e.register("lib.kit.extra.upload",function(e){function t(){return!!(window.File&&window.FileList&&window.FileReader&&window.Blob)}function n(t){var n={url:0,markpos:1,logo:"",nick:0};if(!t)return n;var i=$CONFIG.watermark;return i&&"object"==(void 0===i?"undefined":(0,r.default)(i))?e.parseParam(n,i):n}function i(t,n,i,r){var s=t.files;if(1==s.length)return void a(t,n,i,r);e.removeNode(t);for(var l,c=0;l=s[c];c++){var u=new FileReader,d="fid"+(new Date).getTime();u.onload=function(e){return function(){o(this.result.split(",")[1],n,r,e)}}(d),u.readAsDataURL(l),i&&i(d)}}function o(t,i,r,o){var a=e.C("form");a.method="post",a.setAttribute("enctype","application/x-www-form-urlencoded"),a.innerHTML='<input name="b64_data" type="hidden" value="'+t+'">',a.style.cssText="position: fixed;left:0;top:0;width:1px;height:1px;overflow:hidden;visibility:hidden;",e.insertBefore(a,document.body.firstChild);var s=c+"data=base64&";s+=e.jsonToQuery(n(i)),e.lib.kit.io.ijax({url:s,varkey:"callback",abaurl:u,abakey:"cb",timeout:3e5,onComplete:function(t){if(!t||t.ret<0)switch(Math.abs(t.ret)){case 1:t.message="#L{}";break;case 4:case 9:t.message="#L{5MJPGGIFPNG}";break;default:t.message="#L{}"}r(t,o),e.removeNode(a)},onFail:function(){r({message:"#L{}"},o),e.removeNode(a)}}).request(a)}function a(t,i,r,o){var a=e.C("form");a.method="post",a.setAttribute("enctype","multipart/form-data"),a.style.cssText="position: fixed;left:0;top:0;width:1px;height:1px;overflow:hidden;visibility:hidden;",e.insertBefore(a,document.body.firstChild),a.appendChild(t);var s="fid"+(new Date).getTime(),l=c;l+=e.jsonToQuery(n(i));var d=e.lib.kit.io.ijax({url:l,varkey:"callback",abaurl:u,abakey:"cb",timeout:3e5,onComplete:function(t){if(!t||t.ret<0)switch(Math.abs(t.ret)){case 1:t.message="#L{}";break;case 4:case 9:t.message="#L{5MJPGGIFPNG}";break;default:t.message="#L{}"}o(t,s),e.removeNode(a)},onFail:function(){o({message:"#L{}"},s),e.removeNode(a)}});r&&r(s),d.request(a)}var s={},l=location.protocol,c=l+"//picupload.weibo.com/interface/pic_upload.php?mime=image/jpeg&marks=1&app=miniblog&s=rdxt&",u=l+"//weibo.com/ttarticle/p/spublishupload";return s.uploadMultifile=i,s.uploadBase64=o,s.uploadSinglefile=a,s.init=function(n,r,o,s){n.onchange=function(){if(""!==n.value){var l=n.cloneNode(!0);try{l.value=""}catch(e){}e.insertBefore(l,this),l.onchange=this.onchange,t()?i(this,r,o,s):a(this,r,o,s)}}},s})}).call(t,n(0))},function(e,t,n){(function(e){n(67),e.register("lib.kit.extra.feedControlHash",function(e){var t=$CONFIG.g_mathematician||0;return function(){Math.random()<=t&&e.lib.kit.extra.setPlainHash("_rnd"+(+new Date).toString())}})}).call(t,n(0))},function(e,t,n){(function(e){n(144),n(6),n(68),n(1),n(51),n(145),n(4),n(146),n(53),e.register("lib.publisher.source.publishTo",function(e){var t,n=e.lib.kit.extra.language;e.core.util.templet,e.core.util.easyTemplate;return function(i){var r,o,a,s,l,c,u,d=i&&i.editorWrapEl,f=i&&i.textEl,p=i&&i.trans||e.conf.trans.publishTo,m=i&&i.transName||"chatlist",h=[],v=(i.isforward,!1),g=function(){if(!e.isNode(d))throw"publishTo need a wrapper node to parseDOM"},y=e.getUniqueKey(),b=function(e){var t=[];return t.push('<div style="position: absolute;display:none;z-index:29999;outline:none;" hideFocus="true" node-type="publishTo" class="layer_menu_list" tabindex="10">'),t.push('<ul id="'+y+'">'),t.push('<li action-type="select" rank="0"><a title="#L{-}" suda-data="key=tblog_edit_exposure&value=edit_public" href="javascript:void(0)" action-data="rank=0&text=#L{}&rankid=" action-type="publishTo"><i class="W_icon icon_type_public"></i>#L{}</a></li>'),t.push('<li action-type="select" rank="6"><a title="#L{-}" href="javascript:void(0)" action-data="rank=6&text=#L{}&rankid=" action-type="publishTo"><i class="W_icon icon_type_friends"></i>#L{}</a></li>'),t.push('<li action-type="select" rank="1"><a title="#L{-}" suda-data="key=tblog_edit_exposure&value=edit_private" href="javascript:void(0)" action-data="rank=1&text=#L{}&rankid=" action-type="publishTo"><i class="W_icon icon_type_self"></i>#L{}</a></li>'),t.push('<li class="line S_line1"></li>'),t.push('<li action-type="select"><a action-type="more" title="#L{-}" href="javascript:void(0);"><i class="W_icon icon_type_group_v2"></i>#L{}</a></li>'),t.push("</ul></div>"),t.join("")},_=function(e){var t,n=[],i=e.length;i>6?n.push('<ul class="scroll_bar W_scroll" id="'+y+'">'):n.push('<ul class="scroll_bar W_scroll" id="'+y+'" style="">');for(var r=0;r<i;r++)t=e[r],n.push('<li action-type="select"><a action-type="publishTo" action-data="rank=7&text='+t.gname+"&rankid="+t.gid+'" title="'+t.gname+'" href="javascript:void(0);" onclick="return false;"><em class="S_txt1">'+t.gname+"</em>"),n.push('<span class="qunlist_right" action-type="setting" suda-data="key=adm_group&value=mail_publish"><em class="W_ficon ficon_setup S_ficon">J</em></span></a></li>');return n.push("</ul>"),n.push('<ul><li class="line S_line1"></li>'),n.push('<li  class="lotopt"><a href="javascript:void(0)" onclick="return false;" action-type="back">#L{}</a>'),n.push('<a href="javascript:void(0);"sudadata="key=build_group&value=mail_publish"  action-data="minNum=2" action-type="createGroup" class="right"><em class="W_ficon ficon_add S_ficon">+</em><em class="S_txt1">#L{}</em></a></li>'),n.push("</ul>"),n.join("")},w=function(){o=e.lib.kit.dom.parseDOM(e.builder(d).list),o.wrap||(o.wrap=d),l=o.wrap.className,o.submit&&(c=o.submit.innerHTML)},x=function(){(r=function(){var i,r,g,w,x={},k=o.showPublishTo;r=i=k&&k.getAttribute("action-data")&&e.core.json.queryToJson(k.getAttribute("action-data"))||{rank:"all",rankid:""},x.node=e.core.evt.delegatedEvent(d);var E=!1,T={hotKeyChangeRank:function(r,o){var a=o.match(/\d+/);if(a&&a[0]){var s=parseInt(a[0],10)-1,l=[{rank:0,rankid:"",text:n("#L{}"),title:n("#L{-}")},{rank:6,rankid:"",text:n("#L{}"),title:n("#L{-}")},{rank:1,rankid:"",text:n("#L{}"),title:n("#L{-}")}],c=function(){e.foreach(u,function(e){e.rank=7,e.rankid=e.gid,e.text=e.gname,e.title=e.gname}),l=l.concat(u),window.$CONFIG&&"1"==window.$CONFIG.miyou||l.splice(1,1),l[s]&&(i=l[s],N.btnContent(i.text),N.btnTitle(i.title),E=!1,e.custEvent.fire(N,"changeRank",i))},u=function(){return t?e.core.arr.copy(t):(D.group.request(function(t){u=e.core.arr.copy(t),c()}),null)}();u&&c()}}},S=function(){x.node.add("showPublishTo","click",N.show)},C=function(){D.normal.bind(),D.group.bind(),L.bind()},L={keyboardManager:null,keyTypes:["up","down","esc","enter"],getIndex:function(t){var n,i=L.getList(),r=L.lastCur;return e.foreach(i,function(e,t){if(r===e)return n=t,!1}),t>0?n++:n--,n>=i.length?n=0:n<0&&(n=i.length-1),n},up:function(){v=!0;var e=L.getIndex(-1),t=L.getList()[e];L.setCur(t,e),v=!1},down:function(){v=!0;var e=L.getIndex(1),t=L.getList()[e];L.setCur(t,e),v=!1},enter:function(){var t=L.lastCur;t.getAttribute("action-type")&&"select"!=t.getAttribute("action-type")||(t=e.sizzle("[action-type]",t)[0]),t&&x.layer.fireDom(t,"click",null)},esc:function(){N.hide()},bind:function(){L.keyboardManager=e.lib.publisher.widget.keyboardCapture(o.publishTo,{stopScroll:!0}),e.custEvent.define(L.keyboardManager,L.keyTypes);for(var t=0,n=L.keyTypes.length;t<n;t++){var i=L.keyTypes[t];e.custEvent.add(L.keyboardManager,i,L[i])}},list:null,lastCur:null,focusPublishTo:function(){o.publishTo.focus();var t=this.getList(!0),n=e.sizzle('li[rank="'+i.rank+'"]',o.publishTo)[0];this.setCur(n||t[0],0)},setCur:function(t,n,i){this.lastCur&&e.removeClassName(this.lastCur,"cur"),e.addClassName(t,"cur"),this.lastCur=t;var r=e.E(y);if(e.contains(r,t)){var o=function(t){return e.core.dom.getSize(t).height+(parseFloat(e.core.dom.getStyle(t,"marginTop"))||0)+(parseFloat(e.core.dom.getStyle(t,"marginBottom"))||0)},a=n+1,s=Math.max(o(t),o(e.sizzle("a",t)[0]));if(i)return;r.scrollTop=a>6?(a-6)*s:0}},getList:function(t){if(t||!this.list){var n=e.sizzle("li",o.publishTo),i=[];e.foreach(n,function(t){"none"!=e.getStyle(t,"display")&&"line"!=t.className&&i.push(t)}),this.list=i}return this.list}},A={setPos:function(){var t=e.core.dom.getSize;document.body.appendChild(o.publishTo);var n=t(o.showPublishTo).width-t(o.publishTo).width;e.lib.kit.dom.layoutPos(o.publishTo,o.showPublishTo,{offsetX:n+2,offsetY:2})},overHandler:function(t){if(!v){var n=e.sizzle("[action-type=select]",o.publishTo);index=e.core.arr.indexOf(t.el,n),list=e.sizzle(".cur",o.publishTo),list&&list[0]&&e.core.dom.removeClassName(list[0],"cur"),e.core.dom.addClassName(n[index],"cur"),L.setCur(n[index],index,!0)}},init:function(){x.layer=e.core.evt.delegatedEvent(o.publishTo),x.closeFriend=e.core.evt.delegatedEvent(o.publishTo)},show:function(){var t="none"!=e.getStyle(o.publishTo,"display");return e.setStyle(o.publishTo,"display",""),A.setPos(),L.focusPublishTo(),t||e.ui.effect(o.publishTo,"fadeInDown","fast"),a||(a=1,A.bindBodyEvt()),!1},hide:function(){o.publishTo&&e.ui.effect(o.publishTo,"fadeOutUp","fast",function(){e.setStyle(o.publishTo,"display","none"),E=!1,a&&(a=0,A.removeBodyEvt())})},autoHide:function(t){t=e.core.evt.fixEvent(t),o.showPublishTo===t.target||e.core.dom.contains(o.showPublishTo,t.target)||e.core.dom.contains(o.publishTo,t.target)||N.hide()},content:function(e){if(void 0===e)return o.publishTo.innerHTML;o.publishTo.innerHTML=e},bindBodyEvt:function(){e.addEvent(document.body,"click",A.autoHide)},removeBodyEvt:function(){e.removeEvent(document.body,"click",A.autoHide)}},N={enable:function(){o.showPublishTo.setAttribute("action-type","showPublishTo")},disable:function(){o.showPublishTo.setAttribute("action-type","")},miYouStyle:function(e,t){$CONFIG.lang;"2"==t.rank?o.submit.innerHTML=n('<span class="btn_30px">#L{}</span>'):o.submit.innerHTML=c},show:function(){var t=function(){e.custEvent.fire(N,"show"),E?D.group.show():D.normal.show()};if(o.publishTo){"none"===e.getStyle(o.publishTo,"display")?t():(e.setStyle(o.publishTo,"display","none"),E=!1)}else t();e.preventDefault()},btnContent:function(t){t&&(g.innerHTML=e.encodeHTML(t))},btnTitle:function(e){e&&o.showPublishTo.setAttribute("title",e)},hide:function(){A.hide()},toggle:function(){E||("none"==o.publishTo.style.display?N.show():N.hide())},rank:function(){return i},reset:function(){N.enable(),o.wrap.className=l,o.submit.innerHTML=c,N.btnContent(w.content),N.btnTitle(w.title),i=null,E=!1,i=r},destroy:function(){try{for(var t in x)x[t].destroy()}catch(e){}h.length&&e.hotKey.remove(f,h,T.hotKeyChangeRank),e.removeNode(o.publishTo),e.custEvent.undefine(N),L.keyboardManager&&(L.keyboardManager.destroy(),e.custEvent.undefine(L.keyboardManager,L.keyTypes))},changeRank:function(t){t=t>0?t-1:0;var n=e.sizzle('a[action-type="publishTo"]',o.publishTo)[t];if(n){D.normal.changeRank({el:n,data:e.core.json.queryToJson(n.getAttribute("action-data")||"")});var i=n.getAttribute("suda-data");if(i){var r=i.match(/key=(.+?)&value=(.+)/);r&&3===r.length&&window.SUDA&&window.SUDA.uaTrack&&window.SUDA.uaTrack(r[1],r[2])}}},getDomHeight:function(){return"none"==o.publishTo.style.display?{width:0,heigth:0}:e.core.dom.getSize(o.publishTo)},bindAltKey:function(){if(e.isNode(f)){if("macintosh"===e.core.util.browser.OS)for(var t=1;t<=9;t++)h.push("ctrl+"+t);else for(var t=1;t<=9;t++)h.push("alt+"+t);e.hotKey.add(f,h,T.hotKeyChangeRank)}}},D={normal:{bind:function(){x.layer.add("publishTo","click",D.normal.changeRank),x.layer.add("more","click",D.normal.more),x.layer.add("select","mousemove",A.overHandler)},getList:function(){A.content(s)},more:function(){D.group.show(),E=!0,e.core.evt.stopEvent()},show:function(){var e=function(){o.publishTo||(I(),A.init(),C()),D.normal.getList(),A.show()};t?e():D.group.request(e)},editGroupCallback:function(t){D.group.request(function(t){groups=e.core.arr.copy(t),D.group.cache=null})},changeRank:function(t){try{e.preventDefault(t.evt)}catch(e){}var r=e.fixEvent().target,a=!1;if("setting"==r.getAttribute("action-type"))a=!0;else{e.lib.kit.dom.parentElementBy(r,o.publishTo,function(e){if("setting"==e.getAttribute("action-type"))return!0})&&(a=!0)}if(a){var s=t.data.rankid.split(":")[1];return N.hide(),void(u=e.lib.group.gmemberSelect({gid:s,editSuccessCallback:D.normal.editGroupCallback}))}i=t.data;var l=t.data.text;N.btnContent(l),N.btnTitle(t.el.getAttribute("title")),"group"==i.rank?D.group.show():N.hide(),e.custEvent.fire(N,"changeRank",i),"6"==t.data.rank?o.submit.innerHTML=n("#L{}"):o.submit.innerHTML=n("#L{}")}},group:{request:function(n){p.request(m,{onSuccess:function(e){for(var i=e.data.length,r=0;r<i;r++)e.data[r].index=r+1;t=e.data,n&&n(t)},onError:function(t){e.lib.dialog.ioError(t.code,t)}},{})},bind:function(){x.layer.add("back","click",D.group.back),x.layer.add("createGroup","click",D.group.createGroup)},getList:function(){if(D.group.cache)A.content(D.group.cache);else{var e=n(_(t));D.group.cache=e,A.content(D.group.cache)}},show:function(){D.group.getList(),A.show()},back:function(){var t=e.core.evt.fixEvent();e.core.evt.stopEvent(t),E=!1,D.normal.show()},groupSelectCallback:function(t){i={rank:7,rankid:t.page_objectid,text:t.name,title:t.name};var n=t.name;N.btnContent(n),N.btnTitle(n),e.custEvent.fire(N,"changeRank",i),D.group.request(function(t){groups=e.core.arr.copy(t),D.group.cache=null})},createGroup:function(t){N.hide();var n=t.data;n.extraData={fromapp:1},n.addSuccessCallback=D.group.groupSelectCallback,u=e.lib.group.gmemberSelect(n)}}},I=function(t){var i=n(b(t));o.publishTo=e.insertHTML(document.body,i,"beforeend"),s=o.publishTo.innerHTML},M=function(){return e.isNode(o.showPublishTo)?(g=o.publishTotext,w={content:g.innerHTML,title:o.showPublishTo.getAttribute("title")},S(),1):0},W=M();return e.custEvent.define(N,["show","hide","changeRank"]),W?N:null}())&&r.bindAltKey&&r.bindAltKey()};return function(){g(),w(),x()}(),r}})}).call(t,n(0))},function(e,t,n){(function(e){n(147),e.register("lib.kit.dom.smartInput",function(e){return function(t,n){var i,r,o,a,s,l,c,u,d,f,p,m,h,v,g="stop";return i=e.parseParam({notice:"",currentClass:null,noticeClass:null,noticeStyle:null,maxLength:null,needLazyInput:!1,LazyInputDelay:200},n),r=e.cascadeNode(t),s=e.lib.kit.dom.textSelection(t),e.custEvent.define(r,"enter"),e.custEvent.define(r,"ctrlEnter"),e.custEvent.define(r,"lazyInput"),o=function(){i.maxLength&&e.bLength(t.value)>i.maxLength&&(t.value=e.leftB(t.value,i.maxLength))},p=function(){t.value===i.notice&&(t.value="",null!=i.noticeClass&&e.removeClassName(t,i.noticeClass)),null!=i.currentClass&&e.addClassName(t.parentNode,i.currentClass)},m=function(){""===t.value&&(t.value=i.notice,null!=i.noticeClass&&e.addClassName(t,i.noticeClass)),null!=i.currentClass&&e.removeClassName(t.parentNode,i.currentClass)},a=function(){return o(),t.value===i.notice?"":t.value},h=function(t){13===t.keyCode&&e.custEvent.fire(r,"enter",a())},v=function(t){13!==t.keyCode&&10!==t.keyCode||!t.ctrlKey||e.custEvent.fire(r,"ctrlEnter",a())},l=function(){"stop"===g&&(d=setInterval(u,i.LazyInputDelay),g="sleep")},c=function(){clearInterval(d),g="stop"},u=function(){f===t.value?"weakup"===g?(e.custEvent.fire(r,"lazyInput",t.value),g="sleep"):"waiting"===g&&(g="weakup"):g="waiting",f=t.value},i.needLazyInput&&(e.addEvent(t,"focus",l),e.addEvent(t,"blur",c)),e.addEvent(t,"focus",p),e.addEvent(t,"blur",m),e.addEvent(t,"keyup",o),e.addEvent(t,"keydown",h),e.addEvent(t,"keydown",v),r.getValue=a,r.setValue=function(e){return t.value=e,o(),r},r.setNotice=function(e){return i.notice=e,r},r.setNoticeClass=function(e){return i.noticeClass=e,r},r.setNoticeStyle=function(e){return i.noticeStyle=e,r},r.setMaxLength=function(e){return i.maxLength=e,r},r.restart=function(){m()},r.startLazyInput=l,r.stopLazyInput=c,r.setCursor=s.setCursor,r.getCursor=s.getCursor,r.insertCursor=s.insertCursor,r.insertText=s.insertText,r.destroy=function(){i.needLazyInput&&(e.removeEvent(t,"focus",p),e.removeEvent(t,"blur",m)),c(),e.removeEvent(t,"focus",p),e.removeEvent(t,"blur",m),e.removeEvent(t,"keyup",o),e.removeEvent(t,"keydown",h),e.removeEvent(t,"keydown",v),e.custEvent.undefine(r,"enter"),e.custEvent.undefine(r,"ctrlEnter"),e.custEvent.undefine(r,"lazyInput"),s.destroy(),r=null},r}})}).call(t,n(0))},function(e,t,n){(function(e){n(2),e.register("conf.trans.forward",function(e){var t=e.lib.kit.io.inter(),n=t.register;return n("toMicroblog",{url:"/aj/v6/mblog/forward",method:"post",withDomain:!0}),n("setDefault",{url:"/aj/mblog/repost/setdefault",method:"post"}),n("simpleForwardLinks",{url:"/aj/v6/mblog/repost/unexpanded",method:"get"}),n("detailForwardLinks",{url:"/aj/v6/mblog/repost/small",method:"get"}),n("toMicrogroup",{url:"/aj/weiqun/forward",method:"post",withDomain:!0}),n("microgroupList",{url:"/aj/weiqun/mylist",method:"get"}),n("importMiyou",{url:"/aj/f/closefriendsrecom",method:"get"}),n("toMiyouCircle",{url:"/aj/mblog/forwardmiyou",method:"post",withDomain:!0}),n("toMiyouCirclev5",{url:"/aj/mblog/forwardmiyou",method:"post"}),n("create",{url:"/aj/message/add",method:"post"}),n("toPriv_delete",{url:"/aj/message/del",method:"post"}),n("toPriv_getMsg",{url:"/aj/message/getmessagedetail",method:"get"}),t})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.extra.toFeedText",function(e){var t=function(e){return/^http\:\/\/(t\.cn|sinaurl\.cn)/.test(e)};return function(n){if("string"!=typeof n)throw"[lib.kit.extra.toFeedText]:need string as first parameter";for(var i=e.core.str.parseHTML(n),r=[],o=!1,a=0,s=i.length;a<s;a+=1)if(i[a][2]){if("img"===i[a][2].toLowerCase()){var l=i[a][3].match(/(?:alt\s*=\s*["|']?([^"|'|\s]+)["|']?)/),c=i[a][3].match(/(?:brand_face\s*=\s*["|']?([^"|'|\s]+)["|']?)/);c?r.push(c[1]):l&&r.push(l[1])}else if("a"===i[a][2].toLowerCase())if("/"===i[a][1])o=!1;else{var u;(u=i[a][3].match(/(?:ignore\s*=\s*["|']?([^"|'|\s]+)["|']?)/))&&u[1]?o=!0:(u=i[a][3].match(/(?:alt\s*=\s*["|']?([^"|'|\s]+)["|']?)/))&&u[1]?(r.push(" "+u[1]+" "),o=!0):(u=i[a][3].match(/(?:href\s*=\s*["|']?([^"|'|\s]+)["|']?)/))&&u[1]&&t(u[1])?(r.push(" "+u[1]+" "),o=!0):(u=i[a][3].match(/(?:shorthref\s*=\s*["|']?([^"|'|\s]+)["|']?)/))&&u[1]&&(r.push("http://t.cn/"+u[1]+" "),o=!0)}}else!1===o&&r.push(i[a][0]);return r.join("")}})}).call(t,n(0))},function(e,t,n){(function(e){n(2),e.register("conf.trans.global",function(e){var t=e.lib.kit.io.inter(),n=t.register;return n("language",{url:"/aj/user/lang",method:"post"}),n("followList",{url:"/aj/mblog/attention"}),n("topicList",{url:"/aj/mblog/topic"}),n("myFollowList",{url:"/aj/relation/attention"}),n("closetipsbar",{url:"/aj/tipsbar/closetipsbar",method:"post"}),n("weiqunnew",{url:"/ajm/weiqun?action=aj_remindunread"}),n("quiet_suggest",{url:"/aj/f/lenovo?ct=10&_wv=5",method:"get"}),n("like_object",{url:"/aj/v6/like/objectlike?_wv=5",method:"post",withDomain:!1}),n("like_weibo",{url:"/aj/v6/like/add?_wv=5",method:"post",withDomain:!1}),n("take",{url:"/p/aj/general/button",method:"get"}),n("pageTabDelete",{url:"/p/aj/tab/delete",method:"post",withDomain:!0}),n("getenvelope",{url:"/p/aj/proxy",method:"get"}),n("rss",{url:"/p/aj/proxy",method:"get"}),t})}).call(t,n(0))},function(e,t,n){(function(e){n(66),e.register("conf.channel.flashUpload",function(e){var t=["uploading","uploaded","uploadfail","nofile","complete","deleteFile"];return e.lib.kit.extra.listener.define("conf.channel.flashUpload",t)})}).call(t,n(0))},function(e,t,n){(function(e){n(2),e.register("conf.trans.comment",function(e){var t=e.lib.kit.io.inter(),n=t.register;return n("smallList",{url:"/aj/v6/comment/small",method:"get"}),n("add",{url:"/p/aj/v6/comment/add",method:"post",withDomain:!0}),n("delete",{url:"/aj/comment/del",method:"post"}),n("hotChange",{url:"/aj/comment/hotchange"}),n("privateSetting",{url:"/aj/account/setcommentprivacy",method:"post"}),n("privateNoMore",{url:"/aj/bubble/closebubble",method:"get"}),n("cfilter",{url:"/aj/v6/comment/small",method:"get"}),n("isComment",{url:"/aj/comment/privacy",method:"get"}),n("getIn",{url:"/aj/commentbox/in",method:"get"}),n("getOut",{url:"/aj/commentbox/out",method:"get"}),n("getComment",{url:"/aj/at/comment/comment",method:"get"}),n("getCommonComent",{url:"/aj/commentbox/common",method:"get"}),n("dialogue",{url:"/aj/v6/comment/conversation",method:"get"}),n("commentDetail_photoView",{url:"/aj/v6/comment/photolayer",method:"get"}),t})}).call(t,n(0))},function(e,t,n){(function(e){n(2),e.register("conf.trans.weiboDetail",function(e){var t=e.lib.kit.io.inter(),n=t.register;return n("deleteFeed",{url:"/aj/mblog/del",method:"post"}),n("deleteComment",{url:"/aj/comment/del",method:"post"}),n("commentList",{url:"/aj/v6/comment/big",method:"get"}),n("forwardList",{url:"/aj/v6/mblog/info/big",method:"get"}),n("mediaShow",{url:"//api.weibo.com/widget/show.jsonp",varkey:"jsonp",method:"get",requestMode:"jsonp"}),n("qingShow",{url:"//api.t.sina.com.cn/widget/show.json?source=3818214747",varkey:"callback",method:"get",requestMode:"jsonp"}),n("widget",{url:"/aj/mblog/showinfo",method:"post"}),n("third_rend",{url:"/aj/mblog/renderfeed",method:"post"}),n("getdciarticleinfo",{url:"/ttarticle/p/aj/getdciinfo",method:"get"}),n("getblockchain",{url:"/ttarticle/p/aj/getipsinfo",method:"get"}),t})}).call(t,n(0))},function(e,t,n){(function(e){n(1),e.register("lib.editor.plugin.count",function(t){function n(e){for(var n=41,i=140,r=20,o=e,a=e.match(/(http|https):\/\/[a-zA-Z0-9]+(\.[a-zA-Z0-9]+)+([-A-Z0-9a-z_\$\.\+\!\*\(\)\/\,\:;@&=\?~#%]*)*/gi)||[],s=0,l=0,c=a.length;l<c;l++){var u=t.core.str.bLength(a[l]);/^(http:\/\/t.cn)/.test(a[l])||(/^(http:\/\/)+(t.sina.com.cn|t.sina.cn)/.test(a[l])||/^(http:\/\/)+(weibo.com|weibo.cn)/.test(a[l])?s+=u<=n?u:u<=i?r:u-i+r:s+=u<=i?r:u-i+r,o=o.replace(a[l],""))}return Math.ceil((s+t.core.str.bLength(o))/2)}function i(e,t){var i=n(e),r=Math.abs(t-i);return i>t||i<1?{wordsnum:i,vnum:r,overflow:!0}:0==i?{wordsnum:i,vnum:r,overflow:!0}:{wordsnum:i,vnum:r,overflow:!1}}function r(e,t){if(!e.textEl)throw"[editor plugin count]: plz check nodeList"}var o;return function(n){var a,s=n.nodeList,l=n.opts,c=t.lib.kit.extra.language;o=l.limitNum,r(s),t.core.evt.custEvent.define(n,"textNum"),t.custEvent.define(n,"keyUpCount");var u=s.textEl,d=s.num;t.addEvent(u,"focus",function(){a=setInterval(function(){f()},200)}),t.addEvent(u,"blur",function(){clearInterval(a)});var f=function(){var e=0==t.core.str.trim(u.value).length?t.core.str.trim(u.value):u.value,r=n&&n.opts&&n.opts.extendText;e=e.replace(/\r\n/g,"\n");var o=i(e,l.limitNum);e.length>=0&&u.focus?o.overflow&&0!=o.wordsnum?d.innerHTML=(r?c(r):"")+c("#L{%s}",'<span class="S_error">'+o.vnum+"</span>"):d.innerHTML=(r?c(r):"")+c("#L{%s}","<span>"+o.vnum+"</span>"):0===e.length&&(d.innerHTML=(r?c(r):"")+c("#L{%s}","<span>"+o.vnum+"</span>")),t.core.evt.custEvent.fire(n,"textNum",{count:o.wordsnum,isOver:o.overflow})};e.core.evt.addEvent(u,"keyup",f),t.custEvent.add(n,"keyUpCount",f)}})}).call(t,n(0))},function(e,t,n){(function(e){n(103),n(68),n(20),n(1),n(120),e.register("lib.editor.plugin.at",function(t){var n,i,r,o,a,s,l,c,u=t.lib.kit.extra.language,d='<div class="layer_menu_list"><ul node-type="suggestWrap"></ul></div>',f='<#et temp data><li class="suggest_title">${data.title}</li><#list data.data as list><li action-type="item" <#if (list_index == 0)>class="cur" </#if>action-data="value=${list.screen_name}" value="${list.screen_name}" ><a href="javascript:void(0);">${list.screen_name}<#if (list.remark)>(${list.remark})</#if></a></li><#if (list.count)><span>${list.count}</span></#if></#list></#et>',p='<#et temp data><li class="suggest_title">${data.title}</li><#list data.data as list><li action-type="item" <#if (list_index == 0)>class="cur" </#if>action-data="value=${list.topic}" value="${list.topic}" ><a href="javascript:void(0);">${list.topic}</a></li></#list></#et>',m='<#et temp data><li class="suggest_title">${data.title}</li><#list data.data as list><li action-type="item" <#if (list_index == 0)>class="cur" </#if>action-data="value=${list.stock}" value="${list.stock}" ><a href="javascript:void(0);">${list.stock}</a></li></#list></#et>',h={"@":{trans:"followList",itemTemplate:f,title:{normal:u("#L{}"),more:u("#L{@}"),no:u("#L{}")},needClose:!1},"#":{trans:"topicList",itemTemplate:p,title:{normal:u("#L{}")},needClose:!0},$:{trans:"stockList",itemTemplate:m,title:{normal:u("#L{/}")},needClose:!0}},v=function(e){return"\\"+e},g=!1,y=0,b=function(){setTimeout(function(){t.custEvent.fire(n,"close")},200)},_=function(){a.style.display="none"},w=function(){t.custEvent.add(n,"onIndexChange",function(e,t){C(t)}),t.custEvent.add(n,"onSelect",function(e,i,r,o){y=0,t.core.evt.stopEvent();var a=c[i].getAttribute("value")+"";"@"===o&&(a=a.replace(/\(.*\)/,""));try{r.focus()}catch(e){}var s=t.lib.kit.extra.textareaUtils;s.replaceText(r,"");var l=1*s.selectionStart(r),u=new RegExp(v(o)+"([a-z/[A-Z0-9/\\]-_-]{0,20})$"),d=r.value.replace(/\r+/g,"").slice(0,l).match(u),f=r.value.slice(l,l+1);d=d&&d[1]?d[1].length:0,h[o].needClose?void 0!==f&&f!=o&&(a=a+o+" "):a+=" ",s.insertText(r,a,l,d);var p=s.getCursorPos(r);h[o].needClose&&f==o&&(s.setCursor(r,p+1),s.insertText(r," ",p+1,0)),p=s.getCursorPos(r);var m=s.getSelectedText(r),g=""==m||null==m?0:m.length;r.setAttribute("range",p+"&"+g),t.custEvent.fire(n,"close")}),t.addEvent(r.textEl,"blur",b),t.custEvent.add(n,"onClose",_),t.custEvent.add(n,"onOpen",function(e,i){o.style.display="",a.style.display="",g=!0,setTimeout(function(){t.custEvent.fire(n,"indexChange",0)},100)})},x=function(e){t.custEvent.remove(e),t.removeEvent(r.textEl,"blur",b)},k=function(e,n,i){var r=h[e].title,o=h[e].itemTemplate;return r.more&&r.no?n.data&&n.data.length>0?n.title=""==i?r.more:r.normal:n.title=r.no:n.title=r.normal,t.core.util.easyTemplate(o,n)},E=function(){t.core.evt.custEvent.add(i,"hidden",function(e,i){t.custEvent.fire(n,"close")}),t.core.evt.custEvent.add(i,"at",function(e,i){s=i.key;var r=i.flag;if(0==s.length&&!(r in h)||i.textarea&&!i.textarea.value)return void t.custEvent.fire(n,"close");t.conf.trans.at.request(h[r].trans,{onSuccess:function(e,l){var c=k(r,e,s);t.custEvent.fire(n,"openSetFlag",r),t.custEvent.fire(n,"open",i.textarea);var u=t.core.dom.builder(c),d=u.box;o.innerHTML=d,a.style.cssText=["z-index:11001;background-color:#ffffff;position:absolute;"].join("");var f=i.l;document.body.clientWidth<i.fl+t.core.dom.getSize(a).width&&i.fl>t.core.dom.getSize(a).width&&(f=i.l-t.core.dom.getSize(a).width);var p=0;p=t.winSize().height-i.textarea.getBoundingClientRect().bottom<200?-o.offsetHeight-4:i.t,t.lib.kit.dom.layoutPos(a,i.textarea,{pos:"left-top",offsetX:f,offsetY:p})},onError:function(){t.custEvent.fire(n,"close")}},{q:encodeURIComponent(s)})})},T=function(){l=r.textEl;var e=[];for(var n in h)e.push(v(n));e="["+e.join("|")+"]",i=t.lib.editor.at({textEl:l,flag:e})},S=function(i){y=0,a&&(a.style.display="none"),a&&(a.innerHTML=""),t.removeNode(a),a=e.C("div"),document.body.appendChild(a),0==a.innerHTML.length&&(a.innerHTML=d,o=t.core.dom.sizzle('[node-type="suggestWrap"]',a)[0],a.style.display="none"),n&&(t.custEvent.fire(n,"close"),x(n)),n=t.ui.mod.suggest({textNode:i,uiNode:o,actionType:"item",actionData:"value",flag:"@"}),w()},C=function(e){c=t.sizzle("li[class!=suggest_title]",o),c&&c[0]&&t.core.dom.removeClassName(c[y],"cur"),t.core.dom.addClassName(c[e],"cur"),y=e};return function(e,t){r=e.nodeList;var n={};return n.init=function(){T(),S(r.textEl),E()},n}})}).call(t,n(0))},function(e,t,n){(function(e){n(121),n(20),n(122),e.register("lib.editor.at",function(e){var t,n,i,r,o=e.lib.kit.dom.cssText,a=e.lib.kit.dom.isTurnoff,s=e.lib.kit.extra.textareaUtils,l=(window,document),c=e.core.util.browser,u="",d=s.selectionStart,f=function(){var e={"<":"&lt;",">":"&gt;",'"':"&quot;","\\":"&#92;","&":"&amp;","'":"&#039;","\r":"","\n":"<br>"," ":(navigator.userAgent.match(/.+(?:ie) ([\d.]+)/i)||[8])[1]<8?['<pre style="overflow:hidden;display:inline;',u,'word-wrap:break-word;"> </pre>'].join(""):['<span style="white-space:pre-wrap;',u,'"> </span>'].join("")};return function(t){return t.replace(/(<|>|\"|\\|&|\'|\n|\r| )/g,function(t){return e[t]})}}(),p=function(){var n=[],i=t.textEl.style.cssText;return e.foreach(["margin","padding","border"],function(i){e.foreach(["Top","Left","Bottom","Right"],function(r){if("border"!=i)return void n.push(i,"-",r.toLowerCase(),":",e.getStyle(t.textEl,i+r),";");e.foreach(["Style","Width"],function(o){n.push(i,"-",r.toLowerCase(),"-",o.toLowerCase(),":",e.getStyle(t.textEl,[i,r,o].join("")),";")})})}),n.push("font-size:"+e.getStyle(t.textEl,"fontSize")+";"),o([i,n.join(""),u,"\t\tword-wrap: break-word;\t\tline-height: 18px;\t\toverflow-y:auto;\t\toverflow-x:hidden;\t\toutline:none;\t"].join("")).getCss()},m=function(){var n,i,o,a=e.builder(['<div node-type="wrap" style="display:none;">','<span node-type="before"></span>','<span node-type="flag"></span>','<span node-type="after"></span>',"</div>"].join("")).list,s=a.wrap[0],u=a.flag[0],d=a.after[0],m=a.before[0],h=0,v=function(e){return c.MOZ?-2:c.MOBILE&&c.SAFARI&&(c.IPAD||c.ITOUCH||c.IPHONE)?-2:0};return{bind:function(){if(i!==t.textEl){r=e.position(t.textEl);var n=["left:",r.l,"px;top:",r.t+20,"px;"].join("");i=t.textEl;var a=p();i.style.cssText=a,o=[n,a,"\t\t\t\tposition:absolute;\t\t\t\tfilter:alpha(opacity=0);\t\t\t\topacity:0;\t\t\t\tz-index:-1000;\t\t\t"].join(""),s.style.cssText=o,h||(h=1,l.body.appendChild(s))}},content:function(a,l,c,p){s.style.cssText=[o,"\t\t\t\twidth:",(parseInt(e.getStyle(i,"width"))||i.offsetWidth)+v(),"px;\t\t\t\theight:",parseInt(e.getStyle(i,"height"))||i.offsetHeight,"px;\t\t\t\toverflow-x:hidden;\t\t\t\toverflow-y:",/webkit/i.test(navigator.userAgent)?"hidden":e.getStyle(i,"overflowY"),";\t\t\t"].join(""),m.innerHTML=f(a),u.innerHTML=f(l)||"&thinsp;",d.innerHTML=f([c,p].join("")),clearTimeout(n),n=setTimeout(function(){var n=e.position(u);e.custEvent.fire(t.eId,"at",{t:n.t-i.scrollTop-r.t,l:n.l-r.l,fl:n.l,key:c,flag:l,textarea:t.textEl})},30)},hide:function(){s.style.display="none"},show:function(){s.style.display=""}}}(),h=function(){if(a(t.textEl))return void clearInterval(n);var r=t.textEl.value.replace(/\r/g,""),o=d(t.textEl);if(!(o<0||o==i)){i=o;var s=r.slice(0,o),l=s.match(new RegExp(["(",t.flag,")([a-z/[A-Z0-9/\\]-_-]{0,20})$"].join("")));if(!l)return void e.custEvent.fire(t.eId,"hidden");var c=r.slice(o);s=s.slice(0,-l[0].length),m.content(s,l[1],l[2],c)}};return function(r){if(r&&r.textEl){r=e.parseParam({textEl:null,flag:"@",eId:e.custEvent.define({},["at","hidden"])},r);var o=function i(){t&&(clearInterval(n),e.removeEvent(t.textEl,"blur",i),m.hide())},a=function(){o(),t=r,i=null,m.bind(),m.show(),n=setInterval(h,200),e.addEvent(r.textEl,"blur",o)};return e.addEvent(r.textEl,"focus",a),r.eId}}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.dom.isTurnoff",function(e){return function(e){return!(e.parentNode&&11!=e.parentNode.nodeType&&!e.disabled)}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.dom.cssText",function(e){var t=function(e,t){for(var n,i=(e+";"+t).replace(/(\s*(;)\s*)|(\s*(:)\s*)/g,"$2$4");i&&(n=i.match(/(^|;)([\w\-]+:)([^;]*);(.*;)?\2/i));)i=i.replace(n[1]+n[2]+n[3],"");return i};return function(e){e=e||"";var n=[],i={push:function(e,t){return n.push(e+":"+t),i},remove:function(e){for(var t=0;t<n.length;t++)0==n[t].indexOf(e+":")&&n.splice(t,1);return i},getStyleList:function(){return n.slice()},getCss:function(){return t(e,n.join(";"))}};return i}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.editor.plugin.sucTip",function(e){return function(t,n){var i=t.nodeList,r={},o=function(n){var n=n||{},r=e.core.obj.parseParam({className:"send_succpic",innerHTML:"",delay:2},n);i.successTip.className=r.className,i.successTip.innerHTML=r.innerHTML,e.core.evt.custEvent.fire(t,"setSucTipDelay",r.delay)},a=function(e){return e&&e.getTime||(e=new Date),{year:e.getFullYear(),mouth:e.getMonth()+1,date:e.getDate(),hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}},s={theEnd:function(e,t){var n=a(t.time);if(2012==n.year&&12==n.mouth&&21==n.date&&n.hours>=10){var i=!1;n.seconds%5==0&&(i=!0),-1!=t.text.indexOf("")&&(i=!0),-1!=t.text.indexOf("")&&(i=!0),-1!=t.text.indexOf("")&&(i=!0),i?o({className:"send_success_over2",innerHTML:'<a target="_blank" href="//huati.weibo.com/z/2013/"></a>',delay:3}):o()}else o(2012==n.year&&12==n.mouth&&22==n.date&&n.hours<=14?{className:"send_success_over1",innerHTML:'<a target="_blank" href="//huati.weibo.com/z/2013/"></a>',delay:3}:{})}},l=function(){e.core.evt.custEvent.define(t,"theEnd"),e.core.evt.custEvent.add(t,"theEnd",s.theEnd)},c=function(){l()};return r.init=c,r}})}).call(t,n(0))},function(e,t,n){(function(e){n(36),n(4),n(69),n(1),n(126),e.register("lib.editor.plugin.score",function(e){return function(t,n){function i(t,n){if(p!==t||m!==n){var i=t%1!=0,c=t/1|0,u=-1;n&&(u=i?c:c-1),e.foreach(d,function(e,t){var n=a;c?(n=u===t?o:r,c-=1):i&&(n=u===t?l:s,i=!1),e.className=n}),p=t,m=n}}if(t&&t.nodeList&&t.nodeList.score){var r="s_star_a",o="l_star_a",a="s_star_b",s="s_star_c",l="l_star_b",c={},u=t.nodeList.reviewadd,d=e.sizzle("a",u),f=0;e.foreach(d,function(t){switch(e.trim(t.className)){case r:f+=1;break;case s:case l:f+=.5}});var p,m,h=e.delegatedEvent(t.nodeList.score),v=e.lib.publisher.source.formdata(t.nodeList.extradata),g=e.lib.kit.extra.language,y={.5:g("#L{}"),1:g("#L{}"),1.5:g("#L{}"),2:g("#L{}"),2.5:g("#L{}"),3:g("#L{}"),3.5:g("#L{}"),4:g("#L{}"),4.5:g("#L{}"),5:g("#L{}")},b={reviewadd:function(n){var n=e.fixEvent(n),r=e.position(u),o={height:u.offsetHeight,width:u.offsetWidth};if(n.pageY>r.t&&n.pageY<r.t+o.height&&n.pageX>r.l&&n.pageX<r.l+o.width){var a=n.pageX-r.l,s=Math.floor(a/o.width*10+1)/2;i(s,!0),t.nodeList.score_title&&(t.nodeList.score_title.innerHTML=y[s])}else i(f),t.nodeList.score_title&&(t.nodeList.score_title.innerHTML=y[f]||"&nbsp;")},add:function(n){var r=e.position(u),o=n.data,a=n.evt.pageX-r.l,s={height:u.offsetHeight,width:u.offsetWidth};o.score=Math.floor(a/s.width*10+1)/2,e.conf.trans.publisher.getTrans("reviewadd",{onSuccess:function(n){f=o.score,i(f,!0),n.data.score_title&&t.nodeList.score_title&&(t.nodeList.score_title.innerHTML=n.data.score_title),v.set("score",o.score),n.data.prefixtext&&v.set("prefixtext",n.data.prefixtext),n.data.refreshpl&&e.lib.kit.extra.refreshpl('[node-type="'+n.data.refreshpl+'"]'),e.custEvent.fire(t,"keyUpCount")},onError:function(t){e.lib.dialog.ioError(t.code,t)},onFail:function(){e.lib.dialog.ioError(json.code,json)}}).request(o)}},_=function(){e.addEvent(document.body,"mousemove",b.reviewadd),h.add("reviewadd","click",b.add)};return function(){_()}(),c.destroy=function(){e.removeEvent(document.body,"mousemove",b.reviewadd),h.remove("reviewadd","click",b.add)},c}}})}).call(t,n(0))},function(e,t,n){(function(e){n(1),n(56),e.register("lib.dialog.authentication",function(e){return function(t){var n=e.lib.kit.extra.language;e.core.util.browser;t=e.parseParam({src:"//weibo.com/a/verify/realname?stage=home_verification",icon:"warn",isHold:!0,width:"380px",height:"240px",title:n("#L{}")},t||{});var i,r,o={},a=!1,s="tblog_checkfailed_reform",l={init:function(){i=e.ui.dialog(t);var n=[];n.push('<iframe id="account_authentication" name="account_authentication" node-type="frame" width="'+t.width+'" height="'+t.height+'" allowtransparency="true" scrolling="no" frameborder="0" src=""></iframe>');var r=e.builder(n.join(""));i.setTitle(t.title),i.setContent(r.box);i.getDomList()},show:function(){try{window.SUDA&&SUDA.uaTrack&&SUDA.uaTrack(s,"checkfailed_box")}catch(e){}a||e.lib.kit.io.cssLoader("style/css/module/layer/layer_check_identity.css","js_style_css_module_layer_check_identity",function(){a=!0}),i.show().setMiddle(),r=e.E("account_authentication");var n=decodeURIComponent(t.src)+"&rnd=";r.attachEvent?r.attachEvent("onload",function(){r.height=t.height,i.setMiddle()}):r.onload=function(){r.height=t.height,i.setMiddle()},r.src=n+e.core.util.getUniqueKey()},destroy:function(){},hook:function(e,t){try{"100000"==e?l.verifySucc():l.verifyFail()}catch(e){}},verifySucc:function(){window.SUDA&&SUDA.uaTrack&&SUDA.uaTrack(s,"checkfailed_success"),i.hide();var t={title:n("#L{}"),icon:"success",OK:function(){window.SUDA&&SUDA.uaTrack&&SUDA.uaTrack(s,"checkfailed_play"),history.go(0)},OKText:n("#L{}"),msg:n("#L{}")},r=e.ui.alert(t.msg,t);e.custEvent.add(r,"hide",function(){history.go(0)})},verifyFail:function(){window.SUDA&&SUDA.uaTrack&&SUDA.uaTrack(s,"checkfailed_twotimes"),i.hide();var t={title:n("#L{}"),icon:"warn",OK:function(){SUDA.uaTrack&&SUDA.uaTrack(s,"checkfailed_triple"),l.show()},OKText:n("#L{}"),msg:n("#L{<br/>}")+'<a class="S_spetxt" suda-data="key=tblog_checkfailed_reform&value=checkfailed_havealook" href="//weibo.com">'+n("#L{>>}")+"</a>"},r=e.ui.alert(t.msg,t);e.custEvent.add(r,"hide",function(){history.go(0)})}};return l.init(),o.destroy=l.destory,o.show=l.show,window.App=window.App||{},window.App.checkRealName=l.hook,o}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.extra.refreshpl",function(e){return function(t,n){function i(e){return!(!e||e==document.body)&&(e.id?e.id:i(e.parentNode))}function r(t){var n=[];return e.foreach(e.sizzle(t),function(e,t){n.push(i(e))}),!!n[0]&&n.join("|")}function o(n,i){var o=r(t);if(o){var s=FM.getURL().path,l=e.queryToJson(FM.getURL().query);l.pids=o;var c=e.jsonToQuery(l),u="";a?(l=l||"",u=s+"?"+c+"#_0",FM.setState(u,i)):(u=s+"?"+l,window.location.href=u)}}var a="true"===$CONFIG.bigpipe;o(n||{})}})}).call(t,n(0))},function(e,t,n){(function(e){n(1),n(70),e.register("lib.editor.plugin.morePlugin",function(e){e.lib.kit.extra.language;return function(t){var n,i,r={},o={number:4,defNumber:2},a={init:function(){var n=e.queryToJson(t.nodeList.widget.getAttribute("node-data")||"");o=e.parseParam(o,n),a.buildMenu()},showMenu:function(t){i.style.display="",i.style.zIndex="10000";var n=e.position(t),r=e.core.dom.getSize(t);e.core.dom.setXY(i,{t:n.t+r.height+3,l:n.l-5}),e.ui.effect(i,"fadeInDown","fast"),window.SUDA&&SUDA.uaTrack&&SUDA.uaTrack("tblog_home_edit",'unfold_more"')},hideMenu:function(){e.ui.effect(i,"fadeOutUp","fast",function(){i.style.display="none"})},buildMenu:function(){(i=t.nodeList.morePlugin)&&(document.body.appendChild(i),i.style.position="absolute",e.lib.publisher.widget.widgetloader(t,{widget:i}),a.menuEvt())},menuEvt:function(){e.addEvent(i,"click",a.hideMenu)},destroy:function(){e.removeEvent(i,"click",a.hideMenu),n&&n.destroy()}};return a.init(),r.menu=i,r.show=a.showMenu,r.hide=a.hideMenu,r.destroy=a.destroy,r}})}).call(t,n(0))},function(e,t,n){(function(e){n(1),n(129),n(4),e.register("lib.face.face",function(e){function t(t){return o.length?(t(o),!0):(e.conf.trans.face.request("face",{onSuccess:function(e,n){o=[],e.data.usual.norm&&o.push({name:a,hotmap:e.data.usual.hot.slice(0,12),map:e.data.usual.norm});for(var i in e.data.more)e.data.more.hasOwnProperty(i)&&o.push({name:i,map:e.data.more[i]});t(o)},onError:function(t,n){e.lib.dialog.ioError(t.code,t)}},{}),!1)}var n=e.lib.kit.extra.language,i=["first","second","third","fouth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth"],r={"":"default","":"langxiaohua","":"baozou","":"konglong","":"lengtu","":"star","":"ghost","":"diandang","":"ali","BOBOTOTO":"boto","":"gaoguai","":"chunjie","":"xiaohei","":"baigujing","hello":"hello","":"miantan","":"alatu","":"yaoji","":"mood","":"mosi","":"guibao","":"lanmaomao","":"bierde","":"weather","":"relax","":"paopao","":"eiyou","":"kuaimao","":"baifu","":"mengmeng","":"guanbuzhe","":"chouchou",nonopanda:"nonopanda","":"konglongbaobei","":"shadow","":"daertu","":"hapitu","":"xingzuo","":"aixin","":"zhangxiaohe","":"youxihou","":"xinlang","":"daxiong","":"mogu","":"kuku"},o=[],a=n("#L{}");return function(n,o){var a=e.ui.bubble('<div class="W_layer W_layer_pop"><div class="content"><div class="W_layer_close"><a href="javascript:void(0);" node-type="close" class="W_ficon ficon_close S_ficon">X</a></div><div class="layer_faces"><div class="WB_minitab"><ul class="minitb_ul S_line1 S_bg1 clearfix"><li class="minitb_item S_line1" node-type="tab"><a href="javascript:void(0);" class="minitb_lk S_txt1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a><span class="cur_block"></span></li><li class="minitb_item S_line1" node-type="tab"><a href="javascript:void(0);" class="minitb_lk S_txt1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a><span class="cur_block"></span></li><li class="minitb_item S_line1" node-type="tab"><a href="javascript:void(0);" class="minitb_lk S_txt1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a><span class="cur_block"></span></li><li class="minitb_item S_line1" node-type="tab"><a href="javascript:void(0);" class="minitb_lk S_txt1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a><span class="cur_block"></span></li><li class="minitb_item S_line1" node-type="tab"><a href="javascript:void(0);" class="minitb_lk S_txt1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a><span class="cur_block"></span></li></ul><ul class="W_fr minitb_ul S_line1 S_bg1 clearfix"><li class="minitb_more S_line1" node-type="prev" action-type="prev"> <a href="javascript:void(0);" class="minitb_lk S_txt1"><i class="W_ficon ficon_arrow_left_lite S_ficon">j</i></a></li><li class="minitb_more S_line1" node-type="next" action-type="next"> <a href="javascript:void(0);" class="minitb_lk S_txt1"><i class="W_ficon ficon_arrow_right_lite S_ficon">i</i></a></li></ul></div><div class="faces_list_box"><div class="faces_list" node-type="scrollView"><div node-type="list"></div></div></div></div><div class="W_layer_arrow"><span class="W_arrow_bor" node-type="arrow"><i class="S_line3"></i><em class="S_bg2_br"></em></span></div></div></div>',{clickBlankToHide:!0,stopClickPropagation:!0,autoRelease:!0,showWithAni:"fadeInDown:fast",hideWithAni:"fadeOutUp:fast"});e.custEvent.define(a,"insert");var s,l=a.getDomList(!0).list,c=[].concat(a.getDomList(!0).tab),u=0,d=0;return t(function(t){function n(){e.foreach(c,function(n,i){i+=d,e.removeClassName(n,"current"),t[i]?(i===u?(e.addClassName(n,"current"),n.innerHTML='<a href="javascript:void(0);" class="minitb_lk S_txt1 S_bg2" action-type="tab" action-data="index='+i+'">'+t[i].name+'</a><span class="cur_block"></span>'):n.innerHTML='<a href="javascript:void(0);" class="minitb_lk S_txt1" action-type="tab" action-data="index='+i+'">'+t[i].name+'</a><span class="cur_block"></span>',n.title=t[i].name):(n.innerHTML='<a href="javascript:void(0);" class="minitb_lk S_txt1"></a><span class="cur_block"></span>',n.title=""),n.offsetWidth}),d<=0?e.addClassName(a.getDomList().prev,"W_btn_b_disable"):e.removeClassName(a.getDomList().prev,"W_btn_b_disable"),d>=t.length-5?e.addClassName(a.getDomList().next,"W_btn_b_disable"):e.removeClassName(a.getDomList().next,"W_btn_b_disable")}a.on("tab","click",function(n){u=0|n.data.index,e.foreach(c,function(t,n){e.removeClassName(t,"current"),e.removeClassName(t.firstChild,"S_bg2")}),e.addClassName(n.el.parentNode,"current"),e.addClassName(n.el,"S_bg2");var o,d="";t[u].hotmap&&(d+='<ul class="faces_list_hot clearfix">',e.foreach([].concat(t[u].hotmap),function(e,t){o='suda="key=mainpub_default_expr&value='+i[t]+'"',d+='<li action-type="select" action-data="insert='+encodeURIComponent(e.phrase)+'" title="'+e.phrase.replace(/\[|\]/g,"")+'" '+o+'><img src="'+e.icon+'"/></li>'}),d+="</ul>"),d+="<ul>",e.foreach([].concat(t[u].map),function(e){o='suda="key=pub_expression&value='+r[t[u].name]+'"',d+='<li action-type="select" action-data="insert='+encodeURIComponent(e.phrase)+'" title="'+e.phrase.replace(/\[|\]/g,"")+'" '+o+'><img src="'+e.icon+'"/></li>'}),d+="</ul>",l.innerHTML=d,l.offsetWidth,s||(s=e.ui.scrollView(a.getDomList(!0).scrollView)),setTimeout(function(){s.reset(),s.scrollTop(0)})}),a.on("prev","click",function(e){d=Math.max(d-5,0),n()}),a.on("next","click",function(e){d=Math.min(d+5,t.length-5),n()}),a.on("select","click",function(t){var n=e.sizzle("img",t.el)[0].getAttribute("src");a.trigger("insert",{value:decodeURIComponent(t.data.insert),url:n});var i=t.el.getAttribute("suda");i&&(i=e.queryToJson(i),window.SUDA&&window.SUDA.uaTrack&&window.SUDA.uaTrack(i.key,i.value))}),a.on("beforeHide",function(){s.scrollEl.style.overflowY="hidden"}),a.on("hide",function(){s&&(s.destroy(),s=null)}),n(),a.trigger(c[0].firstChild,"click",null)}),a.getBub=function(){return a},o.refer?a.show().setArrow("top").setAlignPos(n,o.refer,o):a.show().beside(n,o),a}})}).call(t,n(0))},function(e,t,n){(function(e){n(2),e.register("conf.trans.face",function(e){var t=e.lib.kit.io.inter(),n=t.register;return n("face",{url:"/aj/mblog/face?type=face&_wv=5"}),n("magicFace",{url:"/aj/mblog/face?type=ani&_wv=5"}),t})}).call(t,n(0))},function(e,t,n){(function(e){n(131),n(20),e.register("lib.publisher.widget.topic",function(e){return function(t){var n,i,r={},o=!1,a=e.lib.kit.extra.textareaUtils,s={text:"##"},l=function(e,n){var i=n.value,o=t.nodeList.textEl,s=o.value,l=i.length;if(-1!=s.indexOf(i)){var c=s.indexOf(i);a.setCursor(o,c+1+l)}else{t.API.insertText(i+" ");var u=a.getCursorPos(o);a.setCursor(o,u)}r.hide();var d=t.API.getCurrentLogType();t.API.addShortUrlLog(d)},c=function(e,n){var i=a.getSelectedText(t.nodeList.textEl);if(0==1*i.length||s.text.indexOf(i)>-1)l(e,n);else{var o="#"+i+"#";a.replaceText(t.nodeList.textEl,o),r.hide()}},u=function(){e.custEvent.add(n,"insert",l),e.custEvent.add(n,"blank_topic",c),e.custEvent.add(t,"close",r.hide),e.custEvent.add(n,"hide",function(){e.custEvent.remove(n,"blank_topic"),e.custEvent.remove(n,"hide",arguments.callee),e.custEvent.remove(n,"insert"),e.custEvent.remove(t,"close")})},d=function(){e.core.evt.preventDefault();var i,r=e.fixEvent(e.getEvent()).target;i=e.contains(t.nodeList.widget,r)?r:t.nodeList.more,n=e.lib.topic.publishTopicBubble(i,{refer:t.nodeList.textEl}),o||u()};return r.init=function(n,r,o){t=n,i=r,e.addEvent(n.nodeList[i],"click",d)},r.clear=function(){},r.show=d,r.hide=function(){n&&n.getBub().hide()},r.destroy=function(){t=null},r}})}).call(t,n(0))},function(e,t,n){(function(e){n(1),n(132),e.register("lib.topic.publishTopicBubble",function(t){var n,i,r,o,a=t.lib.kit.extra.language,s=a('<div class="W_layer W_layer_pop"><div class="content"><div class="W_layer_title"><div class="W_layer_close"><a href="javascript:void(0);" node-type="close" class="W_ficon ficon_close S_ficon">X</a></div></div><div class="layer_send_topic"><div class="layer_send_btn clearfix"><ul class="clearfix"><li class="S_line2 li_s3"><a href="javascript:void(0);" action-type="blank_topic" action-data="text=##L{}#" class="W_btn_l"><span class="btn_45px"><em class="W_ficon ficon_add_topic S_ficon"></em>#L{}</span></a></li></ul></div><div class="topic_box"><div class="tit">#L{}</div><ul class="topic_ul clearfix" node-type="topic_list"></ul></div></div><div class="W_layer_arrow"><span node-type="arrow" class="W_arrow_bor"><i class="S_line3"></i><em class="S_bg2_br"></em></span></div></div></div>'),l={},c=function(){i=t.ui.bubble(s,{showWithAni:"fadeInDown:fast",hideWithAni:"fadeOutUp:fast",clickBlankToHide:!0,showWithSetWidth:!1}),n=i.getDomList(!0),r=i.getBox(),o=n.topic_list,p();t.conf.trans.topic.request("getTopic",{onComplete:function(e,t){d(e.data)}},{})},u=function(){c(),f.add(),t.custEvent.add(i,"hidden",function(e){return function(){t.custEvent.remove(e,"hidden",arguments.callee),f.destroy(),e&&e.destroy&&e.destroy()}}(i))},d=function(e){o.innerHTML=e},f={add:function(){t.custEvent.add(l,"hide",function(){i.hide()})},destroy:function(){t.custEvent.remove(l,"blank_topic"),t.custEvent.remove(l,"hide"),t.custEvent.remove(l,"insert")}},p=function(){t.custEvent.define(l,"blank_topic"),t.custEvent.define(l,"insert"),t.custEvent.define(l,"hide");var n=e.core.evt.delegatedEvent(r);n.add("add_topic","click",function(e){t.preventDefault(e.evt),t.custEvent.fire(l,"insert",{value:e.data.text})}),n.add("blank_topic","click",function(e){t.preventDefault(e.evt),t.custEvent.fire(l,"blank_topic",{value:e.data.text})})};return l.getBub=function(){return i},function(e,n){if(!t.isNode(e))throw"common.bubble.topic need el as first parameter!";return u(),i.show().setArrow("top").setAlignPos(e,n.refer),l}})}).call(t,n(0))},function(e,t,n){(function(e){n(2),e.register("conf.trans.topic",function(e){var t=e.lib.kit.io.inter();return(0,t.register)("getTopic",{url:"/aj/v6/mblog/trend"}),t})}).call(t,n(0))},function(e,t,n){(function(e){n(1),e.register("lib.publisher.widget.settime",function(e){function t(e,t){return(Array(t).join(0)+e).slice(-t)}var n=e.lib.kit.extra.language,i=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],r=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],o=n('<#et settimetip data><div class="set_timer S_line1 S_bg1 clearfix" node-type="settime" style="display: none;"><span class="set_date_txt W_fl">#L{}</span><div class="set_data_mod W_fl S_line3 clearfix" action-type="settime_data" action-data="start=${data.startDate}&end=${data.endDate}"><input type="text" value="${data.startDate}" class="ipt W_fl" readonly="true" node-type="settime_data"> <i class="icon_calendar W_fr"></i></div><select class="sel_time S_line1 W_fl" action-type="settime_hour" node-type="settime_hour"><#list data.hourList as eachHour><option value="${eachHour}" <#if (eachHour_index == data.hour)>selected="true"</#if> >${eachHour}</option></#list></select><span class="set_time_txt W_fl">#L{}</span><select class="sel_time S_line1 W_fl" action-type="settime_min" node-type="settime_min"><#list data.minuteList as eachMinute><option value="${eachMinute}" <#if (eachMinute_index == data.minute)>selected="true"</#if> >${eachMinute}</option></#list></select><span class="set_time_txt W_fl">#L{}</span><a title="#L{}" href="javascript:void()" action-type="close" class="W_ficon ficon_close S_ficon">X</a><a target="_top" href="//weibo.com/${data.uid}/profile?profile_ftype=1&timefeed=1" node-type="timing_blog_manage" class="rt_txt W_fr">#L{}</a></div></#et>');return function(n){var a,s={},l=function(){n.nodeList.settime||function(){var a=new Date(+new Date+3e5),s=new Date(+a+1728e5),l=e.builder(e.core.util.easyTemplate(o,{hourList:i,minuteList:r,startDate:[a.getFullYear(),t(a.getMonth()+1,2),t(a.getDate(),2)].join("-"),endDate:[s.getFullYear(),t(s.getMonth()+1,2),t(s.getDate(),2)].join("-"),hour:a.getHours(),minute:a.getMinutes(),uid:$CONFIG.uid}).toString()).list;n.nodeList.textElDiv.appendChild(l.settime[0]);for(var c in l)n.nodeList[c]||(n.nodeList[c]=l[c][0])}(),n.nodeList.settime.style.display="",e.addClassName(n.nodeList.textElDiv,"input_set_timer");var s=e.delegatedEvent(n.nodeList.settime),l={settime_date:function(t){var i=(t.data.end||"").split(" ")[0],r=(t.data.start||"").split(" ")[0];!a&&(a=e.ui.calendar({start:r||mTime().ymd,end:i,callback:function(e){n.nodeList.settime_data.value=e,l.changed(),a.hide()}})),a.show(t.el,{appendTo:document.body,pos:"bottom-left"})},settime_hour:function(){},settime_min:function(){},changed:function(){var e=n.nodeList.settime_data.value+" "+n.nodeList.settime_hour.value+":"+n.nodeList.settime_min.value;n.nodeList.textEl.setAttribute("settime",e)},reset:function(){e.removeClassName(n.nodeList.textElDiv,"input_set_timer"),n.nodeList.textEl.setAttribute("settime","")},close:function(){l.reset()}};(function(){s.add("settime_data","click",l.settime_date),s.add("close","click",l.close),e.addEvent(n.nodeList.settime_data,"change",l.changed),e.addEvent(n.nodeList.settime_hour,"change",l.changed),e.addEvent(n.nodeList.settime_min,"change",l.changed),e.core.evt.custEvent.define(n,"resettime"),e.core.evt.custEvent.add(n,"resettime",l.reset)})(),l.changed()};return s.init=function(t,i,r){n=t,aim=i,e.addEvent(t.nodeList[aim],"click",l)},s.destroy=function(){},s.show=l,s}})}).call(t,n(0))},function(e,t,n){(function(e){n(135),e.register("lib.kit.dom.hover",function(e){function t(t,n){for(var i=n.length;i--;)if(n[i]===t||e.contains(n[i],t))return!0;return!1}var n={};return e.lib.kit.touch.cantouch?function(i){var r=i.act,o=i.extra||[],a=function(e){i.onmouseover.apply(r,[e])},s=function(e){i.onmouseout.apply(r,[e])},l=function(n,i){t(e.fixEvent(i).target,[r].concat(o))?a(i):s(i)};return"inited"in n||(n.inited=!0,e.custEvent.define(n,["tap"]),e.addEvent(document.body,"tap",function(t){e.custEvent.fire(n,"tap",t)})),e.custEvent.add(n,"tap",l),{destroy:function(){e.removeEvent(document.body,"tap",l)}}}:function(t){var n=t.delay||300,i=t.moutDelay||n,r=t.isover||!1,o=t.act,a=t.extra||[],s=null,l=function(e){r&&t.onmouseover.apply(o,[e])},c=function(e){r||t.onmouseout.apply(o,[e])},u=function(e){r=!0,s&&clearTimeout(s),s=setTimeout(function(){l(e)},n)},d=function(e){r=!1,s&&clearTimeout(s),s=setTimeout(function(){c(e)},i)};e.core.evt.addEvent(o,"mouseover",u),e.core.evt.addEvent(o,"mouseout",d);for(var f=0,p=a.length;f<p;f+=1)e.core.evt.addEvent(a[f],"mouseover",u),e.core.evt.addEvent(a[f],"mouseout",d);var m={};return m.destroy=function(){e.core.evt.removeEvent(o,"mouseover",u),e.core.evt.removeEvent(o,"mouseout",d);for(var t=0,n=a.length;t<n;t+=1)e.core.evt.removeEvent(a[t],"mouseover",u),e.core.evt.removeEvent(a[t],"mouseout",d)},m}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.touch.cantouch",function(t){return e.core.util.browser.IPAD})}).call(t,n(0))},function(e,t,n){(function(e){n(6),n(20),n(137),e.register("lib.editor.editor",function(e){var t=e.addEvent,n=e.removeEvent,i=e.custEvent,r=(e.getStyle,e.setStyle,e.lib.kit.dom.parseDOM),o=e.lib.kit.extra.textareaUtils,a=e.lib.editor.count;return function(s,l){var c={},l=l,u={},d="",f="",p="",m={reset:function(){u.textEl.value="",i.fire(c,"changed"),u.textEl.removeAttribute("extra"),d=f=p=""},delWords:function(e){var t=m.getWords();if(!(t.indexOf(e)>-1))return!1;u.textEl.value="",v.textInput(t.replace(e,""))},getWords:function(){return e.core.str.trim(u.textEl.value)},getExtra:function(){var t,n=u.textEl.getAttribute("extra")||"";return null!=n&&(t=e.core.str.trim(n)),t},focus:function(e,t){if(void 0!==e)o.setCursor(u.textEl,e,t);else{var n=u.textEl.value.length;o.setCursor(u.textEl,n)}h.cacheCurPos()},blur:function(){u.textEl.blur()},addExtraInfo:function(e){"string"==typeof e&&u.textEl.setAttribute("extra",e)},disableEditor:function(e){n(u.textEl,"mouseup",h.cacheCurPos),!0===e?u.textEl.setAttribute("disabled","disabled"):(t(u.textEl,"mouseup",h.cacheCurPos),u.textEl.removeAttribute("disabled"))},getCurPos:function(){return(u.textEl.getAttribute("range")||"0&0").split("&")},count:function(){var t=0==e.core.str.trim(u.textEl.value).length?e.core.str.trim(u.textEl.value):u.textEl.value;return a(t)},addShortUrlLog:function(t){if(t=t&&e.trim(t)){new RegExp("^"+t+"$|_"+t+"$|^"+t+"_|_"+t+"_").test(d)||(d=d?d+"_"+t:t)}},getShortUrlLog:function(){return d},setCurrentLogType:function(e){f=e},getCurrentLogType:function(){return f},setImageLogType:function(e){p=e},getImageLogType:function(){return p}},h={textElFocus:function(){u.recommendTopic&&e.core.dom.setStyle(u.recommendTopic,"display","none"),i.fire(c,"focus"),u.num&&e.core.dom.setStyle(u.num,"display",""),m.getWords()==l.tipText&&m.delWords(l.tipText)},textElBlur:function(){setTimeout(function(){0===u.textEl.value.length&&(u.recommendTopic&&e.core.dom.setStyle(u.recommendTopic,"display",""),u.num&&u.recommendTopic&&e.core.dom.setStyle(u.num,"display","none"),void 0!==l.tipText&&(u.textEl.value=l.tipText)),i.fire(c,"blur")},50)},cacheCurPos:function(){var t=o.getSelectedText(u.textEl),n=""==t||null==t?0:t.length,i=e.core.dom.textSelectArea(u.textEl).start,r=i+"&"+n;u.textEl.setAttribute("range",r)}},v={textChanged:function(){i.fire(c,"keyUpCount")},textInput:function(e,t){var n=m.getCurPos();n[0],n[1];m.getWords()==l.tipText&&e!=l.tipText&&m.delWords(l.tipText),o.unCoverInsertText(u.textEl,e,{rcs:n[0],rccl:n[1]}),h.cacheCurPos(),i.fire(c,"changed")}},g=function(){_(),w()},y=function(){x(),E(),T(),b()},b=function(){if(l.storeWords)return void(0==u.textEl.value.length&&v.textInput(l.storeWords));l.tipText&&(u.textEl.value=l.tipText)},_=function(){if(!s)throw"node is not defined in module editor"},w=function(){var t=e.core.dom.builder(s).list;if(u=r(t),!u.widget)throw"can not find nodes.widget in module editor"},x=function(){var e=u.textEl;t(e,"focus",h.textElFocus),t(e,"blur",h.textElBlur),t(e,"mouseup",h.cacheCurPos),t(e,"keyup",h.cacheCurPos)},k=function(){i.define(c,["changed","focus","blur"])},E=function(){k(),i.add(c,"changed",v.textChanged)},T=function(){},S=function(){i.remove(c),i.undefine(c);var e=u.textEl;n(e,"focus",h.textElFocus),n(e,"blur",h.textElBlur),n(e,"mouseup",h.cacheCurPos),n(e,"keyup",h.cacheCurPos)};g();var C={reset:m.reset,getWords:m.getWords,getExtra:m.getExtra,delWords:m.delWords,focus:m.focus,blur:m.blur,insertText:v.textInput,check:v.textChanged,addExtraInfo:m.addExtraInfo,disableEditor:m.disableEditor,getCurPos:m.getCurPos,count:m.count,textElFocus:h.textElFocus,cacheCurPos:h.cacheCurPos,addShortUrlLog:m.addShortUrlLog,getShortUrlLog:m.getShortUrlLog,setCurrentLogType:m.setCurrentLogType,getCurrentLogType:m.getCurrentLogType,setImageLogType:m.setImageLogType,getImageLogType:m.getImageLogType};return c.destroy=S,c.API=C,c.nodeList=u,c.init=y,c.opts=l,c}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.editor.count",function(e){function t(t){for(var n=41,i=140,r=20,o=t,a=t.match(/http:\/\/[a-zA-Z0-9]+(\.[a-zA-Z0-9]+)+([-A-Z0-9a-z_\$\.\+\!\*\(\)\/,:;@&=\?\~\#\%]*)*/gi)||[],s=0,l=0,c=a.length;l<c;l++){var u=e.core.str.bLength(a[l]);/^(http:\/\/t.cn)/.test(a[l])||(/^(http:\/\/)+(t.sina.com.cn|t.sina.cn)/.test(a[l])||/^(http:\/\/)+(weibo.com|weibo.cn)/.test(a[l])?s+=u<=n?u:u<=i?r:u-i+r:s+=u<=i?r:u-i+r,o=o.replace(a[l],""))}return Math.ceil((s+e.core.str.bLength(o))/2)}return function(e){return e=e.replace(/\r\n/g,"\n"),t(e)}})}).call(t,n(0))},function(e,t,n){(function(e){n(2),e.register("conf.trans.validateCode",function(e){var t=e.lib.kit.io.inter();return(0,t.register)("checkValidate",{url:"/aj/pincode/verified",method:"post"}),t})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.dom.parentAttr",function(e){return function(e,t,n){var i;if(e&&t)for(n=n||document.body;e&&e!=n&&!(i=e.getAttribute(t));)e=e.parentNode;return i}})}).call(t,n(0))},function(e,t,n){(function(e){n(180),n(99),n(1),e.register("lib.image.commentImage",function(e){function t(t){if(!e.contains(document.body,t))return!1;for(;t&&t.style;){if("none"===e.getStyle(t,"display"))return!1;t=t.parentNode}return!0}var n=e.lib.kit.extra.language,i={width:120,height:120},r=new RegExp(["^",n("#L{}"),"@([^:]*):$"].join("")),o="loading";return function(a,s,l){function c(e,t){if(e.getState()){var n=e.getBox().parentNode,i=n&&e.getBox().nextSibling;e.setArrow("top").setAlignPos(t,v,{offset:{left:-1,top:2}}),i&&n.insertBefore(e.getBox(),i)}}function u(){v&&v.setAttribute("pid",o),e.fireEvent(document.body,"click"),g.getDomList().inner.innerHTML='<i class="W_loading"></i>',g.getState()||g.show(),c(g,s)}function d(t){var n=(t.fid,t.data.pid),a=e.lib.kit.extra.imageURL(n,{size:"thumbnail"});if(m&&(m.resetFileNum(1),m.resetUploadedFileNum(0)),v&&v.getAttribute("pid")===o){v.setAttribute("pid",n),g.getState()||g.show();var u=new Image;u.onload=function(){u.onload=null;var e=u.width,t=u.height,n=e,r=t;e>i.width&&(n=i.width,r=i.width/e*t),r>i.height&&(r=i.height,n=i.height/t*e),u.width=n,u.height=r,g.getDomList().inner.innerHTML="",g.getDomList().inner.appendChild(u),c(g,s)},u.src=a;var d=v.value;d==l.placeholder&&(d=""),(""==d||r.test(e.trim(d)))&&(v.value=d+l.emptyText)}}function f(e){v&&v.removeAttribute("pid");var t,i=!1;if("singleError"==e.type&&(e.data.sourceData&&"A20001"==e.data.sourceData.code?t=n("#L{, }"):(t=n("#L{}"),i=!0)),"fileNumErr"==e.type)return 0;"fileSizeErr"==e.type&&(t=n("#L{20M, 20M}")),"defaultErr"==e.type&&(t=n("#L{, }")),t&&(g.getDomList().inner.innerHTML=n('<div class="opt"><span class="txt">'+t+"</span>"+(i?'<a href="javascript:void(0)" action-type="retry" action-data="fid='+e.fid+'" class="W_btn_b">#L{}</a>':"")+"</div>"),c(g,s))}function p(){}if(s){l=l||{},l.placeholder=l.placeholder||"",l.emptyText=l.emptyText||n("#L{}");var m,h,v=a.nodeList.textEl,g=e.ui.bubble({showWithAni:"fadeInDown:fast",hideWithAni:"fadeOutUp:fast"});return g.getDomList().inner.className="layer_WB_pic S_bg1",g.on("hide",function(){clearInterval(h),v&&v.removeAttribute("pid")}),g.on("show",function(){h=setInterval(function(){t(s)?c(g,s):(clearInterval(h),g.hide())},500)}),g.on("retry","click",function(e){var t=e.data.fid;g.getDomList().inner.innerHTML='<i class="W_loading"></i>',v&&v.setAttribute("pid",o),m&&m.reuploadById(t)}),m=e.lib.image.mUpload(s,{w:20,h:20,uploading:u,uploaded:d,error:f,extra:p,number:1}),{hideLayer:function(){g.hide()},destroy:function(){g&&g.destroy(),m&&m.destroy(),g=m=null}}}}})}).call(t,n(0))},function(e,t,n){n(142);var i=n(9).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){var i=n(25);i(i.S+i.F*!n(8),"Object",{defineProperty:n(7).f})},function(e,t,n){(function(e){e.register("lib.kit.extra.crc32",function(e){return function(e,t){function n(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}e=n(e);var t,i="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D";void 0===t&&(t=0);var r=0,o=0;t^=-1;for(var a=0,s=e.length;a<s;a++)o=255&(t^e.charCodeAt(a)),r="0x"+i.substr(9*o,8),t=t>>>8^r;var l=-1^t;return l<0&&(l=4294967296+l),l}})}).call(t,n(0))},function(e,t,n){(function(e){n(2),e.register("conf.trans.publishTo",function(e){var t=e.lib.kit.io.inter(),n=t.register;return n("list",{url:"/aj/f/group/list",method:"get"}),n("chatlist",{url:"/aj/f/groupchat/list",method:"get"}),t})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.publisher.widget.keyboardCapture",function(e){var t={13:"enter",27:"esc",32:"space",38:"up",40:"down",9:"tab"};return function(n,i){i=i||{};var r={},o={keydown:function(n){i.stopScroll&&e.stopEvent();var o,a;(o=n)&&(a=o.keyCode)&&t[a]&&e.custEvent.fire(r,t[a])}},a={init:function(){a.pars(),a.bind()},pars:function(){},bind:function(){for(var t in o)e.addEvent(n,t,o[t])},getKey:function(e){return t[e]},destroy:function(){for(var t in o)e.removeEvent(n,t,o[t])}};return a.init(),r.getKey=a.getKey,r.destroy=a.destroy,r}})}).call(t,n(0))},function(e,t,n){(function(e){n(1),n(111),n(100),n(148),n(4),e.register("lib.group.gmemberSelect",function(e){return function(t){var n,i,r,o=e.lib.kit.extra.language,a={ENTER:13,ESC:27,UP:38,DOWN:40,LEFT:37,RIGHT:39},s=500,l="",c=!1,u='<div class="W_layer"><div class="content group_content"><div class="W_layer_hd"><div class="h_name_box clearfix" node-type="groupNamePanel"><p class="h_name W_fl W_autocut W_f14" node-type="titleText"></p><div class="h_change W_fl" action-type="editGroupName" suda-data="key=button_build_group&value=rev_name_group"  node-type="editGroupName" title="#L{}"><em class="W_ficon ficon_edit S_ficon">7</em><span>#L{}</span></div></div><div class="h_change_box clearfix" node-type="editGroupFrom" style="display:none;"><input name="" type="text" node-type="group_edit_input"  class="W_input W_fl" value="#L{}"><a href="javascript:void(0);" class="W_btn_a W_fl" action-type="subimtEditGroup">#L{}</a><a href="javascript:void(0);" class="W_btn_b W_fl" action-type="cannelEditGroup">#L{}</a></div><div class="W_layer_close"><a href="javascript:void(0);" node-type="close" class="W_ficon ficon_close S_ficon">X</a></div></div><div class="layer_msg_group"><ul class="group_nav S_line1 clearfix"><li class="W_fl S_line1 S_bg1 g_first">#L{}</li><li class="W_fl S_bg1"> ( <span class="online" node-type="group_all_count">0</span>/<span class="all" node-type="maxConut">500</span> )<a href="//weibo.com/" class="group_nav_href" node-type="batManage" style="display:none;">#L{}</a> </li></ul><div class="group_members clearfix"><div class="add_box S_bg1 W_fl"><div class="a_serch"><span class="WB_search_s"><input type="text" value="#L{}"  class="W_input" node-type="group_search_input"><span class="pos"><a href="javascript:void(0);" title="#L{}" class="W_ficon ficon_search S_ficon">f</a></span></span></div><div class="webim_contacts_bd" node-type="groupSelect"><div  node-type="groupMember"></div><div class="webim_tab_bd"><div node-type="searchLists" style="display:none;"></div></div></div></div><div class="existing_box W_fl"><div class="webim_contacts_bd" node-type="existing_box"><div class="webim_tab_bd"><div node-type="addUserLists" style="display:none;"><div class="webim_contacts_group mt10"><div class="webim_group_title webim_existing_title"><a href="javascript:void(0);" class="group_title_cont S_txt1"><span class="name" node-type="addUserCount"></span></a></div><ul class="webim_contacts_list" node-type="addUserListsContain"></ul></div><div class="W_layer_line S_line2" node-type="line" style="display:none;"></div></div><div class="webim_contacts_group mt10" node-type="joinMemberList"></div><div node-type="joinMemberListContain"></div></div></div></div></div></div><div class="W_layer_btn S_line1 S_bg1"><a href="javascript:void(0);" node-type="editsubmitBtn" action-type="groupPostSubmit" class="W_btn_a btn_34px W_btn_a_disable">#L{}</a><a href="javascript:void(0);" action-type="groupPostCannel" class="W_btn_b btn_34px">#L{}</a></div></div></div>',d='<ul class="webim_contacts_list">#L{%s}</ul>',f='<#et data data><#list data as item><li class="contacts SW_fun_bg clearfix" node-type="userItem" action-type="addMember" action-data="uid=<#if (item.id)>${item.id}<#else>${item.uid}</#if>&screen_name=<#if (item.remark)>${item.remark}<#else>${item.screen_name}</#if>&profile_image_url=${item.profile_image_url}"><div class="head W_fl"><img width="30" height="30"  src="${item.profile_image_url}"></div><p class="name W_autocut W_fl S_txt1 W_f14"><#if (item.remark)>${item.remark}<#else>${item.screen_name}</#if></p><div class="icon_mod W_fl"><#if (data.verified && data.verified_type == 0)><i title="" class="W_icon icon_approve"></i></#if></div><div class="icon_add W_fr"><a href="javascript:void(0);"  action-data="uid=<#if (item.id)>${item.id}<#else>${item.uid}</#if>&screen_name=<#if (item.remark)>${item.remark}<#else>${item.screen_name}</#if>&profile_image_url=${item.profile_image_url}" class="W_ficon ficon_add S_ficon">+</a></div></li></#list></#et>',p=o('<#et data data><#list data as item><li class="contacts <#if (!item.nopower)> SW_fun_bg</#if> clearfix" node-type="addUserItem"><div class="head W_fl"><img width="30" height="30"  src="${item.profile_image_url}"></div><p class="name W_autocut W_fl S_txt1 W_f14"><#if (item.remark)>${item.remark}<#else>${item.screen_name}</#if></p><div class="icon_mod W_fl"><#if (item.verified && item.verified_type == 0)><i title="" class="W_icon icon_approve"></i></#if></div><#if (item.is_owner)><div class="main W_fr"><a href="javascript:void(0);" class="icon_group icon_main" title="#L{}"></a></div><#elseif (item.is_admin)><#if (!item.nopower)><div class="close W_fr"><a href="javascript:void(0);" class="icon_group icon_admin" title="#L{}"></a><a href="javascript:void(0);" action-data="uid=<#if (item.id)>${item.id}<#else>${item.uid}</#if>&screen_name=<#if (item.remark)>${item.remark}<#else>${item.screen_name}</#if>&profile_image_url="${item.profile_image_url}" class="W_ficon ficon_close S_ficon"<#if (item.actiontype)> action-type="${item.actiontype}" <#else> action-type="kickMember" </#if> >X</a></div><#else><div class="main W_fr"><a href="javascript:void(0);" class="icon_group icon_admin" title="#L{}"></a></div></#if><#else><div class="close W_fr"><a href="javascript:void(0);" action-data="uid=<#if (item.id)>${item.id}<#else>${item.uid}</#if>&screen_name=<#if (item.remark)>${item.remark}<#else>${item.screen_name}</#if>&profile_image_url="${item.profile_image_url}" class="W_ficon ficon_close S_ficon"<#if (item.actiontype)> action-type="${item.actiontype}" <#else> action-type="kickMember" </#if> >X</a></div></#if></li></#list></#et>'),m=o('<#et data data><li class="contacts  clearfix" node-type="addUserItem"><div class="head W_fl"><img width="30" height="30" src="${data.profile_image_url}"></div><p class="name W_autocut W_fl S_txt1 W_f14">${data.screen_name}</p><div class="icon_mod W_fl"><#if (data.verified && data.verified_type == 0)><i title="" class="W_icon icon_approve"></i></#if></div><div class="main W_fr"><a href="javascript:void(0);" class="icon_group icon_main" title="#L{}"></a></div><div class="close W_fr"></div></li></#et>'),h={},v=e.ui.dialog(o(u)),g="";t=e.parseParam({gid:"",addUsers:"",minNum:3,extraData:{},addSuccessCallback:"",editSuccessCallback:""},t);var y,b,_,w,x,k,E,T=-1,S=[],C=[],L=[],A=[],N=t.gid,D=e.conf.trans.groupMember,I={editGroupName:function(){w.groupNamePanel.style.display="none",w.editGroupFrom.style.display="",x.value=y?e.decodeHTML(y):g},cannelEditGroup:function(){w.groupNamePanel.style.display="",w.editGroupFrom.style.display="none"},subimtEditGroup:function(){var t=k.getValue();if(!t)return void e.ui.tipAlert("!").beside(x).on("hide",function(){x.foucs()});c=!0,w.groupNamePanel.style.display="",w.editGroupFrom.style.display="none",t!=g&&(y=t.substring(0,16),w.titleText.innerHTML=e.encodeHTML(y),I.updateGroupName())},groupPostCannel:function(e){v.hide()},checkIsOk:function(){if(!c&&t.extraData&&t.extraData.page_id){var n=""==w.editGroupFrom.style.display,i=n?x:w.editGroupName,r=o(n?"#L{}":"#L{}");return e.ui.tipAlert(r).beside(i,{pos:"bottom-middle",appendTo:document.body,offsetY:n?-10:-20}),!1}return""!=w.editGroupFrom.style.display||(e.ui.tipAlert(o("#L{}")).beside(x,{pos:"bottom-middle",appendTo:document.body,offsetY:-10}),!1)},groupPostSubmit:function(n){if(!e.hasClassName(n.el,"W_btn_a_disable")&&I.checkIsOk()){var i=t.extraData;if(N){i=e.lib.kit.extra.merge(i,{join_uids:L.join(","),kick_uids:C.join(","),name:y,gid:N});var r=i.name;c||delete i.name,D.getTrans("update",{onSuccess:function(n){n.data.name=r,e.custEvent.fire(h,"editSuccess",n.data),v.hide();try{t.editSuccessCallback&&t.editSuccessCallback(n.data)}catch(e){}I.errorBack(n)},onFail:function(t){e.lib.dialog.ioError(t.code,t)},onError:function(t){e.lib.dialog.ioError(t.code,t)}}).request(i)}else{i=e.lib.kit.extra.merge(i,{name:y||g,members:A.join(",")});var r=i.name;c||delete i.name,D.getTrans("create",{onSuccess:function(n){n.data.name=r,e.custEvent.fire(h,"addSuccess",n.data),v.hide();try{t.addSuccessCallback&&t.addSuccessCallback(n.data)}catch(e){}I.errorBack(n)},onFail:function(t){e.lib.dialog.ioError(t.code,t)},onError:function(t){e.lib.dialog.ioError(t.code,t)}}).request(i)}}},errorBack:function(t){for(var n=t.data,i=["error_uids","exceed_uids","unspported_uids"],r=[o("#L{}"),o("#L{}"),o("#L{}")],a=[],s=1,l=0;l<i.length;l++)n[i[l]]&&(a.push(s+"."+n[i[l]].join(" ")+" "+r[l]+"<br>"),s++);s>1&&e.ui.alert(a.join(""))},removeIndexElement:function(t,n){var i=e.core.arr.indexOf(t,n);-1!=i&&n.splice(i,1)},getCurItem:function(t){for(var n=t.length;n--;)if(e.hasClassName(t[n],"cur"))return t[n];return null},groupSuggest:function(t){var n=e.fixEvent().keyCode,i=w.searchLists;if(n!=a.UP&&n!=a.DOWN&&n!=a.ENTER);else{e.preventDefault(t);var r=e.sizzle("[node-type='userItem']",i),o=r.length,s=I.getCurItem(r);if(n==a.UP)T=T<1?o-1:T-1,s&&e.removeClassName(s,"cur"),e.addClassName(r[T],"cur");else if(n==a.DOWN)T=T>=o-1?0:T+1,s&&e.removeClassName(s,"cur"),r[T]&&e.addClassName(r[T],"cur");else if(n==a.ENTER){var l=s&&e.queryToJson(s.getAttribute("action-data"));l&&I.addGroupMember(void 0,l)}}},groupinputclick:function(e){window.SUDA&&window.SUDA.uaTrack("button_build_group","search_box")},groupinputkeyup:function(t){var r=e.trim(b.getValue()),s=e.fixEvent().keyCode;if(s==a.UP||s==a.LEFT||s==a.DOWN||s==a.RIGHT||s==a.ENTER)return void e.preventDefault(t);r?(n&&clearTimeout(n),i&&i.abort&&i.abort(),n=setTimeout(function(){i=D.getTrans("suggest",{onSuccess:function(t){T=-1;var n=e.core.util.easyTemplate(f,t.data).toString();n=o(d,n),w.groupMember.style.display="none",w.searchLists.innerHTML=n,w.searchLists.style.display=""},onFail:function(){},onError:function(){}}).request({q:r})},200)):(n&&clearTimeout(n),i&&i.abort&&i.abort(),w.groupMember.style.display="",w.searchLists.innerHTML="",w.searchLists.style.display="none")},kickMember:function(t){var n=t.data,i=e.core.arr.indexOf(n.uid,A);-1!=i&&(A.splice(i,1),I.removeIndexElement(n.screen_name,S),I.removeIndexElement(n.uid,L),I.removeIndexElement(n.uid,A),C.push(n.uid));var r=e.lib.kit.dom.parentElementBy(t.el,document.body,function(e){if("addUserItem"==e.getAttribute("node-type"))return!0});r&&e.removeNode(r);e.sizzle("[node-type='addUserItem']",w.joinMemberListContain).length;I.updateGroupName()},addMember:function(t){var n=t.data.uid;if(t.data.actiontype="removeMember",A.length>s-1)return void e.ui.tipAlert("!",{icon:"rederrorS",hideDelay:2e3}).beside(t.el);e.inArray(n,A)||(A.push(n),L.push(n),S.push(t.data.screen_name),I.addMemberFunc([t.data]),I.updateGroupName(),"none"==w.groupMember.style.display&&(_.value="",_.blur(),w.groupMember.style.display="",w.searchLists.innerHTML="",w.searchLists.style.display="none"))},addMemberFunc:function(t){var n=e.core.util.easyTemplate(p,t).toString();w.addUserLists.style.display="",e.insertHTML(w.addUserListsContain,n,"afterbegin");var i=e.sizzle("[node-type='addUserItem']",w.addUserListsContain).length;w.addUserCount.innerHTML=o("#L{%s}",i),i>0&&w.addUserCount.style.display},removeMember:function(t){var n=t.data;I.removeIndexElement(n.uid,A),I.removeIndexElement(n.screen_name,S),I.removeIndexElement(n.uid,L);var i=e.lib.kit.dom.parentElementBy(t.el,document.body,function(e){if("addUserItem"==e.getAttribute("node-type"))return!0});i&&e.removeNode(i);var r=e.sizzle("[node-type='addUserItem']",w.addUserListsContain).length;0!=r&&(w.addUserCount.innerHTML=o("#L{%s}",r)),0==r&&(w.addUserLists.style.display="none"),I.updateGroupName()},addGroupMember:function(t,n){n.actiontype="removeMember";var i=n.uid+"";e.inArray(i,A)||(A.push(i),L.push(i),S.push(n.screen_name),I.addMemberFunc([n])),I.updateGroupName()},updateGroupName:function(){if(w.group_all_count.innerHTML=A.length+(N?0:1),r&&r.reset(),N)0==C.length&&0==L.length&&l==y?!e.hasClassName(w.editsubmitBtn,"W_btn_a_disable")&&e.addClassName(w.editsubmitBtn,"W_btn_a_disable"):e.hasClassName(w.editsubmitBtn,"W_btn_a_disable")&&e.removeClassName(w.editsubmitBtn,"W_btn_a_disable");else{var n=t.minNum-1;n=n>0?n:2,L.length>=n&&""!=w.titleText.innerHTML?e.hasClassName(w.editsubmitBtn,"W_btn_a_disable")&&e.removeClassName(w.editsubmitBtn,"W_btn_a_disable"):!e.hasClassName(w.editsubmitBtn,"W_btn_a_disable")&&e.addClassName(w.editsubmitBtn,"W_btn_a_disable")}if(!y){var i=S.length,a=o("#L{}");g=a,i>0&&(a="");for(var s=0;s<i&&s<4;s++)a=a+S[s]+"";1==i&&(a=a.substring(0,a.length-1)),g=a.substring(0,16),w.titleText.innerHTML=g}},addGroupAllFunc:function(t){for(var n,i=t.length,r=[],o=0;o<i;o++){var a=t[o];if(n=a.id+"",A.length>=s)break;e.inArray(n,A)||(a.actiontype="removeMember",r.push(a),A.push(n),L.push(n),S.push(a.screen_name))}I.addMemberFunc(r),I.updateGroupName()},groupEditInputKeyup:function(){var t=k.getValue(),n=e.trim(t);n!=t&&k.setValue(n.substring(0,16))},addUserByName:function(){var t=b.getValue(),n=e.sizzle("[node-type='userItem']",w.searchLists);if(!I.getCurItem(n)){if(A.length>s-1)return void e.ui.tipAlert("!",{icon:"rederrorS",hideDelay:2e3}).beside(_);var i={nick:t};D.getTrans("check",{onSuccess:function(e){I.addGroupMember(void 0,e.data),_.value="",_.blur(),w.groupMember.style.display="",w.searchLists.innerHTML="",w.searchLists.style.display="none"},onError:function(t){e.ui.tipAlert(t.msg,{icon:"rederrorS",hideDelay:2e3}).beside(_)},onFail:function(e){}}).request(i)}},setUserInfo:function(t,n){if(!N&&n){var i=n.currUser,r=n.addUser,a=e.core.util.easyTemplate(m,i).toString();I.addGroupAllFunc(r),w.addUserLists.style.display="",e.insertHTML(w.addUserListsContain,a,"afterbegin");var s=e.sizzle("[node-type='addUserItem']",w.addUserListsContain).length;w.addUserCount.innerHTML=o("#L{%s}",s),s>0&&w.addUserCount.style.display}},hideDialog:function(){e.custEvent.fire(h,"hide")}},M=function(){_=v.getDomList().group_search_input,x=v.getDomList().group_edit_input,w=v.getDomList(),v.on("editGroupName","click",I.editGroupName),v.on("cannelEditGroup","click",I.cannelEditGroup),v.on("groupPostSubmit","click",I.groupPostSubmit),v.on("kickMember","click",I.kickMember),v.on("groupPostCannel","click",I.groupPostCannel),v.on("removeMember","click",I.removeMember),v.on("addMember","click",I.addMember),v.on("subimtEditGroup","click",I.subimtEditGroup),e.custEvent.define(h,["addSuccess","editSuccess","hide"])},W=function(){var t={gid:N};D.getTrans("info",{onSuccess:function(t){function n(){var n=t.data.admins,r=i,o={};e.foreach(r,function(e){o[e.uid]=e}),e.foreach(n,function(e){o[e].is_admin=1}),r=[],e.foreach(o,function(e){r.push(e)}),r.sort(function(e,t){return(0|t.is_admin)-(0|e.is_admin)}),r.sort(function(e,t){return(0|t.is_owner)-(0|e.is_owner)}),i=r,r=o=null}y=t.data.name,l=y;var i=t.data.members||[],a=i.length,c=1==t.data.is_owner,u=e.inArray(parseInt($CONFIG.uid),t.data.admins);n();for(var f,m=0;m<a;m++)f=i[m],A.push(f.uid+""),S.push(f.remark?f.remark:f.screen_name),i[m].nopower=!0,c?i[m].nopower=!1:u&&(i[m].is_owner||i[m].is_admin||(i[m].nopower=!1));if(c||u){var h="//weibo.com/p/230491"+N+"/members?from=managelayer";w.batManage&&(w.batManage.setAttribute("href",h),w.batManage.style.display="")}s=parseInt(t.data.max_member)||s,w.maxConut.innerHTML=s,w.line.style.display="";var v=e.core.util.easyTemplate(p,i).toString();v=o(d,v),w.titleText.innerHTML=y,w.joinMemberListContain.innerHTML=v,!r&&(r=e.ui.scrollView(w.existing_box)),r&&r.reset(),!c&&!u&&(w.editGroupName.style.display="none"),I.updateGroupName()},onFail:function(e){},onError:function(e){}}).request(t)},j=function(){b=e.lib.kit.dom.smartInput(_,{notice:_.defaultValue}),k=e.lib.kit.dom.smartInput(x,{notice:x.defaultValue}),e.custEvent.add(b,"enter",I.addUserByName),e.addEvent(_,"keydown",I.groupSuggest),e.addEvent(_,"keyup",I.groupinputkeyup),e.addEvent(_,"click",I.groupinputclick),e.addEvent(x,"keyup",I.groupEditInputKeyup),e.addEvent(v,"hide",I.hideDialog),N?W():I.updateGroupName(),E=e.lib.group.groupMember(v.getDomList().groupMember,{members:t.addUsers}),e.custEvent.add(E,"addMember",I.addGroupMember),e.custEvent.add(E,"getUserInfo",I.setUserInfo)};return function(){M(),j(),v.on("shown",function(){var t=w.groupSelect.offsetHeight;w.existing_box.offsetHeight;w.searchLists.style.height=t+"px",!r&&(r=e.ui.scrollView(w.existing_box)),r&&r.reset(),E.setHeight(t)}).on("hide",function(){h.destroy()}).show()}(),h.destroy=function(){e.custEvent.undefine(h,["addSuccess","editSuccess","hide"]),e.removeEvent(_,"keydown",I.groupSuggest),e.removeEvent(_,"keyup",I.groupinputkeyup),e.removeEvent(x,"keyup",I.groupEditInputKeyup),e.custEvent.remove(b,"enter",I.addUserByName),e.removeEvent(_,"click",I.groupinputclick),E.destroy(),k.destroy(),b.destroy(),r.destroy()},h}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.dom.textSelection",function(e){return function(t,n){var i;i={},e.parseParam({},n);var r=function(n){return e.core.dom.selectText(t,n)},o=function(){t.__areaQuery=e.jsonToQuery(e.core.dom.textSelectArea(t))},a=function(){t.__areaQuery=!1};e.addEvent(t,"beforedeactivate",o),e.addEvent(t,"active",a);var s=function(){var n=null;try{n=e.core.dom.textSelectArea(t)}catch(i){n=e.queryToJson(t.__areaQuery)}return 0===n.start&&0===n.len&&t.__areaQuery&&(n=e.queryToJson(t.__areaQuery)),n.start=parseInt(n.start,10),n.len=parseInt(n.len,10),n},l=function(e,n){var i=t.value,r=n.start,o=n.len||0,a=i.slice(0,r),s=i.slice(r+o,i.length);t.value=a+e+s,i=null,a=null,s=null;var r=null,o=null};return i.setCursor=function(e){r(e)},i.getCursor=function(){return s()},i.insertCursor=function(e){var t=s();l(e,t),t.len=e.length,r(t)},i.TempletCursor=function(n){var i,o,a;i=s(),o=i.len>0?t.value.substr(i.start,i.len):"",a=e.templet(n,{origin:o}),l(a,i),i.start=i.start+n.indexOf("#{origin"),i.len=a.length-n.replace(/#\{[origin].+?\}/,"").length,r(i)},i.insertText=l,i.destroy=function(){e.removeEvent(t,"beforedeactivate",o),e.removeEvent(t,"active",a),t=null},i}})}).call(t,n(0))},function(e,t,n){(function(e){n(1),n(6),n(100),n(53),e.register("lib.group.groupMember",function(e){var t='<#et data data><#if (!data.islist)><div node-type="group_fan_tool"><div class="webim_tab_hd" node-type="group_fan_filternav"><div class="hd_mod S_line1 clearfix"><h3 class="W_fl W_fb">#L{}</h3><div class="W_fr" ><a href="javascript:void(0);" action-type="group_fans_filter" suda-data="key=button_build_group&value=screen_fans"  action-data="type=2">#L{}</a></div></div></div><div  node-type="group_fan_nav" style="display:none;"><div class="webim_tab_hd hd_two S_line1"><div class="back"><a href="javascript:void(0);" suda-data="key=button_build_group&value=back" action-type="group_fan_back" action-data="type=1" class="S_txt1"><em class="W_ficon ficon_back S_ficon"></em></a></div><p class="title W_fb">#L{}</p></div><div class="webim_tab_btn"><div class="WB_minitab"><ul class="minitb_ul S_line1 S_bg1 clearfix"><li class="minitb_item current S_line1" action-type="group_fan_tab" suda-data="key=button_build_group&value=intera_group"  node-type="group_fan_tab" action-data="type=2"><a href="javascript:void(0);" class="minitb_lk S_txt1 S_bg2" node-type="group_fan_tabtext">#L{}</a><span class="cur_block"></span></li><li class="minitb_item S_line1" action-type="group_fan_tab" suda-data="key=button_build_group&value=fans" node-type="group_fan_tab" action-data="type=3"><a href="javascript:void(0);" class="minitb_lk S_txt1" node-type="group_fan_tabtext">#L{}</a><span class="cur_block"></span></li></ul></div></div></div></div><div class="webim_tab_bd" ><div class="webim_contacts_group" node-type="group_fan_scrollC"><ul class="webim_contacts_list" node-type="group_list_c"></#if><#list data.list as item><li class="contacts SW_fun_bg clearfix" action-type="add_group_member"  action-data="uid=${item.id}&screen_name=<#if (item.remark)>${item.remark}<#else>${item.screen_name}</#if>&profile_image_url=${item.profile_image_url}"><div class="head W_fl"><img width="30" height="30"  src="${item.profile_image_url}"></div><p class="name W_autocut W_fl S_txt1 W_f14"><#if (item.remark)>${item.remark}<#else>${item.screen_name}</#if></p><div class="icon_mod W_fl"><#if (data.verified && data.verified_type == 0)><i title="" class="W_icon icon_approve"></i></#if></div><div class="icon_add W_fr"><a href="javascript:void(0);"   class="W_ficon ficon_add S_ficon">+</a></div></li></#list><#if (!data.islist)></ul></div></div></#if></#et>';return function(n,i){var r={offest:50,isloading:!1,trans:"",page:1,isEnd:!1,extraParam:{}},o=e.lib.kit.extra.language;i=e.parseParam({isAjax:!0,members:""},i||{});var a,s,l={},c=e.conf.trans.groupMember,u={getData:function(){s&&clearInterval(s),r.trans&&r.trans.abort(),r.isloading=!0;var n=r.extraParam;n.page=r.page,r.trans=c.getTrans("getUser",{onSuccess:function(n){var i={list:n.data.users,islist:!0},l=e.core.util.easyTemplate(o(t),i).toString();r.isloading=!1,a.group_list_c.innerHTML=l,uiscroll.reset(),s=setInterval(u.srcollEvent,200)},onFail:function(){r.isloading=!1},onError:function(){r.isloading=!1}}).request(n)},srcollEvent:function(){if(!r.isloading){if(r.isEnd)return void clearInterval(s);if(uiscroll.scrollHeight()-uiscroll.offsetHeight()-uiscroll.scrollTop()<=r.offest){r.isloading=!0,r.page=r.page+1,r.trans&&r.trans.abort();var n=r.extraParam;n.page=r.page,r.trans=c.getTrans("getUser",{onSuccess:function(n){var i={list:n.data.users,islist:!0},s=e.core.util.easyTemplate(o(t),i).toString();r.isloading=!1,e.core.dom.insertHTML(a.group_list_c,s,"beforeend"),r.page>=n.data.total_page&&(r.isEnd=!0)},onFail:function(){r.page=r.page-1,r.isloading=!1},onError:function(){r.page=r.page-1,r.isloading=!1}}).request(n)}}},addGroupMember:function(t){e.custEvent.fire(l,"addMember",t.data)},addGroupInject:function(e){return!1},groupFanBack:function(e){a.group_fan_filternav.style.display="",a.group_fan_nav.style.display="none",r.page=1,r.isloading=!1,r.isEnd=!1,r.extraParam=e.data,u.setListHeight(),u.getData()},tabDomchange:function(t){var n;e.foreach(a.group_fan_tab,function(t,i){n=e.sizzle('[node-type="group_fan_tabtext"]',t)[0],n&&e.core.dom.removeClassName(n,"S_bg2"),e.core.dom.removeClassName(t,"current")}),n=e.sizzle('[node-type="group_fan_tabtext"]',t)[0],e.core.dom.addClassName(t,"current"),n&&e.core.dom.addClassName(n,"S_bg2")},groupFanTab:function(t){e.core.dom.hasClassName(t.el,"current")||(u.tabDomchange(t.el),r.page=1,r.isloading=!1,r.isEnd=!1,r.extraParam=t.data,u.setListHeight(),u.getData())},groupFansFilter:function(e){a.group_fan_filternav.style.display="none",a.group_fan_nav.style.display="",r.page=1,r.isloading=!1,r.isEnd=!1,r.extraParam=e.data,u.setListHeight(),u.tabDomchange(a.group_fan_tab[0]),u.getData()},setListHeight:function(){var e=a.group_fan_tool.offsetHeight;a.group_fan_scrollC.style.height=i.height-e+"px"}},d=function(){a=e.lib.kit.dom.parseDOM(e.builder(n).list)},f=function(){var t=e.delegatedEvent(n);e.custEvent.define(l,["addMember","addGroup","getUserInfo"]),t.add("add_group_member","click",u.addGroupMember),t.add("add_group_inject","click",u.addGroupInject),t.add("group_fans_filter","click",u.groupFansFilter),t.add("group_fan_tab","click",u.groupFanTab),t.add("group_fan_back","click",u.groupFanBack)};return function(){f(),c.getTrans("getUser",{onSuccess:function(i){var c={list:i.data.users},f=e.core.util.easyTemplate(o(t),c).toString(),p={currUser:i.data.viewer,addUser:i.data.members};e.custEvent.fire(l,"getUserInfo",p),n.innerHTML=f,d(),u.setListHeight(),uiscroll=e.ui.scrollView(a.group_fan_scrollC),r.page>=i.data.total_page&&(r.isEnd=!0),s=setInterval(u.srcollEvent,200)},onFail:function(){},onError:function(){}}).request({page:1,members:i.members})}(),l.setHeight=function(e){i.height=e,u.setListHeight(),uiscroll.reset()},l.destroy=function(){s&&clearInterval(s),dEvent.destroy()},l}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.forward.source.API",function(e){return{checkAtNum:function(e){var t=e.match(/@[a-zA-Z0-9\u4e00-\u9fa5_]{0,20}/g),n=e.match(/\/\/@[a-zA-Z0-9\u4e00-\u9fa5_]{0,20}/g);return t=t?t.length:0,n=n?n.length:0,t-n},preventDefault:function(t){return e.core.evt.preventDefault(t),!1}}})}).call(t,n(0))},function(e,t,n){(function(e){n(189),e.register("lib.forward.plugin.report",function(e){return function(t){return window.open("//weibo.com/complaint/complaint.php?url="+e.lib.kit.extra.parseURL().url),e.core.evt.preventDefault(t.evt),!1}})}).call(t,n(0))},function(e,t,n){(function(e){n(152),n(1),n(6),e.register("lib.forward.source.like",function(e){return function(t){var n,i,r,o,a,s=e.conf.trans.feed.attitude,l=!1,c={},u=[],d=e.delegatedEvent(t),f=!0,p=null,m=600,h=350;n=e.lib.kit.dom.parseDOM(e.builder('<div class="W_layer W_layer_pop" style="display:none;" node-type="outer"><div class="content"><div class="layer_emotion" node-type="inner"><ul class="emotion_list clearfix" node-type="faceList"></ul></div><div class="W_layer_arrow"><span node-type="arrow" class="W_arrow_bor W_arrow_bor_t" style="right:20px;"><i class="S_line3"></i><em class="S_bg2_br"></em></span></div></div></div>').list),document.body.appendChild(n.outer),o=e.delegatedEvent(n.outer);var v,g,y={go:function(t){if(g=t.el,v=e.sizzle('[node-type="forward_like_count"]',g)[0],v=v&&v.innerHTML||0,l=!0,e.core.dom.contains(t.el,t.evt.relatedTarget)||n&&"none"!=n.outer.style.display&&t.data.mid==r&&t.data.object_id==p)return void _();y.stop(t,!0),a=setTimeout(function(){y.trans(t)},m)},fill:function(t){if(f){f=!1;var r=e.core.json.merge(t.data,{location:$CONFIG.location});s.getTrans("miniadd",{onSuccess:function(r){v=e.sizzle('[node-type="forward_like_count"]',g)[0],v=v&&v.innerHTML||0;var o=(e.sizzle("em",t.el)[0],!!r.data.is_del),a="W_icon icon_praised_b"+(o?"":"c");o?v>0&&v--:v++,v=v<=0?"":v,t.el.innerHTML='<em class="'+a+'"></em><em node-type="forward_like_count">'+v+"</em>",!o&&r.data.html&&n?(i&&(i.style.display="none"),t.el.title=e.lib.kit.extra.language("#L{}"),e.insertHTML(n.faceList,r.data.html,"afterbegin")):(t.el.title=e.lib.kit.extra.language("#L{}"),e.removeNode(e.sizzle('[uid="'+$CONFIG.uid+'"]',n.faceList)[0]),i&&(i.style.display=""),e.sizzle("[uid]",n.faceList).length<=0&&y.stop(t,!0));var s=e.sizzle('[node-type="faceMore"]',n.faceList)[0];if(v>4?s&&"none"==s.style.display&&(s.style.display=""):s&&"none"!=s.style.display&&(s.style.display="none"),"none"!=n.outer.style.display){var l=e.sizzle("[uid]",n.faceList);l=function(e){for(var t,n=[];t=e.shift();)"none"!=t.style.display&&n.push(t);return n}(l);var c="none"===e.sizzle("[node-type=faceMore]",n.faceList)[0].style.display?0:1;n.outer.style.width=40*l.length+40*c+13+"px",e.ui.card(n.outer).showByTarget(t.el)}f=!0},onFail:function(t){e.lib.dialog.ioError(t.code,t),f=!0},onError:function(t){e.lib.dialog.ioError(t.code,t),f=!0}}).request(r)}},trans:function(t){n&&n.outer&&(n.outer.style.display="none");var o={mid:t.data.mid,location:$CONFIG.location};n&&(n.outer.show=!0),s.getTrans("minismall",{onSuccess:function(o){_();var a=o.data.total_number||o.data.like_counts||0;if("0"!=a){v=a,r=t.data.mid,p=t.data.object_id;var s=e.sizzle('[node-type="forward_like_count"]',t.el)[0];s&&(s.innerHTML=a||"");var l=e.lib.kit.dom.parseDOM(e.builder(o.data.html).list);n.faceList.innerHTML=l.faceList.innerHTML;var c=e.sizzle("[uid]",n.faceList),u="none"===e.sizzle("[node-type=faceMore]",n.faceList)[0].style.display?0:1;e.sizzle('[uid="'+$CONFIG.uid+'"]',n.faceList)[0]||(i=c[3]),n.mid=t.data.mid,document.body.appendChild(n.outer),n&&!0===n.outer.show&&(document.body.appendChild(n.outer),n.outer.style.display="",n.outer.style.width=40*c.length+40*u+13+"px",e.ui.card(n.outer).showByTarget(t.el))}},onFail:function(){},onError:function(){}}).request(o)},stop:function(e,t){if(l=!1,t)return void b();_(),u.push(setTimeout(b,h))},cancelLike:function(t){e.preventDefault(),v--,e.removeNode(e.core.dom.neighbor(t.el).parent("li").getCurrent());var r=e.sizzle('[action-type="like_del"]',n.faceList);r[0]&&e.removeNode(e.core.dom.neighbor(r[0]).parent("li").getCurrent()),g.title=e.lib.kit.extra.language("#L{}"),g.innerHTML='<em class="W_icon icon_praised_b"></em><em node-type="forward_like_count">'+v+"</em>",i&&(i.style.display=""),e.sizzle("[uid]",n.faceList).length<=0&&(n.outer.style.display="none"),s.getTrans("minidel",{onSuccess:e.core.func.empty,onError:e.core.func.empty}).request(t.data)}},b=function(){clearTimeout(a),_(),n&&(n.outer.style.display="none"),n&&(n.outer.show=!1)},_=function(){for(;u.length;)clearTimeout(u.pop())},w=function(){d.add("forward_like","mouseover",y.go),d.add("forward_like","click",y.fill),d.add("forward_like","mouseout",y.stop),o.add("like_del","click",y.cancelLike)};return function(){w(),e.addEvent(n.outer,"mouseover",function(){_()}),e.addEvent(n.outer,"mouseout",function(){y.stop()})}(),c.destroy=function(){d.destroy(),o.destroy(),e.removeEvent(n.outer,"mouseover"),e.removeEvent(n.outer,"mouseout"),e.removeNode(n.outer)},c}})}).call(t,n(0))},function(e,t,n){(function(e){n(2),e.register("conf.trans.feed.attitude",function(e){var t=e.lib.kit.io.inter(),n=t.register;return n("feedSmall",{url:"/aj/attitude/small",method:"get"}),n("add",{url:"/aj/attitude/add",method:"post"}),n("big",{url:"/aj/v6/attitude/big",method:"get"}),n("in",{url:"/aj/attitude/in",method:"get"}),n("del",{url:"/aj/attitude/destroy",method:"get"}),n("miniadd",{url:"/aj/v6/like/add",method:"post"}),n("minismall",{url:"/aj/v6/like/small",method:"get"}),n("likein",{url:"/aj/like/in",method:"get"}),n("likebig",{url:"/aj/v6/like/big",method:"get"}),n("minidel",{url:"/aj/like/del",method:"post"}),n("objLike",{url:"/aj/v6/like/objectlike",method:"post"}),n("photosmall",{url:"/aj/v6/like/object/photosmall",method:"get"}),n("cmtLike",{url:"/aj/v6/like/object/small",method:"get"}),n("cmtLikeMore",{url:"/aj/like/object/big",method:"get"}),n("likeStatus",{url:"/aj/like/status",method:"get"}),t})}).call(t,n(0))},function(e,t,n){(function(e){n(1),n(112),n(6),n(51),e.register("lib.forward.source.forwardLink",function(e){var t,n,i=e.lib.kit.extra.language,r=e.conf.trans.forward,o=e.lib.kit.dom.parseDOM,a=e.lib.kit.extra.actionData,s={on:i('#L{}<span class="W_arrow" title="#L{}" href="javascript:;" onclick="return false;" action-type="show" action-data="id=2"><em></em></span>'),off:i('#L{}<span class="W_arrow" title="#L{}" href="javascript:;" onclick="return false;" action-type="show" action-data="id=1"><em></em></span>'),loading:i('<div class="WB_empty" node-type="loading"><div class="WB_innerwrap"><div class="empty_con clearfix"><p class="text"><i class="W_loading"></i>#L{,}</p></div> </div></div>')};return function(i,l){n=i;var c,u,d,f,p,m=l.flNode,h=l.mid,v=l.data,g={},y=!1,b=e.parseParam({forward_link_status:"on",inDialog:!0,mid:""},v);if("string"!=typeof b.mid&&"number"!=typeof b.mid)throw new Error("forward.forwardLlink: need string (or number) as mid");var _=function(n){f=f||o(e.builder(t).list),f.forward_link_more&&(n.el.innerHTML=s[u],"on"==u?(f.forward_link_more.style.display="",e.addClassName(n.el,"W_arrow_turn"),a(n.el).set("id","2"),f.check_more_link&&(f.check_more_link.style.display="")):"off"==u&&(f.forward_link_more.style.display="none",e.removeClassName(n.el,"W_arrow_turn"),a(n.el).set("id","1"),f.check_more_link&&(f.check_more_link.style.display="none")))},w=function(){y=!0,r.request("detailForwardLinks",{onSuccess:function(i,r){var o=e.sizzle('[node-type="loading"]',m)[0];if(o&&e.removeNode(o),e.custEvent.fire(n,"resetComment",[i]),!i.data.num)return void e.removeNode(t.parentNode);u="on"==u?"off":"on",t.innerHTML=i.data.html||"",e.custEvent.fire(n,"updateNum",[i.data]),x(t)},onError:function(){t.innerHTML=""},onFail:function(){t.innerHTML=""}},{mid:h,d_expanded:d,expanded_status:y?"on"===u?1:2:""})},x=function(t){var n=e.sizzle("div.list_ul",t)[0];n&&(n.style.marginTop=-e.core.dom.getSize(n).height+"px",setTimeout(function(){n.style.webkitTransition="margin-top 0.4s",n.style.mozTransition="margin-top 0.4s",n.style.msTransition="margin-top 0.4s",n.style.transition="margin-top 0.4s",n.style.marginTop="0px"},0))},k=function(t){var i,r,o=e.core.dom.dir.parent(t.el,{expr:'[node-type="forward_link_item"]'})[0],a=t.data;if(o&&(i=e.sizzle('[node-type="forward_again"]',o)[0],r=a.name,i)){var s="//@"+r+": "+e.trim(i.innerHTML.replace(/[\r|\n|\t]/g,""));e.custEvent.fire(n,"forwardAgain",[a,s])}},E=function(){t=e.C("div"),t.className="list_box",p=e.delegatedEvent(t),m.innerHTML=s.loading,m.appendChild(t),p.add("show","click",function(e){switch(u=1*e.data.id==1?"on":"off",b.forward_link_status){case"off":w(e);break;case"on":default:_(e)}}),p.add("forward_again","click",k),d=e.core.util.storage.get("forward_link_status"),"null"!=d&&d||(d=b.forward_link_status),u=d,w()};return e.custEvent.define(g,["switch"]),e.custEvent.add(g,"switch",function(e,i){if(i.node){var r=t.innerHTML;i.node.innerHTML="",i.node.appendChild(t),t.innerHTML=r}i.base&&(n=i.base)}),g.destroy=function(){p.destroy(),e.custEvent.undefine(g),e.removeNode(t),t=null},t&&b.forward_link_status==c?(c=b.forward_link_status,m.innerHTML="",m.appendChild(t)):E(),g}})}).call(t,n(0))},function(e,t,n){(function(e){n(36),n(35),n(1),n(37),n(14),n(155),n(4),n(52),n(38),n(110),n(105),n(70),n(69),n(50),e.register("lib.publisher.publisher",function(t){var n=t.lib.kit.extra.language,i=t.lib.publisher.widget.widgetloader,r=(t.ui.confirm,'<i class="W_icon icon_rederrorS"></i>');return function(o){var a,s,l,c,u,d,f,p,m,h,v,g={limitNum:1980,extendText:""},y={},b=!0;a=t.parseParam({trans:t.conf.trans.publisher,transName:"publish",node:null,styleId:"1",maxLength:1980,appkey:"",pid:"",info:"",content:"",extraUrl:"",extraSend:{},dialog:!1,storage:!0,asyncBeforePublish:void 0,draft_id:"",draft_title:"",draft_writer:"",draft_image:"",draft_summary:"",draft_content:"",draft_free_content:"",follow_official:0,pay_setting:"{}",follow_to_read:"0",isWemedia:0,topic_id:!1,extparams:!1,article_extra:{}},o);var _,w=a.maxLength;a.extraSend.location=a.extraSend.location||$CONFIG.location||"",f=t.custEvent.define(y,["publish","share"]);var x={key:"publisher_"+$CONFIG.uid,write:function(t){if(0!=a.storage){var t=t||u.API.getWords()||"";e.core.util.storage.set(x.key,t)}},read:function(){if(0==a.storage)return null;var t=e.core.util.storage.get(x.key);return"null"!=t&&null!=t&&0!=t.length?t:null},del:function(){0!=a.storage&&e.core.util.storage.del(x.key)}},k=function(){var e=l.textEl;if(b)return void("error"===s&&t.lib.publisher.source.shine(e));E()},E=function(){if(!t.hasClassName(l.submit,"W_btn_a_disable")){t.core.dom.addClassName(l.submit,"W_btn_a_disable"),b=!0,s="loading";var e=t.lib.kit.extra.getDiss(T(),l.submit);e=t.lib.kit.extra.merge(e,t.queryToJson(l.submit.getAttribute("action-data")||"")),_&&(e=t.lib.kit.extra.merge(e,_.read())),e.pub_type="dialog",e.draft_id=a.draft_id,e.draft_title=a.draft_title,e.draft_writer=a.draft_writer,e.draft_image=a.draft_image,e.draft_summary=a.draft_summary,e.draft_content=a.draft_content,e.draft_free_content=a.draft_free_content,e.draft_content=a.draft_content,e.pay_setting=a.pay_setting,e.article_extra=a.article_extra;var n=l.followToRead;if(n)for(var i=n.getElementsByTagName("input"),r=0;r<i.length;r++)i[r].checked&&(e.follow_to_read=i[r].value);var o=l.followOfficial;if(o)for(var i=o.getElementsByTagName("input"),r=0;r<i.length;r++)i[r].checked&&(e.follow_official=i[r].value);l.topic&&l.topic.checked&&(e.sync_wb=!0),a.topic_id&&(e.topic_id=a.topic_id),a.extparams&&(e.extparams=a.extparams),h&&h.disable();var c=function(e){if(d.request(e),l.followpresenter&&1==l.followpresenter.checked){var n=t.queryToJson(l.followpresenter.getAttribute("action-data")||"");a.trans.getTrans("follow",{}).request(n)}};a.asyncBeforePublish?a.asyncBeforePublish(e,{success:function(e){c(e)},fail:function(){l.submit&&t.core.dom.removeClassName(l.submit,"W_btn_a_disable"),h&&h.enable(),b=!1,s=""}}):c(e)}},T=function(){var e=u.API.getWords();p&&-1===e.indexOf(p)&&(e+=p);var n={};n=t.core.json.merge(n,a.extraSend),n.appkey=a.appkey,n.style_type=a.styleId,n.pic_id=a.pid,n.text=e,n.pdetail=$CONFIG.page_id||"",n.location=$CONFIG.location||"";var i=u.API.getExtra();if(i)if(i.indexOf("=")<0)n.pic_id=u.API.getExtra()||"";else{var r=i,o=t.core.json.queryToJson(r);for(var s in o)n[s]=o[s]}if(h&&h.rank){var c=h.rank();n.rank=c.rank,n.rankid=c.rankid}return u.nodeList.textEl&&u.nodeList.textEl.getAttribute("settime")&&(n.addtime=u.nodeList.textEl.getAttribute("settime"),n.module="autopub",!0),u.nodeList.textEl&&u.nodeList.textEl.getAttribute("tags")&&(n.photo_tag=u.nodeList.textEl.getAttribute("tags")),u.nodeList.textEl&&u.nodeList.textEl.getAttribute("taginfos")&&(n.photo_taginfo=u.nodeList.textEl.getAttribute("taginfos")),l.rightsAgree&&(n.is_original=l.rightsAgree.checked?1:0),n},S=function(e,i){function r(){b=!0,t.addClassName(l.submit,"W_btn_a_disable")}function o(){b=!1,t.removeClassName(l.submit,"W_btn_a_disable")}x.write(t.core.str.trim(l.textEl.value)?l.textEl.value:"");var a=_&&_.get("extraurl")||"";"ABSENT"===a&&(a="");var s=_&&_.get("prefixtext")||"";"ABSENT"===s&&(s="");var c=(_&&_.get("score"),"#L{%s}"),u=c,d=!0,f=0,p=g.extendText?n(g.extendText):"";g.limitNum=w-t.lib.publisher.widget.count(a+s),d=(f=g.limitNum-i.count)>=0,0===i.count?(u=c,r()):d?(u=c,o()):(u="#L{%s}",r()),l.num.innerHTML=p+n(u,d?"<span>"+Math.abs(i.count)+"</span>":'<span class="S_error">'+Math.abs(f)+"</span>"),_&&"ABSENT"!==_.get("score")&&0==_.get("score")&&r()},C=function(e,i){u.API.blur(),s="",l.successTip.style.display="",l.textEl.value="";var r=t.sizzle(".W_icon",l.successTip)[0],o=t.sizzle(".txt",l.successTip)[0];o.style.display="none",t.ui.effect(r,"flipInY","normal"),setTimeout(function(){o.style.display="",t.ui.effect(o,"fadeInRight","normal")},50),setTimeout(function(){b=!1,t.ui.effect(l.successTip,"fadeOut","fast",function(){l.successTip.style.display="none"});var e=u.API.count();e>0?t.core.dom.removeClassName(l.submit,"W_btn_a_disable"):l.submit&&t.core.dom.addClassName(l.submit,"W_btn_a_disable"),l.num.innerHTML=(g.extendText?n(g.extendText):"")+n("#L{%s}","<span>"+(g.limitNum-e)+"</span>")},2e3),t.custEvent.fire(f,"publish",[e.data,i]),t.custEvent.fire(f,"share"),setTimeout(function(){"timefeed"==e.data.feedtype?t.conf.channel.feed.fire("timeFeedPublish",[e.data.html,i]):t.conf.channel.feed.fire("publish",[e.data,i])},1500),t.core.dom.addClassName(l.submit,"W_btn_a_disable"),h&&h.reset&&h.reset(),x.del(),v&&v.close&&v.close(),u.nodeList.textEl&&u.nodeList.textEl.getAttribute("tags")&&u.nodeList.textEl.removeAttribute("tags")},L=function(e,i){b=!1,s="",e.msg=e.msg||n(""),t.lib.dialog.ioError(e.code,e),l.submit&&t.core.dom.removeClassName(l.submit,"W_btn_a_disable"),h&&h.enable()},A=function(){t.removeClassName(l.textEl.parentNode,"clicked")},N=function(){t.addClassName(l.textEl.parentNode,"clicked")},D=function(e){if(e=t.parseParam({appkey:"",content:"",info:"",pid:"",extraSend:{}},e),a.extraSend=e.extraSend,a.extraSend.location=a.extraSend.location||$CONFIG.location||"",a.pid=e.pid,t.contains(document.body,l.textEl)){l.textEl.defaultValue&&(l.textEl.value=l.textEl.defaultValue),e.content&&(l.textEl.value=e.content),l.textEl.setAttribute("content",e.content),l.info&&(l.info.innerHTML=e.info),e.appkey&&(a.appkey=e.appkey);var i=u.API.count();i>0?(b=!1,s="",t.core.dom.removeClassName(l.submit,"W_btn_a_disable")):(b=!0,s="error",t.core.dom.addClassName(l.submit,"W_btn_a_disable")),_&&"ABSENT"!==_.get("score")&&0==_.get("score")&&(b=!0,t.core.dom.addClassName(l.submit,"W_btn_a_disable")),l.num.innerHTML=(g.extendText?n(g.extendText):"")+n("#L{%s}","<span>"+i+"</span>"),v&&v.close&&v.close(),I()}},I=function(){a.isWemedia&&a.trans.getTrans("similarity",{onComplete:function(e){var n=e.data;if(!(n&&"is_original"in n))return void M(e,n);if(t.setStyle(l.rightsRemind,"display",""),n.is_original)return void(l.rightsRemind.innerHTML=r+"!");var i=n.title,o=n.url;if(i&&o)return l.similarArticle.innerHTML=""+n.title+"",void(l.similarArticle.href=n.url||"#");M(e)},onFail:M,onTimeout:M}).request({id:a.draft_id})},M=function(e){l.rightsRemind.innerHTML=r,t.setStyle(l.rightsRemind,"display","")},W=function(){b=!1},j=function(e){var n=t.core.dom.textSelectArea(e),i=n.start||e.value.length,r=n.len||0,o=i+"&"+r;e.setAttribute("range",o)},F=function(){c=t.lib.editor.base(a.node,g),u=c.editor,l=u.nodeList,"true"===a.dialog&&l.textEl.setAttribute("phototag","false"),_=t.lib.publisher.source.formdata(l.extradata);var e=_&&_.get("extraurl")||"";"ABSENT"===e&&(e="");var n=_&&_.get("prefixtext")||"";"ABSENT"===n&&(n=""),g.limitNum=g.limitNum-t.lib.publisher.widget.count(e+n);try{j(l.textEl)}catch(e){}l.wrap&&(h=t.lib.publisher.source.publishTo({editorWrapEl:l.wrap,textEl:l.textEl})),m=t.lib.dialog.validateCode(),x.read()&&setTimeout(function(){(0===t.trim(l.textEl.value).length||l.textEl.defaultValue&&l.textEl.value===l.textEl.defaultValue)&&(l.textEl.value="",u.API.insertText(x.read()),l.textEl.focus())})},B="",z=function(e){l&&l.feedconfig&&(t.core.dom.hasClassName(l.feedconfig,"send_weibo_simple")&&t.core.dom.hasClassName(l.feedconfig,"send_weibo_simple_remark_fold")&&(t.removeClassName(l.feedconfig,"send_weibo_simple_remark_fold"),B="send_weibo_simple_remark_fold"),t.core.dom.hasClassName(l.feedconfig,"send_weibo_simple")&&t.core.dom.hasClassName(l.feedconfig,"send_weibo_simple_fold")&&(t.removeClassName(l.feedconfig,"send_weibo_simple_fold"),B="send_weibo_simple_fold"))},O=function(e){if(l&&l.feedconfig){var e=t.fixEvent(e),n=e.target;t.core.dom.hasClassName(l.feedconfig,"send_weibo_simple")&&!t.core.dom.hasClassName(l.feedconfig,B)&&n!==l.feedconfig&&(t.core.dom.hasClassName(n,"WB_miniblog_fb")||t.core.dom.hasClassName(n,"WB_frame_c"))&&t.addClassName(l.feedconfig,B)}},H=function(){t.addEvent(l.submit,"click",k),t.lib.kit.extra.keySubmit.on(l.textEl,k),t.custEvent.add(u,"blur",A),t.custEvent.add(u,"focus",N),t.addEvent(l.feedconfig,"click",z),t.addEvent(document.body,"click",O)},P=function(){h&&h.miYouStyle.apply(null,arguments)},$=function(){t.custEvent.add(u,"textNum",S),h&&t.custEvent.add(h,"changeRank",P)},R=function(){_&&_.get("api")&&"ABSENT"!==_.get("api")&&(a.transName="proxy"),d=a.trans.getTrans(a.transName,{onComplete:function(e,n){var i={onSuccess:C,onError:L,requestAjax:d,param:T(),onRelease:function(){b=!1,s="",l.submit&&t.core.dom.removeClassName(l.submit,"W_btn_a_disable"),h&&h.enable()}};m.validateIntercept(e,n,i)},onFail:L,onTimeout:L})},U=function(){F(),H(),$(),R();try{D(a)}catch(e){}try{v=i(u)}catch(e){}},K=function(){h&&h.reset&&h.reset(),h&&h.hide&&h.hide(),v&&v.close&&v.close()},q=function(e){u.API.addExtraInfo(e)},G=function(e){u.API.disableEditor(e)},X=function(){l&&l.submit&&t.removeEvent(l.submit,"click",k),l&&l.textEl&&t.lib.kit.extra.keySubmit.off(l.textEl,k),t.custEvent.remove(u,"textNum",S),t.custEvent.remove(u,"blur",A),t.custEvent.remove(u,"focus",N),t.removeEvent(l.feedconfig,"click",z),t.removeEvent(document.body,"click",O),h&&t.custEvent.remove(h,"changeRank",P),t.custEvent.undefine(f,"publish"),m&&m.destroy&&m.destroy(),h&&h.destroy&&h.destroy(),v&&v.destroy&&v.destroy(),l=null,d=null,b=!1;for(var e in y)delete y[e];y=null};return U(),y.publishTo=h,y.close=K,y.editor=u,y.rend=D,y.unrend=W,y.addExtraInfo=q,y.disableEditor=G,y.destroy=X,y}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.publisher.widget.count",function(e){function t(t){for(var n=41,i=140,r=20,o=t,a=t.match(/http:\/\/[a-zA-Z0-9]+(\.[a-zA-Z0-9]+)+([-A-Z0-9a-z_\$\.\+\!\*\(\)\/,:;@&=\?\~\#\%]*)*/gi)||[],s=0,l=0,c=a.length;l<c;l++){var u=e.core.str.bLength(a[l]);/^(http:\/\/t.cn)/.test(a[l])||(/^(http:\/\/)+(t.sina.com.cn|t.sina.cn)/.test(a[l])||/^(http:\/\/)+(weibo.com|weibo.cn)/.test(a[l])?s+=u<=n?u:u<=i?r:u-i+r:s+=u<=i?r:u-i+r,o=o.replace(a[l],""))}return Math.ceil((s+e.core.str.bLength(o))/2)}return function(e){return e=e.replace(/\r\n/g,"\n"),t(e)}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.extra.autoTip",function(e){var t,n,i,r=e.delegatedEvent(document),o=e.ui.tipAlert,a=function(i){n=i.el;var r=e.core.json.queryToJson(n.getAttribute("data-tip"));r.text&&(t=o(r.text,{autoHide:!0,hideDelay:5e3,icon:"",rebindClose:!1,showWithAni:r.showWithAni,hideWithAni:r.hideWithAni}),t.beside(n,{pos:r.pos}))};r.add("data-tip","mouseover",function(e){clearTimeout(i),i=setTimeout(function(){a(e)},100)}),r.add("data-tip","mouseout",function(e){t&&(clearTimeout(i),n=null,t.hide())})})}).call(t,n(0))},,,function(e,t,n){(function(e){n(102),n(1),n(14),n(52),n(4),n(178),e.register("lib.comment.inter",function(e){var t,n=null,i=function(){},r=e.ui.alert,o=(e.lib.dialog.commentPrivateSetting,e.lib.kit.extra.language),a=function(t,n){t&&t.code&&("100000"!=t.code&&"100005"!=t.code&&e.lib.dialog.ioError(t.code,t),n(t))};return function(s,l){t=e.lib.dialog.validateCode();var c={},u=0,d=e.conf.trans.feed.comment;return s=e.parseParam({delete_success:i,delete_fail:i,delete_error:i,add_success:i,add_fail:i,add_error:i,smallList_success:i,smallList_fail:i,smallList_error:i},s||{}),c.conf=e.parseParam({act:n,mid:n,cid:n,uid:$CONFIG.uid,page:n,forward:n,isroot:n,content:n,type:n,is_block:n,appkey:n},l),c.merge=function(t){return t=e.lib.kit.extra.merge(c.conf,t),e.core.obj.clear(t)},c.request=function(n,i){if(!u){u=1;var l=c.merge(i),f=d.getTrans(n,{onComplete:function(i,c){if("add"==n){var d={onSuccess:function(e,t){a(e,function(e){s[n+("100000"==e.code?"_success":"_fail")](e,l)})},onError:function(t,i){if(s[n+"_error"](t,l),"100005"==t.code)return void r(o("#L{}"),{textSmall:o("#L{}")+'<a href="//account.weibo.com/settings/mobile" target="_blank">'+o("#L{}")+"</a>"});e.lib.dialog.ioError(t.code,t)},param:l,requestAjax:f};t.validateIntercept(i,c,d)}else a(i,function(t){if("100000"==t.code)s[n+"_success"](t,l);else{"function"==typeof s[n+"_fail"]?s[n+"_fail"](t,l):s[n+"_success"](t,l),e.ui.ioError(t.code,t)}});u=0},onFail:function(t){u=0,e.lib.dialog.ioError(t.code,t)}});f.request(l)}},c.load=function(e){c.request("smallList",e)},c.del=function(e){c.request("delete",e)},c.post=function(e){e.location=$CONFIG.location,e.pdetail=$CONFIG.page_id,c.request("add",e)},t.addUnloadEvent(),c}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.extra.getFlashVersion",function(e){return function(){var e="1",t=navigator;if(t.plugins&&t.plugins.length){for(var n=0;n<t.plugins.length;n++)if(t.plugins[n]&&t.plugins[n].name&&-1!=t.plugins[n].name.indexOf("Shockwave Flash")){e=t.plugins[n].description.split("Shockwave Flash ")[1];break}}else if(window.ActiveXObject)for(var n=10;n>=2;n--)try{var i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+n);if(i){e=n+".0";break}}catch(e){}return parseInt(e.split(".")[0])}})}).call(t,n(0))},function(e,t,n){(function(e){n(1),n(67),n(102),n(159),n(38),n(40),n(98),n(37),n(14),n(50),n(140),e.register("lib.comment.reply",function(e){var t=e.lib.kit.extra.language,n=(e.conf.trans.feed.comment,e.core.dom.setStyle),i=(e.core.dom.getStyle,e.core.evt.preventDefault,e.lib.kit.extra.setPlainHash),r=[],o={},a={reply:t("#L{}"),alert:t("#L{}"),success:t("#L{}"),block:t("#L{}")},s=new RegExp(["^",a.reply,"@([^:]*):"].join("")),l=function(e,n){e&&(e.innerHTML=t("normal"==n?"#L{}":"#L{...}"))},c=function(r,o){var c,u,d,f,p,m,h,v,g,y,b,_,w,x,k,E,T,S,C,L,A,N={};e.custEvent.define(N,["reply"]);var D=e.core.evt.delegatedEvent(r),I={add_success:function(t){T=0,h.className="W_btn_a btn_noloading",l(v,"normal"),u.API.reset(),u.API.insertText(_),u.API.blur(),n(r,"display","none"),t.forward=g,e.custEvent.fire(N,"reply",[t]),e.ui.tip("lite",{msg:a.success,type:"succM",timer:"500"}),C&&C.hideLayer()},add_fail:function(e){T=0,h.className="W_btn_a btn_noloading",l(v,"normal")},add_error:function(e){T=0,h.className="W_btn_a btn_noloading",l(v,"normal")}},M=function(){y=e.core.str.trim(m.value),y==_||""==y?!e.hasClassName(h,"W_btn_a_disable")&&e.addClassName(h,"W_btn_a_disable"):e.hasClassName(h,"W_btn_a_disable")&&e.removeClassName(h,"W_btn_a_disable")},W=function(n){if(!T){T=1,e.core.evt.preventDefault(),g=p.checked?1:0,y=e.core.str.trim(m.value),w=y.match(s);var r=m.getAttribute("pid");if("loading"===r)return e.ui.tipAlert(t("#L{}"),{icon:"rederrorS"}).beside(m).on("hide",function(){m.focus()}),void(T=0);y==_||""==y?(e.ui.tipAlert(a.alert,{icon:"rederrorS"}).beside(m),T=0,m.focus(),!e.hasClassName(h,"W_btn_a_disable")&&e.addClassName(h,"W_btn_a_disable")):(w&&w[1]&&w[1]==b||(o.cid=b=null),y=e.leftB(y,280),o.content=y,x=e.lib.kit.extra.getDiss(e.lib.kit.extra.merge(o,{act:"reply",content:y,forward:g,isroot:0}),n.el),n&&n.el?n.el.className="W_btn_a W_btn_a_disable":h&&(h.className="W_btn_a W_btn_a_disable"),l(v,"loading"),i("_rnd"+(+new Date).toString()),d=e.lib.comment.inter(I,x),x=e.lib.kit.extra.merge(n.data,x),r&&(x.pic_id=r),d.post(x))}};p=e.sizzle('[node-type="forward"]',r)[0],m=e.sizzle('[node-type="textEl"]',r)[0],h=e.sizzle('[action-type="doReply"]',r)[0],v=e.sizzle('[node-type="btnText"]',r)[0],L=e.sizzle('[node-type="smileyBtn"]',r)[0],A=e.sizzle('[node-type="imgBtn"]',r)[0],E=e.core.json.jsonToQuery(o),h.setAttribute("action-data",E),b=o.content,_=[a.reply,"@",b,":"].join("");try{c=e.lib.editor.base(r,{count:"disable"}),u=c.editor,e.custEvent.define(u,"close"),S=e.lib.publisher.widget.face(u),C=e.lib.image.commentImage(u,A)}catch(e){}return k=u.API.getWords(),""==k?u.API.insertText(_):u.API.insertText(""),D.add("doReply","click",W),e.addEvent(L,"click",S.show),e.lib.kit.extra.keySubmit.on(m,W),f=setInterval(function(){M()},200),e.lib.kit.dom.autoHeightTextArea({textArea:m,maxHeight:9999,inputListener:function(){var t=e.trim(m.value);e.bLength(t)>280&&(m.value=e.leftB(t,280))}}),N.focus=function(){u.API.insertText("")},N.destroy=function(){e.removeEvent(L,"click",S.show),C&&C.destroy(),D&&D.destroy&&D.destroy(),clearInterval(f),e.lib.kit.extra.keySubmit.off(m,W)},N},u=function(t,n){var i=e.core.arr.indexOf(t,r);return o[i]||(r[i=r.length]=t,o[i]=c(t,n)),o[i]};return function(t,n){return n&&n.mid||e.log("lib.comment/reply.js-------mid is not defined"),u(t,n)}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.comment.commentTemp",function(e){function t(t){t=t||{};var n="LAB_"+e.getUniqueKey();return'<div node-type="commentwrap" class="WB_repeat_in S_bg2"><div class="WB_feed_publish clearfix"><div class="WB_publish"> <div class="p_input"><textarea node-type="textEl" class="W_input"></textarea></div><div class="p_opt clearfix"> <div class="btn W_fr"><a node-type="btnText" action-type="doReply" href="javascript:;" class="W_btn_a W_btn_a_disable">#L{}</a></div> <div node-type="widget" class="opt clearfix"><span class="ico"><a node-type="smileyBtn" href="javascript:void(0);"><i class="W_ficon ficon_face">o</i></a></span>'+(t.canUploadImage?'<span class="ico"><a node-type="imgBtn" href="javascript:void(0);"><i class="W_ficon ficon_image">p</i></a></span>':"")+' <ul class="ipt"><li><label class="W_label" for="'+n+'"><input node-type="forward" name="" type="checkbox" value="" class="W_checkbox" id="'+n+'"><span>#L{}</span></label></li> </ul></div></div></div></div></div>'}return{reply:t(),getReply:t,mediaImage:'<#et temp data><div class="WB_expand_media ${data.bgClass}"><div class="tab_feed_a clearfix"><div class="tab"><ul class="clearfix"><li><span class="line S_line1"><a action-type="comment_media_toSmall" href="javascript:void(0);" class="S_txt1" <#if (data.suda && data.suda.retract)>suda-data="${data.suda.retract}"</#if> ><i class="W_ficon ficon_arrow_fold S_ficon">k</i>#L{}</a></span></li><li><span class="line S_line1"><a action-type="widget_commentPhotoView" action-data="${data.acdata}" href="javascript:void(0);" class="S_txt1" <#if (data.suda && data.suda.showBig)>suda-data="${data.suda.showBig}"</#if>><i class="W_ficon ficon_search S_ficon">f</i>#L{}</a></span></li><li><span class="line S_line1"><a action-type="comment_media_toLeft" href="javascript:void(0);" class="S_txt1" <#if (data.suda && data.suda.left)>suda-data="${data.suda.left}"</#if>><i class="W_ficon ficon_turnleft S_ficon">m</i>#L{}</a></span></li><li><span class="line S_line1"><a action-type="comment_media_toRight" href="javascript:void(0);" class="S_txt1" <#if (data.suda && data.suda.right)>suda-data="${data.suda.right}"</#if>><i class="W_ficon ficon_turnright S_ficon">n</i>#L{}</a></span></li></ul></div></div><div class="WB_media_view"><div class="media_show_box"><ul class="clearfix"><li class="smallcursor" action-type="comment_media_bigimgDiv" <#if (data.suda && data.suda.big)>suda-data="${data.suda.big}"</#if>><div class="artwork_box"><img dynamic-id="${data.uniqueId}" action-type="comment_media_bigimg" src="${data.bigSrc}" width="${data.bigWidth}" alt=""></div></li></ul></div></div></div></#et>'}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.dom.rotateImage",function(e){var t={},n=function(n){var i=e.core.dom.uniqueID(n);return t[i]||(t[i]={})},i={0:0,90:1,180:2,270:3},r=function(e,t){(e=((t||0)+e)%360)<0&&(e=360+e);var n=Math.PI*e/180,i=Math.round(Math.cos(n)*Math.pow(10,15))/Math.pow(10,15),r=Math.round(Math.sin(n)*Math.pow(10,15))/Math.pow(10,15);return{sin:r,cos:i,M11:i,M12:-r,M21:r,M22:i,angle:e,rotation:n}},o=function(t,n,o,a){o=o||440;var s=r(n,a.oldAngle);n=a.oldAngle=s.angle,t.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+s.M11+",M12="+s.M12+",M21="+s.M21+",M22="+s.M22+",SizingMethod='auto expand')",e.setStyle(t.parentNode,"position","relative"),i[n]%2==0?(t.width=a.originalWidth,t.height=a.originalHeight,e.setStyle(t.parentNode,"height",t.height+"px"),e.setStyle(t,"position","static")):i[n]%2==1&&(t.height=a.originalHeight>o?o:a.originalHeight,t.width=t.height*a.originalWidth/a.originalHeight,e.setStyle(t.parentNode,"height",t.width+"px"),e.setStyle(t,"position","absolute"),e.setStyle(t,"left",Math.abs((t.parentNode.offsetWidth-t.height)/2)+"px"),e.setStyle(t,"top","0"))},a=function(e,t,n,i){var r=e;if(i.oldAngle=r.angle=((void 0==r.angle?0:r.angle)+t)%360,r.angle>=0)var o=Math.PI*r.angle/180;else var o=Math.PI*(360+r.angle)/180;var a=Math.cos(o),s=Math.sin(o),l=document.createElement("canvas");r.oImage?l.oImage=r.oImage:l.oImage=r;var c=new Image;return c.onload=function(){l.style.width=l.width=Math.abs(a*c.width)+Math.abs(s*c.height),l.style.height=l.height=Math.abs(a*c.height)+Math.abs(s*c.width),l.width>n&&(l.style.width=n+"px",l.style.height=n*c.width/c.height+"px");var e=l.getContext("2d");e.save(),o<=Math.PI/2?e.translate(s*c.height,0):o<=Math.PI?e.translate(l.width,-a*c.height):o<=1.5*Math.PI?e.translate(-a*c.width,l.height):e.translate(0,-s*c.width),e.rotate(o);try{e.drawImage(c,0,0,c.width,c.height)}catch(e){}e.restore(),l.angle=r.angle,r.parentNode.replaceChild(l,r),l.id=r.id,c.onload=null},c.src=l.oImage.src,l},s=function(){for(var e=["transform","MozTransform","webkitTransform","OTransform"],t=0,n=document.createElement("div").style;e[t]&&!(e[t]in n);)++t;return e[t]}(),l=function(t,n,o,a){var l,c=r(n,a.oldAngle);n=a.oldAngle=c.angle,a.rotated?l=t.parentNode:(a.rotated=!0,l=e.C("div"),l.style.position="relative",a.textAlign=l.style.textAlign=e.getStyle(t.parentNode,"textAlign"),t.parentNode.insertBefore(l,t),l.appendChild(t),t.style.position="absolute"),i[n]%2==0?(a.originalWidth>o?a.imgViewWidth=t.width=o:a.imgViewWidth=t.width=a.originalWidth,a.imgViewHeight=t.height=a.originalHeight):i[n]%2==1&&(a.originalHeight>o?a.imgViewWidth=t.height=o:a.imgViewWidth=t.height=a.originalHeight,a.imgViewHeight=t.width=t.height*a.originalWidth/a.originalHeight),l.style.height=a.imgViewHeight+"px",o>l.offsetWidth&&(l.style.width=o+"px"),t.style[s]="matrix("+c.M11+","+c.M21+","+c.M12+","+c.M22+", 0, 0)";var u=(a.imgViewHeight-a.imgViewWidth)/2,d=(a.imgViewWidth-a.imgViewHeight)/2;i[n]%2==0?(t.style.top="0px","center"==a.textAlign?t.style.left=(l.offsetWidth-a.imgViewWidth)/2+"px":t.style["right"==a.textAlign?"right":"left"]="0px"):(t.style.top=u+"px","center"==a.textAlign?t.style.left=d+(l.offsetWidth-a.imgViewWidth)/2+"px":t.style["right"==a.textAlign?"right":"left"]=d+"px")},c=function(t,i,r){var c=n(t);"originalWidth"in c||(c.originalWidth=t.width,c.originalHeight=t.height),r||(r=c.originalWidth),s?l(t,i,r,c):"getContext"in e.C("canvas")?a(t.canvas?t.canvas:t,i,r,c):"filters"in e.C("div")&&o(t,i,r,c)};return{rotateRight:function(e,t,n){c(e,void 0==t?90:t,n)},rotateLeft:function(e,t,n){c(e,void 0==t?-90:-t,n)},rotateDefault:function(e){var t=n(e);t.oldAngle&&c(e,360-t.oldAngle,t.originalWidth)},removeDataCache:function(n){var i,r=e.uniqueID(n);s&&(i=n.parentNode&&n.parentNode.parentNode)&&(n.parentNode.parentNode.insertBefore(n,i),e.removeNode(i)),t[r]&&delete t[r]},destroy:function(){t={}}}})}).call(t,n(0))},function(e,t,n){(function(e){n(1),n(38),n(40),n(110),n(98),n(60),n(35),n(6),n(112),n(149),n(150),n(113),n(37),n(20),n(52),n(4),n(51),n(14),n(151),n(153),n(50),n(140),e.register("lib.forward.source.toMicroblog",function(e){var t,n=e.lib.kit.extra.language,i=e.lib.kit.extra.toFeedText,r=e.lib.kit.extra.textareaUtils,o=e.lib.kit.extra.shine,a=e.lib.kit.dom.parseDOM,s=null,l=e.lib.dialog.validateCode(),c=n('<#et userlist data><div node-type="toMicroblog_client"><#if (data.isDialog == true)><div class="WB_text S_bg1" node-type="content"><#if (data.showArrow == true)><a href="javascript:void(0);" action-type="origin_all" class="W_ficon ficon_arrow_down_lite S_ficon">g</a></#if><span class="con S_txt2">${data.content}</span></div></#if><div class="WB_feed_repeat forward_rpt1"><div class="WB_repeat"><div class="WB_feed_publish clearfix"><div class="WB_publish"><div class="p_input p_textarea"><textarea class="W_input" name="" rows="" cols="" title="#L{}#L{}" node-type="textEl">${data.reason}</textarea><span class="tips S_txt2" node-type="num"></span><div class="send_succpic" node-type="success_tip" style="display:none"><span class="W_icon icon_succB"></span><span class="txt">#L{}</span></div></div><div class="p_opt clearfix"><div class="btn W_fr"><div class="limits" style="position:relative;" layout-shell="true"><a action-data="rank=0" title="" class="S_txt1" href="javascript:void(0)" action-type="showPublishTo" node-type="showPublishTo" title=#L{-}><span class="W_autocut" node-type="publishTotext">#L{}</span> <i class="W_ficon ficon_arrow_down S_ficon" node-type="publish_to_arrow">c</i></a></div><a href="javascript:void(0)" node-type="submit" class="W_btn_a">#L{}</a></div><div class="opt clearfix" test=1 node-type="widget"><span class="ico"><a href="javascript:void(0)" title="#L{}" node-type="smileyBtn"><i class="W_ficon ficon_face">o</i></a><a href="javascript:void(0);" title="#L{}" node-type="imgBtn" style="display:none;"><i class="W_ficon ficon_image">p</i></a></span><ul class="ipt" node-type="cmtopts"><#if (data.forwardNick)><li node-type="forwardLi" class="W_autocut"><label for="forward_comment_opt_forwardLi" class="W_label"><input node-type="forwardInput" name="" type="checkbox" value="" class="W_checkbox" id="forward_comment_opt_forwardLi"><span>#L{} ${data.forwardNick}</span></label></li></#if><#if (data.originNick)><li node-type="originLi" class="W_autocut"><label for="forward_comment_opt_originLi" class="W_label"><input node-type="originInput" name="" type="checkbox" value="" class="W_checkbox" id="forward_comment_opt_originLi"><span><#if (data.forwardNick)> #L{} <#else>#L{}</#if> ${data.originNick}</span></label></li></#if></ul></div></div></div></div><#if (data.isDialog == true)><div node-type="forward_link" class="repeat_list S_line1"></div></#if></div></div></#et>'),u={notice:"#L{}",defUpdate:"#L{}",netError:"#L{}",success:"#L{}!",off:"#L{}",on:"#L{}"},d={limitNum:140,tipText:n(u.notice),count:"disable"},f=function(e,t){e.innerHTML=n("normal"==t?"#L{}":'<i class="W_loading"></i>#L{...}')};return function(p,m,h){if(null==p||null==m)throw new Error("[common.forward.toMicroblog]Required parameter client is missing");var v,g=h.data,y=56,b=!1,_=g.originNick?"@"+g.originNick:"",w=i(g.origin.replace(/<[^>]+>/gi,""));w=e.trim(w),g.content=w+"",e.bLength(e.core.str.decodeHTML(i(w+_)))>y?(g.content=e.leftB(w,y-e.bLength(_))+"...",b=!0):g.content=g.origin,_=_?'<a class="S_txt1" href="/'+(g.domain||g.rootuid||g.uid)+'" target="_blank">'+_+"</a>:":"",g.content=_+g.content;var x,k,E,T,S,C,L,A,N,D,I,M,W,j,F,B=g.reason||"",z=g.forwardNick?"//@"+g.forwardNick+": ":"",O=!1,H=e.lib.forward.source.API,P={};P.client=p,P.opts=h.data||{},P.isInit=!1,E=e.parseParam({appkey:"",styleId:"1",mark:"",module:"",page_module_id:"",refer_sort:"",pic_src:"",extra:"",dissDataFromFeed:{}},P.opts),e.custEvent.define(P,["forward","hide","center","count","updateNum","forwardAgain","resetComment"]);var $=function(){if(T)return void("error"===S&&e.lib.kit.extra.shine(k.textEl));var t=e.trim(x.API.getWords()||"");t===n(u.notice)&&(t=""),T=!0,S="loading",k.submit.className="W_btn_a W_btn_a_disable",f(k.submit,"loading");var i={};if(i.pic_src=E.pic_src,i.pic_id=k.textEl.getAttribute("pid"),i.appkey=E.appkey,i.mid=m,i.style_type=E.styleId,i.mark=E.mark,i.reason=t||n(u.defUpdate),i.location=$CONFIG.location,i.pdetail=$CONFIG.page_id,i.module=E.module,i.page_module_id=E.page_module_id,i.refer_sort=E.refer_sort,k.originInput&&k.originInput.checked&&(i.is_comment_base="1"),k.forwardInput&&k.forwardInput.checked&&(i.is_comment="1",O=!0),k.forwardInput||"1"!=i.is_comment_base||(O=!0),W&&W.disable(),W){var r=W.rank();i.rank=r.rank,i.rankid=r.rankid}if(i=e.lib.kit.extra.getDiss(i,k.submit),i=e.core.json.merge(i,E.dissDataFromFeed),h.mark&&(i.mark=h.mark),g.postdata)for(var o=g.postdata.split(";"),a=0;o[a];a++){var l=o[a].split(",");l[0]&&l[0]&&(i[l[0]]=l[1])}if(s=i,H.checkAtNum(t)>5)return void e.ui.confirm(n("#L{@ }"),{OK:function(){C.request(i)},cancel:function(){T=!1,S="",k.submit.className="W_btn_a btn_noloading",f(k.submit,"normal")}});E.extra&&(i.ref=E.extra),C.request(i)},R=function(){var e=x.API.count(),t=d.limitNum-e,n=t>=0;n?(T=!1,S="",n&&(k.num.innerHTML="<span>"+t+"</span>")):(T=!0,S="error",k.num.innerHTML='<span class="S_error">'+t+"</span>")},U=function(t,n){x.API.blur(),k.success_tip.style.display="";var i=e.sizzle(".W_icon",k.success_tip)[0],r=e.sizzle(".txt",k.success_tip)[0];r.style.display="none",e.ui.effect(i,"flipInY","normal"),setTimeout(function(){r.style.display="",e.ui.effect(r,"fadeInRight","normal")},50),x.API.reset(),F&&F.hideLayer(),setTimeout(function(){T=!1,S="",s=null,k.submit.className="W_btn_a btn_noloading",f(k.submit,"normal");try{t.data.mid=n.mid,t.data.isComment=O,t.data.isToMiniBlog=!0,e.custEvent.fire(P,"forward",[t.data,n,h.inDialog]),e.conf.channel.feed.fire("forward",[t.data,n,h.inDialog])}catch(e){}e.custEvent.fire(P,"hide"),O=!1,W&&W.reset(),e.ui.effect(k.success_tip,"fadeOut","fast",function(){k&&k.success_tip&&(k.success_tip.style.display="none")})},1e3)},K=function(t,i){T=!1,S="",k.submit.className="W_btn_a btn_noloading",f(k.submit,"normal"),t.msg=t.msg||n(u.netError),O=!1,W&&W.enable(),t.data&&t.data.close&&e.custEvent.fire(P,"hide"),e.lib.dialog.ioError(t.code,t)},q=function(t,n){T=!1,S="",k.submit.className="W_btn_a btn_noloading",f(k.submit,"normal"),W&&W.enable(),e.lib.dialog.ioError(t.code,t)},G=function(){A=e.builder(p),A=e.lib.kit.dom.parseDOM(A.list).toMicroblog_client,x=e.lib.editor.base(A,d),k=x.nodeList,x.API=x.editor.API,e.custEvent.define(x.editor,"close"),j=e.lib.publisher.widget.face(x.editor),F=e.lib.image.commentImage(x.editor,k.imgBtn),W=e.lib.publisher.source.publishTo({editorWrapEl:p,textEl:k.textEl,isforward:!0}),e.addEvent(k.textEl,"focus",function(){M=setInterval(function(){try{R()}catch(e){}},200)}),e.addEvent(k.textEl,"blur",function(){clearInterval(M)}),x.API.insertText(z+e.trim(e.core.str.decodeHTML(i(B)))),e.lib.kit.dom.autoHeightTextArea({textArea:k.textEl,maxHeight:145,inputListener:e.funcEmpty}),I&&(v=e.lib.forward.source.like(A),t=e.lib.forward.source.forwardLink(P,{flNode:k.forward_link,mid:m,data:E}))},X=function(){e.addEvent(k.submit,"click",$),e.lib.kit.extra.keySubmit.on(k.textEl,$),e.addEvent(k.smileyBtn,"click",j.show),I&&(D=e.delegatedEvent(A),D.add("origin_all","click",function(e){k.content.innerHTML='<span class="con S_txt2">'+_+g.origin+"</span>"}),D.add("report","click",function(t){return e.lib.forward.plugin.report(t)}),D.add("switch","click",function(t){var i={1:"on",2:"off"},r=i[t.data.id];setSwitchStatus(r),e.setStyle(t.el,"left","on"==r?"23px":"0px"),t.el.setAttribute("action-data","on"==r?"id=2":"id=1"),t.el.setAttribute("title",n("on"==r?u.off:u.on))}),D.add("show","click",function(e){N=1*e.data.id==1?"on":"off",getForwardInfo_more(e)}),D.add("forward_again","click",te))},V=function(t,n,s){B=s,x.API.reset(),x.API.insertText(e.trim(e.core.str.decodeHTML(i(B))),0),r.setCursor(k.textEl,0,0),o(k.textEl),E=e.parseParam(E,n),m=n.mid,g=$merge(g,n),n.forwardNick=n.name,n.originNick=n.rootname,k.cmtopts.innerHTML=e.core.util.easyTemplate(ee,n).toString(),k=$merge(k,a(e.builder(k.cmtopts).list))},Y=function(e,t){k.cmtopts&&t.data.permission&&0==t.data.permission.allowComment?(k.cmtopts.style.display="none",k.cmtopts.innerHTML=""):k.originLi&&t.data.permission&&0==t.data.permission.allowRootComment&&(k.originLi.style.display="none",k.originLi.innerHTML="")},J=function(){e.custEvent.add(P,"forwardAgain",V),e.custEvent.add(P,"resetComment",Y)},Q=function(e,t){N="on"==N?"off":"on"},Z=function(t){e.lib.dialog.ioError(t.code,t)},ee=n('<#et cmt data><#if (data.forwardNick)><li node-type="forwardLi" class="W_autocut"><label class="W_label" for="forward_comment_opt_forwardLi"><input id="forward_comment_opt_forwardLi" type="checkbox" node-type="forwardInput" class="W_checkbox"  /><span>#L{} ${data.forwardNick}</span></label></li></#if><#if (data.originNick)><li node-type="originLi" class="W_autocut"><label class="W_label" for="forward_comment_opt_originLi"><input id="forward_comment_opt_originLi" type="checkbox" node-type="originInput" class="W_checkbox" /><span><#if (data.forwardNick)>#L{} <#else>#L{} </#if>${data.originNick}</span></label></li></#if>'),te=function(t){var n,r,o=e.core.dom.dir.parent(t.el,{expr:"dl"})[0],a=t.data;o&&(n=e.sizzle('em[node-type="forward_again"]',o)[0],r=a.name,n&&(B="//@"+r+": "+e.trim(n.innerHTML.replace(/[\r|\n|\t]/g,"")),x.API.reset(),x.API.insertText(e.trim(e.core.str.decodeHTML(i(B))),0),e.lib.kit.extra.textareaUtils.setCursor(k.textEl,0,0),e.lib.kit.extra.shine(k.textEl),E=e.parseParam(E,a),m=a.mid,a.forwardNick=a.name,a.originNick=a.rootname,g=e.lib.kit.extra.merge(g,t.data),k.cmtopts.innerHTML=e.core.util.easyTemplate(ee,a).toString(),k=e.lib.kit.extra.merge(k,e.lib.kit.dom.parseDOM(e.builder(k.cmtopts).list))))},ne=function(){C=e.conf.trans.forward.getTrans("toMicroblog",{onComplete:function(e,t){var n={onSuccess:U,onError:K,requestAjax:C,param:s,onRelease:function(){T=!1,S="",k.submit.className="W_btn_a btn_noloading",f(k.submit,"normal"),O=!1,W&&W.enable()}};l.validateIntercept(e,t,n)},onFail:q,onTimeout:K}),L=function(t){e.conf.trans.forward.request("setDefault",{onSuccess:Q,onError:Z,onFail:Z},t)}},ie=function(){},re=function(){ne(),G(),X(),ie(),J()},oe=function(n){0==P.isInit?(h.data.isDialog=n,I=n,h.data.showArrow=b,e.addHTML(p,e.core.util.easyTemplate(c,h.data)),x||re(),P.isInit=!0):(A&&e.setStyle(A,"display",""),t&&e.custEvent.fire(t,"switch",[{node:k.forward_link,base:P}])),x.API.focus(0)},ae=function(){e.lib.kit.extra.shine(x.nodeList.textEl)},se=function(){x.API.blur(),null!=A&&e.setStyle(A,"display","none")},le=function(){e.removeEvent(k.submit,"click",$),e.lib.kit.extra.keySubmit.off(k.textEl,$),e.custEvent.undefine(P),D&&D.remove("origin_all","click"),D&&D.remove("report","click"),D&&D.remove("switch","click"),D&&D.remove("retry","click"),D&&D.remove("show","click"),D.destroy(),D=null,t&&t.destroy&&t.destroy(),l&&l.destroy&&l.destroy(),W&&W.destroy&&W.destroy(),v&&v.destroy&&v.destroy(),F&&F.destroy(),x.closeWidget(),M&&clearInterval(M),x=null,k=null,C=null,A=null;for(var n in P)delete P[n];P=null};return P.show=oe,P.hide=se,P.shine=ae,P.destroy=le,P}})}).call(t,n(0))},function(e,t,n){(function(e){n(1),n(38),n(40),n(98),n(60),n(14),n(20),n(35),n(6),n(112),n(114),n(149),n(150),n(113),n(37),n(52),n(4),n(153),n(151),n(190),n(196),n(197),n(111),n(50),e.register("lib.forward.source.toMessage",function(e){var t,n=e.lib.kit.extra.language,i=e.lib.editor.base,r=e.lib.publisher.widget.face,o=e.lib.kit.dom.autoHeightTextArea,a=e.lib.kit.extra.shine,s=e.ui.tip,l=(e.lib.kit.extra.getDiss,e.conf.channel.feed,e.lib.forward.source.API,e.conf.trans.forward),c=e.lib.kit.dom.smartInput,u=e.lib.dialog.validateCode,d=e.lib.message.upload.loadSwf,f=(e.lib.message.upload.getFlash,e.lib.dialog.ioError),p=e.lib.kit.dom.parseDOM,m={limitNum:1e4,count:"disable"},h=n('<#et userlist data><div node-type="toMessage_client"><div class="WB_feed_repeat forward_rpt2" ><div class="WB_repeat">\x3c!-----\x3e<div class="WB_feed_publish clearfix"><div class="WB_face W_fl"></div><div class="WB_publish"><div class="p_input"><textarea class="W_input" node-type="msgTo"></textarea></div></div></div>\x3c!-----\x3e<div class="WB_feed_publish clearfix"><div class="WB_face W_fl">   </div><div class="WB_publish"><div class="sendbox_mod sendbox_mod_down sendbox_mod_focus" node-type="uploadTd"><div class="sendbox_area S_bg2"><textarea node-type="textEl" name="" cols="" rows="" class="W_input W_f14" style="">#L{}&#13;<#if (data.url)>${data.url}</#if></textarea></div>\x3c!--  --\x3e<div node-type="uploadList" class="sendbox_annex S_bg2 S_line3"><div class="sendbox_file S_line2" node-type="uploadFile" style="display:none;"></div>\x3c!--  --\x3e\x3c!--  --\x3e<div class="sendbox_img S_line2" style="display:none;" node-type="uploadImg"></div></div>\x3c!--  --\x3e<div class="sendbox_bar clearfix"><div class="sendbox_menu W_fl" node-type="widget"><a href="javascript:void(0);" class="icon_send" node-type="smileyBtn"> <em class="W_ficon ficon_face">o</em></a><a href="javascript:void(0);" class="icon_send" node-type="picBtn"> <em class="W_ficon ficon_image">p</em></a><a href="javascript:void(0);" class="icon_send" node-type="attachBtn"><em class="W_ficon ficon_file">x</em></a></div><div class="sendbox_btn W_fr"><span class="prompt S_txt1" node-type="num" style="display:none;">  <em>10000</em>  </span><a href="javascript:void(0);" node-type="submit" class="W_btn_a"></a></div></div></div></div>\x3c!--  --\x3e </div>\x3c!--/---\x3e<#if (data.isDialog == true)></div></div></#if></div></#et>'),v={notice:"#L{}",nameNotice:"#L{}",defUpdate:"#L{}",netError:"#L{}",success:"#L{}!",retry:'#L{}<a href="#" onclick="return false;" action-type="retry" value="retry">#L{}</a>',off:"#L{}",on:"#L{}"},g=function(t,i){"normal"==i?(e.removeClassName(t,"W_btn_a_disable"),t.innerHTML=n("#L{}")):(e.addClassName(t,"W_btn_a_disable"),t.innerHTML=n('<i class="W_loading"></i>#L{...}'))};return function(y,b,_){var w=u();if(null==y||null==b)throw new Error("[lib.invoke.forward.publisher.toPrivateMsg]Required parameter client is missing");var x,k,E,T,S,C,L,A,N,D,I,M={};M.client=y,M.opts=_||{},M.isInit=!1;var W,j;e.custEvent.define(M,["forward","hide","center","updateNum"]);var F=function(){x.API.getExtra();if(E)return void("error"===T&&a(k.textEl));var i=e.trim(x.API.getWords()||"");i===n(v.notice)&&(i="");var r=e.trim(k.msgTo.value);if(r===n(v.nameNotice)&&(r=""),""===i)return void a(k.textEl);if(""===r)return void a(k.msgTo);E=!0,T="loading",g(k.submit,"loading");var o={};o.text=i||n(v.defUpdate);var s=W.getTovfids().concat(j.getTovfids());0!=s.length&&(o.fids=s.join(","),o.tovfids=s.join(",")),o.appkey=M.opts.data.appkey,o.id=b,o.screen_name=r,t=o,t.module=M.opts.data.module,t.page_module_id=M.opts.data.page_module_id,t.refer_sort=M.opts.data.refer_sort,P()},B=function(){if(x&&x.API){var e=x.API.count(),t=m.limitNum-e,i=t>=0;i?(E=!1,T="",i&&(k.num.innerHTML=n("#L{}<span>"+t+"</span> #L{}"),k.num.style.display="none")):(E=!0,T="error",k.num.innerHTML=n('#L{}<span class="S_error">'+Math.abs(t)+"</span> #L{}"),k.num.style.display="")}},z=function(i,r){x.API.blur(),t=null,E=!1,T="",g(k.submit,"normal");try{i.data.mid=r.mid,i.data.toPrivateMsg=!0,e.custEvent.fire(M,"forward",[i.data,r,_.inDialog])}catch(e){}e.custEvent.fire(M,"hide"),s("lite",{msg:n(v.success),type:"succ",timer:"500"}),x.API.reset(),N.reset(),image&&image.hideLayer()},O=function(e,n){E=!1,t=null,T="",g(k.submit,"normal"),f(e.code,e)},H=function(e,n){E=!1,T="",t=null,g(k.submit,"normal"),f(e.code,e)},P=function n(i){W.checkUploadComplete()&&j.checkUploadComplete()?(t=e.lib.kit.extra.getDiss(t,k.submit),S.request(t)):setTimeout(function(){n(i)},100)},$=function(){var t;C=e.builder(y),t=p(C.list),C=t.toMessage_client,x=i(C,m),x.API=x.editor.API,e.custEvent.define(x.editor,"close"),I=r(x.editor),k=x.nodeList,W=d(t.picBtn,{fileType:"img",fileListNode:t.uploadImg,pasteEl:k.textEl}),j=d(t.attachBtn,{fileType:"file",fileListNode:t.uploadFile}),e.lib.message.upload.mergeFileCount([W,j]),e.addEvent(k.textEl,"focus",function(){B(),e.addClassName(k.uploadTd,"sendbox_mod_focus"),A=setInterval(function(){B()},200)}),e.addEvent(k.textEl,"blur",function(){e.removeClassName(k.uploadTd,"sendbox_mod_focus"),clearInterval(A)}),o({textArea:k.textEl,maxHeight:145,inputListener:e.funcEmpty})},R=function(){e.addEvent(k.submit,"click",F),e.lib.kit.extra.keySubmit.on(k.textEl,F),e.addEvent(k.smileyBtn,"click",I.show)},U=function(){},K=function(){S=l.getTrans("create",{onComplete:function(e,n){var i={onSuccess:z,onError:O,requestAjax:S,param:n,onRelease:function(){E=!1,t=null,T="",g(k.submit,"normal")}};w.validateIntercept(e,n,i)},onFail:H})},q=function(){K(),$(),R(),U(),D=c(k.msgTo,{notice:n(v.nameNotice)}),D.restart(),e.ui.suggest(k.msgTo).on("suggest",function(t,n,i){e.conf.trans.global.request("followList",{onSuccess:function(t){var n=[];e.foreach(t.data,function(e){var t=e.remark?"("+e.remark+")":"";n.push([e.screen_name+t,e.screen_name])}),i(n)}},{q:n})})},G=function(t){0==M.isInit?(L=t,_.data.msgTo=n(v.nameNotice),_.data.isDialog=t,_.data.origin=e.trim(_.data.origin),e.addHTML(y,e.core.util.easyTemplate(h,_.data)),x||q(),M.isInit=!0):C&&e.setStyle(C,"display",""),x.API.focus(0)},X=function(){x.API.blur(),null!=C&&e.setStyle(C,"display","none")},V=function(){e.removeEvent(k.submit,"click",F),e.lib.kit.extra.keySubmit.off(k.textEl,F),e.custEvent.undefine(M),sugg&&sugg.destroy(),x.closeWidget(),t=null,A&&clearInterval(A),w&&w.destroy&&w.destroy(),x=null,k=null,S=null,C=null;for(var n in M)delete M[n];W&&W.destroy&&W.destroy(),j&&j.destroy&&j.destroy(),M=null};return M.show=G,M.hide=X,M.destroy=V,M}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.extra.runFlashMethod",function(e){return function(e,t,n){var i,r,o;return function a(){if(e[t]){r=!0,clearTimeout(i);try{e.TotalFrames()}catch(t){e.TotalFrames}n()}else o=setTimeout(a,100)}(),i=setTimeout(function(){r||clearTimeout(o)},1e4),{destroy:function(){clearTimeout(i),clearTimeout(o)}}}})}).call(t,n(0))},function(e,t,n){(function(e){n(1),n(38),n(40),n(98),n(60),n(14),n(20),n(35),n(6),n(112),n(149),n(150),n(113),n(37),n(52),n(4),n(153),n(151),n(50),e.register("lib.forward.source.toFriends",function(e){var t=e.lib.kit.extra.language,n=e.lib.editor.base,i=e.lib.publisher.widget.face,r=e.lib.kit.dom.autoHeightTextArea,o=e.lib.kit.extra.shine,a=e.lib.kit.extra.merge,s=e.lib.kit.extra.textareaUtils,l=e.conf.channel.feed,c=e.lib.kit.dom.parseDOM,u=e.conf.trans.forward,d=e.lib.forward.source.API,f=e.lib.kit.extra.report,p=e.lib.kit.extra.toFeedText,m=(e.lib.kit.extra.getDiss,e.lib.dialog.ioError),h=e.lib.forward.source.forwardLink,v=null,g=e.lib.dialog.validateCode(),y=t('<#et userlist data><div node-type="toFriends_client"><div class="W_tips tips_warn clearfix"><p class="icon"><i class="W_icon icon_warnS"></i></p><p class="txt"></p></div><div class="WB_text S_bg1" node-type="content"><#if (data.showArrow == true)><a href="javascript:void(0);" action-type="origin_all" class="W_ficon ficon_arrow_down_lite S_ficon">g</a></#if><span class="con S_txt2">${data.content}</span></div><div class="WB_feed_repeat forward_rpt1"><div class="WB_repeat"><div class="WB_feed_publish clearfix"><div class="WB_publish"><div class="p_input p_textarea"><textarea class="W_input" name="" rows="" cols="" title="#L{}#L{}" node-type="textEl">${data.reason}</textarea><span class="tips S_txt2" node-type="num"></span><div class="send_succpic" node-type="success_tip" style="display:none"><span class="W_icon icon_succB"></span><span class="txt">#L{}</span></div></div><div class="p_opt clearfix"><div class="btn W_fr"><a href="javascript:void(0)" node-type="submit" class="W_btn_a"></a>\x3c!--<a href="" class="W_btn_a W_btn_a_disable"><i class="W_loading"></i></a>--\x3e</div><div class="opt clearfix" test=1 node-type="widget"><span class="ico"><a href="javascript:void(0);" title="#L{}" node-type="smileyBtn"><i class="W_ficon ficon_face">o</i></a><a href="javascript:void(0);" title="#L{}" node-type="imgBtn"><i class="W_ficon ficon_image">p</i></a></span><ul class="ipt" node-type="cmtopts"><#if (data.forwardNick)><li node-type="forwardLi" class="W_autocut"><label for="forward_comment_opt_forwardLi_f" class="W_label"><input node-type="forwardInput" name="" type="checkbox" value="" class="W_checkbox" id="forward_comment_opt_forwardLi_f"><span>#L{} ${data.forwardNick}</span></label></li></#if><#if (data.originNick)><li node-type="originLi" class="W_autocut"><label for="forward_comment_opt_originLi_f" class="W_label"><input node-type="originInput" name="" type="checkbox" value="" class="W_checkbox" id="forward_comment_opt_originLi_f"><span><#if (data.forwardNick)>#L{} <#else>#L{} </#if>${data.originNick}</span></label></li></#if></ul></div></div></div></div><div node-type="forward_link" class="repeat_list S_line1"></div></div></div></div>'),b=t('<#et cmt data><#if (data.forwardNick)><li node-type="forwardLi" class="W_autocut"><label class="W_label" for="forward_comment_opt_forwardLi_f"><input id="forward_comment_opt_forwardLi_f" type="checkbox" node-type="forwardInput" class="W_checkbox"  /><span>#L{} ${data.forwardNick}</span></label></li></#if><#if (data.originNick)><li node-type="originLi" class="W_autocut"><label class="W_label" for="forward_comment_opt_originLi_f"><input id="forward_comment_opt_originLi_f" type="checkbox" node-type="originInput" class="W_checkbox" /><span><#if (data.forwardNick)>#L{} <#else>#L{} </#if>${data.originNick}</span></label></li></#if>'),_={notice:"#L{}",defUpdate:"#L{}",netError:"#L{}",success:"#L{}!",off:"#L{}",on:"#L{}"};return function(w,x,k){null!=w&&null!=x||e.log("[common.forward.toMiyouCircle]Required parameter client is missing");var E,T,S,C,L=e.parseParam({limitNum:140,tipText:t(_.notice),count:"disable"},k||{}),A=k.data,N=56,D=!1,I=A.originNick?"@"+A.originNick:"",M=p(A.origin.replace(/<[^>]+>/gi,""));A.content=e.trim(M)+"",e.bLength(e.core.str.decodeHTML(p(M+I)))>N?(A.content=e.leftB(M,N-e.bLength(I))+"...",D=!0):A.content=A.origin,I=I?'<a class="S_func1" href="/'+(A.domain||A.rootuid||A.uid)+'" target="_blank">'+I+"</a>:":"",A.content=I+A.content;var W,j,F,B,z,O,H,P,$,R,U,K,q=e.trim(A.reason.replace(/[\r|\n|\t]/g,""))||"",G=A.forwardNick?"//@"+A.forwardNick+": ":"",X=!1,V=d,Y={};Y.client=w,Y.opts=k.data||{},Y.isInit=!1,F=e.parseParam({appkey:"",styleId:"1",mark:"",module:"",page_module_id:"",refer_sort:"",forward_link_status:"on",dissDataFromFeed:{}},Y.opts),e.custEvent.define(Y,["forward","hide","center","count","forwardAgain","resetComment","updateNum"]);var J={changeBtnText:function(n,i){"normal"==i?(e.removeClassName(n,"W_btn_a_disable"),n.innerHTML=t("#L{}")):(e.addClassName(n,"W_btn_a_disable"),n.innerHTML=t('<i class="W_loading"></i>#L{...}'))},canForward:function(){if(W&&W.API){var e=W.API.count(),t=L.limitNum-e,n=t>=0;n?(B=!1,z="",n&&(j.num.innerHTML="<span>"+t+"</span>")):(B=!0,z="error",j.num.innerHTML='<span class="S_error">'+t+"</span>")}}},Q={updateForward:function(n){if(B)return void("error"===z&&o(j.textEl));var i=e.trim(W.API.getWords()||"");i===t(_.notice)&&(i=""),B=!0,z="loading",e.addClassName(j.submit,"W_btn_a_disable"),J.changeBtnText(j.submit,"loading");var r={};if(r.appkey=F.appkey,r.pic_id=j.textEl.getAttribute("pid"),r.mid=x,r.style_type=F.styleId,r.mark=F.mark,r.reason=i||t(_.defUpdate),j.originInput&&j.originInput.checked&&(r.is_comment_base="1"),j.forwardInput&&j.forwardInput.checked&&(r.is_comment="1",X=!0),r.rank=2,r.rankid="",r.group_source="group_all",r.module=F.module,r.page_module_id=F.page_module_id,r.refer_sort=F.refer_sort,r=e.core.json.merge(r,F.dissDataFromFeed),v=r,V.checkAtNum(i)>5)return void e.ui.confirm(t("#L{@ }"),{OK:function(){O.request(r)},cancel:function(){B=!1,z="",e.removeClassName(j.submit,"W_btn_a_disable"),J.changeBtnText(j.submit,"normal")}});O.request(r)},putAside:function(){j.putAside.style.display="none",j.submit.innerHTML=t("#L{}"),j.submit.removeAttribute("suda-data")},ctrlUpdateForward:function(e){13!==e.keyCode&&10!==e.keyCode||!e.ctrlKey||(W.API.blur(),Q.updateForward())}},Z=function(){P=e.core.util.storage.get("forward_link_status"),"null"!=P&&P||(P=F.forward_link_status),$=P},ee=function(t,n){W.API.blur(),j.success_tip.style.display="",W.API.reset(),C&&C.hideLayer(),setTimeout(function(){B=!1,z="",v=null,e.removeClassName(j.submit,"W_btn_a_disable"),J.changeBtnText(j.submit,"normal");try{t.data.mid=n.mid,t.data.isComment=X,t.data.isToMiniBlog=!0,e.custEvent.fire(Y,"forward",[t.data,n,k.inDialog]),l.fire("forward",[t.data,n,k.inDialog])}catch(e){}e.custEvent.fire(Y,"hide"),Q.putAside(),X=!1},500)},te=function(n,i){B=!1,z="",J.changeBtnText(j.submit,"normal"),n.msg=n.msg||t(_.netError),X=!1,n.data&&n.data.close&&e.custEvent.fire(Y,"hide"),m(n.code,n)},ne=function(t,n){B=!1,z="",e.removeClassName(j.submit,"W_btn_a_disable"),J.changeBtnText(j.submit,"normal"),m(t.code,t)},ie=function(t,n,i){q=i,W.API.reset(),W.API.insertText(e.trim(e.core.str.decodeHTML(p(q))),0),s.setCursor(j.textEl,0,0),o(j.textEl),F=e.parseParam(F,n),x=n.mid,A=a(A,n),n.forwardNick=n.name,n.originNick=n.rootname,j.cmtopts.innerHTML=e.core.util.easyTemplate(b,n).toString(),j=a(j,c(e.builder(j.cmtopts).list))},re=function(e,t){j.cmtopts&&t.data.permission&&0==t.data.permission.allowComment?(j.cmtopts.style.display="none",j.cmtopts.innerHTML=""):j.originLi&&t.data.permission&&0==t.data.permission.allowRootComment&&(j.originLi.style.display="none",j.originLi.innerHTML="")},oe=function(){e.custEvent.add(Y,"forwardAgain",ie),e.custEvent.add(Y,"resetComment",re)},ae=function(){O=u.getTrans(k.isWeiboDetail?"toMiyouCirclev5":"toMiyouCircle",{onComplete:function(e,t){var n={onSuccess:ee,onError:te,requestAjax:O,param:v,onRelease:function(){B=!1,z="",J.changeBtnText(j.submit,"normal"),X=!1}};g.validateIntercept(e,t,n)},onFail:ne,onTimeout:te},A)},se=function(){H=e.builder(w),H=c(H.list).toFriends_client,W=n(H,L),W.API=W.editor.API,e.custEvent.define(W.editor,"close"),j=W.nodeList,S=i(W.editor),C=e.lib.image.commentImage(W.editor,j.imgBtn),e.addEvent(j.textEl,"focus",function(){K=setInterval(function(){J.canForward()},200)}),e.addEvent(j.textEl,"blur",function(){clearInterval(K)}),W.API.insertText(G+e.core.str.decodeHTML(p(q))),r({textArea:j.textEl,maxHeight:145,inputListener:e.funcEmpty}),U&&(E=e.lib.forward.source.like(H),T=h(Y,{flNode:j.forward_link,mid:x,data:F}))},le=function(){e.addEvent(j.submit,"click",Q.updateForward),e.addEvent(j.putAside,"click",Q.putAside),e.lib.kit.extra.keySubmit.on(j.textEl,Q.updateForward),e.addEvent(j.smileyBtn,"click",S.show),U&&(R=e.delegatedEvent(H),R.add("origin_all","click",function(t){j.content.innerHTML='<span class="con S_txt2">'+I+e.trim(A.origin)+"</span>"}),R.add("report","click",function(e){return f(e)}))},ce=function(){Z(),oe(),ae(),se(),le()},ue=function(t){0==Y.isInit?(k.data.isDialog=t,U=t,k.data.showArrow=D,e.addHTML(w,e.core.util.easyTemplate(y,k.data)),W||ce(),Y.isInit=!0):(H&&e.setStyle(H,"display",""),e.custEvent.fire(T,"switch",[{node:j.forward_link,base:Y}])),W.API.focus(0)},de=function(){e.lib.extra.shine(W.nodeList.textEl)},fe=function(){W.API.blur(),null!=H&&e.setStyle(H,"display","none")},pe=function(){e.removeEvent(j.submit,"click",Q.updateForward),e.removeEvent(j.putAside,"click",Q.putAside),e.lib.kit.extra.keySubmit.off(j.textEl,Q.updateForward),e.custEvent.undefine(Y),R&&R.remove("origin_all","click"),R&&R.remove("report","click"),R&&R.remove("switch","click"),R&&R.remove("retry","click"),R&&R.remove("show","click"),R=null,T&&T.destroy&&T.destroy(),g&&g.destroy&&g.destroy(),E&&E.destroy&&E.destroy(),W.closeWidget(),C&&C.destroy(),K&&clearInterval(K),W=null,j=null,O=null,H=null;for(var t in Y)delete Y[t];Y=null};return Y.show=ue,Y.hide=fe,Y.shine=de,Y.destroy=pe,Y}})}).call(t,n(0))},function(e,t,n){(function(e){n(2),e.register("conf.trans.page.content",function(e){var t=e.lib.kit.io.inter(),n=t.register;return n("follow",{url:"/ttarticle/p/aj/followed?ajwvr=6",method:"post"}),n("delArticle",{url:"/ttarticle/p/aj/delete",method:"post"}),n("recommend",{url:"/ttarticle/p/aj/recommend",method:"get"}),n("report",{url:"/ttarticle/p/aj/report",method:"get"}),t})}).call(t,n(0))},,,,,function(e,t,n){(function(e,t){n(174),n(207),n(208),n(211),n(212),n(156),t.register("page.show.init",function(e){e.sizzle("[node-type=feed_list]")[0];e.page.show.sidebar().init(),e.page.show.content().init(),e.page.show.recommend().init(),e.page.show.weiboDetail()})}).call(t,n(55),n(0))},function(e,t,n){(function(e){n(175),e.register("page.show.weiboDetail",function(e){return function(){var t=e.sizzle("[node-type=feed_list]")[0];t&&e.pl.content.weiboDetail.source.init(t,{})}})}).call(t,n(0))},function(e,t,n){(function(e){n(116),n(176),n(187),n(204),n(206),n(4),n(37),n(51),n(39),e.register("pl.content.weiboDetail.source.init",function(e){var t=e.pl.content.weiboDetail.source.comment.init,n=e.pl.content.weiboDetail.source.forward.init,i=e.pl.content.weiboDetail.source.like.init,r=e.pl.content.weiboDetail.source.publisherDialog.init,o=e.lib.kit.extra.actionData,a=e.lib.dialog.loginLayer;return function(s){function l(t){var n=e.sizzle("[action-type="+t+"]",p.feed_list_options[0])[0];return n?e.core.dom.dir.parent(n,{expr:"li"})[0]:null}function c(){r().init()}function u(t,n){var i=e.sizzle("span.line",t)[0],r=!1;/(\d+)$/.test(e.trim(i.innerHTML))&&(i.innerHTML=i.innerHTML.replace(/\d+/,function(e){r=!0;var t=n?parseInt(e)+1:parseInt(e)-1;return t<=0?"":t}),r||!0!==n||(i.innerHTML+=" 1"))}function d(t){S||"repost"!==t||(t="comment"),C||"like"!==t||(t="comment"),e.foreach(L,function(n,i){t===i&&n.tab?(n.ctnt.style.display="",e.addClassName(n.tab,"curr"),n.ctxt&&n.ctxt.load()):(n.ctnt.style.display="none",n.tab&&e.removeClassName(n.tab,"curr"))})}function f(t){e.contains(p.feed_list_options[0],t.el)&&d({fl_comment:"comment",fl_forward:"repost",fl_like:"like"}[t.el.getAttribute("action-type")])}var p=e.builder(s).list,m=e.delegatedEvent(s),h={},v=l("fl_comment"),g=l("fl_forward"),y=l("fl_like"),b=e.sizzle("[action-type=feed_list_item]",s)[0],_=b.getAttribute("mid"),w=e.lib.kit.extra.getDiss(b),x=e.sizzle("a",g)[0],k=decodeURIComponent(o(x).get("url")),E={reason:"",origin:"",originNick:$CONFIG.onick||"",uid:$CONFIG.oid||"",url:k||""};if(E.dissDataFromFeed=w,p.comment_detail&&p.forward_detail&&p.like_detail)var T=t(p.comment_detail[0],{mid:_,dissDataFromFeed:w}),S=g&&n(p.forward_detail[0],{mid:_,forwardOptions:E}),C=y&&i(p.like_detail[0],{mid:_,forwardOptions:E,node:y,dissDataFromFeed:w}),L={comment:{ctnt:p.comment_detail[0],tab:v,ctxt:T},repost:{ctnt:p.forward_detail[0],tab:g,ctxt:S},like:{ctnt:p.like_detail[0],tab:y,ctxt:C}};return m.add("fl_comment","click",f),m.add("fl_forward","click",f),m.add("fl_like","click",f),m.add("fl_publisher","click",c),p.comment_detail&&p.forward_detail&&p.like_detail&&d("comment"),m.add("feed_private_tipclose","click",function(t){e.removeNode(e.core.dom.dir.parent(t.el,{expr:"[node-type=feed_privateset_tip]"})[0])}),e.custEvent.add(T,"deleteComment",function(){u(v,!1)}),e.custEvent.add(T,"comment",function(){u(v,!0)}),e.custEvent.add(T,"forward",function(){u(g,!0)}),S&&(e.custEvent.add(S,"forward",function(){u(g,!0)}),e.custEvent.add(S,"deleteForward",function(){u(g,!1)}),e.custEvent.add(S,"comment",function(){u(v,!0)})),m.add("login","click",function(){a({lang:$CONFIG&&$CONFIG.lang||"zh-cn"})}),h.destroy=function(){T.destroy(),S&&S.destroy(),C.destroy(),m.destroy()},h}})}).call(t,n(0))},function(e,t,n){(function(e){n(35),n(117),n(102),n(1),n(6),n(67),n(177),n(161),n(162),n(184),n(186),n(39),e.register("pl.content.weiboDetail.source.comment.init",function(e){var t=e.lib.kit.extra.language,n=(e.getStyle,e.setStyle,e.sizzle,e.lib.comment.reply),i=e.conf.trans.feed.comment,r=e.conf.trans.weiboDetail,o=(e.core.util.hideContainer,e.lib.kit.extra.setPlainHash),a=e.custEvent,s=e.lib.comment.commentTemp,l={unReply:t('#L{}<br><a href="//account.weibo.com/settings/mobile" target="_blank">#L{}</a>#L{}'),unPower:t("#L{}"),noComment:t("#L{}")},c=["forward","comment","deleteComment"];return function(u,d){function f(){return"none"!=u.style.display}function p(e,t){var n=t;for(var i in n)e[i]=decodeURIComponent(n[i]);return e||{}}function m(t,n){a.fire(w,"comment"),n.forward&&a.fire(w,"forward");var i;return g("0"),S.feed_list.innerHTML=I,i=e.sizzle("[node-type=comment_list]",S.feed_list)[0],e.insertHTML(i,n.data.comment,"afterbegin"),I=u.feed_list.innerHTML,!1}function h(t,n){if(m(t,n)){var i=e.position(e.core.dom.firstChild(S.feed_list)),r=e.scrollPos();i.t<r.top&&window.scrollTo(0,i.t-50)}}function v(i){var r=i.el,o=i.data.cid,a=i.data.nick,l=1==i.data.canUploadImage,c=e.core.dom.dir(r,{dir:"parent",expr:'[node-type="replywrap"]',matchAll:!1})[0],u=e.core.dom.dir(r,{dir:"parent",expr:"li",matchAll:!1})[0],d=(r.getAttribute("status"),D[o]&&D[o].DOM),f=!!d&&e.core.dom.contains(document.body,d);d&&"none"!=e.getStyle(d,"display")&&f?(e.setStyle(d,"display","none"),u&&e.removeClassName(u,"curr")):(d&&f||(d=e.builder(t(s.getReply({canUploadImage:l}))).list.commentwrap[0],c.appendChild(d),D[o]={handle:n(d,e.lib.kit.extra.merge(i.data,{mid:k,cid:o,content:a,module:"scommlist",dissDataFromFeed:E})),DOM:d},forward=e.sizzle("[name=forward]",C)[0],forward&&"none"===e.core.dom.dir.parent(forward,{expr:"li"})[0].style.display&&(e.core.dom.neighbor(d).child("[node-type=forward]").parent("li").finish().style.display="none"),e.custEvent.add(D[o].handle,"reply",function(){u&&e.removeClassName(u,"curr"),h.apply(null,arguments)})),u&&e.addClassName(u,"curr"),e.setStyle(d,"display",""),D[o]&&D[o].handle.focus())}function g(t){var n=S.feed_cate[1];e.foreach(e.sizzle("[action-type=search_type]",n),function(n){e.queryToJson(n.getAttribute("action-data")||"").filter==t?e.addClassName(n,"curr"):e.removeClassName(n,"curr")})}function y(e){h(e.obj,e.ret)}var b,_,w={},x=e.delegatedEvent(u),k=d.mid,E=d.dissDataFromFeed,T=d.data,S=e.lib.kit.dom.parseDOM(e.builder(u).list),C=S.comment,L=e.lib.comment.commentMedia(u);e.lib.comment.like(x);var A,N=!1,D=[],I="";a.define(w,c);var M=p({},e.core.json.clone(T));M.needFocus=f(),M.needFocus=!1,M.dissDataFromFeed=E,b=S.textEl&&e.lib.comment.commentSingle({mid:k},C,M),_=e.lib.dialog.commentDialogue(),w.load=function(){r.request("commentList",{onSuccess:function(e,t){I=S.feed_list.innerHTML=e.data.html,g("0")},onError:function(e,t){u.innerHTML=l.noComment},onFail:function(e,t){u.innerHTML=l.noComment}},{id:k})},w.hide=function(){u.style.display="none"},w.getNode=function(){return u},w.getComment=function(){return b};var W={reply:function(t){if("0"===$CONFIG.islogin)return void e.lib.dialog.loginLayer({lang:window.$CONFIG&&window.$CONFIG.lang||"zh-cn"});var n=t.el;if(e.hasClassName(n,"unclick_rep")){return void(n.getAttribute("isPhone")?e.ui.tipAlert(l.unReply,{icon:"rederrorS"}).beside(n):e.ui.tipAlert(l.unPower,{icon:"rederrorS"}).beside(n))}return t.data&&"1"==t.data.ispower?i.request("isComment",{onComplete:function(i){"100000"==i.code?v(t):("100022"==i.code?e.ui.tipAlert(l.unPower,{icon:"rederrorS"}).beside(n):"100001"==i.code?(n&&n.setAttribute("isphone","1"),e.ui.tipAlert(l.unReply,{icon:"rederrorS"}).beside(n)):e.ui.tipAlert(i.msg,{icon:"rederrorS"}).beside(n),e.addClassName(n,"unclick_rep"))}},t.data):v(t),e.preventDefault(t.evt)},commentDialogue:function(t){return _.show(t),e.preventDefault(t.evt)},delete:function(n){function i(t,n){t.style.height=t.offsetHeight+-10+"px",t.style.overflow="hidden",e.tween(t,{end:function(){e.removeNode(t),I=S.feed_list.innerHTML},duration:200}).play({height:0})}function o(){i(e.core.dom.dir.parent(n.el,{expr:"[comment_id]"})[0]),e.custEvent.fire(w,"deleteComment")}var a=n.data.block?['<input node-type="block_user" id="block_user" name="block_user" value="1" type="checkbox"/><label for="block_user">',t("#L{}"),"</label>"].join(""):"",s=e.ui.tipConfirm([t("#L{}"),a],{stopClickPropagation:!1}).beside(n.el).ok(function(){var e=s.getDomList(!0).block_user&&s.getDomList(!0).block_user.checked;n.data.is_block=e?"1":"0",n.data.location=$CONFIG.location,r.request("deleteComment",{onSuccess:o},n.data)});e.core.evt.preventDefault(n.evt)},search_type:function(t){if("0"===$CONFIG.islogin)return void e.lib.dialog.loginLayer({lang:window.$CONFIG&&window.$CONFIG.lang||"zh-cn"});N=!t.el.getAttribute||"feed_list_commentTabAll"!=t.el.getAttribute("node-type"),W.feed_list_page(t),e.core.evt.preventDefault(t.evt)},feed_list_page:function(t){if("0"===$CONFIG.islogin)return void e.lib.dialog.loginLayer({lang:window.$CONFIG&&window.$CONFIG.lang||"zh-cn"});var n=t.el;r.request("commentList",{onSuccess:function(t,i){S.feed_list.innerHTML=t.data.html,N||(I=t.data.html),"feed_list_page"===n.getAttribute("action-type")&&e.scrollTo(u,{step:10,top:40}),g(i.filter)},onError:function(e,t){S.feed_list.innerHTML=l.noComment},onFail:function(e,t){S.feed_list.innerHTML=l.noComment}},t.data),o("_rnd"+ +new Date),e.core.evt.preventDefault(t.evt)},anotherSearchTab:function(t){for(var n=e.sizzle('[action-type="search_type"]',u),i=0;n[i];i++){var r=e.queryToJson(n[i].getAttribute("action-data"));if(t.data.filter==r.filter)return t.el=n[i],void W.search_type(t)}}};for(var j in W)x.add(j,"click",W[j]);return e.conf.channel.feed.register("reply",y),b&&(a.add(b,"comment",function(t,n){var i;g("0"),S.feed_list.innerHTML=I,i=e.sizzle("[node-type=comment_list]",S.feed_list)[0],n&&e.insertHTML(i,n.html,"afterbegin"),e.removeNode(e.sizzle(".WB_empty",S.feed_list)[0]),I=S.feed_list.innerHTML,a.fire(w,"comment")}),a.add(b,"forward",function(e,t){a.fire(w,"forward")})),w.isVisible=f,w.destroy=function(){for(var t in W)x.remove(t,"click",W[t]);x.destroy(),a.undefine(w,c),A&&A.destroy(),b&&b.destroy(),_&&_.destroy(),e.conf.channel.feed.remove("reply",y),L.destroy()},w}})}).call(t,n(0))},function(e,t,n){(function(e){n(38),n(1),n(67),n(35),n(159),n(98),n(40),n(102),n(37),n(105),n(20),n(50),n(140),e.register("lib.comment.commentSingle",function(e){var t=e.lib.kit.extra.setPlainHash,n=[],i={},r=(e.ui.alert,e.lib.kit.extra.language),o=e.custEvent,a=(e.conf.trans.feed.comment,o.fire),s={content:r("#L{}"),delete:r("#L{}"),reply:r("#L{}"),blcok:r("#L{}")},l=function(n,i,l){var c,u,d,f,p,m,h,v,g,y,b,_,w,x,k=new RegExp(["^",s.reply,"@(.*):(.*)"].join("")),E=e.core.str,T=e.sizzle("[action-type='post']",n)[0],S=e.sizzle("[node-type='btnText']",n)[0],C=S.innerHTML,L=function(e,t){"normal"==t?C&&(e.innerHTML=C):e.innerHTML=r("#L{...}")},A=function(n){if(!w){w=!0;var i=e.trim(m.value),o=i.match(k),a=m.getAttribute("pid");if("loading"===a)return e.ui.tipAlert(r("#L{}"),{icon:"rederrorS"}).beside(m).on("hide",function(){m.focus()}),void(w=!1);if(""==i||o&&""==e.trim(o[2]))return e.ui.tipAlert(s.content).beside(m),void(w=!1);o&&o[1]&&o[1]==p||(f=p=null),T&&(L(S,"loading"),T.className="W_btn_a W_btn_a_disable"),t("_rnd"+(+new Date).toString());var u={act:o?"reply":"post",cid:f,content:E.leftB(i,280),isroot:v&&v.checked?"1":"0",forward:h&&h.checked?"1":"0"};n.data&&n.data.ref&&(u.ref=n.data.ref),u=e.core.json.merge(u,l.dissDataFromFeed),a&&(u.pic_id=a),c.post(e.lib.kit.extra.getDiss(u,n.el))}},N=function(e){A(e)};e.core.evt.delegatedEvent(n).add("post","click",N);var D=function(t){var i=t.data;if(i){i.html&&(n.innerHTML=i.html),i.count=i.count||n.getAttribute("count");try{a(u,"count",[d=1*i.count||0])}catch(t){e.log("ERR",t.message)}if(m=e.sizzle("textarea",n)[0]){x=setInterval(function(){var t=e.trim(m.value);T.className=t.length>0?"W_btn_a":"W_btn_a W_btn_a_disable"},200),setTimeout(function(){e.lib.kit.dom.autoHeightTextArea({textArea:m,maxHeight:9999,inputListener:function(){var t=e.trim(m.value);E.bLength(t)>280&&(m.value=E.leftB(t,280))}}),e.lib.kit.extra.keySubmit.on(m,N)},25);var r={count:"disabled"};g=e.lib.editor.base(n,r),y=g.editor,e.custEvent.define(y,"close");var o=e.sizzle('[node-type="smileyBtn"]',n)[0],s=e.sizzle('[node-type="imgBtn"]',n)[0];b=e.lib.publisher.widget.face(y),_=e.lib.image.commentImage(y,s),e.addEvent(o,"click",b.show)}h=e.sizzle("input[name=forward]",n)[0],v=e.sizzle("input[name=isroot]",n)[0],"0"===t.allowForward&&h&&(h.parentNode.style.display="none"),"0"===t.allowRootComment&&v&&(v.parentNode.style.display="none")}},I=function(){w=!1},M=function(){w=!1,T&&(L(S,"normal"),T.className="W_btn_a")},W={add_success:function(t,n){T&&(L(S,"normal"),T.className="W_btn_a"),w=!1;var i=t.data;i&&(f=p=null,d+=1,m.value="",i.comment&&a(u,"comment",{html:i.comment,count:d}),h&&(h.checked=!1),v&&(v.checked=!1),a(u,"count",d),"1"===n.forward&&a(u,"forward"),i.feed&&(a(u,"feed"),e.conf.channel.feed.fire("forward",{html:i.feed})),w=!1,_&&_.hideLayer())},delete_success:function(t,i){d=Math.max(d-1,0),a(u,"count",d);var r=e.sizzle(["dl[comment_id=",i.cid,"]"].join(""),n)[0];r&&r.parentNode.removeChild(r),a(u,"del",{comment_id:i.cid})},add_fail:M,add_error:M,delete_fail:I,delete_error:I,smallList_fail:I,smallList_error:I,smallList_success:D};return c=e.lib.comment.inter(W,i),u=o.define(c,["count","feed","comment","forward","del"]),c.destroy=function(){y.closeWidget(),clearInterval(x)},c.focus=function(){y.API.focus(0)},c.shine=function(){e.lib.publisher.source.shine(y.nodeList.textEl)},window.setTimeout(function(){l.data={},D(l),l.needFocus&&y&&y.API&&y.API.focus(0)},200),c},c=function(t,r,o){var a=e.core.arr.indexOf(t,n);return i[a]||(n[a=n.length]=t,i[a]=l(t,r,o)),i[a]};return function(e,t,n){if(!e||!e.mid)throw"mid is not defined";return c(t,e,n)}})}).call(t,n(0))},function(e,t,n){(function(e){n(6),n(1),n(116),n(4),e.register("lib.dialog.commentPrivateSetting",function(e){var t,n,i,r=1,o=0,a={},s=0,l=0,c=0,u=e.lib.kit.extra.language,d=function(){var n=e.getUniqueKey,a=e.core.util.easyTemplate,s=e.lib.kit.dom.parseDOM,l={id1:"key"+n(),id2:"key"+n(),id3:"key"+n(),showType:r,set:o};t=e.ui.dialog(),t.setTitle(u("#L{}")),t.setContent(a(u('<#et privateSetting data><div class="detail layer_setup_privacy" node-type="content"><div class="W_tips tips_warn clearfix"><p class="icon"><span class="icon_warnS"></span></p><p class="txt">#L{}</p></div><p class="privacy_title">#L{}</p><ul class="privacy_repliable">\t<li><label for="${data.id1}"><input type="radio" class="W_radio" value="0" name="comment" id="${data.id1}" action-type="choose" <#if (data.showType == 1)>checked="checked"</#if><#if (data.showType==2 && data.set==0)>checked="checked"</#if>/>&nbsp;#L{}<span class="S_txt2">#L{}</span></label></li>  <li><label for="${data.id2}"><input type="radio" class="W_radio" value="2" name="comment" id="${data.id2}" action-type="choose" <#if (data.showType==2 && data.set==2)>checked="checked"</#if>/>&nbsp;#L{}<span class="S_txt2">#L{}</span></label></li>  <li><label for="${data.id3}"><input type="radio" class="W_radio" value="1" name="comment" id="${data.id3}" action-type="choose" <#if (data.showType==2 && data.set==1)>checked="checked"</#if>/>&nbsp;#L{}</label></li></ul><div class="btn"><a href="javascript:void(0)" class="W_btn_d" action-type="OK" node-type="OK" style="visibility:hidden;"><span>#L{}</span></a><#if (data.showType==1)><a href="javascript:void(0)" class="W_btn_b" action-type="cancel" node-type="noMore"><span>#L{}</span></a></#if><#if (data.showType==2)><a href="javascript:void(0)" class="W_btn_b" action-type="hide" node-type="hide"><span>#L{}</span></a></#if></div></div></#et>'),l).toString()),i=s(e.builder(t.getOuter()).list)},f={chooseItem:function(t){s=t.el.value,1==r?e.setStyle(i.OK,"visibility",0==s?"hidden":"visible"):e.setStyle(i.OK,"visibility",s==o?"hidden":"visible")},save:function(t){if((s=parseInt(s,10))>-1){if(l)return;l=1,e.conf.trans.comment.request("privateSetting",{onSuccess:p.saveSuccess,onError:p.saveError},{comment:s})}return e.preventDefault(t.evt)},cancel:function(n){if(!c)return c=1,g(),t.hide(),e.conf.trans.comment.request("privateNoMore",{onSuccess:p.noMoreSuccess,onError:p.noMoreError},{bubbletype:5,time:604800}),e.preventDefault(n.evt)},hide:function(n){return g(),t.hide(),e.preventDefault(n.evt)}},p={getSetErr:function(){e.ui.alert(u("#L{}"))},getAlert:function(n,i,r){var o=e.ui.tip({showCallback:function(){setTimeout(function(){o&&o.anihide()},500)},hideCallback:function(){o&&o.destroy(),n?setTimeout(function(){r&&r(),g(),t.hide()},200):r&&r()},msg:i,type:n?void 0:"del"});return o},saveSuccess:function(n,i){t.hide(),e.ui.tip("lite",{msg:u("#L{}"),type:"succM",timer:"1000",hideCallback:function(){window.location.reload()}})},saveError:function(){var e=p.getAlert(!1,u("#L{}"),function(){l=0});e.setLayerXY(i.OK),e.aniShow()},noMoreSuccess:function(){c=0},noMoreError:function(t){c=0,e.lib.dialog.ioError(t.code,t)}},m=function(){s=0,c=0,n=e.delegatedEvent(i.content),n.add("choose","click",f.chooseItem),n.add("OK","click",f.save),n.add("cancel","click",f.cancel),n.add("hide","click",f.hide)},h=function(){},v=function(e){e&&(e.data&&e.data.set&&(o=e.data.set),r=o?2:1),h(),d(),m(),t.show(),t.setMiddle()},g=function(){n&&n.destroy()};return a.show=v,a})}).call(t,n(0))},function(e,t,n){(function(e){n(66),e.register("conf.channel.at",function(e){var t=["open","close"];return e.lib.kit.extra.listener.define("conf.channel.at",t)})}).call(t,n(0))},function(e,t,n){(function(e){function t(e){return e&&e.__esModule?e:{default:e}}var i=n(106),r=t(i);n(181),n(14),n(182),n(108),n(160),e.register("lib.image.mUpload",function(t){var n,i=$CONFIG.jsPath+"home/static/swf/",o=location.protocol,a=o+"//picupload.weibo.com/interface/pic_upload.php?app=miniblog&data=1",s="";$CONFIG&&$CONFIG.uid&&(s=$CONFIG.uid||"");var l=window.FileReader&&!!t.C("canvas").getContext;return function(o,c){function u(e){if(_)b.number=e,l&&b.number>1?m.setAttribute("multiple","multiple"):m.removeAttribute("multiple");else try{p&&p.resetFileNum&&p.resetFileNum(e)}catch(e){}}function d(e){if(_)g=Math.max(0,Math.min(e,b.number));else try{p&&p.resetFileNum&&p.resetUploadedFileNum(e)}catch(e){}}function f(e){if(_){var n,i=v[e].base64,o=v[e].base64;x.uploading({fid:e,name:o}),v[e]=t.lib.kit.extra.upload((n={type:"common",app:1001},(0,r.default)(n,"type","base64"),(0,r.default)(n,"imgName",o),(0,r.default)(n,"base64Str",i),n)),t.custEvent.add(v[e],"uploadSucc",function(t,n){x.uploaded({fid:e,pid:n.pid})}),t.custEvent.add(v[e],"uploadError",function(t,n){v[e].base64=i,x.error({code:n.code,fid:e})})}else try{p&&p.reuploadById&&p.reuploadById(fid)}catch(e){}}var p,m,h,v={},g=0,y={},b={},_=!0;t.core.util.browser.SAFARI&&"macintosh"===e.core.util.browser.OS&&(_=!0);var w=function(){var e=t.core.dom.getSize(o);b=t.core.obj.parseParam({service:a,swf:i+"MultiFilesUpload.swf?version="+$CONFIG.version,exp_swf:i+"img/expressInstall.swf?version="+$CONFIG.version,h:e.height,w:e.width,version:"10.0.0",type:"*.png;*.jpg;*.gif;*.jpeg;",size:20971520,number:9,globalFun:"fcb_"+t.getUniqueKey(),callback:S,init:function(){},uploaded:function(){},uploading:function(){},error:function(){},extra:function(){}},c),b.id="swf_upbtn_"+t.getUniqueKey(),b.channel=b.id+"_channel"},x={uploading:function(e){b.uploading({data:[{fid:e.fid,name:e.name}]})},uploaded:function(e){b.uploaded({data:{pid:e.pid},fid:e.fid})},error:function(e){var t="defaultErr",n="";9==e.code&&(t="singleError",n="A20001"),b.error({type:t,fid:e.fid,data:{sourceData:{code:n}}})}},k=function(){t.foreach(m.files,function(e){if(!(g+1>b.number)&&(g+=1,e.type.indexOf("image")>=0)){var n=new FileReader,i=e.name,o=t.getUniqueKey();x.uploading({fid:o,name:i}),n.onloadend=function(e){var n,a=e.target.result.split(",")[1];v[o]=t.lib.kit.extra.upload((n={type:"common",app:1001},(0,r.default)(n,"type","base64"),(0,r.default)(n,"imgName",i),(0,r.default)(n,"base64Str",a),n)),t.custEvent.add(v[o],"uploadSucc",function(e,t){x.uploaded({fid:o,pid:t.pid})}),t.custEvent.add(v[o],"uploadError",function(e,t){v[o].base64=a,v[o].fileName=i,x.error({code:t.code,fid:o})})},n.readAsDataURL(e)}}),m.value=""},E=function(){if(l)return void k();if(!(g>=b.number)){var e=t.getUniqueKey(),n=m.value;v[e]=t.lib.kit.extra.upload({type:"common",form:h,imgName:n,app:1001}),g++,x.uploading({fid:e,name:n}),m.value="",t.custEvent.add(v[e],"uploadSucc",function(t,n){n.pid,x.uploaded({fid:e,pid:n.pid})}),t.custEvent.add(v[e],"uploadError",function(t,n){x.error({code:n.code,fid:e})})}},T=function(){var e=t.C("div"),n=t.C("div");n.setAttribute("id",b.id);var i="position:absolute;left:0;top:0;display:block;overflow:hidden;background-color:#000;filter:alpha(opacity=0);-moz-opacity:0;opacity:0;";i+="width:"+b.w+"px;height:"+b.h+"px;",e.style.cssText=i,o.appendChild(e),o.style.position="relative";var r={swfid:b.id,uploadAPIs:encodeURIComponent(b.service),maxFileSize:b.size,maxFileNum:b.number,jsHandler:b.globalFun,channel:b.channel,areaInfo:"0-0-"+b.w+"-"+b.h,fExt:b.type,fExtDec:":*.jpg, *.jpeg, *.gif, *.png",uid:s},a={menu:"false",scale:"noScale",allowFullscreen:"false",allowScriptAccess:"always",bgcolor:"#FFFFFF",wmode:"opaque"};if(_){var c=t.builder('<form node-type="form" action-type="form" id="pic_upload" name="pic_upload" target="upload_target" enctype="multipart/form-data" method="POST" style="overflow:hidden;opacity:0;filter:alpha(opacity=0);"><input type="file" hidefoucs="true" node-type="fileBtn" name="pic1" style="cursor:pointer;width:1000px;height:1000px;position:absolute;bottom:0;right:0;font-size:200px;"/></form>').list;m=c.fileBtn[0],h=c.form[0],m.parentNode.style.height=b.h+"px",m.parentNode.style.width=b.w+"px",l&&b.number>1?m.setAttribute("multiple","multiple"):m.removeAttribute("multiple"),e.appendChild(h)}else e.appendChild(n),t.lib.kit.extra.swfobject.embedSWF(b.swf,b.id,b.w,b.h,b.version,b.exp_swf,r,a,b.id,C)},S=function(e,t,n){switch(n.type){case"flashInit":b.init(n);break;case"uploading":b.uploading(n);break;case"singleSuccess":b.uploaded(n);break;case"fileNumErr":return b.error(n);case"singleError":case"fileSizeErr":b.error(n);break;default:b.extra(n)}},C=function(e){p=e.ref},L=function(){_?t.core.evt.addEvent(m,"change",E):window[b.globalFun]=S};!function(){t.lib.image.watermark(function(e){var i=e,r=window.$CONFIG,o="0"!=i.nickname||"0"!=i.logo||"0"!=i.domain,s={marks:o?1:0};n=t.lib.kit.extra.merge({url:"1"==i.domain?"weibo.com/"+(r&&r.watermark||r.domain):0,markpos:i.position||"",logo:i.logo||"",nick:"1"==i.nickname?encodeURIComponent("@"+(r&&r.nick)):0},s),a+="&"+t.jsonToQuery(n),w(),T(),L()})}();var A=function(){return b.id},N=function(){return p},D=function(e){if(_)v[e]&&v[e].abort(),delete v[e],m.value="",g=Math.max(0,Math.min(g-1,b.number));else try{p&&p.removeFileById&&p.removeFileById(e)}catch(e){}},I=function(){delete window[b.globalFun],v={}};return y.getId=A,y.destroy=I,y.getswf=N,y.removeFile=D,y.resetUploadedFileNum=d,y.resetFileNum=u,y.reuploadById=f,y}})}).call(t,n(0))},function(e,t,n){(function(e){function t(e){return e&&e.__esModule?e:{default:e}}var i=n(22),r=t(i);e.register("lib.kit.extra.swfobject",function(e){var t=function(){function e(){if(!K){try{var e=z.getElementsByTagName("body")[0].appendChild(y("span"));e.parentNode.removeChild(e)}catch(e){return}K=!0;for(var t=P.length,n=0;n<t;n++)P[n]()}}function n(e){K?e():P[P.length]=e}function i(e){if((0,r.default)(B.addEventListener)!=N)B.addEventListener("load",e,!1);else if((0,r.default)(z.addEventListener)!=N)z.addEventListener("load",e,!1);else if((0,r.default)(B.attachEvent)!=N)b(B,"onload",e);else if("function"==typeof B.onload){var t=B.onload;B.onload=function(){t(),e()}}else B.onload=e}function o(){H?a():s()}function a(){var e=z.getElementsByTagName("body")[0],t=y(D);t.setAttribute("type",W);var n=e.appendChild(t);if(n){var i=0;!function(){if((0,r.default)(n.GetVariable)!=N){var o=n.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),X.pv=[parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10)])}else if(i<10)return i++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,s()}()}else s()}function s(){var e=$.length;if(e>0)for(var t=0;t<e;t++){var n=$[t].id,i=$[t].callbackFn,o={success:!1,id:n};if(X.pv[0]>0){var a=g(n);if(a)if(!_($[t].swfVersion)||X.wk&&X.wk<312)if($[t].expressInstall&&c()){var s={};s.data=$[t].expressInstall,s.width=a.getAttribute("width")||"0",s.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(s.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(s.align=a.getAttribute("align"));for(var f={},p=a.getElementsByTagName("param"),m=p.length,h=0;h<m;h++)"movie"!=p[h].getAttribute("name").toLowerCase()&&(f[p[h].getAttribute("name")]=p[h].getAttribute("value"));u(s,f,n,i)}else d(a),i&&i(o);else x(n,!0),i&&(o.success=!0,o.ref=l(n),i(o))}else if(x(n,!0),i){var v=l(n);v&&(0,r.default)(v.SetVariable)!=N&&(o.success=!0,o.ref=v),i(o)}}}function l(e){var t=null,n=g(e);if(n&&"OBJECT"==n.nodeName)if((0,r.default)(n.SetVariable)!=N)t=n;else{var i=n.getElementsByTagName(D)[0];i&&(t=i)}return t}function c(){return!q&&_("6.0.65")&&(X.win||X.mac)&&!(X.wk&&X.wk<312)}function u(e,t,n,i){q=!0,S=i||null,C={success:!1,id:n};var o=g(n);if(o){"OBJECT"==o.nodeName?(E=f(o),T=null):(E=o,T=n),e.id=j,((0,r.default)(e.width)==N||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),((0,r.default)(e.height)==N||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),z.title=z.title.slice(0,47)+" - Flash Player Installation";var a=X.ie&&X.win?"ActiveX":"PlugIn",s="MMredirectURL="+B.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+z.title;if((0,r.default)(t.flashvars)!=N?t.flashvars+="&"+s:t.flashvars=s,X.ie&&X.win&&4!=o.readyState){var l=y("div");n+="SWFObjectNew",l.setAttribute("id",n),o.parentNode.insertBefore(l,o),o.style.display="none",function(){4==o.readyState?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}p(e,t,n)}}function d(e){if(X.ie&&X.win&&4!=e.readyState){var t=y("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(f(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(f(e),e)}function f(e){var t=y("div");if(X.win&&X.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(D)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,o=0;o<r;o++)1==i[o].nodeType&&"PARAM"==i[o].nodeName||8==i[o].nodeType||t.appendChild(i[o].cloneNode(!0))}}return t}function p(e,t,n){var i,o=g(n);if(X.wk&&X.wk<312)return i;if(o)if((0,r.default)(e.id)==N&&(e.id=n),X.ie&&X.win){var a="";for(var s in e)e[s]!=Object.prototype[s]&&("data"==s.toLowerCase()?t.movie=e[s]:"styleclass"==s.toLowerCase()?a+=' class="'+e[s]+'"':"classid"!=s.toLowerCase()&&(a+=" "+s+'="'+e[s]+'"'));var l="";for(var c in t)t[c]!=Object.prototype[c]&&(l+='<param name="'+c+'" value="'+t[c]+'" />');o.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+l+"</object>",R[R.length]=e.id,i=g(e.id)}else{var u=y(D);u.setAttribute("type",W);for(var d in e)e[d]!=Object.prototype[d]&&("styleclass"==d.toLowerCase()?u.setAttribute("class",e[d]):"classid"!=d.toLowerCase()&&u.setAttribute(d,e[d]));for(var f in t)t[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&m(u,f,t[f]);o.parentNode.replaceChild(u,o),i=u}return i}function m(e,t,n){var i=y("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function h(e){var t=g(e);t&&"OBJECT"==t.nodeName&&(X.ie&&X.win?(t.style.display="none",function(){4==t.readyState?v(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function v(e){var t=g(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function g(e){var t=null;try{t=z.getElementById(e)}catch(e){}return t}function y(e){return z.createElement(e)}function b(e,t,n){e.attachEvent(t,n),U[U.length]=[e,t,n]}function _(e){var t=X.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function w(e,t,n,i){if(!X.ie||!X.mac){var o=z.getElementsByTagName("head")[0];if(o){var a=n&&"string"==typeof n?n:"screen";if(i&&(L=null,A=null),!L||A!=a){var s=y("style");s.setAttribute("type","text/css"),s.setAttribute("media",a),L=o.appendChild(s),X.ie&&X.win&&(0,r.default)(z.styleSheets)!=N&&z.styleSheets.length>0&&(L=z.styleSheets[z.styleSheets.length-1]),A=a}X.ie&&X.win?L&&(0,r.default)(L.addRule)==D&&L.addRule(e,t):L&&(0,r.default)(z.createTextNode)!=N&&L.appendChild(z.createTextNode(e+" {"+t+"}"))}}}function x(e,t){if(G){var n=t?"visible":"hidden";K&&g(e)?g(e).style.visibility=n:w("#"+e,"visibility:"+n)}}function k(e){return null!=/[\\\"<>\.;]/.exec(e)&&("undefined"==typeof encodeURIComponent?"undefined":(0,r.default)(encodeURIComponent))!=N?encodeURIComponent(e):e}var E,T,S,C,L,A,N="undefined",D="object",I="Shockwave Flash",M="ShockwaveFlash.ShockwaveFlash",W="application/x-shockwave-flash",j="SWFObjectExprInst",F="onreadystatechange",B=window,z=document,O=navigator,H=!1,P=[o],$=[],R=[],U=[],K=!1,q=!1,G=!0,X=function(){var e=(0,r.default)(z.getElementById)!=N&&(0,r.default)(z.getElementsByTagName)!=N&&(0,r.default)(z.createElement)!=N,t=O.userAgent.toLowerCase(),n=O.platform.toLowerCase(),i=/win/.test(n?n:t),o=/mac/.test(n?n:t),a=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),s=!1,l=[0,0,0],c=null;if((0,r.default)(O.plugins)!=N&&(0,r.default)(O.plugins[I])==D)!(c=O.plugins[I].description)||(0,r.default)(O.mimeTypes)!=N&&O.mimeTypes[W]&&!O.mimeTypes[W].enabledPlugin||(H=!0,s=!1,c=c.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),l[0]=parseInt(c.replace(/^(.*)\..*$/,"$1"),10),l[1]=parseInt(c.replace(/^.*\.(.*)\s.*$/,"$1"),10),l[2]=/[a-zA-Z]/.test(c)?parseInt(c.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if((0,r.default)(B.ActiveXObject)!=N)try{var u=new ActiveXObject(M);u&&(c=u.GetVariable("$version"))&&(s=!0,c=c.split(" ")[1].split(","),l=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)])}catch(e){}return{w3:e,pv:l,wk:a,ie:s,win:i,mac:o}}();(function(){X.w3&&(((0,r.default)(z.readyState)!=N&&"complete"==z.readyState||(0,r.default)(z.readyState)==N&&(z.getElementsByTagName("body")[0]||z.body))&&e(),K||((0,r.default)(z.addEventListener)!=N&&z.addEventListener("DOMContentLoaded",e,!1),X.ie&&X.win&&(z.attachEvent(F,function(){"complete"==z.readyState&&(z.detachEvent(F,arguments.callee),e())}),B==top&&function(){if(!K){try{z.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}e()}}()),X.wk&&function(){if(!K)/loaded|complete/.test(z.readyState)?e():setTimeout(arguments.callee,0)}(),i(e)))})(),function(){X.ie&&X.win&&window.attachEvent("onunload",function(){for(var e=U.length,n=0;n<e;n++)U[n][0].detachEvent(U[n][1],U[n][2]);for(var i=R.length,r=0;r<i;r++)h(R[r]);for(var o in X)X[o]=null;X=null;for(var a in t)t[a]=null;t=null})}();return{registerObject:function(e,t,n,i){if(X.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=n,r.callbackFn=i,$[$.length]=r,x(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){if(X.w3)return l(e)},embedSWF:function(e,t,i,o,a,s,l,d,f,m){var h={success:!1,id:t};X.w3&&!(X.wk&&X.wk<312)&&e&&t&&i&&o&&a?(x(t,!1),n(function(){i+="",o+="";var n={};if(f&&(void 0===f?"undefined":(0,r.default)(f))===D)for(var v in f)n[v]=f[v];n.data=e,n.width=i,n.height=o;var g={};if(d&&(void 0===d?"undefined":(0,r.default)(d))===D)for(var y in d)g[y]=d[y];if(l&&(void 0===l?"undefined":(0,r.default)(l))===D)for(var b in l)(0,r.default)(g.flashvars)!=N?g.flashvars+="&"+b+"="+l[b]:g.flashvars=b+"="+l[b];if(_(a)){var w=p(n,g,t);n.id==t&&x(t,!0),h.success=!0,h.ref=w}else{if(s&&c())return n.data=s,void u(n,g,t,m);x(t,!0)}m&&m(h)})):m&&m(h)},switchOffAutoHideShow:function(){G=!1},ua:X,getFlashPlayerVersion:function(){return{major:X.pv[0],minor:X.pv[1],release:X.pv[2]}},hasFlashPlayerVersion:_,createSWF:function(e,t,n){return X.w3?p(e,t,n):void 0},showExpressInstall:function(e,t,n,i){X.w3&&c()&&u(e,t,n,i)},removeSWF:function(e){X.w3&&h(e)},createCSS:function(e,t,n,i){X.w3&&w(e,t,n,i)},addDomLoadEvent:n,addLoadEvent:i,getQueryParamValue:function(e){var t=z.location.search||z.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return k(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return k(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(q){var e=g(j);e&&E&&(e.parentNode.replaceChild(E,e),T&&(x(T,!0),X.ie&&X.win&&(E.style.display="block")),S&&S(C)),q=!1}}}}();return t})}).call(t,n(0))},function(e,t,n){(function(e){n(183),n(4),e.register("lib.image.watermark",function(e){var t={trans:null,conf:null,success:function(e,n){t.conf=e.data}},n=[];return function(i){if("function"==typeof i)if(n.push(i),t.conf)for(var r=0;r<n.length;r++)n[r]&&n[r](t.conf),n[r]=null;else t.trans||(t.trans=e.conf.trans.watermark.getTrans("waterMark",{onSuccess:function(){t.success.apply(null,arguments);for(var e=0;e<n.length;e++)n[e]&&n[e](t.conf),n[e]=null},onError:function(e){},onFail:function(e){}})),t.trans.abort(),t.trans.request()}})}).call(t,n(0))},function(e,t,n){(function(e){n(2),e.register("conf.trans.watermark",function(e){var t=e.lib.kit.io.inter();return(0,t.register)("waterMark",{url:"/aj/account/watermark"}),t})}).call(t,n(0))},function(e,t,n){(function(e){n(116),n(1),n(6),n(104),n(161),n(35),n(185),n(4),e.register("lib.dialog.commentDialogue",function(e){var t,n=e.lib.comment.commentMsg,i=e.lib.kit.extra.language,r={TITLE:i("#L{}"),FRAME:i('<div class="layer_dialogue_v5"><div class="WB_empty" node-type="topbox" style="display:none;"><div class="WB_innerwrap"><div class="empty_con clearfix"><p class="subtext" style="display:none;" node-type="more"></p></div>\t\t\t\t\t</div>\t\t\t</div><div class="WB_feed_repeat" node-type="scrollView">\x3c!----\x3e<div class="WB_repeat"><div class="repeat_list"><div class="list_box"><div class="list_ul" node-type="repeat_list"></div></div></div></div></div>  </div>'),MOREAREA:{LOADING:i('<span>&nbsp;<i class="W_loading"></i>#L{...}</span>'),DELETEED:i("#L{}"),RETRY:i('#L{}<a action-type="older" href="javascript:void(0)" onclick="return false;">#L{}</a>#L{}'),DEFAULT:i('<a action-type="older" href="javascript:void(0)" onclick="return false;"><span class="more_arrow">&laquo;</span>#L{}</a>')}},o={unReply:i(n.noPhoneReplyMsg),unPower:i(n.noPowerReplyMsg)},a=e.conf.trans.comment,s=e.ui.dialog({isHold:!0}),l=null,c=null,u=e.conf.trans.comment,d=!1;return function(){var n,i,f,p,m,h,v,g,y=!0,b=!1,_=[],w=function(){s.setTitle(r.TITLE),s.setContent(r.FRAME);var n=s.getDomList().inner;t=e.lib.kit.dom.parseDOM(e.builder(n).list),t.outer=s.getBox(),t.inner=n,g=e.ui.scrollView(t.scrollView),x(),d=!0},x=function(){v=e.core.evt.delegatedEvent(t.outer),v.add("older","click",n.getDialogueList),v.add("replycomment","click",k.show),e.custEvent.add(s,"hide",n.reset)},k={show:function(t){var n=t.el;if(e.core.dom.hasClassName(n,"unclick_rep")){l&&(l.aniHide&&l.aniHide(),l.destroy&&l.destroy(),l=null);var i=n.getAttribute("isPhone");return l=i?e.ui.tip("alert",{msg:o.unReply,type:"warn"}):e.ui.tip("alert",{msg:o.unPower,type:"warn"}),l.setLayerXY(n),l.aniShow(),c&&window.clearTimeout(c),void(c=window.setTimeout(function(){l.aniHide&&l.aniHide(),l.destroy&&l.destroy(),l=null},3e3))}return t.data&&"1"==t.data.ispower?u.request("isComment",{onComplete:function(i){"100000"==i.code?k.showReply(t):(l&&(l.aniHide&&l.aniHide(),l.destroy&&l.destroy(),l=null),"100022"==i.code?l=e.ui.tip("alert",{msg:o.unPower,type:"warn"}):"100001"==i.code?(n&&n.setAttribute("isphone","1"),l=e.ui.tip("alert",{msg:o.unReply,type:"warn"})):l=e.ui.tip("alert",{msg:i.msg,type:"warn"}),l.setLayerXY(n),l.aniShow(),e.addClassName(n,"unclick_rep"),c&&window.clearTimeout(c),c=window.setTimeout(function(){l.aniHide&&l.aniHide(),l.destroy&&l.destroy(),l=null},3e3))}},t.data):k.showReply(t),e.preventDefault(t.evt)},showReply:function(t){for(var n,i,r,o=t.el;"list_con"!=o.className.toLowerCase();)o=o.parentNode;n=e.sizzle('[node-type="commentwrap"]',o)[0];var a=t.el;i=a.getAttribute("status");var s=e.core.dom.dir(a,{expr:"li"});"none"!=e.core.dom.getStyle(n,"display")&&"true"==i?(a.setAttribute("status","false"),e.core.dom.setStyle(n,"display","none"),s[0]&&e.removeClassName(s[0],"curr")):(a.setAttribute("status","true"),e.core.dom.setStyle(n,"display",""),s[0]&&e.addClassName(s[0],"curr"),r&&r.focus()),i||(r=e.lib.comment.reply(n,t.data),r.liNode=s[0],k.funcs.add(r)),g.reset()},reply:function(t,n){e.conf.channel.feed.fire("reply",{obj:t,ret:n,cid:p}),n.data&&n.data.content&&k.newDialogue(n.data.content)},newDialogue:function(n){e.core.dom.insertHTML(t.repeat_list,n,"beforeend")},funcs:{add:function(t){var n=k.funcs.get(t);_[n]||(_.push(t),e.custEvent.add(t,"reply",k.reply),e.custEvent.add(t,"reply",function(){t.liNode&&e.removeClassName(t.liNode,"curr")}))},remove:function(t){_[t]&&(e.custEvent.remove(t),_[t]=null,delete _[t])},get:function(e){for(var t,n=0;n<_.length;n++){if(_[n]==e){t=n,!0;break}}return t},destroy:function(){for(var e=0;e<_.length;e++)k.funcs.remove(e)}}};return n={show:function(e){!d&&w(),y=!0,i=e.data.cid,f=e.data.ouid,p=i,m=e.data.cuid,h=e.data.type||"small",n.display(),n.getDialogueList()},getCid:function(){var r=!1,o=e.lib.kit.dom.firstChild(t.repeat_list);if(o)var r=o.getAttribute("cid");r?(i=r,n.moreArea.show()):n.moreArea.hide()},getDialogueList:function(){var t={cid:i,type:h,ouid:f,cuid:m};y&&(t.is_more=1),b||(n.loading.start(),a.request("dialogue",{onComplete:function(t){n.loading.end(),"100000"==t.code?(t.data&&t.data.html&&n.addContent(t.data.html),y=!1,n.getCid(),n.moreArea.setContent(t.msg?t.msg:r.MOREAREA.DEFAULT)):"100001"==t.code?(n.moreArea.setContent(r.MOREAREA.RETRY),n.moreArea.show()):"100011"==t.code?(n.moreArea.setContent(r.MOREAREA.DELETEED),n.moreArea.show()):e.lib.dialog.ioError(t.code,t),g.reset()}},t)),g.reset()},getOldDialogueList:function(){var t={cid:i,type:h,ouid:f,cuid:m};y&&(t.is_more=1),b||(n.loading.start(),a.request("dialogue",{onComplete:function(t){n.loading.end(),"100000"==t.code?(t.data&&t.data.html&&n.loadmore(t.data.html),y=!1,n.getCid(),n.moreArea.setContent(t.msg?t.msg:r.MOREAREA.DEFAULT)):"100001"==t.code?(n.moreArea.setContent(r.MOREAREA.RETRY),n.moreArea.show()):"100011"==t.code?(n.moreArea.setContent(r.MOREAREA.DELETEED),n.moreArea.show()):e.lib.dialog.ioError(t.code,t),g.reset()}},t)),g.reset()},loading:{start:function(){b=!0,n.moreArea.setContent(r.MOREAREA.LOADING)},end:function(){b=!1,n.moreArea.setContent(r.MOREAREA.DEFAULT)}},addContent:function(n){e.core.dom.insertHTML(t.repeat_list,n,"afterbegin")},loadmore:function(n){var i=e.sizzle('[node-type="commentconversation"]',t.repeat_list)[0];e.core.dom.insertHTML(i,n,"afterbegin")},moreArea:{show:function(){e.setStyle(t.more,"display",""),e.setStyle(t.topbox,"display","")},hide:function(){e.setStyle(t.more,"display","none"),e.setStyle(t.topbox,"display","none")},setContent:function(e){t.more.innerHTML=e}},display:function(){n.clear(),s.show(),s.setMiddle(),e.setStyle(t.outer,"top",parseInt(e.getStyle(t.outer,"top"))-30+"px")},clear:function(){t.repeat_list.innerHTML=""},reset:function(){y=!0,n.moreArea.show(),n.clear(),k.funcs.destroy()},destroy:function(){n=null,k=null,k.funcs.destroy(),c&&window.clearTimeout(c),l&&l.aniHide&&l.aniHide(),l&&l.destroy&&l.destroy(),l=null}}}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.comment.commentMsg",function(e){return{noPhoneReplyMsg:'#L{}<br><a href="//account.weibo.com/settings/mobile" target="_blank">#L{}</a>#L{}',noPowerReplyMsg:"#L{}"}})}).call(t,n(0))},function(e,t,n){(function(e){n(163),n(1),n(162),n(109),e.register("lib.comment.commentMedia",function(e){var t=e.lib.comment.commentTemp,n=e.core.util.easyTemplate,i=e.lib.kit.extra.language,r=(i("#L{}!"),i("#L{}"),i("#L{}"),450),o=function(t){return e.core.dom.dir(t,{expr:"[comment_id]"})[0]},a=function(t){var n=t.getAttribute("comment_id")?t:o(t);return{prev:e.sizzle("[node-type=comment_media_prev]",n)[0],disp:e.sizzle("[node-type=comment_media_disp]",n)[0]}},s=function(s,l){var c=s.el,u=s.data,d=decodeURIComponent(u.pic_objects||""),f=d.split("|");if(!c.loading){"img"!==c.tagName.toLowerCase()&&(c=e.sizzle("img",c)[0]),c.loading=1;var p=/\/thumbnail\/.+(?=\.\w+)/.exec(c.src);p&&(p=p[0].replace("/thumbnail/",""));var m,h,v=c.src.replace("/thumbnail/","/bmiddle/"),g=o(c),y=g.getAttribute("comment_id"),b="pid="+(u.pid?u.pid:p)+"&cid="+(u.cid?u.cid:y),_=a(g),w=function(){c.loading=0,m&&(c.bigImgWidth=m.width,m.onload=null),h&&(h.style.display="none"),_.prev.style.display="none",_.disp.innerHTML="";var o=e.core.dom.dir.parent(c,{expr:".WB_feed_comment"})[0]||e.core.dom.dir.parent(c,{expr:".WB_sonFeed"})[0]?"S_bg1":"S_bg2";_.disp.appendChild(e.builder(n(i(t.mediaImage),{bgClass:o,uniqueId:e.core.util.getUniqueKey(),bigSrc:v,acdata:b,pid:u.pid?u.pid:p,mid:u.mid,object_id:f[3],bigWidth:c.bigImgWidth>r?r:c.bigImgWidth,suda:{showBig:"key=comment_pic_click&value=big_pic_button",left:"key=comment_pic_click&value=turnleft_button",right:"key=comment_pic_click&value=turnright_button"}}).toString()).box),_.disp.style.display=""};if(c.bigImgWidth)w();else{var x=c.offsetWidth,k=parseInt(c.offsetHeight/2-8);(h=e.core.dom.next(c)).style.cssText="margin:"+k+"px "+parseInt(x/2-8)+"px "+k+"px -"+parseInt(x/2+8)+"px;",(m=new Image).onload=w,m.src=v}}},l=function(t,n,i){var r=t.el;if(i||/(img)|(canvas)/.test(t.evt.target.tagName.toLowerCase())){var s=o(r);if(!s)return void e.log("parents attribute mid is undefined!");s.disp="";var l=a(s);if(!l||!l.prev||!l.disp)return void e.log('node-type="comment_media_prev" or node-type="comment_media_disp" in a feed\'s node is undefined!');e.position(l.disp).t<e.scrollPos().top&&s.scrollIntoView(),l.prev.style.display="",l.disp.style.display="none",l.disp.innerHTML=""}},c=function(t,n,i){var a=t.el,s=o(a);if(!a.parentNode.uid){var l=e.sizzle('img[action-type="comment_media_bigimg"],canvas[id]',s)[0];a.parentNode.uid="rotate_img_"+e.core.dom.uniqueID(l.oImage||l),l.setAttribute("id",a.parentNode.uid)}e.lib.kit.dom.rotateImage.rotateRight(e.E(a.parentNode.uid),i,r)};return function(t){var n=e.delegatedEvent(t),i={};return n.add("comment_media_img","click",function(n){return e.lib.kit.extra.feedControlHash(),s(n,t),e.preventDefault(n.evt)}),n.add("comment_media_toSmall","click",function(n){return l(n,t,!0),e.preventDefault(n.evt)}),n.add("comment_media_bigimgDiv","click",function(n){return l(n,t),e.preventDefault(n.evt)}),n.add("comment_media_toRight","click",function(n){return c(n,t,90),e.preventDefault(n.evt)}),n.add("comment_media_toLeft","click",function(n){return c(n,t,-90),e.preventDefault(n.evt)}),i.destroy=function(){n.destroy()},i}})}).call(t,n(0))},function(e,t,n){(function(e){n(67),n(109),n(6),n(1),n(35),n(117),n(188),n(198),n(39),n(201),n(203),e.register("pl.content.weiboDetail.source.forward.init",function(e){var t=e.lib.kit.extra.language,n=e.conf.trans.weiboDetail,i=e.lib.kit.extra.setPlainHash,r=e.core.json.merge,o={noForwward:t("#L{}"),notAllowForwward:t("#L{}"),notAllowComment:t("#L{}")},a=["forward","comment","deleteForward"];return function(s,l){function c(){return"none"!=s.style.display}function u(t){var n=m.feed_cate;e.foreach(e.sizzle("[action-type=search_type]",n),function(n){e.queryToJson(n.getAttribute("action-data")||"").filter==t?e.addClassName(n,"curr"):e.removeClassName(n,"curr")})}function d(t){var n=e.core.json.clone(g);"0"==n.allowComment&&"1"==n.ispower?(delete n.originNick,delete n.forwardNick):"0"==n.allowRootComment&&"1"==n.ispower&&delete n.originNick,w.show({microblog:1,privatemsg:2}[t||"microblog"])}function f(t,n,i){i||(u("0"),e.custEvent.fire(p,"forward"),m.feed_list.innerHTML=b,e.insertHTML(m.feed_list,t.html,"afterbegin"),e.removeNode(e.sizzle(".WB_empty",m.feed_list)[0]),b=m.feed_list.innerHTML)}var p={},m=e.lib.kit.dom.parseDOM(e.builder(s).list),h=e.delegatedEvent(s),v=l.mid,g=l.forwardOptions,y=e.pl.content.weiboDetail.source.forward.media(s),b="",_=!1;e.lib.comment.like(h),e.custEvent.define(p,a);var w=e.lib.forward.source.layer({styleId:"2"});w.init(m.forward,l),p.load=function(){m.forwardTip&&(m.forwardTip.style.display=""),n.request("forwardList",{onSuccess:function(e,t){b=m.feed_list.innerHTML=e.data.html,u("0")},onError:function(e,t){m.feed_list.innerHTML=o.noForwward},onFail:function(e,t){m.feed_list.innerHTML=o.noForwward}},{id:v}),w.show(1)},p.hide=function(){s.style.display="none"},p.getNode=function(){return s},p.getForwardDiv=function(){return w};var x={forword_tab_click:function(t){if(void 0!=t.evt.clientX&&"0"===$CONFIG.islogin)return void e.lib.dialog.loginLayer({lang:window.$CONFIG&&window.$CONFIG.lang||"zh-cn"});var n=t.el,i=t.el.getAttribute("action-data");e.foreach(e.sizzle("li",m.forward_tab),function(t){e.contains(t,n)?(e.addClassName(t,"current"),e.addClassName(e.sizzle("a",t)[0],"S_bg2")):(e.removeClassName(t,"current"),e.removeClassName(e.sizzle("a",t)[0],"S_bg2"))}),d(i),e.core.evt.preventDefault(t.evt)},search_type:function(t){if("0"===$CONFIG.islogin)return void e.lib.dialog.loginLayer({lang:window.$CONFIG&&window.$CONFIG.lang||"zh-cn"});_=!t.el.getAttribute||"feed_list_commentTabAll"!=t.el.getAttribute("node-type"),x.feed_list_page(t),e.core.evt.preventDefault(t.evt)},feed_list_page:function(t){if("0"===$CONFIG.islogin)return void e.lib.dialog.loginLayer({lang:window.$CONFIG&&window.$CONFIG.lang||"zh-cn"});var r=t.el;n.request("forwardList",{onSuccess:function(t,n){m.feed_list.innerHTML=t.data.html,_||(b=t.data.html),"feed_list_page"===r.getAttribute("action-type")&&e.scrollTo(s,{step:10,top:40}),u(n.filter)},onError:function(e,t){m.feed_list.innerHTML=o.noComment},onFail:function(e,t){m.feed_list.innerHTML=o.noComment}},t.data),i("_rnd"+ +new Date),e.core.evt.preventDefault(t.evt)},feed_list_delete:function(i){function r(t,n){t.style.height=t.offsetHeight+-10+"px",t.style.overflow="hidden",e.tween(t,{end:function(){e.removeNode(t),b=m.feed_list.innerHTML},duration:200}).play({height:0})}function o(){r(e.core.dom.dir.parent(i.el,{expr:"[action-type=feed_list_item]"})[0]),e.custEvent.fire(p,"deleteForward")}e.ui.tipConfirm(t("#L{}")).beside(i.el).ok(function(){n.request("deleteFeed",{onSuccess:o},i.data)}),e.core.evt.preventDefault(i.evt)},feed_list_forward:function(t){if("0"===$CONFIG.islogin)return void e.lib.dialog.loginLayer({lang:window.$CONFIG&&window.$CONFIG.lang||"zh-cn"});var n=e.core.dom.dir.parent(t.el,{expr:"[mid]"})[0],i=n.getAttribute("mid"),o=e.sizzle(".WB_text [node-type=name]",n)[0].innerHTML,a=e.sizzle(".WB_text [node-type=text]",n)[0].innerHTML,s=e.lib.forward.forwardDialog(i,r(t.data,{forwardNick:o,originNick:g.originNick,origin:g.origin,reason:a}));e.custEvent.once(s,"forward",function(e,n){n.isToMiniBlog&&(t.el.innerHTML=t.el.innerHTML.replace(/\d+/,function(e){return parseInt(e)+1}))}),e.lib.kit.extra.feedControlHash()},anotherSearchTab:function(t){for(var n=e.sizzle('[action-type="search_type"]',s),i=0;n[i];i++){var r=e.queryToJson(n[i].getAttribute("action-data"));if(t.data.filter==r.filter)return t.el=n[i],void x.search_type(t)}}};for(var k in x)h.add(k,"click",x[k]);return e.conf.channel.feed.register("forward",f),c()&&h.fireDom(e.sizzle("[action-type=forword_tab_click]",s)[0],"click",null),p.isVisible=c,p.destroy=function(){for(var t in x)h.remove(t,"click",x[t]);h.destroy(),e.custEvent.undefine(p,a),e.conf.channel.feed.remove("forward",f),y.destroy()},p}})}).call(t,n(0))},function(e,t,n){(function(e){n(1),n(164),n(165),n(167),e.register("lib.forward.source.layer",function(e){var t=(e.lib.kit.extra.language,e.lib.forward.source);return function(n){function i(e,t){r=e,a=t.mid,s=t.forwardOptions,null==l&&(r.innerHTML="",l=!0)}n=n||{};var r,o,a,s,l,c={instances:{}},u={1:t.toMicroblog,2:t.toMessage,3:t.toFriends},d={appkey:"",domInit:!1,forwardNick:"",originNick:"",origin:"",reason:"",url:"",styleId:"1",allowComment:"1",allowForward:"1",allowRootComment:"1",uid:"",rootuid:"",pid:""};e.custEvent.define(c,["hide","center","forward"]);var f=function(t){var i;if(t=t.toString(),null!=o&&o.hide(),null==c.instances[t]){var l,f={};for(var p in d)f[p]=s[p];f.type=t,f.extra=n.extra,f.styleId=n.styleId,l={client:r,data:f,inDialog:!1,isWeiboDetail:!0},i=u[t](r,a,l),c.instances[t]=i,e.custEvent.add(i,"hide",function(){e.custEvent.fire(c,"hide")}),e.custEvent.add(i,"center",function(){e.custEvent.fire(c,"center")}),e.custEvent.add(i,"forward",function(t,n){e.custEvent.fire(c,"forward",n)})}else i=c.instances[t],i.reset&&i.reset();i.show(),o=i},p=function(e){c.instances[e||"1"].shine()},m=function(){for(var t in c.instances){var i=c.instances[t];i.destory(),i=null}c.instances=null,e.custEvent.undefine(c),tab=null,r=null,o=null,a=null,n=null};return c.init=i,c.shine=p,c.show=f,c.destory=m,c}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.kit.extra.parseURL",function(t){return function(){return e.historyM&&e.historyM.parseURL?e.historyM.parseURL():t.core.str.parseURL(location.href)}})}).call(t,n(0))},function(e,t,n){(function(e){n(1),n(191),n(192),n(193),n(194),n(160),n(195),n(115),n(166),e.register("lib.message.upload.loadSwf",function(e){var t=e.lib.kit.extra.language;return function(n,i){var r,o,a,s={},l=e.C("span"),i=e.parseParam({fileListNode:null,fn_start:"STK.namespace.v6page.lib.message.upload.start",fn_init:"STK.namespace.v6page.lib.message.upload.init",fn_complete:"STK.namespace.v6page.lib.message.upload.complete",fn_error:"STK.namespace.v6page.lib.message.upload.error",uid:$CONFIG.uid,source:"209678993",uploadAPI:"//upload.api.weibo.com/2/mss/upload.json",flashURL:"//service.weibo.com/staticjs/tools/upload.swf",fileType:"file",maxFileSize:50,maxFileCount:5,flash_width:25,flash_height:20,areaInfo:"0-20|10-22",flashID:"uploadflash_id_"+e.getUniqueKey(),multiSelect:0,deleteConfirm:null,flashCssText:"",pasteEl:null},i||{});if(!i.fileListNode)throw new Error("message.upload.loadSwf:fileListNode");"img"==i.fileType?(o=e.C("div"),o.className="imgs clearfix",i.fileListNode.appendChild(o)):o=i.fileListNode;var c={},u={},d=function(n,r){var o=(window.$CONFIG&&window.$CONFIG.version||(new Date).getTime(),{swfid:i.flashID,maxSumSize:i.maxFileSize,maxFileSize:i.maxFileSize,maxFileNum:i.maxFileCount,multiSelect:0,uploadAPI:encodeURIComponent(i.uploadAPI+"?source=209678993&tuid="+$CONFIG.uid),initFun:i.fn_init,sucFun:i.fn_complete,errFun:i.fn_error,beginFun:i.fn_start,areaInfo:i.areaInfo,fExt:"img"==i.fileType?"*.jpg;*.gif;*.jpeg;*.png":"*",fExtDec:t("img"==i.fileType?"#L{}":"#L{}")});return e.core.util.swf.create(n,i.flashURL,{width:i.flash_width,height:i.flash_height,paras:{menu:"false",scale:"noScale",allowFullscreen:"true",allowScriptAccess:"always",bgcolor:"",wmode:"transparent"},flashvars:o})},f=function(e){c[e.fid]={fileName:e.fileName,fileSize:e.fileSize}},p=function(t){u[t.fid]={fileName:t.fileName,fileSize:t.fileSize,vfid:t.data.vfid,tovfid:t.data.tovfid},e.custEvent.fire(s,"uploaded",[t.fid,u[t.fid]])},m=function(e,t){},h=function(t){var n,i,r,o=t.clipboardData;if(o){if(!(n=o.items))return;r=n[0],i=o.types||[];for(var s=0;s<i.length;s++)if("Files"===i[s]){r=n[s];break}if(r&&"file"===r.kind&&r.type.match(/^image\//i)){var l=r.getAsFile(),c=new FileReader;c.onload=function(t){e.lib.kit.extra.runFlashMethod(a,"screenCapture",function(){a.screenCapture(t.target.result.split(",")[1])})},c.readAsDataURL(l)}}},v=function(){var e=i.fileListNode.getAttribute("fids");return(e=(e||"").replace(/^\,/,""))&&e.split(",")||[]},g=function(){var e=i.fileListNode.getAttribute("vfids");return(e=(e||"").replace(/^\,/,""))&&e.split(",")||[]},y=function(){var e=i.fileListNode.getAttribute("tovfids");return(e=(e||"").replace(/^\,/,""))&&e.split(",")||[]},b=function(){for(var e in c)if(!u[e])return!1;return!0},_=function(){e.lib.kit.extra.installFlash()},w=function(t){var n=e.sizzle('[fid="'+t+'"]',o)[0],r=u[t]||{},l=r.fileSize,d=r.vfid,f=r.tovfid;if(!n||!l)return e.log("");e.removeNode(n),e.sizzle("[fid]",o).length||(i.fileListNode.style.display="none"),x("fids",t),d&&x("vfids",d),f&&x("tovfids",f),e.lib.kit.extra.runFlashMethod(a,"removeFileBySize",function(){a.removeFileBySize(l)}),e.custEvent.fire(s,"deleted",[t,u[t]]),delete c[t],delete u[t]},x=function(e,t){var n=i.fileListNode.getAttribute(e),r=n.replace(","+t,"");i.fileListNode.setAttribute(e,r)},k=function(){try{a.resetUploadedFileNum(0),a.resetUploadedFileSize(0)}catch(e){}i.fileListNode.style.display="none",o.innerHTML="",i.fileListNode.setAttribute("fids",""),i.fileListNode.setAttribute("vfids",""),i.fileListNode.setAttribute("tovfids",""),c={},u={}},E=function(t){var n=t.data.fid,r=e.sizzle('[fid="'+n+'"]',o)[0];u[n];e.removeNode(r),e.sizzle("[fid]",o).length||(i.fileListNode.style.display="none"),delete c[n]},T=function(n){var r=n.data;"function"!=typeof i.deleteConfirm?e.ui.confirm(t("#L{"+("img"==i.fileType?"":"")+"}"),{OK:function(){w(r.fid)}}):i.deleteConfirm(r,n)},S=function(t){e.lib.kit.extra.runFlashMethod(a,"resetUploadAPI",function(){a.resetUploadAPI(t)})},C=function(){n.style.position="relative",l.style.cssText=i.flashCssText||"display:inline-block;position:absolute;left:0px;top:-2px;z-index:9999",n.appendChild(l),i.fileListNode.className="sendbox_"+("img"==i.fileType?"img":"file")+" S_line2"},L=function(){r=e.delegatedEvent(i.fileListNode),r.add("img"==i.fileType?"deleteImg":"deleteFile","click",T),r.add("img"==i.fileType?"cancelImg":"cancelFile","click",E),e.custEvent.define(s,["deleteConfirm","uploading","uploaded","deleted"]),e.conf.channel.flashUpload.register("uploading",f),e.conf.channel.flashUpload.register("uploaded",p),e.conf.channel.flashUpload.register("uploading",m),"img"==i.fileType&&i.pasteEl&&i.pasteEl.addEventListener&&i.pasteEl.addEventListener("paste",h)},A=function(){r.destroy(),e.custEvent.undefine(s,["deleteConfirm","uploading","uploaded","deleted"]),e.conf.channel.flashUpload.remove("uploading",f),e.conf.channel.flashUpload.remove("uploaded",p),e.removeNode(l)};return s.resetUploadAPI=S,s.deleteFile=w,s.checkUploadComplete=b,s.getFids=v,s.getVfids=g,s.getTovfids=y,s.deleteAllFiles=k,s.destroy=A,C(),L(),e.lib.kit.extra.getFlashVersion()>=10?(a=d(l),s.flashNode=a,o&&(o.setAttribute("id",i.flashID),o.setAttribute("fileType",i.fileType),o.setAttribute("swfid",a.getAttribute("id")))):e.addEvent(n,"click",_),s}})}).call(t,n(0))},function(e,t,n){(function(e){n(115),e.register("lib.message.upload.start",function(e){var t=e.lib.kit.extra.language,n=t('<#et userlist data><div class="img_mod W_fl" fid=${data.fid}><div class="mod_top S_bg1"><p class="prompt S_txt2" node-type="imgLoading_${data.fid}"><i class="W_loading"></i></p><img style="display:none;" width="92" height="92" node-type="imgUrl_${data.fid}" src="${data.url}" alt="${data.fileName}" class="send_img"></div><div class="mod_btm clearfix"><span class="W_autocut S_txt2 W_fl">${data.fileName}</span><a href="javascript:void(0);" class="W_fr" node-type="deleteImg_${data.fid}" action-type="cancelImg" action-data="fid=${data.fid}">#L{}</a></div></div>'),i=t('<#et userlist data><div class="files clearfix" fid=${data.fid}><div class="private_file_mod W_fl W_autocut"><span class="mes_acc_icon ${data.fileTypeClass}" node-type="fileType_${data.fid}"></span><span class="W_autocut name S_txt2" node-type="fileName_${data.fid}">${data.fileName} </span> </div><div class="state_mod W_fr"><i class="W_loading" node-type="uploading_icon_${data.fid}"></i><span class="state S_txt1" node-type="uploading_${data.fid}">#L{}</span><a href="javascript:void(0);" class="W_ficon ficon_close S_ficon" node-type="deleteFile_${data.fid}" action-type="cancelFile" action-data="fid=${data.fid}">X</a></div></div></#et>'),r=e.core.util.easyTemplate,o={img:8,file:38};return function(t){var a={};if(!t.target)return a;var s,l,c=e.E(t.target),u=t.fileName,d=t.fileName.toString().replace(/.*\.(\S{1,8})$/,"$1"),f=c.getAttribute("fileType");"img"==f?(c.parentNode.style.display="",s=n):(c.style.display="",s=i),l="acc_icon_"+d,o[f]&&e.core.str.bLength(u)>=o[f]&&(u=e.core.str.leftB(u,o[f]-3)+"...");var p=r(s,{fid:t.fid,fileName:u,fileTypeClass:l}).toString();return e.insertHTML(c,p,"beforeend"),e.conf.channel.flashUpload.fire("uploading",{fid:t.fid,fileName:t.fileName}),a}})}).call(t,n(0))},function(e,t,n){(function(e){n(1),n(51),n(6),n(115),e.register("lib.message.upload.complete",function(e){var t=(e.lib.kit.extra.language,e.lib.kit.extra.actionData);return function(n,i){var r={};if(!n.target)return r;var o,a=e.E(n.target),s=e.lib.kit.dom.parseDOM(e.builder(a).list),l=n.fid,c=n.data.vfid,u=n.data.tovfid,d=n.fileSize,f=n.fileName,p=n.data.thumbnail_120+"&source=209678993",m=n.data.thumbnail_180+"&source=209678993",h=function(){return d<1024?d+" B":d<1048576?parseInt(d/102.4)/10+" K":d<1073741824?parseInt(d/104857.6)/10+" M":void 0}();return"file"==a.getAttribute("fileType")?(o=a,e.removeNode(s["uploading_"+l]),e.removeNode(s["uploading_icon_"+l]),s["fileName_"+l].innerHTML=f+" ("+h+")",t(s["deleteFile_"+l]).set("fileSize",d),s["deleteFile_"+l].setAttribute("action-type","deleteFile")):(o=a.parentNode,e.removeNode(s["imgLoading_"+l]),s["imgUrl_"+l].style.display="",s["imgUrl_"+l].setAttribute("src",p),s["imgUrl_"+l].setAttribute("action-type","imgEnlarge"),s["imgUrl_"+l].setAttribute("action-data","s="+p+"&l="+m+"&size=120"),t(s["deleteImg_"+l]).set("fileSize",d),s["deleteImg_"+l].setAttribute("action-type","deleteImg")),o.setAttribute("fids",(o.getAttribute("fids")||"")+","+l),o.setAttribute("tovfids",(o.getAttribute("tovfids")||"")+","+u),o.setAttribute("vfids",(o.getAttribute("vfids")||"")+","+c),e.conf.channel.flashUpload.fire("uploaded",n),r}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.message.upload.init",function(e){return function(){}})}).call(t,n(0))},function(e,t,n){(function(e){n(1),n(6),n(115),e.register("lib.message.upload.error",function(e){var t=e.lib.kit.extra.language,n=t('<p class="prompt S_txt2">#L{}</p>'),i=t("#L{}");return function(r,o){if(r.code&&-1==r.code)return e.ui.alert(t("#L{}"));if(r.code&&-3==r.code)return e.ui.alert(t("#L{5}"));var a={};if(!r.target)return a;var s,l=e.E(r.target),c=e.lib.kit.dom.parseDOM(e.builder(l).list),u=r.fid,d=r.fileName;r.data.thumbnail_120,r.data.thumbnail_180;return"file"==l.getAttribute("fileType")?(s=l,e.removeNode(c["uploading_"+u]),c["fileName_"+u].innerHTML=d+" ("+i+")",c["deleteFile_"+u].setAttribute("action-type","deleteFile")):(s=l.parentNode,c["imgUrl_"+u].parentNode.innerHTML=n,c["deleteImg_"+u].setAttribute("action-type","deleteImg")),s.setAttribute("fids",(l.getAttribute("fids")||"")+","+u),e.conf.channel.flashUpload.fire("uploadfail",r),a}})}).call(t,n(0))},function(e,t,n){(function(e){n(56),n(1),e.register("lib.kit.extra.installFlash",function(e){var t=e.lib.kit.extra.language;return function(n){n=e.parseParam({onHide:e.funcEmpty},n);var i='<div class="layer_version_upgrade"><dl class="point clearfix"><dt><span class="icon_versionup"></span></dt><dd><p class="S_txt1">#L{FlashFlash}</p></dd></dl><div class="versionup_btn"><a class="btn_l" href="//get.adobe.com/cn/flashplayer/" target="_blank"><img width="16" height="16" class="icon_install" title="" src="'+$CONFIG.imgPath+'style/images/common/transparent.gif"><span class="txt">#L{}</span></a><a class="btn_r" href="javascript:void(0);" onclick="window.location.reload()"> <img width="16" height="16" class="icon_refreshpage" title="" src="'+$CONFIG.imgPath+'style/images/common/transparent.gif"><span class="txt">#L{}</span></a></div></div>';e.lib.kit.io.cssLoader("style/css/module/layer/layer_version_upgrade.css","js_style_css_module_layer_layer_version_upgrade",function(){var r=e.ui.dialog();r.setTitle(t("#L{}"));var o=e.C("div");o.innerHTML=t(i),r.setContent(o),o=null,r.show(),r.setMiddle(),e.custEvent.add(r,"hide",function(){e.custEvent.remove(r,"hide",arguments.callee),setTimeout(function(){n.onHide()},0)})})}})}).call(t,n(0))},function(e,t,n){(function(e){n(166),e.register("lib.message.upload.mergeFileCount",function(e){return function(t,n){var i={};if(!t)return i;var r=n||{},o={},a=parseInt(r.count)||5,s=0,l=function(n,i,r){!o[i]&&r&&(s++,o[i]=r,e.foreach(t,function(t,n){t.flashNode&&e.lib.kit.extra.runFlashMethod(t.flashNode,"resetUploadedFileNum",function(){t.flashNode.resetUploadedFileNum(s)})}))},c=function(n,i,r){o[i]&&r&&(s--,delete o[i],e.foreach(t,function(t,n){t.flashNode&&e.lib.kit.extra.runFlashMethod(t.flashNode,"resetUploadedFileNum",function(){t.flashNode.resetUploadedFileNum(s)})}))};e.foreach(t,function(t,n){t.flashNode&&e.lib.kit.extra.runFlashMethod(t.flashNode,"resetFileNum",function(){t.flashNode.resetFileNum(a)}),e.custEvent.add(t,"uploaded",l),e.custEvent.add(t,"deleted",c)})}})}).call(t,n(0))},function(e,t,n){(function(e){e.register("lib.message.upload.getFlash",function(e){return function(t){return e.sizzle('[flashobj="'+t+'"]')[0]}})}).call(t,n(0))},function(e,t,n){(function(e){n(199),e.register("lib.forward.forwardDialog",function(e){return function(t,n){var i=e.lib.forward.source.init();return i.show(t,n),i}})}).call(t,n(0))},function(e,t,n){(function(e){n(200),n(1),n(109),e.register("lib.forward.source.init",function(e){var t={title:"#L{}",commentPerson:"#L{}",originPerson:"#L{}",notice:"#L{}",defUpdate:"#L{}"},n=e.lib.kit.extra.language;return function(i,r){var o,a,s,l={},c={},u=function(){c.cevt=["forward","hide","show","updateNum"],c.callbackCevt=["forward","hide","updateNum"],e.custEvent.define(c,c.cevt)},d=function(){},f=function(){e.custEvent.add(c,"hide",function(){c.destroy()})},p=function(i,r){if("string"!=typeof i&&"number"!=typeof i)throw new Error("$.common.dialog.forward.show need string (or number) as weiboId");mid=i,r.pic&&(r.pid=r.pic);var u=e.parseParam({appkey:"",type:1,origin:"",reason:"",originNick:"",forwardNick:"",title:n(t.title),domInit:!1,url:null,styleId:"1",allowComment:"1",allowForward:"1",allowRootComment:"1",module:"",page_module_id:"",refer_sort:"",pid:"",domain:"",mark:"",pic_src:"",dissDataFromFeed:{}},r);a=e.ui.dialog(),o=a.getDomList().inner,o.className="layer_forward",a.setTitle(u.title),a.show().setMiddle(),s=new e.lib.forward.source.publisher(mid,u),o.appendChild(s.getDom()),a.setBeforeHideFn(function(){}),s.init(o),e.custEvent.add(s,"hide",function(){m()}),e.custEvent.add(s,"updateNum",function(t,n){l.backnum=n.num,e.custEvent.fire(c,"updateNum",l)}),e.custEvent.add(s,"center",function(){a.setMiddle()}),e.custEvent.add(s,"forward",function(t,n){n=e.core.json.merge(n,l),n.cevtType=t.type,e.custEvent.fire(c,"forward",n)}),e.custEvent.add(a,"hidden",function(){o.className="detail",s.destroy(),a.clearBeforeHideFn();var t=arguments.callee;e.custEvent.remove(a,"hidden",t),a.clearContent(),e.custEvent.fire(c,"hide",l)}),a.setMiddle();var d=a._.node;d.style.top=parseInt(d.style.top)-80+"px",e.custEvent.fire(c,"show",{box:a}),c.publisher=s},m=function(){a&&a.hide&&a.hide()};return c.destroy=function(){m(),s.destroy()},function(){u(),d(),f()}(),c.show=p,c}})}).call(t,n(0))},function(e,t,n){(function(e){n(1),n(6),n(164),n(167),n(165),n(113),e.register("lib.forward.source.publisher",function(e){var t=e.lib.kit.extra.language,n=e.lib.forward.source,i=t('<#et userlist data><div class="froward_wrap"><div node-type="forward_tab" class="WB_minitab clearfix"><span class="txt">#L{}</span><ul class="minitb_ul S_line1 S_bg1 clearfix"><#list data.tab as list><li <#if (list.id==data.type)> class="minitb_item current S_line1" <#else> class="minitb_item S_line1" </#if>><a href="javascript:void(0);" action-type="tab_item" action-data="id=${list.id}"<#if (list.id==data.type)> class="minitb_lk S_txt1 S_bg2"<#else> class="minitb_lk S_txt1"</#if><#if (list.suda)> suda-data="key=tblog_tran_miyou&value=miyou_group_click"</#if>node-type="tab_item_bg">${list.name}<#if (list.id==3)><i title="#L{~}" class="W_icon icon_type_friends"></i></#if></a><span class="cur_block"></span></li></#list></ul></div><div node-type="forward_client"></div></div>'),r=[{id:1,name:t("#L{}"),first_one:!0}];return r.push({id:3,name:t("#L{}"),suda:!0}),r.push({id:2,name:t("#L{}"),last_one:!0}),function(o,a){if(null==o)throw new Error("[common.forward.publisher]Required parameter mid is missing");a=a||{type:1,styleId:"1"};var s,l,c,u,d,f,p={instances:{}},m=a.type,h=e.lib.kit.extra.toFeedText,v={1:n.toMicroblog,2:n.toMessage,3:n.toFriends},g={appkey:"",domInit:!1,forwardNick:"",originNick:"",origin:"",reason:"",url:null,styleId:"1",allowComment:"1",allowForward:"1",allowRootComment:"1",uid:"",rootuid:"",pid:"",domain:"",mark:"",page_module_id:"",module:"",refer_sort:"",pic_src:"",dissDataFromFeed:{}},y=function(){if(0==a.domInit)var t=e.core.util.easyTemplate(i),n=t({type:m,tab:r,tab_count:r.length}).toString(),o=e.builder(n);var c=e.lib.kit.dom.parseDOM(o.list);return s=c.forward_tab,l=c.forward_client,o.box};e.custEvent.define(p,["hide","center","forward","updateNum"]);var b=function(e){if(null==o)throw new Error("[common.forward.publisher]Required parameter inner is missing");c=e,w(),x(m,{data:a,client:l})},_=function(t){u&&(e.removeClassName(u.parentNode,"current"),e.removeClassName(u,"S_bg2")),u=t.el,e.addClassName(u.parentNode,"current"),e.addClassName(u,"S_bg2"),m=t.data.id||m,x(m,{data:a,client:l})},w=function(){u=e.sizzle('a[node-type="tab_item_bg"]',c),u=u.length>0?u[0]:null;var t=e.sizzle('div[node-type="forward_tab"]',c);(t=t.length>0?t[0]:null)&&(d=e.delegatedEvent(t),d.add("tab_item","click",function(e){m!=e.data.id&&_(e)}))},x=function(n,i){null!=f&&f.hide(),l.offsetHeight,n=n.toString();var r;if(null==p.instances[n]){var a,s={};for(var c in g)s[c]=i.data[c];s.type=n,a={client:l,data:s,inDialog:!0},"0"===a.data.allowForward&&(a.data.originNick="",a.data.origin=t("#L{}")),a.data.reason=h(a.data.reason),r=v[n](l,o,a),p.instances[n]=r,e.custEvent.add(r,"hide",function(){e.custEvent.fire(p,"hide")}),e.custEvent.add(r,"center",function(){e.custEvent.fire(p,"center")}),e.custEvent.add(r,"updateNum",function(t,n){e.custEvent.fire(p,"updateNum",n)}),e.custEvent.add(r,"forward",function(t,n){e.custEvent.fire(p,"forward",n)})}else r=p.instances[n];r.show(!0),f=r},k=function(){for(var t in p.instances){var n=p.instances[t];n&&n.destroy&&n.destroy(),n=null}p.instances=null,e.custEvent.undefine(p),s=null,l=null,c=null,u=null,d&&d.remove("tab_item","click"),d=null};return p.getDom=y,p.init=b,p.destroy=k,p}})}).call(t,n(0))},function(e,t,n){(function(e){n(163),n(1),n(202),n(109),e.register("pl.content.weiboDetail.source.forward.media",function(e){var t=e.lib.feed.feedTemps.mediaIMGTEMP,n=e.core.util.easyTemplate,i=e.lib.kit.extra.language,r=(i("#L{}!"),i("#L{}"),i("#L{}"),450),o=function(t){return e.core.dom.dir(t,{expr:"[mid]"})[0]},a=function(t){var n=t.getAttribute("mid")?t:o(t);return{prev:e.sizzle("[node-type=comment_media_prev]",n)[0],disp:e.sizzle("[node-type=comment_media_disp]",n)[0]}},s=function(s,l){var c=s.el,u=s.data,d=decodeURIComponent(u.pic_objects||""),f=d.split("|");if(!c.loading){"img"!==c.tagName.toLowerCase()&&(c=e.sizzle("img",c)[0]),c.loading=1;var p=/\/thumbnail\/.+(?=\.\w+)/.exec(c.src);p&&(p=p[0].replace("/thumbnail/",""));var m,h,v=c.src.replace("/thumbnail/","/bmiddle/"),g=o(c),y=g.getAttribute("mid"),b="pid="+(u.pid?u.pid:p)+"&mid="+(u.mid?u.mid:y),_=a(g),w=function(){c.loading=0,m&&(c.bigImgWidth=m.width,m.onload=null),h&&(h.style.display="none"),_.prev.style.display="none",_.disp.innerHTML="",_.disp.appendChild(e.builder(n(i(t),{uniqueId:e.core.util.getUniqueKey(),bigSrc:v,acdata:b,pid:u.pid?u.pid:p,mid:u.mid,object_id:f[3],bigWidth:c.bigImgWidth>r?r:c.bigImgWidth,suda:{retract:"key=feed_image_click&value=image_zoomout",showBig:"key=transmit_pic&value=transmit_pic_big",left:"key=feed_image_click&value=image_turnlift",right:"key=feed_image_click&value=image_turnright",big:"key=feed_image_click&value=image_zoomout"}}).toString()).box),_.disp.style.display=""};if(c.bigImgWidth)w();else{var x=c.offsetWidth,k=parseInt(c.offsetHeight/2-8);(h=e.core.dom.next(c)).style.cssText="margin:"+k+"px "+parseInt(x/2-8)+"px "+k+"px -"+parseInt(x/2+8)+"px;",(m=new Image).onload=w,m.src=v}}},l=function(t,n,i){var r=t.el;if(i||/(img)|(canvas)/.test(t.evt.target.tagName.toLowerCase())){var s=o(r);if(!s)return void e.log("parents attribute mid is undefined!");s.disp="";var l=a(s);if(!l||!l.prev||!l.disp)return void e.log('node-type="comment_media_prev" or node-type="comment_media_disp" in a feed\'s node is undefined!');e.position(l.disp).t<e.scrollPos().top&&s.scrollIntoView(),l.prev.style.display="",l.disp.style.display="none",l.disp.innerHTML=""}},c=function(t,n,i){var a=t.el,s=o(a);if(!a.parentNode.uid){var l=e.sizzle('img[action-type="feed_list_media_bigimg"],canvas[id]',s)[0];a.parentNode.uid="rotate_img_"+e.core.dom.uniqueID(l.oImage||l),l.setAttribute("id",a.parentNode.uid)}e.lib.kit.dom.rotateImage.rotateRight(e.E(a.parentNode.uid),i,r)};return function(t){var n=e.delegatedEvent(t),i={};return n.add("feed_list_media_img","click",function(n){return e.lib.kit.extra.feedControlHash(),s(n,t),e.preventDefault(n.evt)}),n.add("comment_media_img","click",function(n){return e.lib.kit.extra.feedControlHash(),s(n,t),e.preventDefault(n.evt)}),n.add("feed_list_media_toSmall","click",function(n){return l(n,t,!0),e.preventDefault(n.evt)}),n.add("feed_list_media_bigimgDiv","click",function(n){return l(n,t),e.preventDefault(n.evt)}),n.add("feed_list_media_toRight","click",function(n){return c(n,t,90),e.preventDefault(n.evt)}),n.add("feed_list_media_toLeft","click",function(n){return c(n,t,-90),e.preventDefault(n.evt)}),i.destroy=function(){n.destroy()},i}})}).call(t,n(0))},function(e,t,n){(function(e){n(1),e.register("lib.feed.feedTemps",function(e){var t=e.lib.kit.extra.language,n=$CONFIG.imgPath+"/style/images/common/loading.gif";return{loadingIMG:t('<div class="WB_empty"> <div class="WB_innerwrap"> <div class="empty_con clearfix"> <p class="text"><i class="W_loading"></i>#L{}...</p> </div> </div> </div>'),newFeedTipHTML:t('<a node-type="feed_list_newBar" action-type="feed_list_newBar" class="notes" href="javascript:void(0);">#L{} [n] #L{}#L{}</a>'),activityNewFeedTipHTML:t('<a node-type="feed_list_newBar" action-type="feed_list_newBar" class="notes" href="javascript:void(0);">#L{} [n] #L{}#L{}</a>'),newCloseFriendFeed:t('<a node-type="feed_list_newBar" action-type="feed_list_newBar" class="notes" href="javascript:void(0);">#L{}#L{}</a>'),loadingHTML:t('<div requestType="[n]"><i class="W_loading"></i> <span>#L{}...</span></div>'),loadErrorRetryHTML:t('<div class="zero_tips S_txt2"><span>#L{}<a action-type="feed_list_retry" requestType="[n]" href="javascript:void(0)">#L{}</a></span></div>'),loadErrorEndHTML:t('<div class="zero_tips S_txt2" requestType="[n]"><span>#L{}</span></div>'),mediaIMGTEMP:t('<#et temp data><div class="WB_expand_media S_bg1"><div class="tab_feed_a clearfix"><div class="tab"><ul class="clearfix"><li><span class="line S_line1"><a action-type="feed_list_media_toSmall" href="javascript:void(0);" class="S_txt1" <#if (data.suda && data.suda.retract)>suda-data="${data.suda.retract}"</#if> ><i class="W_ficon ficon_arrow_fold S_ficon">k</i>#L{}</a></span></li><li><span class="line S_line1"><a action-type="widget_photoview" action-data="${data.acdata}" href="javascript:void(0);" class="S_txt1" <#if (data.suda && data.suda.showBig)>suda-data="${data.suda.showBig}"</#if>><i class="W_ficon ficon_search S_ficon">f</i>#L{}</a></span></li><li><span class="line S_line1"><a action-type="feed_list_media_toLeft" href="javascript:void(0);" class="S_txt1" <#if (data.suda && data.suda.left)>suda-data="${data.suda.left}"</#if>><i class="W_ficon ficon_turnleft S_ficon">m</i>#L{}</a></span></li><li><span class="line S_line1"><a action-type="feed_list_media_toRight" href="javascript:void(0);" class="S_txt1" <#if (data.suda && data.suda.right)>suda-data="${data.suda.right}"</#if>><i class="W_ficon ficon_turnright S_ficon">n</i>#L{}</a></span></li></ul></div></div><div class="WB_media_view"><div class="media_show_box"><ul class="clearfix"><li class="smallcursor" action-type="feed_list_media_bigimgDiv" <#if (data.suda && data.suda.big)>suda-data="${data.suda.big}"</#if>><div class="artwork_box"><img dynamic-id="${data.uniqueId}" action-type="feed_list_media_bigimg" src="${data.bigSrc}" width="${data.bigWidth}" alt=""></div></li></ul></div></div></div></#et>'),mediaIMGTEMPwithBtn:t('<#et temp data><div class="WB_expand_media S_bg1"><div class="tab_feed_a clearfix"><div class="tab"><ul class="clearfix"><li><span class="line S_line1"><a action-type="feed_list_media_toSmall" href="javascript:;" class="S_txt1"><i class="W_ficon ficon_arrow_fold S_ficon">k</i>#L{}</a></span></li><li><span class="line S_line1"><a action-type="widget_photoview" action-data="${data.acdata}" href="javascript:;" class="S_txt1"><i class="W_ficon ficon_search S_ficon">f</i>#L{}</a></span></li><li><span class="line S_line1"><a action-type="feed_list_media_toLeft" href="javascript:;" class="S_txt1"><i class="W_ficon ficon_turnleft S_ficon">m</i>#L{}</a></span></li><li><span class="line S_line1"><a action-type="feed_list_media_toRight" href="javascript:;" class="S_txt1"><i class="W_ficon ficon_turnright S_ficon">n</i>#L{}</a></span></li></ul></div></div><div action-type="feed_list_media_bigimgDiv" class="WB_media_view"><div class="media_show_box"><ul class="clearfix"><li class="smallcursor"><div class="artwork_box"><img dynamic-id="${data.uniqueId}"   action-type="feed_list_media_bigimg" src="${data.bigSrc}" width="${data.bigWidth}"/><span style="display:none;" action-type="feed_list_image_like" action-data="mid=${data.mid}&photo_id=${data.pid}&is_liked=${data.is_liked}&count=${data.count}&object_id=${data.object_id}"><#if (data.is_liked)><a href="javascript:;" class="W_btn_alpha" title="#L{}"><i class="icon_praised"></i><span node-type="count">(${data.count})</span></a></div><#else><a href="javascript:;" class="W_btn_alpha" title="#L{}"><i class="icon_praise"></i><span node-type="count">(${data.count})</span></a></#if></span></li></ul></div></div></div></#et>'),mediaVideoMusicTEMP:t('<#et temp data><div class="WB_expand_media S_bg1"><div class="tab_feed_a clearfix"><div class="tab"><ul class="clearfix"><li><span class="line S_line1"><a action-type="feed_list_media_toSmall" href="javascript:;" class="S_txt1"><i class="W_ficon ficon_arrow_fold S_ficon">k</i></a></span></li><#if (data.title)><li><span class="line S_line1"><a target="_blank" href="${data.full_url}" class="S_txt1"><em class="W_autocut"><i class="W_ficon ficon_arrow_bigimg S_ficon">l</i>${data.title}</em></a></span></li></#if></ul></div></div><div node-type="feed_list_media_big${data.type}Div" class="WB_app_view"><img class="loading_gif" src="'+n+'"/></div></div></#et>'),mediaVideoMusicFloatTEMP:t('<#et temp data><div node-type="outer" class="W_layer" style=""><div class="bg"><table border="0" cellspacing="0" cellpadding="0"><tr><td><div class="content"><div class="title"><h3>${data.title}</h3></div><a href="javascript:void(0);" onclick="return false;" node-type="close" class="W_close"></a><div node-type="mediaContent" style="text-align:center;width:440px;"><img style="margin:10px;" class="loading_gif" src="'+n+'"/></div></div></td></tr></table></div></div></#et>'),widgetTEMP:t('<#et temp data><div class="WB_expand_media S_bg1"><div class="tab_feed_a clearfix"><div class="tab"><ul class="clearfix"><li><span class="line S_line1"><a action-type="feed_list_media_toSmall" href="javascript:;" class="S_txt1"><i class="W_ficon ficon_arrow_fold S_ficon">k</i></a></span></li><#if (data.title && data.full_url)><li><span class="line S_line1"><a target="_blank" href="${data.full_url}" class="S_txt1"><em class="W_autocut"><i class="W_ficon ficon_arrow_bigimg S_ficon">l</i>${data.title}</a></em></span></li></#if></ul></div></div><div node-type="feed_list_media_widgetDiv" class="WB_app_view"><img class="loading_gif" src="'+n+'"/></div></div></#et>'),qingTEMP:t('<#et temp data><p class="medis_func S_txt3"><a href="javascript:void(0);" action-type="feed_list_media_toSmall" class="retract"><em class="W_ico12 ico_retract"></em>#L{}</a><i class="W_vline">|</i><a <#if (data.suda)>suda-data="${data.suda}"</#if> href="${data.full_url}" title="${data.full_url}" class="show_big" target="_blank"><em class="W_ico12 ico_showbig"></em>${data.title}</a></p><div node-type="feed_list_media_qingDiv"><img class="loading_gif" src="'+n+'"/></div></#et>'),commonMediaTEMP:t('<#et temp data><p class="medis_func S_txt3"><a href="javascript:void(0);" action-type="common_list_media_hide" action-data="type=${data.type}&id=${data.id}" suda-data="key=tblog_activity_click&value=fold_play" class="retract"><em class="W_ico12 ico_retract"></em>#L{}</a><i class="W_vline">|</i><a href="${data.url}"  action-type="feed_list_url" title="${data.title}" class="show_big" target="_blank" suda-data="key=tblog_activity_click&value=url_click"><em class="W_ico12 ico_showbig"></em>${data.title}</a><#if (data.tofloat)><i class="W_vline">|</i><a action-type="common_list_media_toFloat" action-data="title=${data.title}&type=${data.type}&id=${data.id}" href="javascript:void(0);" class="turn_right" suda-data="key=tblog_activity_click&value=bomb_play">#L{}</a></#if></p><div node-type="common_list_media_Div" style="text-align:center;min-height:18px;"><img class="loading_gif" src="'+n+'"/></div></#et>'),translateTEMP:t('<#et temp data><div class="W_layer W_layer_pop" node-type="feed_translate" style="margin-left:-17px;"><div class="content"><div class="W_layer_close"><a href="javascript:void(0)" suda-data="key=tblog_bowen_translate&value=close_button" action-type="feed_translate_close" class="W_ficon ficon_close S_ficon">X</a></div><div class="layer_translation"><div class="tit W_f14 S_txt2">#L{}:</div><div class="con" node-type="translate_rs">${data.text}</div><div class="link clearfix S_txt2"><span class="W_fr"><a href="javascript:void(0);" suda-data="key=tblog_bowen_translate&value=click_i_translate" action-type="feed_translate_by_me" action-data="${data.bymedata}">#L{}</a></span>#L{}<a href="//weibo.com/youdaocidian" target="_blank" suda-data="key=tblog_bowen_translate&value=click_youdao_link" title="#L{}">#L{}</a>#L{}#L{}</div></div></div></div></#et>')}})}).call(t,n(0))},function(e,t,n){(function(e){n(114),n(1),n(4),e.register("lib.comment.like",function(e){var t=(window.$CONFIG,e.lib.kit.extra.language),n=e.conf.trans.global;return function(i){var r=function(i){var r=i.el,o=r.getAttribute("action-type"),a={unlike:t('<span><em class="W_ficon ficon_praised S_txt2"></em><em>#{count}</em></span>'),like:t('<span class="'+(e.core.util.browser.IE8?"UI_ani_praised":"UI_ani_stepsV1")+'"><em class="W_ficon ficon_praised S_txt2"></em><em>#{count}</em></span>')},s=i.data,l=e.core.dom.hasClassName(r.children[0],"UI_ani_stepsV1")||e.core.dom.hasClassName(r.children[0],"UI_ani_praised")?0:1,c=+r.children[0].children[1].innerHTML||0,u=r.innerHTML,d=a;r.removeAttribute("action-type");var f=!isNaN(c);f&&(c=Math.max(c+(0===l?-1:1),0));var p=e.core.json.merge(s,{});p.location="article_230940_show",n.request("mid"in p?"like_weibo":"like_object",{onFail:function(t){e.lib.dialog.ioError(t.code,t),r.innerHTML=u,r.setAttribute("action-type",o)},onError:function(t){e.lib.dialog.ioError(t.code,t),r.innerHTML=u,r.setAttribute("action-type",o)},onSuccess:function(n){/^(\d+|)$/.test(e.trim(r.children[0].children[1].innerHTML))||(f=!1,c=r.children[0].children[1].innerHTML),r.innerHTML=e.templet(d[1===l?"like":"unlike"],{count:f?c>0?c:"":c}),r.setAttribute("action-data",e.jsonToQuery(s||{})),r.setAttribute("action-type",o),r.setAttribute("title",t(1===l?"#L{}":"#L{}"));var i=e.sizzle("[node-type="+o+"_icon]",r)[0];i&&i.removeAttribute("node-type"),0!=l&&i&&e.ui.effect(i,"bounce","slow")}},p)};i.add("fl_like","click",r),i.add("forward_like","click",r);var o={};return o.destroy=function(){i.remove("fl_like","click",r),i.remove("forward_like","click",r)},o}})}).call(t,n(0))},function(e,t,n){(function(e){n(6),n(152),n(1),n(4),n(205),e.register("pl.content.weiboDetail.source.like.init",function(e){var t=e.conf.trans.feed.attitude,n=e.lib.kit.extra.language,i=(e.core.dom.firstChild,e.core.dom.dir,e.removeNode,e.custEvent),r=(e.sizzle,n("#L{}!"),["add","edit"]),o=e.builder(n('<div class="WB_empty" node-type="faceEmpty"><div class="WB_innerwrap"><div class="empty_con clearfix"><p class="icon_bed"><i class="W_icon icon_warnB"></i></p><p class="text">#L{}</p></div></div></div>')).list.faceEmpty[0];return function(n,a){function s(){return"none"!=n.style.display}function l(){e.sizzle("li",n).length?e.removeNode(o):h.faceList.appendChild(o)}function c(){t.request("miniadd",{onSuccess:function(t){function n(){e.removeNode(e.sizzle("li[uid="+$CONFIG.uid+"]",h.faceS)[0]),a||e.insertHTML(h.faceS,t.data.html,"afterbegin"),l()}var i=e.sizzle("em",v)[0],r=parseInt(i.innerHTML)||0,o=r,a=!!t.data.is_del;r=Math.max(0,a?o-1:o+1);var s="W_icon icon_praised_b"+(a?"":"c"),c=e.sizzle('[node-type="like_status"]',v);r=/^(\d+|)$/.test(e.trim(i.innerHTML))?r:i.innerHTML,c[0]&&(c[0].innerHTML='<i node-type="fl_like_icon" class="'+s+'"></i> <em '+(isNaN(r)?"":'node-type="fl_like_count"')+">"+r+"</em>");var u=e.sizzle("[node-type=fl_like_icon]",c[0])[0];e.sizzle("[node-type=fl_like_count]",c[0])[0];a||u&&e.ui.effect(u,"bounce","slow"),b?_.unshift(n):n()},onFail:function(){e.lib.dialog.ioError(json.code,json)},onError:function(t){e.lib.dialog.ioError(t.code,t)}},e.core.json.merge(e.queryToJson(v.getAttribute("action-data")||""),y))}function u(i,r){b=!0,t.request("likebig",{onSuccess:function(t){n.innerHTML=t.data.html,h=e.lib.kit.dom.parseDOM(e.builder(n).list),b=!1;for(var i;i=_.pop();)i();l()},onFail:function(t){b=!1,e.lib.dialog.ioError(t.code,t)},onError:function(t){b=!1,e.lib.dialog.ioError(t.code,t)}},{max_id:r,mid:m,page:i||1})}function d(t){return u(parseInt(t.data.page,10),parseInt(t.data.max_id,10)),e.preventDefault(t.evt)}var f={},p=e.delegatedEvent(n),m=a.mid,h=e.lib.kit.dom.parseDOM(e.builder(n).list),v=e.sizzle("[action-type=fl_like]",a.node)[0],g=!1,y=a.dissDataFromFeed,b=(s(),!1),_=[];return f.load=function(){g||u(),g=!0},f.hide=function(){n.style.display="none"},f.getNode=function(){return n},i.define(f,r),e.addEvent(v,"click",c),p.add("feed_list_page","click",d),e.pl.content.weiboDetail.source.like.likeMouseOver(v,{mid:m,detailDom:n}),f.isVisible=s,f.destroy=function(){i.undefine(f,r),p.remove("feed_list_page","click",d)},f}})}).call(t,n(0))},function(e,t,n){(function(e){n(152),n(6),n(4),n(1),e.register("pl.content.weiboDetail.source.like.likeMouseOver",function(e){var t=function(e,t){if("mouseout"!=e.type&&"mouseover"!=e.type)return!1;for(var n=e.relatedTarget?e.relatedTarget:"mouseout"==e.type?e.toElement:e.fromElement;n&&n!=t;)n=n.parentNode;return n!=t};return function(n,i){if(n){var r,o,a=(e.lib.kit.extra.language,e.conf.trans.feed.attitude),s='<div class="W_layer W_layer_pop" style="display:none;z-index:9998;" node-type="outer"><div class="content"><div class="layer_emotion" node-type="inner"><ul class="emotion_list clearfix" node-type="faceList"></ul></div><div class="W_layer_arrow"><span node-type="arrow" class="W_arrow_bor W_arrow_bor_b" style="left:120px;"><i class="S_line3"></i><em class="S_bg2_br"></em></span></div></div></div>',l=!1,c={},u=e.lib.kit.dom.parseDOM(e.builder(s).list),d=i.detailDom,f=300;document.body.appendChild(u.outer);var p=(e.delegatedEvent(u.outer),{checkBigVisible:function(){return!!d&&"none"!=d.style.display},go:function(e){if(t(e,n)&&!p.checkBigVisible()){if(l=!0,"none"!=u.outer.style.display)return void clearTimeout(r);o=setTimeout(function(){p.trans(e)},f)}},trans:function(t){u&&(u.outer.show=!0),a.request("minismall",{onSuccess:function(t){if("0"!=t.data.total_number){tp=e.lib.kit.dom.parseDOM(e.builder(t.data.html).list),u.faceList.innerHTML=tp.faceList.innerHTML,u.mid=i.mid;var r=e.sizzle("[uid]",u.faceList);r=function(e){for(var t,n=[];t=e.shift();)"none"!=t.style.display&&n.push(t);return n}(r);var o="none"===e.sizzle("[node-type=faceMore]",u.faceList)[0].style.display?0:1;u&&!0===u.outer.show&&(u.outer.style.display="",u.outer.style.width=40*r.length+40*o+13+"px",e.ui.card(u.outer,{showWithSetWidth:!1}).showByTarget(n))}},onFail:function(t){e.lib.dialog.ioError(t.code,t)},onError:function(t){e.lib.dialog.ioError(t.code,t)}},{mid:i.mid,location:$CONFIG.location})},stop:function(e){t(e,n)&&(l=!1,r=setTimeout(function(){clearTimeout(o),u.outer.style.display="none",u&&(u.outer.show=!1)},300))}}),m=function(){e.addEvent(n,"mouseover",p.go),e.addEvent(n,"mouseout",p.stop),e.addEvent(n,"click",function(){u.outer.style.display="none"}),e.addEvent(u.outer,"mouseover",function(){clearTimeout(r)}),e.addEvent(u.outer,"mouseout",p.stop)};return function(){m()}(),c.hide=p.stop,c.destroy=function(){e.removeEvent(n,"mouseover",p.go),e.removeEvent(n,"mouseout",p.stop),e.removeEvent(u.outer,"mouseover"),e.removeEvent(u.outer,"mouseout",p.stop)},c}}})}).call(t,n(0))},function(e,t,n){(function(e){n(36),n(54),n(39),n(101),e.register("pl.content.weiboDetail.source.publisherDialog.init",function(e){var t=e.lib.publisher.publisherDialog;return function(n,i){function r(){var n=e.sizzle("[node-type=articleTitle]")[0],i=""+(n.innerText||"")+" "+location.href;t({trans:e.conf.trans.publisher,transName:"publishDialog",content:i})}return{init:r}}})}).call(t,n(0))},function(e,t,n){(function(e,t){n(36),n(117),n(54),n(39),n(101),e.register("page.show.sidebar",function(n){var i=n.lib.dialog.loginLayer,r=n.lib.publisher.publisherDialog,o=n.lib.kit.extra.asyncThrottle,a=n.core.util.browser,o=n.lib.kit.extra.asyncThrottle,s=n.core.evt,l=n.delegatedEvent,c=a.IE5||a.IE55||a.IE6||a.IE7||a.IE8,u=window,d=60;return function(){function a(){return c?b.docElem.clientHeight:u.innerHeight}function f(){if(b.docElem=document.documentElement,b.body=document.body,b.footer=n.E("pl_common_footer"),b.plc_main=n.E("plc_main"),b.plc_frame=n.E("plc_frame"),b.artRoot=n.E("articleRoot"),b.sidebar=n.sizzle("[node-type=sidebar]")[0],b.feedlist=n.sizzle("[node-type=feed_list]")[0],b.articleHeaderPic=n.sizzle("[node-type=articleHeaderPic]")[0],b.articleTitle=n.sizzle("[node-type=articleTitle]")[0],b.sidebar){b.top=n.sizzle("[action-type=goTop]",b.sidebar)[0].parentNode,b.infeedClose=n.sizzle("[action-type=infeedClose]",b.sidebar)[0],b.shareBox=n.sizzle("[action-type=shareBox]",b.sidebar)[0],b.topHeight=b.top.offsetHeight;var t=n.core.str.queryString("id");n.conf.trans.weiboDetail.request("getblockchain",{onSuccess:function(t){"100000"==t.code&&t.data.is_ipchain_user&&(b.chainBox=e.core.dom.insertHTML(b.shareBox,'<a href="javascript:;" action-type="data-tip" data-tip="text=&showWithAni=fadeInRight&hideWithAni=fadeOutLeft&pos=left-middle" class="S_ficon_bg"><em class="W_ficon ficon_dci_v2 S_bg2_c"></em></a>',"afterbegin"),b.chainBox.onclick=function(){x(t.data.copyright_page_url)})},onError:function(e){}},{id:"1022:"+t}),n.conf.trans.weiboDetail.request("getdciarticleinfo",{onSuccess:function(i){if("100000"==i.code){if(!i.data.is_dci_id)return;b.dciBox=e.core.dom.insertHTML(b.shareBox,'<a href="javascript:;" action-type="data-tip" data-tip="text=&showWithAni=fadeInRight&hideWithAni=fadeOutLeft&pos=left-middle" class="S_ficon_bg"><em class="W_ficon ficon_dci S_bg2_c"></em></a>',"afterbegin"),b.dciBox.onclick=function(){n.conf.trans.weiboDetail.request("getdciarticleinfo",{onSuccess:function(e){var i=e.data;switch(i.user_status){case 0:n.ui.confirm("",{textSmall:">",okText:"",icon:"warnB"}).ok(function(){k(t)});break;case 1:n.ui.alert("",{icon:"warnB",textSmall:""});break;case 3:k(t);break;case 2:switch(i.work_status){case 1:case 2:n.ui.alert("",{icon:"warnB"});break;case 0:case 4:k(t)}}},onError:function(e){}},{id:"1022:"+t})}}},onError:function(e){}},{id:"1022:"+t})}b.footer&&(b.shareBoxHeight=b.footer.offsetHeight,b.footerHeight=b.footer.offsetHeight),_=!!n.sizzle("[action-type=fl_publisher]",b.feedlist)[0]}function p(){b.sidebar&&(v=l(b.sidebar),v.add("goTop","click",E.goTop),v.add("shareToWeibo","click",E.shareToWeibo),v.add("shareToWeiXin","click",E.shareToWeiXin),v.add("shareToQQ","click",E.shareToQQ)),b.footer&&(g=o(E.topPosFix,50),s.addEvent(u,"scroll",g),s.addEvent(u,"resize",g)),b.infeedClose&&(s.addEvent(b.infeedClose,"click",E.infeedClose),s.addEvent(b.body,"click",E.infeedBodyClose))}function m(){f(),p(),b.footer&&E.topPosFix()}function h(){b.sidebar&&(v.remove("goTop","click",E.goTop),v.remove("shareToWeibo","click",E.shareToWeibo),v.add("shareToWeiXin","click",E.shareToWeiXin),v.add("shareToQQ","click",E.shareToQQ)),b.footer&&(s.removeEvent(u,"scroll",g),s.removeEvent(u,"resize",g)),b.infeedClose&&(s.removeEvent(b.infeedClose,"click",E.infeedClose),s.removeEvent(b.body,"click",E.infeedBodyClose))}var v,g,y={},b={},_=!1,w=null,x=function(e){try{w.close()}catch(e){}null==(w=window.open(e))&&t.alert(",!",{icon:"warnB"})},k=function(e){x("//card.weibo.com/article/v3/editor#/dci/1022:"+e)},E={goTop:function(){n.core.util.scrollTo(b.body,{step:6})},topPosFix:function(e){var t=b.body.offsetHeight,i=n.core.util.scrollPos().top;i<50?n.core.dom.setStyle(b.top,"display","none"):n.core.dom.setStyle(b.top,"display","");var r=t-b.footerHeight-b.topHeight-d;if(i+a()-d>b.plc_main.offsetHeight?(n.core.dom.setStyle(b.top,"position","absolute"),n.core.dom.setStyle(b.top,"bottom","auto"),n.core.dom.setStyle(b.top,"top",r+"px")):(n.core.dom.setStyle(b.top,"position","fixed"),n.core.dom.setStyle(b.top,"bottom",""),n.core.dom.setStyle(b.top,"top","auto")),b.shareBox)if(i+a()-d>b.plc_main.offsetHeight){var o=r-b.shareBox.offsetHeight;n.core.dom.setStyle(b.shareBox,"position","absolute"),n.core.dom.setStyle(b.shareBox,"bottom","auto"),n.core.dom.setStyle(b.shareBox,"top",o+"px")}else n.core.dom.setStyle(b.shareBox,"position","fixed"),n.core.dom.setStyle(b.shareBox,"bottom",""),n.core.dom.setStyle(b.shareBox,"top","auto")},infeedClose:function(){u.iconnect&&u.iconnect.trigger("close")},infeedBodyClose:function(e){e=n.core.evt.fixEvent(e);var t=e.target;if(t==b.plc_frame||t==b.artRoot)return void E.infeedClose()},shareToWeibo:function(){if("0"===$CONFIG.uid)return void i({lang:$CONFIG&&$CONFIG.lang||"zh-cn"});if(!b.feedlist||_){var e=""+(b.articleTitle.innerText||"")+" "+location.href;return void r({trans:n.conf.trans.publisher,transName:"publishDialog",content:e})}n.core.util.scrollTo(b.feedlist,{step:7});var t=n.sizzle("[node-type=feed_list_options]",b.feedlist)[0],o=n.sizzle("li a",t)[0];o&&o.click()},shareToWeiXin:function(){var e="http://s.jiathis.com/?webid=weixin&uid=0&jtss=0&appkey=&ralateuid=&url=#{url}&title=#{title}&pics=#{pic}&acn=&acu=&summary=&isexit=false",t={url:decodeURIComponent(location.href||""),title:decodeURIComponent(""+(b.articleTitle.innerText||"")),pic:decodeURIComponent(b.articleHeaderPic.src||"")},i=n.core.util.templet(e,t);u.open(i)},shareToQQ:function(){var e="//connect.qq.com/widget/shareqq/index.html?url=#{url}&title=#{title}&pics=#{pic}&site=%E6%96%B0%E6%B5%AA%E5%BE%AE%E5%8D%9A",t={url:decodeURIComponent(location.href||""),title:decodeURIComponent(""+(b.articleTitle.innerText||"")),pic:decodeURIComponent(b.articleHeaderPic.src||"")},i=n.core.util.templet(e,t);u.open(i)}};return y.init=m,y.destroy=h,y}})}).call(t,n(0),n(55))},function(e,t,n){(function(e){n(168),n(209),e.register("page.show.content",function(e){var t=e.ui.tipConfirm,n=(e.ui.tipAlert,e.ui.notice,e.delegatedEvent),i=e.conf.trans.page.content,r=(e.lib.dialog.ioError,window);r.document;return function(){function o(t){t&&t.msg&&e.ui.alert(t.msg,{icon:"warnB"})}function a(){for(var t=e.sizzle("a",w.artBody),n=0,i=t.length;n<i;++n){var r=t[n],o=r.getAttribute("target");o&&"_blank"==o||r.setAttribute("target","_blank")}}function s(t,n){var i=function(){return!1};n="boolean"==typeof n?n:!!(1*n),e.setStyle(t,"MozUserSelect",n?"none":"initial"),e.setStyle(t,"WebkitUserSelect",n?"none":"initial"),e.setStyle(t,"MsUserSelect",n?"none":"initial"),e.setStyle(t,"OUserSelect",n?"none":"initial"),e.setStyle(t,"userSelect",n?"none":"initial"),n&&(t.ondragstart=i,t.oncontextmenu=i,t.onselectstart=i,t.setAttribute("unselectable","on"))}function l(){}function c(){if(("string"==typeof $CONFIG.isMask?1*$CONFIG.isMask:$CONFIG.isMask)&&!((b=e.core.dom.getSize(w.artBody).height)<400)){var t=0|parseInt(.4*b);e.setStyle(w.artBody,"overflow","hidden"),e.setStyle(w.artBody,"height",t+"px"),e.setStyle(w.maskContent,"display","")}}function u(){e.core.ani.tween(w.artBody,{end:function(){e.setStyle(w.artBody,"overflow",""),e.setStyle(w.artBody,"height",""),e.setStyle(w.maskContent,"display","none")}}).finish({height:b})}function d(){var t=w.articleContent.getAttribute("data-like");if(""!=t&&null!=t){t=e.lib.kit.extra.base64.decode(t);var n=document.createElement("canvas");n.width="300",n.height="70";var i=n.getContext("2d");i.globalAlpha=.006,i.font="18px Menlo, Monaco, 'Courier New', monospace",i.fillText(t,0,70);var r=n.toDataURL();e.core.dom.setStyle(w.artBody,"background","transparent");var o='.main_editor .WB_editor_iframe p  { background-image:url("'+r+'");background-repeat:repeat; }',a=(document.head||document.getElementsByTagName("head")[0],document.createElement("style"));a.type="text/css",a.styleSheet?a.styleSheet.cssText=o:a.appendChild(document.createTextNode(o)),document.body.appendChild(a)}}function f(){e.core.dom.setStyle(w.artBody,"opacity",0),l(),a(),c(),d(),e.core.dom.setStyle(w.artBody,"visibility",""),e.core.ani.tween(w.artBody,{end:function(){"1"!=$CONFIG.isPay&&"1"!=$CONFIG.isVClub||s(document.body,!0)}}).finish({opacity:1})}function p(){w.articleContent=e.sizzle("[node-type=articleContent]")[0],w.artBody=e.sizzle("[node-type=contentBody]")[0],w.addBox=e.sizzle("[node-type=addBox]")[0],w.follow=e.sizzle("[action-type=follow]",w.articleContent)[0],w.maskContent=e.sizzle("[node-type=maskContent]")[0]}function m(){g=n(w.articleContent),g.add("maskFollow","click",k.follow),g.add("follow","click",k.follow),g.add("delArticle","click",k.delArticle),g.add("editArticle","click",k.editArticle)}function h(){p(),m(),f(),k.loadReport()}function v(){g.remove("follow","click",k.follow),g.remove("delArticle","click",k.delArticle),g.remove("editArticle","click",k.editArticle)}var g,y,b,_={},w={},x=(e.core.evt,e.core.util.URL(location.href).getParam("infeed")),k={follow:function(e){y=w.follow,u(),i.getTrans("follow",{onSuccess:function(){w.follow.parentNode.innerHTML='<a class="W_btn_b W_btn_b_disable" href="javascript:"><em class="W_ficon ficon_right">Y</em></a>'},onFail:o,onError:o}).request(e.data)},delArticle:function(n){y=n.el,t(["",""],{ok:function(){i.getTrans("delArticle",{onSuccess:function(){e.ui.notice(["",""]),setTimeout(function(){if(x)return void(r.iconnect&&r.iconnect.trigger("close"));top.location.replace("/")},1500)},onFail:o,onError:o}).request(n.data)}}).beside(y)},editArticle:function(t){var n=t.el.getAttribute("data-href");if(null==n||""==n)return void e.ui.alert(['<span style="text-align: center;display: block"></span>',"10"],{icon:"warnB"});window.location.href=n},loadReport:function(){for(var t=e.sizzle("[node-type=articleReport]"),n=0;n<t.length;n++){var r=e.queryToJson(t[n].getAttribute("action-data")),a=t[n];i.getTrans("report",{onSuccess:function(t){return function(n){try{if(null!=n.data.showcontent){var i=e.core.util.easyTemplate('<#et data data><div class="W_tips tips_rederror clearfix"><p class="icon"><span class="W_icon icon_rederrorS"></span></p><p class="txt">${data.showcontent}<a href="${data.url}" target="_blank"></a></p></div></#et>',n.data).toString();t.innerHTML=i}}catch(e){}}}(a),onFail:o,onError:o}).request(r)}},reload:function(){location.reload()}};return _.init=h,_.destroy=v,_}})}).call(t,n(0))},function(e,t,n){(function(i,r){function o(e){return e&&e.__esModule?e:{default:e}}var a,s,l=n(107),c=o(l);i.register("lib.kit.extra.base64",function(n){var i={};return function(n){"use strict";var i,r=n.Base64,o="2.1.9",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=function(e){for(var t={},n=0,i=e.length;n<i;n++)t[e.charAt(n)]=n;return t}(l),d=String.fromCharCode,f=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?d(192|t>>>6)+d(128|63&t):d(224|t>>>12&15)+d(128|t>>>6&63)+d(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return d(240|t>>>18&7)+d(128|t>>>12&63)+d(128|t>>>6&63)+d(128|63&t)},p=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,m=function(e){return e.replace(p,f)},h=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[l.charAt(n>>>18),l.charAt(n>>>12&63),t>=2?"=":l.charAt(n>>>6&63),t>=1?"=":l.charAt(63&n)].join("")},v=n.btoa?function(e){return n.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,h)},g=i?function(e){return(e.constructor===i.constructor?e:new i(e)).toString("base64")}:function(e){return v(m(e))},y=function(e,t){return t?g(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):g(String(e))},b=function(e){return y(e,!0)},_=new RegExp(["[-][-]","[-][-]{2}","[-][-]{3}"].join("|"),"g"),w=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return d(55296+(n>>>10))+d(56320+(1023&n));case 3:return d((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return d((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},x=function(e){return e.replace(_,w)},k=function(e){var t=e.length,n=t%4,i=(t>0?u[e.charAt(0)]<<18:0)|(t>1?u[e.charAt(1)]<<12:0)|(t>2?u[e.charAt(2)]<<6:0)|(t>3?u[e.charAt(3)]:0),r=[d(i>>>16),d(i>>>8&255),d(255&i)];return r.length-=[0,0,2,1][n],r.join("")},E=n.atob?function(e){return n.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,k)},T=i?function(e){return(e.constructor===i.constructor?e:new i(e,"base64")).toString()}:function(e){return x(E(e))},S=function(e){return T(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},C=function(){var e=n.Base64;return n.Base64=r,e};if(n.Base64={VERSION:o,atob:E,btoa:v,fromBase64:S,toBase64:y,utob:m,encode:y,encodeURI:b,btou:x,decode:S,noConflict:C},"function"==typeof c.default){var L=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};n.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",L(function(){return S(this)})),Object.defineProperty(String.prototype,"toBase64",L(function(e){return y(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",L(function(){return y(this,!0)}))}}n.Meteor&&(Base64=n.Base64),void 0!==e&&e.exports&&(e.exports.Base64=n.Base64),a=[],void 0!==(s=function(){return n.Base64}.apply(t,a))&&(e.exports=s)}(void 0!==i?i:"undefined"!=typeof window?window:void 0!==r?r:this),i.Base64})}).call(t,n(0),n(210))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(e){n(54),e.register("page.show.thirdModule",function(e){var t=(document.getElementsByTagName("head")[0],{0:"",1:"1",2:"2",3:"3"});return function(){function n(){c&&u&&o.reward&&e.scriptLoader({url:l+"?version="+Math.random(),onComplete:function(){var e={node:o.reward,object_id:"1022:"+c,uid:u};WBreward&&WBreward(e)}})}function i(){o.fanService=e.sizzle("[node-type=fanService]")[0],o.reward=e.sizzle("[action-type=reward]",o.fanService)[0]}function r(){i(),n()}var o={},a=3*Math.random()+1|0,s="//js"+t[a]+".t.sinajs.cn/",l=s+"t5/apps/fans_service_platform/js/pl/index/rankingList/transition.js",c=e.core.util.URL(location.href).getParam("id"),u=$CONFIG.uid;r()}})}).call(t,n(0))},function(e,t,n){(function(e){n(168),e.register("page.show.recommend",function(e){var t=e.core.util.easyTemplate,n=e.conf.trans.page.content,i=e.delegatedEvent,r=function(e,t,n){return e.replace(/^(http[s]?\:\/\/)(\w{2}\d+\.sinaimg.cn)\/(\w+)\/([a-z0-9]+)\.(\w+)/gi,function(e,i,r,o,a,s){var l={};a.length>=32&&a[22]>="1"&&(l.width=parseInt(a.substr(23,3),36),l.height=parseInt(a.substr(26,3),36));var c="wap320";if(l.width/l.height>t/n){var u=parseInt(t/n*l.height,10);c="crop."+parseInt((l.width-u)/2,10)+".0."+u+"."+l.height+"."+t}else{var d=parseInt(l.width/(t/n),10);c="crop.0."+parseInt((l.height-d)/2,10)+"."+l.width+"."+d+"."+t}return i+r+"/"+c+"/"+a+"."+s})};return function(){function o(){if(5*g>=h.length)return g=0,void _.more();var e=h.slice(5*g,5*g+5);g++;var n=t('<#et data data><#list data as item><li class="pt_li pt_li_1 S_bg2"><div class="pic_txt clearfix"><div class="pic_box "><a href="${item.url}" target="_blank"><img src="${item.image}" alt="" class="piccut_v"></a></div><div class="info_box"><div class="info_box_inner"><div class="text_box"><div class="title W_autocut"><a href="${item.url}" target="_blank" class="W_autocut S_txt1">${item.title}</a></div><div class="text text_cut S_txt2">${item.summary}</div></div></div></div></div></li></#list></#et>',e).toString();m.listBox.innerHTML=n}function a(){v&&(v=!1,m.recommend.innerHTML=t('<#et data data><div node-type="recommend_wrap" class="otherlist S_line1"><div class="title clearfix"><div class="W_fl W_f16"></div><div class="W_fr W_f14" node-type="recommend_all">\x3c!--<a href="${data.list}" target="_blank" suda-uatrack="key=tblog_headline_article&value=headline_pc_list_click"></a>--\x3e</div></div><div class="PCD_pictext_i PCD_pictext_i_v2"><div class="WB_innerwrap"><div class="m_wrap"><ul class="pt_ul clearfix"></ul><div class="W_tc"><div class="WB_innerwrap" action-type="recommend_loading" style="display: none;"> <div class="empty_con clearfix"><p class="text"><i class="W_loading"></i></p></div></div><a href="javascript:" action-type="more_recommend"> \x3c!--<i class="W_ficon ficon_arrow_down">c</i>--\x3e</a></div></div></div></div></div></#et>',{list:$CONFIG.article_list_url||"javascript:"}).toString(),m.loading=e.sizzle("[action-type=recommend_loading]",m.recommend)[0],m.more=e.sizzle("[action-type=more_recommend]",m.recommend)[0],m.recommendAll=e.sizzle("[node-type=recommend_all]",m.recommend)[0],m.listBox=e.sizzle("ul",m.recommend)[0])}function s(t){e.setStyle(m.more,"display","none"),e.setStyle(m.loading,"display","none")}function l(){m.recommend=e.sizzle("[node-type=recommend]")[0]}function c(){m.recommend&&(f=i(m.recommend),f.add("more_recommend","click",o))}function u(){l(),c(),m.recommend&&$CONFIG.uid!=$CONFIG.oid&&_.more()}function d(){f.remove("moreRecommend","click",o)}var f,p={},m={},h=(e.core.evt,[]),v=!0,g=0,y=e.queryToJson(e.parseURL(location.href).query).id,b=0,_={more:function(e){n.getTrans("recommend",{onSuccess:function(e){if(!(b>100)&&(b++,g=0,h=[],!e.data||e.data.list)){a(),e=e.data;var t;for(var n in e.list)t=e.list[n],h.push({title:t.title,image:r(t.cover,120,90),summary:t.summary,ourl:t.ourl,url:t.url+"#"+t.demension});0!=h.length&&o()}},onFail:s,onError:s}).request({object_id:"1022:"+y,page:30,scene:"01",from:"0",cover_size:"large"})},goURL:function(e){window.open(e.data.url)}};return window.reloadList=o,p.init=u,p.destroy=d,p}})}).call(t,n(0))}])});