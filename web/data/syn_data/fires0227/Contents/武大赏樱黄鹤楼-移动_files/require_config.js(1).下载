/*!
 * jquery.scrollLoading.js
 * by zhangxinxu  http://www.zhangxinxu.com 
 * modify by yusj@ctrip.com 因为scroll 已经被pager 注册，所以用setInterval来实现
 * 2010-11-19 v1.0
 * 2012-01-13 v1.1 偏移值计算修改 position → offset
 * 2012-09-25 v1.2 增加滚动容器参数, 回调参数
*/

!function(){var i=Lizard.webresourceBaseUrl;require.config({paths:{gsTravelsHomeModel:i+"js/travels/Models/HomeModel",gsTravelsDetailModel:i+"js/travels/Models/DetailModel",gsTravelsCommentModel:i+"js/travels/Models/CommentModel",gsTravelsScrollLoading:i+"js/travels/jquery.scrollLoading",gsTravelsStore:i+"js/travels/TravelsStore",gsTravelsBestModel:i+"js/travels/Models/BestModel",gsRootView:i+"js/Common/RootView"}})}(),define("js/Travels/require_config",function(){}),define("gsTravelsHomeModel",["cModel","cCoreInherit"],function(i,e){var t=t||{};return t.GetNextPage=new e.Class(i,{__propertys__:function(){this.url="/soa2/10129/GetTravelListForMobile.json",this.param={Keyword:Lizard.P("Keyword")?Lizard.P("Keyword"):"",PoiId:Lizard.P("PoiId")?Lizard.P("PoiId"):"",DistrictId:function(){var i="";return Lizard.P("district")?i=Lizard.P("district").replace(/[^0-9]/gi,""):Lizard.S("GS_H5_TRAVELS_FILTER_CITY")&&(i=Lizard.S("GS_H5_TRAVELS_FILTER_CITY").city_id),i}(),PageSize:15,PageIndex:1,PhotoWidth:240,PhotoHeight:274,TravelMonth:"",CompanionTypeList:"",RecommendTypeList:"",TravelDaysMin:-1,TravelDaysMax:-1,OrderByField:2,TemplateVersion:2}},initialize:function($super,i){$super(i)}}),t.GetMyTravels=e.Class(i,{__propertys__:function(){this.url="/soa2/10129/GetUserTravelListByUid",this.param={ClientAuth:"",IsOwner:"true",PageSize:20,PageIndex:0,NeedUnreadCount:!1,PhotoWidth:640,PhotoHeight:320,FromMobile:!0,TemplateVersion:2}},initialize:function($super,i){$super(i)}}),t.DeleteTravels=e.Class(i,{__propertys__:function(){this.url="/soa2/10129/deletetravelforapp",this.param={TravelId:0}},initialize:function($super,i){$super(i)}}),t.getHotelTravelList=e.Class(i,{__propertys__:function(){this.url="/soa2/11057/FourSeasonsGetTravelsByPoiId",this.param={PoiId:Lizard.P("poiId"),PageIndex:1,PageSize:10}},initialize:function($super,i){$super(i)}}),t}),define("gsTravelsDetailModel",["cModel","cCoreInherit","gsAppAgent"],function(i,e,t){var n=n||{};return n.getVacationData=new e.Class(i,{__propertys__:function(){this.url="/soa2/10200/GetJournalAd.json",this.param={}},initialize:function($super,i){$super(i)}}),n.getCommentsData=new e.Class(i,{__propertys__:function(){this.url="/soa2/10129/GetTravelReplyListByUid.json",this.param={PageSize:3}},initialize:function($super,i){$super(i)}}),n.getAsksData=new e.Class(i,{__propertys__:function(){this.url="/soa2/10130/SearchAskForH5.json",this.param={DistrictId:Lizard.P("district").replace(/[^0-9]/gi,""),PageNum:1,PageSize:3}},initialize:function($super,i){$super(i)}}),n.getAdBanner=new e.Class(i,{__propertys__:function(){this.url="/soa2/10319/AdvertBannerInfo.json",this.param={DistrictId:0,Position:1226}},initialize:function($super,i){$super(i)}}),n.postLikeData=new e.Class(i,{__propertys__:function(){this.url="/soa2/10129/AddLike.json",this.param={BusinessType:0,Platform:3}},initialize:function($super,i){$super(i)}}),n.cancelLikeData=new e.Class(i,{__propertys__:function(){this.url="/soa2/10129/CancelLike.json",this.param={BusinessType:0,Platform:3}},initialize:function($super,i){$super(i)}}),n.postAddTravelView=new e.Class(i,{__propertys__:function(){this.url="/soa2/10129/AddTravelView.json",this.param={TravelId:""}},initialize:function($super,i){$super(i)}}),n.postCollections=new e.Class(i,{__propertys__:function(){t.isGsHybrid()?(this.url="/soa2/10356/GSCollectionInsert.json",this.param={BusinessId:"",CollectionTypeId:"",DistrictId:""}):(this.url="/soa2/10356/CollectionInfoInsert.json",this.param={CollectionInfo:{CollectionType:"",BusinessId:"",DistrictId:""}})},initialize:function($super,i){$super(i)}}),n.postCancelCollections=new e.Class(i,{__propertys__:function(){t.isGsHybrid()?(this.url="/soa2/10356/GSCollectionCancel.json",this.param={BusinessId:"",BusinessTypeId:""}):(this.url="/soa2/10356/CollectionInfoCancel.json",this.param={CollectionInfo:{BusinessId:"",CollectionType:""}})},initialize:function($super,i){$super(i)}}),n.collectionInfoJudge=new e.Class(i,{__propertys__:function(){t.isGsHybrid()?(this.url="/soa2/10356/GSCollectionJudge.json",this.param={BusinessId:"",BusinessTypeId:""}):(this.url="/soa2/10356/CollectionInfoJudge.json",this.param={CollectionInfo:{BusinessId:"",CollectionType:""}})},initialize:function($super,i){$super(i)}}),n.addFriend=new e.Class(i,{__propertys__:function(){this.url="/soa2/10356/json/AddFriendForApp",this.param={UserClientAuth:""}},initialize:function($super,i){$super(i)}}),n.deleteFriend=new e.Class(i,{__propertys__:function(){this.url="/soa2/10356/json/DeleteFriendForApp",this.param={UserClientAuth:""}},initialize:function($super,i){$super(i)}}),n.isFriend=new e.Class(i,{__propertys__:function(){this.url="/soa2/10356/json/isFriendForApp",this.param={UserClientAuth:""}},initialize:function($super,i){$super(i)}}),n.getImageShareUrl=new e.Class(i,{__propertys__:function(){this.url="/soa2/10129/json/GetTravelShareImage",this.param={TravelId:""}},initialize:function($super,i){$super(i)}}),n.bestTravelShare=new e.Class(i,{__propertys__:function(){this.url="/soa2/10129/json/MobileTravelAction",this.param={TravelId:"",Action:"Share"}},initialize:function($super,i){$super(i)}}),n.getMention=new e.Class(i,{__propertys__:function(){this.url="/soa2/10129/json/GetTravelProduct",this.param={TravelId:""}},initialize:function($super,i){$super(i)}}),n.commonFavoriteAdd=new e.Class(i,{__propertys__:function(){this.url="/soa2/10356/json/MyFavoritesAdd",this.param={CollectionTypeId:"",BusinessIds:[]}},initialize:function($super,i){$super(i)}}),n.commonFavoriteDelete=new e.Class(i,{__propertys__:function(){this.url="/soa2/10356/json/MyFavoritesDelete",this.param={CollectionTypeId:"",BusinessIds:[]}},initialize:function($super,i){$super(i)}}),n}),define("gsTravelsCommentModel",["cModel","cCoreInherit"],function(i,e){function t(t,n,s){return new e.Class(i,{__propertys__:function(){this.url="/soa2/"+t,this.method="POST",this.param=n,this.dataformat=s},initialize:function($super,i){$super(i)}}).getInstance()}var n={PostAddData:["10129/AddTravelReply"],GetReplyList:["10129/GetTravelReplyListByUid",{Id:0,PageIndex:1,PageSize:20}]};return _.each(n,function(i,e){n[e]=t.apply(this,i)}),n||{}}),define("gsTravelsBestModel",["cModel","cCoreInherit"],function(i,e){var t=t||{};return t.getMoreTravelList=new e.Class(i,{__propertys__:function(){this.url="/soa2/10129/json/GetMoreDailyRecommendTravelList",this.param={}},initialize:function($super,i){$super(i)}}),t.getADBanner=new e.Class(i,{__propertys__:function(){this.url="/soa2/10319/json/AdvertBannerInfo",this.param={Position:1244,DistrictId:0}},initialize:function($super,i){$super(i)}}),t}),define("gsTravelsScrollLoading",[],function(){var i;$.fn.scrollLoading=function(e){i&&clearInterval(i);var t={attr:"data-src",container:$(window),callback:$.noop,eventsource:"scroll"},n=$.extend({},t,e||{});n.cache=[],$(this).each(function(){var i=this.nodeName.toLowerCase(),e=$(this).attr(n.attr),t={obj:$(this),tag:i,url:e};n.cache.push(t)});var s=function(i){$.isFunction(n.callback)&&n.callback.call(i.get(0))};loading=function(i){var e=n.container.height();$(window).get(0)===window?contop=$(window).scrollTop():contop=n.container.offset().top,$.each(n.cache,function(i,t){var n,o=t.obj,a=t.tag,r=t.url;o&&(n=o.offset().top-contop,o.height(),n>=0&&n<4*e&&(r?"img"===a?s(o.attr("src",r)):o.load(r,{},function(){s(o)}):s(o),t.obj=null))})},loading(),"scroll"==n.eventsource?n.container.bind("scroll",loading):i=setInterval(loading,200)}}),define("gsTravelsStore",["cStore","cCoreInherit","cUtility"],function(i,e,t){var n=n||{};return n.filterStore=new e.Class(i,{__propertys__:function(){this.key="GS_H5_TRAVELS_FILTER_LIST",this.lifeTime="1h"},initialize:function($super,i){$super(i)}}),n.cityStore=new e.Class(i,{__propertys__:function(){this.key="GS_H5_TRAVELS_FILTER_CITY",this.lifeTime="1h"},initialize:function($super,i){$super(i)}}),n.typeStore=new e.Class(i,{__propertys__:function(){this.key="GS_H5_TRAVELS_FILTER_TYPE",this.lifeTime="1h"},initialize:function($super,i){$super(i)}}),n.numberStore=new e.Class(i,{__propertys__:function(){this.key="GS_H5_TRAVELS_FILTER_NUMBER",this.lifeTime="1h"},initialize:function($super,i){$super(i)}}),n.editStore=new e.Class(i,{__propertys__:function(){this.key="GS_H5_TRAVELS_EDIT_ICON",this.lifeTime="365D"},initialize:function($super,i){$super(i)}}),n.VRNotifyStore=new e.Class(i,{__propertys__:function(){this.key="GS_H5_TRAVELS_VR_NOTIFY",this.lifeTime="1D"},initialize:function($super,i){$super(i)}}),n});