function containerHandle(t){var e=t.tool;t.setting;e(".js-tieachor").on("click",function(n){n.preventDefault();var i=e(this);setTimeout(function(){var n=i.attr("href"),s=e(n),a=s.find("."+t.setting.formCls.boxWrapper),o=a.child(0),r=a.child(1);e.scrollY(s,200),o[0].focus(),r.hide()},100),t.operator.actionStatistic("GTnews_newsTitle_iconReply")}),e(".js-tielink").attr("href",t.global.threadInfo.commentPageURL),e(".js-tiecount").html(t.global.threadInfo.tcount),e(".js-tiejoincount").html(t.global.threadInfo.joinCount),e(".post_icon_tie").on("click",function(e){t.operator.actionStatistic("GTnews_pageLeft_iconReply")}),e(".js-tielink").eq(0).on("click",function(e){t.operator.actionStatistic("GTnews_pageLeft_joinCount")}),e(".js-tielink").eq(1).on("click",function(e){t.operator.actionStatistic("GTnews_postArea_tieCount")}),e(".js-tielink").eq(2).on("click",function(e){t.operator.actionStatistic("GTnews_postArea_joinCount")}),e(".post_comment_comment").on("click",function(){t.operator.actionStatistic("GTnews_quickPost")}),e(".post_comment_do").on("click",function(){t.operator.actionStatistic("GTnews_quickPost")}),e("#post_comment_closed")&&e(".post_comment_closeTip a").on("click",function(){t.operator.actionStatistic("GTnews_tieClose")});var n=e("#tieCount"),i=0;try{i=t.global.threadInfo.tcount}catch(s){}n.find("a").html(i),n.on("click",function(e){window.open(t.global.threadInfo.commentPageURL,"_blank")}),"photoview_bbs"===t.global.threadInfo.boardId&&e(".comment").attr("href",t.global.threadInfo.commentPageURL).html("\u8bc4\u8bba <span>( </span><b>"+t.global.threadInfo.joinCount+"</b><span> )"),"off"===t.global.threadInfo.status.web&&(e("#post_comment_area")&&e("#post_comment_area").css({display:"none"}).next().css({marginTop:"50px"}),e(".post_tie_top")&&e(".post_tie_top").css({display:"none"}),e("#post_comment_closed")&&e("#post_comment_closed").css({display:"none"})),e(document.body).on("click",function(e){t.view.hideInputCheckTips(e)})}!function(){function t(t,e){for(var n in e)t.setAttribute(n,e[n])}function e(t,e){t.onload=function(){this.onerror=this.onload=null,e(null,t)},t.onerror=function(){this.onerror=this.onload=null,e(Error("Failed to load "+this.src),t)}}function n(t,e){t.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,t))}}function i(){}function s(t,e,n){for(var i in e)!e.hasOwnProperty(i)||void 0!==t[i]&&!0!==n||(t[i]=e[i]);return t}function a(t,e,n){var i=function(t){return t.replace(/(^\/)|(\/$)/g,"")};return e=i(e.replace(/^https?:\/\//i,"")),(n=n?i(n):"")?t+"://"+e+"/"+n:t+"://"+e}function o(t,e,n){function s(){l.parentNode&&l.parentNode.removeChild(l),window[o]=i,c&&clearTimeout(c)}"function"==typeof e&&(n=e,e={}),e||(e={});var a=e.prefix||"__jp",o=e.name||a+u++,a=e.param||"cb",r=null!=e.timeout?e.timeout:6e4;e=encodeURIComponent;var l,c,d=document.getElementsByTagName("script")[0]||document.head;return r&&(c=setTimeout(function(){s(),n&&n(Error("Timeout"))},r)),window[o]=function(t){s(),n&&n(null,t)},r=(new Date).getTime(),t+=(~t.indexOf("?")?"&":"?")+a+"="+e(o)+"&t="+r,t=t.replace("?&","?"),l=document.createElement("script"),l.src=t,d.parentNode.insertBefore(l,d),function(){window[o]&&s()}}function r(t){try{var e=localStorage.getItem(t).split(h);return+e.splice(-1)>=f()?e.join(h):(localStorage.removeItem(t),"")}catch(n){return""}}function l(t,e){var n=t.pn,i=t.protocol,s=t.timeout,r=t.__serverConfig__;void 0===r&&(r={}),n=a(i,r.configServer||"ac.dun.163yun.com","/v2/config/js?pn="+n),o(n,{timeout:s},e)}function c(t){return{start:function(){t._start()},stop:function(){t._stop()},getToken:function(e,n,i){if(!e)throw Error("Missing business key");t._getToken(e,n,i)},getNdInfo:function(e){t._getNdInfo(e)},getInstance:function(){return t}}}function d(t,e,n){var a=t.productNumber,o=t.merged,r=t.pn||a;if(!r)throw Error("[NEWatchman] required product number");if(a=location.protocol.replace(":",""),t=s(s({onload:e,onerror:n},t),{protocol:a,auto:!0,onload:i,onerror:i,timeout:0,pn:r}),"http"!==t.protocol&&"https"!==t.protocol&&(t.protocol="https"),!o)return m(t);var l=window.initWatchman.__instances__;return l[r]?(l[r].callback.push(t.onload),void(l[r].instance&&(l[r].callback.forEach(function(t){return t(l[r].instance)}),l[r].callback.length=0))):(l[r]={instance:null,callback:[t.onload]},m(t))}var p=function(i,s,a){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("script");"function"==typeof s&&(a=s,s={}),s=s||{},a=a||function(){},r.type=s.type||"text/javascript",r.charset=s.charset||"utf8",r.async=!("async"in s)||!!s.async,r.src=i,s.attrs&&t(r,s.attrs),s.text&&(r.text=""+s.text),("onload"in r?e:n)(r,a),r.onload||e(r,a),o.appendChild(r)},u=0,h=",",f=function(t){return void 0===t&&(t=0),(new Date).getTime()+parseInt(t,10)},m=function(t){function e(t,e){var n=t.protocol,i=t.onerror,o=t.__serverConfig__;void 0===o&&(o={});var r=t.attrs;void 0===r&&(r={});var l=e.split(","),d=l[0],u=l[1],h=l[2],f=s({configHash:h,sConfig:h,staticServer:o.staticServer||d,apiServer:o.apiServer||u,buildVersion:l[3]},t),o=f.buildVersion+"/watchman.min",n=a(n,f.staticServer)+"/"+o+".js";p(n,{charset:"UTF-8",attrs:r},function(t){if(t)return i("[NEWatchman] load js file error");t=f.pn;var e=f.onload,n=f.merged,s=c(new Watchman(f)),a=window.initWatchman.__instances__;n&&a[t]?(a[t].instance=s,a[t].callback.forEach(function(t){return t(s)}),a[t].callback.length=0):e(s)})}var n=t.merged?t.pn+":wm_cf":"default:wm_cf",i=r(n);i?e(t,i):l(t,function(i,s){var a=t.onerror;if(i)return a(Error("[NEWatchman] fetch config timeout"));if(s&&200===s.code){var o=s.result,a=o.ivp,o=[o.s,o.as,o.conf,o.v].join();try{var r=f(a);localStorage.setItem(n,o+h+r)}catch(l){}e(t,o)}else a(Error("[NEWatchman] fetch config error"))})};window.initWatchman||(window.initWatchman=window.initNEWatchman=d,window.initWatchman.version=3,window.initWatchman.__instances__={},window.initWatchman.__supportCaptcha__=!0)}();var Tie=window.Tie||{};!function(t){function e(t,e){var i,s,a,o,r,l,c,d,p,u,h,f,v=[],g=t.split(_),b=[e];for(a=0,o=g.length;a<o;a++){for(i=g[a],s=i.replace(j,""),r=0,l=b.length;r<l;r++)e=b[r],S.test(i)?(h=S.exec(s),c=h[1],f=document.getElementById(c),f&&m.contains(e,f)&&v.push(f)):P.test(i)&&(h=P.exec(s),d=h[1],v=v.concat(n(d,e))),j.test(i)&&(h=j.exec(i),p=h[1],u=h[2],v=m.map(v,function(t){return t[p]===u?t:null}));a!==o-1&&(b=v,v=[])}return v}function n(t,e,n){for(var i=[],s=e.getElementsByTagName(n||"*"),a=s.length,o=new RegExp("(^|\\s)"+t+"(\\s|$)"),r=0,l=0;r<a;r++)o.test(s[r].className)&&(i[l]=s[r],l++);return i}function i(t){return t.replace(/-(\w+?)/g,function(t){return t.toUpperCase()})}function s(t){var e="length"in t&&t.length,n=typeof t;return"function"!==n&&!m.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t))}function a(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t,e){for(var n,i=0;i<t.length;i++)if(m.contains(t[i],e)){n=t[i];break}return n}function r(t){var e="mouseover, mouseout, click, keydown, keypress";return e.indexOf(t)>-1}function l(t,e,n,i){document.addEventListener?t.addEventListener(e,n,i):(e=B[e]?B[e].delegateType:e,t.attachEvent("on"+e,n))}function c(t){return t=t||window.event,t.target||(t.target=t.srcElement),t.preventDefault||(t.preventDefault=function(){t.returnValue=!1}),t}function d(t,e,n){var i,s=t.status;if(s>=200&&s<300){switch(e.dataType){case"text":i=t.responseText;break;case"json":i=function(n){try{return JSON.parse(n)}catch(i){try{return new Function("return "+n)()}catch(i){e.failure(t)}}}(t.responseText);break;case"xml":i=t.responseXML;break;default:i=t}"undefined"!=typeof i&&"function"==typeof n&&n(i)}t=null}function p(t,e,n){var i=new XMLHttpRequest,s=t.data,a=t.type,o=t.url;if(s&&"object"==typeof s&&(s=m.serialize(s)),"GET"===a&&s&&(o+=(L.test(o)?"&":"?")+s,s=null),o+=(L.test(o)?"&":"?")+"_="+N++,i.open(a,o,t.async),"POST"===a&&i.setRequestHeader("Content-type",t.contentType),n)for(var r in n)i.setRequestHeader(r,n[r]);return i.withCredentials=!0,i.send(s),i.onreadystatechange=function(){4===i.readyState&&d(i,t,e)},i}function u(t,e){function n(){i=void 0,o.onload=o.onreadystatechange=null,A.removeChild(o),o=void 0;try{delete window[t.jsonpCallback]}catch(e){window[t.jsonpCallback]=void 0}}var i,s=t.data,a=t.url,o=document.createElement("script");t.jsonpCallback=t.jsonpCallback||m.expando+"_"+N++,s&&(s="object"==typeof s?m.serialize(s):s,a+=(L.test(a)?"&":"?")+s,s=null),a+=(L.test(a)?"&":"?")+t.jsonp+"="+t.jsonpCallback,a+=(L.test(a)?"&":"?")+"_="+N++,o.src=a,o.setAttribute("async",!0),o.charset=t.scriptCharset,A.appendChild(o),window[t.jsonpCallback]=function(){i=arguments},o.onload=o.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(e&&e(i&&i[0]),n())},o.onerror=function(){e(null),n()}}function h(t,e){function n(t){var n,i,s;try{n=o.contentDocument,i=n.location,s=n.body.innerHTML}catch(a){}e&&e(s,i,n)}var i,s,a,o,r="",l=t.data,c=document.charset;0===m("#tie_sdk_util_frame").length&&(a=m(document.body),i='<iframe src="javascript:false;" name="tie_sdk_util_frame" id="tie_sdk_util_frame" border="no" style="display: none;"></iframe>',a.append(i),s='<form id="tie_sdk_util_form" method="post" action="" target="tie_sdk_util_frame" accept-charset="'+t.scriptCharset+'" onsubmit="document.charset=\''+t.scriptCharset+'\';" style="display: none;"></form>',a.append(s)),i=m("#tie_sdk_util_frame"),s=m("#tie_sdk_util_form").empty(),o=i[0],o.attachEvent?o.attachEvent("onload",n):o.onload=n,s.attr("action",t.url);for(var d in t.data)r+='<input type="hidden" name="'+d+'" value="'+l[d]+'">';s.append(r);try{document.charset=t.scriptCharset}catch(p){}s[0].submit();try{document.charset=c}catch(p){}t.removeIframe&&(i.remove(),s.remove())}function f(t){var e,n=!1;return E.test(t)&&(e=E.exec(t.toLowerCase()),e[0]!==D[0]&&(n=!0)),n}var m=function(t,e){return new m.fn.init(t,e)},v="1.0",g=[],b=g.splice,w=g.slice,y=g.concat,T=Array.isArray||function(t){return t instanceof Array},C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,k=/checked/gi,_=/\s+/,x=/[\t\r\n]/g;m.fn=m.prototype={tool:v,constructor:m,length:0,push:g.push,sort:g.sort,splice:b,size:function(){return this.length},pushStack:function(t){var e=m.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){for(var e=0;e<this.length;e++)t.call(this[e],e)},slice:function(){return this.pushStack(w.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},find:function(t){var e,n,i=this.length,s=[];for(e=0;e<i;e++)n=m(t,this[e]),m.each(n,function(t,e){s.push(e)});return s=this.pushStack(i>1?m.unique(s):s)},html:function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;for(;n<i;n++)e=this[n],1===e.nodeType&&(e.innerHTML=t);return this},val:function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.value;for(;n<i;n++)e=this[n],1===e.nodeType&&(e.value=t);return this},attr:function(t,e){var n=this[0]||{},i=0,s=this.length;if(void 0===e&&1===n.nodeType)return k.test(t)?n[t]:n.getAttribute(t);if("string"==typeof e){for(;i<s;i++)n=this[i],1===n.nodeType&&(k.test(t)?n[t]=e:n.setAttribute(t,e));return this}},addCls:function(t){var e,n,i=0,s=this.length;if(t)for(;i<s;i++)e=this[i],1===e.nodeType&&(e.classList?e.classList.add(t):(n=" "+e.className+" ",n+=t+" ",e.className=m.trim(n)));return this},delCls:function(t){var e,n,i=0,s=this.length;if(t)for(;i<s;i++)e=this[i],1===e.nodeType&&(e.classList?e.classList.remove(t):(n=(" "+e.className+" ").replace(x," "),n.indexOf(" "+t+" ")>=0&&(n=n.replace(" "+t+" "," ")),e.className=m.trim(n)));return this},tglCls:function(t){var e,n,i=0,s=this.length;if(t)for(;i<s;i++)e=this[i],1===e.nodeType&&(e.classList?e.classList.toggle(t):(n=this.eq(i),n.hasCls(t)?n.delCls(t):n.addCls(t)));return this},hasCls:function(t){var e,n=0,i=this.length;if(t)for(;n<i;n++)if(e=this[n],1===e.nodeType)if(e.classList){if(e.classList.contains(t))return!0}else if((" "+e.className+" ").replace(x," ").indexOf(t)>=0)return!0;return!1},show:function(){for(var t,e=0,n=this.length;e<n;e++)t=this[e],t.style.display="";return this},hide:function(){for(var t,e=0,n=this.length;e<n;e++)t=this[e],t.style.display="none";return this},position:function(){var t=this[0],e=t.getBoundingClientRect(),n=document.documentElement,i=document.body;return{left:e.left+(n.scrollLeft||i.scrollLeft),top:Math.abs(e.top)+(n.scrollTop||i.scrollTop)}},offset:function(){var t=this[0],e=t.getBoundingClientRect();return{left:e.left,top:e.top}},css:function(){var t,e,n=0,s=arguments[0];if(arguments.length>1||"object"==typeof s){for(;null!=(t=this[n]);n++)if(1===t.nodeType||11===t.nodeType||9===t.nodeType)for(e in s)t.style[e]=s[e];return this}return t=this[0],window.getComputedStyle?window.getComputedStyle(t).getPropertyValue(s):t.currentStyle.getAttribute(i(s))},width:function(t){var e,n,i,s=0;if(t&&"number"==typeof t){for(;null!=(e=this[s]);s++)1===e.nodeType&&(e.style.width=t+"px");return this}return e=this[0],m.isWindow(e)?n=e.document.documentElement.clientWidth:9===e.nodeType?(i=e.documentElement,n=Math.max(e.body.scrollWidth,i.scrollWidth,e.body.offsetWidth,i.offsetWidth,i.clientWidth)):n=e.offsetWidth,n},height:function(t){var e,n,i,s=0;if(t&&"number"==typeof t){for(;null!=(e=this[s]);s++)1===e.nodeType&&(e.style.height=t+"px");return this}return e=this[0],m.isWindow(e)?n=e.document.documentElement.clientHeight:9===e.nodeType?(i=e.documentElement,n=Math.max(e.body.scrollHeight,i.scrollHeight,e.body.offsetHeight,i.offsetHeight,i.clientHeight)):n=e.offsetHeight,n},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(t.textContent="");return this},remove:function(){for(var t,e=0;null!=(t=this[e]);e++)t.parentNode&&t.parentNode.removeChild(t);return this},append:function(){for(var t,e=0,n=m.parseDom(arguments[0]);null!=(t=this[e]);e++)1!==t.nodeType&&11!==t.nodeType&&9!==t.nodeType||t.appendChild(n.cloneNode(!0));return this},prepend:function(){for(var t,e=0,n=m.parseDom(arguments[0]);null!=(t=this[e]);e++)1!==t.nodeType&&11!==t.nodeType&&9!==t.nodeType||t.insertBefore(n.cloneNode(!0),t.firstChild);return this},before:function(){for(var t,e=0,n=m.parseDom(arguments[0]);null!=(t=this[e]);e++)t.parentNode&&t.parentNode.insertBefore(n.cloneNode(!0),t);return this},after:function(){for(var t,e=0,n=m.parseDom(arguments[0]);null!=(t=this[e]);e++)t.parentNode&&t.parentNode.insertBefore(n.cloneNode(!0),t.nextSibling);return this}};var I=m.fn.init=function(t,n){var i,n=n||document;if(!t)return this;if("string"==typeof t){t=m.trim(t),i=document.querySelectorAll?n.querySelectorAll(t):e(t,n);for(var s=0;s<i.length;s++)this[s]=i[s];this.length=i.length}else(t.nodeType||t.window)&&(this[0]=t,this.length=1);return this.context=n,this.selector=t,this};I.prototype=m.fn;var S=/^#(\S+)/,P=/^\.(\S+)/,j=/\[(\S+)=(\S+)\]$/;m.extend=m.fn.extend=function(){var t,e,n,i=arguments[0]||{},s=1,a=arguments.length;for(s===a&&(i=this,s--);s<a;s++)if(null!=(t=arguments[s]))for(e in t)n=t[e],i!==n&&void 0!==n&&(i[e]=n);return i},m.extend({expando:"tool"+(v+Math.random()).replace(/\D/g,""),isArray:T,isWindow:function(t){return null!=t&&t===t.window},contains:function(t,e){return t!==document||document.contains||(t=document.documentElement||document.body),t.contains(e)},trim:function(t){return null==t?"":(t+"").replace(C,"")},parseDom:function(t){var e,n,i,s=document.createDocumentFragment(),a=0,o=[];if("string"==typeof t){for(e=document.createElement("div"),e.innerHTML=t,i=e.childNodes,n=i.length;a<n;++a)o.push(i[a]);for(a=0;a<n;a++)s.appendChild(o[a])}else if("object"==typeof t&&t.nodeType)s.appendChild(t);else if(t instanceof m)for(a=0;a<t.length;a++)s.appendChild(t[a]);else m.log("\u4f20\u9012\u7684\u53c2\u6570\u975e\u6cd5!");return s},each:function(t,e){var n,i=0,a=t.length,o=s(t);if(o)for(;i<a&&(n=e.call(t[i],i,t[i]),n!==!1);i++);else for(i in t)if(n=e.call(t[i],i,t[i]),n===!1)break},map:function(t,e){var n,i=0,a=t.length,o=s(t),r=[];if(o)for(;i<a;i++)n=e(t[i],i),null!=n&&r.push(n);else for(i in t)n=e(t[i],i),null!=n&&r.push(n);return y.apply([],r)},proxy:function(t,e){var n,i;return n=w.call(arguments,2),i=function(){return t.apply(e||this,n.concat(w.call(arguments)))}},merge:function(t,e){for(var n=+e.length,i=0,s=t.length;i<n;i++)t[s++]=e[i];return t.length=s,t},unique:function(t){if(document.documentElement.compareDocumentPosition){var e=function(t,e){return t===e?0:t.compareDocumentPosition&&e.compareDocumentPosition?4&t.compareDocumentPosition(e)?-1:1:t.compareDocumentPosition?-1:1};t.sort(e);for(var n=1;n<t.length;n++)t[n]===t[n-1]&&t.splice(n--,1)}return t},dir:function(t,e,n){for(var i=[],s=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s)break;i.push(t)}return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},now:Date.now?Date.now:function(){return(new Date).getTime()}}),m.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return m.dir(t,"parentNode")},children:function(t){return m.sibling(t.firstChild)},siblings:function(t){return m.sibling((t.parentNode||{}).firstChild,t)},next:function(t){return a(t,"nextSibling")},prev:function(t){return a(t,"previousSibling")}},function(t,e){m.fn[t]=function(){var t=m.map(this,e);return this.length>1&&m.unique(t),this.pushStack(t)}}),m.fn.extend({parentToLevel:function(t){var e=t||1,n=0,i=m.map(this,function(t){for(var i=t;(i=i.parentNode)&&11!==i.nodeType&&++n<e;);return i});return this.length>1&&m.unique(i),this.pushStack(i)},child:function(t){return this.children().eq(t)}});var B={focus:{delegateType:"focusin"},blur:{delegateType:"focusout"}};m.event={add:function(t,e,n,i){var a=t.events||[],i=i||t;i=s(i)?i:[i],a.push({type:e,target:i,handler:n}),t.events=a,t.events[e]||(l(t,e,function(n){var i,n=c(n);m.each(t.events,function(s,a){var r,l;a.type===e&&(i=a.target,m.each(i,function(e,i){"string"==typeof i&&(r=m(i,t),l=o(r,n.target),l&&a.handler.call(l,n)),"object"==typeof i&&m.contains(i,n.target)&&a.handler.call(i,n)}))})},!r(e)),t.events[e]=!0)},del:function(t,e,n,i){var s=arguments,a=t.events;a&&a.length>0&&(a=1===s.length?[]:2===s.length?m.map(a,function(t){return t.type===e?null:t}):3===s.length?m.map(a,function(t){return t.type===e&&t.handler===n?null:t}):m.map(a,function(t){var s=t;return t.type===e&&t.handler===n&&i&&(s.target=m.map(t.target,function(t){var e=!1;for(var n in i)if(i[n]===t){e=!0;break}return e?null:t})),s})),t.events=a},trigger:function(t,e){}},m.fn.extend({on:function(t,e,n){var i,s=arguments;return m.each(this,function(a,o){2===s.length?(i=s[1],m.event.add(o,t,i)):(i=n,m.event.add(o,t,i,[e]))}),this},off:function(t,e,n){var i,s=arguments;return m.each(this,function(a,o){var r;0===s.length?m.event.del(o):1===s.length?m.event.del(o,t):2===s.length?(i=s[1],m.event.del(o,t,i)):(i=n,r=m(e,o),r=0===r.length?[e]:r,m.event.del(o,t,i,m(e)))}),this},trigger:function(t){m.each(this,function(e,n){m.event.trigger(n,t)})},bind:function(t,e){m.each(this,function(n,i){l(i,t,e,!r(t))})}});var N=m.now(),L=/\?/,A=document.head||document.getElementsByTagName("head")[0],E=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,D=E.exec(location.href.toLowerCase())||[],U={url:"",type:"GET",async:!0,data:null,dataType:"text",jsonp:"callback",contentType:"application/x-www-form-urlencoded; charset=UTF-8",timeout:0,scriptCharset:"UTF-8",crossDomain:null,supportCORS:"withCredentials"in new XMLHttpRequest,removeIframe:!0};m.extend({serialize:function(t){var e=[];for(var n in t){var i=t[n];if(i.constructor==Array)for(var s=0,a=i.length;s<a;s++)e.push(n+"="+encodeURIComponent(i[s]));else e.push(n+"="+encodeURIComponent(i))}return e.join("&")},getData:function(t,e,n){var t=m.extend({},U,t);t.type=t.type.toUpperCase(),null===t.crossDomain&&(t.crossDomain=f(t.url)),t.crossDomain?("GET"===t.type&&u(t,e),"POST"===t.type&&(t.supportCORS?p(t,e,n):h(t,e))):p(t,e,n)},getFormData:function(t){var e,n,i,s,a=t.find("input, textarea"),o={},r=[];if(0===a.length){for(i=t[0].getElementsByTagName("input"),s=t[0].getElementsByTagName("textarea"),e=0,n=i.length;e<n;e++)r.push(i[e]);for(e=0,n=s.length;e<n;e++)r.push(s[e]);a=r}return m.each(a,function(t,e){e=m(e),("checkbox"!==e.attr("type")||"checkbox"===e.attr("type")&&e.attr("checked"))&&(o[e.attr("name")]=e.val())}),o},parseJSON:function(t){return JSON.parse(t)},stringify:function(t){return JSON.stringify(t)},loadCSS:function(t){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=t,A.appendChild(e)},loadScript:function(t,e){var n=document.createElement("script");n.type="text/javascript",n.src=t,n.charset=e||"UTF-8",A.appendChild(n)}}),Tie.tool=m}(),function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Array((-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),62,(-1),(-1),(-1),63,52,53,54,55,56,57,58,59,60,61,(-1),(-1),(-1),(-1),(-1),(-1),(-1),0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,(-1),(-1),(-1),(-1),(-1),(-1),26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,(-1),(-1),(-1),(-1),(-1));t.extend({log:function(t){"undefined"!=typeof console&&console.log&&console.log(t)},render:function(t,e){t=t||"",e=e||[""];for(var n,i=/<%((?:(?!%>).)+)?%>/g,s=/(^( )?(if|for|else|switch|case|break|{|}))(.*)?/g,a="var r=[];\n",o=0,r=function(t,e){return a+=e?t.match(s)?t+"\n":"r.push("+t+");\n":""!==t?'r.push("'+t.replace(/"/g,'\\"')+'");\n':"",r};n=i.exec(t);)r(t.slice(o,n.index))(n[1],!0),o=n.index+n[0].length;r(t.substr(o,t.length-o)),a+='return r.join("");',e=isNaN(e.length)?[e]:e;for(var l="",c=0,d=e.length;c<d;c++)l+=new Function(a.replace(/[\r\t\n]/g,"")).apply(e[c]);return l},cookie:{EXPIRESWITHUNIT:/[smhdMy]$/,TIMEUNITS:{s:1,m:60,h:3600,d:86400,M:2592e3,y:31536e3},encoder:window.encodeURIComponent,decoder:window.decodeURIComponent,get:function(t,e){var n=this;t=n.encoder(t)+"=";var i,s=document.cookie,a=s.indexOf(t);return-1===a?e?void 0:"":(a+=t.length,i=s.indexOf(";",a),i===-1&&(i=s.length),n.decoder(s.substring(a,i)))},set:function(t,e,n,i,s,a){var o=this,r=[o.encoder(t)+"="+o.encoder(e)];if(n){var l,c;n instanceof Date?l=n:("string"==typeof n&&this.EXPIRESWITHUNIT.test(n)&&(n=n.substring(0,n.length-1),c=RegExp.lastMatch),isNaN(n)||(l=new Date,l.setTime(l.getTime()+n*this.TIMEUNITS[c||"m"]*1e3))),l&&r.push("expires="+l.toUTCString())}s&&r.push("path="+s),i&&r.push("domain="+i),a&&r.push("secure"),document.cookie=r.join(";")},del:function(t,e,n){document.cookie=this.encoder(t)+"="+(n?";path="+n:"")+(e?";domain="+e:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}},formatDate:function(t,e){var e=e||"yyyy-MM-dd hh:mm:ss",t=t||new Date;return Date.prototype.formatDt=Date.prototype.formatDt||function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t},t.formatDt(e)},subChineseStr:function(t,e,n){e=2*e;for(var i="",s=0,a=0;a<t.length;a++){if(t.charCodeAt(a)>255?s+=2:s++,s>=e)return n?i+"...":i;i+=t.charAt(a)}return t},scrollY:function(t,e){var e=e||0;window.scrollTo(0,t.position().top+e)},base64Encode:function(t){var n,i,s,a,o,r;for(s=t.length,i=0,n="";i<s;){if(a=255&t.charCodeAt(i++),i==s){n+=e.charAt(a>>2),n+=e.charAt((3&a)<<4),n+="==";break}if(o=t.charCodeAt(i++),i==s){n+=e.charAt(a>>2),n+=e.charAt((3&a)<<4|(240&o)>>4),n+=e.charAt((15&o)<<2),n+="=";break}r=t.charCodeAt(i++),n+=e.charAt(a>>2),n+=e.charAt((3&a)<<4|(240&o)>>4),n+=e.charAt((15&o)<<2|(192&r)>>6),n+=e.charAt(63&r)}return n},base64Decode:function(t){var e,i,s,a,o,r,l;for(r=t.length,o=0,l="";o<r;){do e=n[255&t.charCodeAt(o++)];while(o<r&&e==-1);if(e==-1)break;do i=n[255&t.charCodeAt(o++)];while(o<r&&i==-1);if(i==-1)break;l+=String.fromCharCode(e<<2|(48&i)>>4);do{if(s=255&t.charCodeAt(o++),61==s)return l;s=n[s]}while(o<r&&s==-1);if(s==-1)break;l+=String.fromCharCode((15&i)<<4|(60&s)>>2);do{if(a=255&t.charCodeAt(o++),61==a)return l;a=n[a]}while(o<r&&a==-1);if(a==-1)break;l+=String.fromCharCode((3&s)<<6|a)}return l}})}(Tie.tool);var Tie=window.Tie||{};Tie.setting={businessId:"1f4bbe732cc24be3a4244349dd67ab29",oprtBtnTxt:{up:"\u9876",down:"\u8e29",reply:"\u56de\u590d",fav:"\u6536\u85cf",cancelFav:"\u53d6\u6d88\u6536\u85cf",inform:"\u4e3e\u62a5",share:"\u5206\u4eab"},sbmtBtnTxt:{imPub:"\u9a6c\u4e0a\u53d1\u8868",lgnPub:"\u767b\u5f55\u5e76\u53d1\u8868"},userTxt:{exit:"\u9000\u51fa",regist:"\u6ce8\u518c",autoLogin:"\u81ea\u52a8\u767b\u5f55",account:"\u8d26\u53f7",password:"\u5bc6\u7801"},myTieTxt:"\u6211\u7684\u8ddf\u8d34",disciplineTxt:"\u8ddf\u8d34\u7528\u6237\u81ea\u5f8b\u516c\u7ea6&gt;&gt;",pubTipTxt:"\u6587\u660e\u4e0a\u7f51\uff0c\u767b\u5f55\u53d1\u8d34",emptyTipTxt:{hotList:"\u76ee\u524d\u6ca1\u6709\u70ed\u95e8\u8ddf\u8d34",newList:"\u76ee\u524d\u6ca1\u6709\u8ddf\u8d34\uff0c\u6b22\u8fce\u4f60\u53d1\u8868\u89c2\u70b9"},barTxt:{hotList:"\u70ed\u95e8\u8ddf\u8d34",newList:"\u6700\u65b0\u8ddf\u8d34"},showAllTxt:"\u67e5\u770b\u66f4\u591a\u8ddf\u8d34",noTieTxt:"\u53bb\u8ddf\u8d34\u5e7f\u573a\u770b\u770b",lawTxt:"\u7f51\u53cb\u8bc4\u8bba\u4ec5\u4f9b\u5176\u8868\u8fbe\u4e2a\u4eba\u770b\u6cd5\uff0c\u5e76\u4e0d\u8868\u660e\u7f51\u6613\u7acb\u573a\u3002",esyFrmTxt:"\u6765\u81ea\uff1a",pubSucsTxt:"\u8ddf\u8d34\u53d1\u5e03\u6210\u529f",auditTxt:"\u60a8\u7684\u8ddf\u8d34\u6b63\u5728\u5ba1\u6838\u4e2d...",wrapperId:"tieArea",listCls:"tie-list",emptyTipCls:"empty-tip",oprtBtnCls:{up:"up-btn",down:"down-btn",reply:"reply-btn",fav:"fav-btn",cancelFav:"cancel-fav-btn",inform:"inform-btn",share:"share-btn"},floorCls:{trunk:"single-tie",quote:"floor-tie",middle:"hide-middle-posts",oprtBar:"m-tool",toolBar:"tool-bar",arrow:"arrow"},barCls:{input:"tie-input-bar",page:"tie-page",reminder:"tie-reminder"},pageCls:{actionBtn:"page-btn",numBtn:"page-num"},barId:{hotList:"hot-posts",newList:"new-posts",shareWin:"shareListWin",noneTie:"no-tie"},eventCls:{submitBtn:"js-submit-btn",inputBar:"js-input-bar",acntInput:"js-acnt-input",pwdInput:"js-pwd-input",acntEmpty:"js-acnt-empty",pwdEmpty:"js-pwd-empty"},userCls:{exit:"js-tie-logout"},showAllCls:"show-all-tie",stateCls:{active:"z-active",visited:"z-visited",parallelFlr:" z-parallel-floor",firstFlr:" z-first-floor",visible:"z-visible",visibleShare:"z-visible-share",onlyOne:"z-only-one",onlyShowInputBox:"z-only-input",readMode:"z-read-mode",writeMode:"z-write-mode",checkAcnt:"z-check-account",checkPwd:"z-check-password",inputFold:"z-input-fold"},formCls:{cntTip:"js-tie-tips",submitBtn:"post-btn",parentPostIdInpt:"js-tie-parent-id",userBox:"js-username",pwdBox:"js-password",cntBox:"js-cnt-box",pidBox:"js-pid-box"},dataAtr:{postId:"data-post-id",postUp:"data-post-up",postDown:"data-post-down",page:{prev:"data-page-prev",next:"data-page-next",num:"data-page-num"}},statistic:{postSubmit:"GTnews_postArea_post",replySubmit:"GTnews_tieArea_post",loginSubmit:"GTnews_tieReply_submit"},baseDataURL:"https://comment.api.163.com/api/v1/products/<% this.productKey %>",testBaseDataURL:"http://testcomment.ws.126.net/api/v1/products/<% this.productKey %>",defaultUserTitleLink:"http://tie.163.com/gt/14/0226/12/9M0QKRDU00304IK1.html",callback:{beforeSubmitPost:function(t){var e=!1,n=Tie.tool,i=n.trim(t.content);return i.length<=0?alert("\u8bf7\u586b\u5199\u5185\u5bb9"):i.length<2?alert("\u5185\u5bb9\u592a\u77ed\uff0c\u81f3\u5c112\u4e2a\u6587\u5b57"):i.length>1e3?alert("\u5185\u5bb9\u592a\u957f\uff0c\u6700\u591a1000\u4e2a\u6587\u5b57"):e=!0,e}},cookie:{toCommentPage:"toMain",newTieId:"my_comment_<% Tie.global.threadInfo.docId %>",domain:".163.com"},specChannels:{"h.163.com":"play.163.com","d.163.com":"play.163.com","s.163.com":"play.163.com","a.163.com":"play.163.com","w.163.com":"play.163.com","gg.163.com":"play.163.com","fashion.163.com":"lady.163.com","discovery.163.com":"news.163.com","henan.163.com":"news.163.com"},defaultConfig:{productKey:"a2869674571f77b5a0867c3d71db5856",ADconfig:!1,event:"beforeShow/afterShow",skinPath:"../skin/",skin:"default",type:"build",nestedHierarchy:20,startHideMdl:7,mods:["hotView","newView"],operators:["up","down","reply","fav","inform","share"],hotSize:10,newSize:30,submitType:"currentPage"}};var Tie=window.Tie||{};!function(){var t="http://tie.163.com/reply/myaction.jsp?action=reply",e=t+"&userId=<% this.userNId %>",n=['<div class="photo">',"<% if (this.nickname) { %>",'<a href="'+e+'&f=gentieavatar" class="photo-link" target="_blank" statistic="GTnews_tieArea_avatar">',"<% if (this.photo) { %>",'<img src="<% this.photo %>">',"<% } else { %>",'<div class="default-photo"></div>',"<% } %>","</a>","<% } else { %>",'<div class="default-photo"></div>',"<% } %>","<% if (this.authInfo) { %>",'<a class="bv-icon" statistic="vdetail_nickname"></a>',"<% } %>","</div>"].join(""),i=['<% if (this.type === "quote") { %>',"<% if ( this.title ) { %>",'<a class="name" href="'+e+'&f=gentienickname" target="_blank" statistic="GTnews_tieArea_nickname"><% this.nickname %></a>',"<% if (this.authInfo) { %>",'<a class="bv-icon" title="\u70b9\u51fb\u8fdb\u5165\u8ba4\u8bc1\u7528\u6237\u4ecb\u7ecd\u9875" href="http://tie.163.com/reply/vintro.html" target="_blank" statistic="vdetail_nickname"></a>',"<% } %>",'<a href="<% this.titleURL %>" class="name-title" target="_blank" statistic="GTnews_redName">[<% this.title %>]</a>',"<% }  else if (this.anonymous) { %>",'<span class="flr-site"><% this.siteName %><% this.from %><% ( this.source === "ph" ? "\u624b\u673a" : "" ) %>\u7f51\u53cb</span><span class="flr-ip">(<% this.ip %>)</span>',"<% } else { %>",'<a class="name" href="'+e+'&f=gentienickname" target="_blank" statistic="GTnews_authNickname"><% this.nickname %></a>',"<% if (this.authInfo) { %>",'<a class="bv-icon" title="\u70b9\u51fb\u8fdb\u5165\u8ba4\u8bc1\u7528\u6237\u4ecb\u7ecd\u9875" href="http://tie.163.com/reply/vintro.html" target="_blank" statistic="vdetail_nickname"></a>',"<% } %>",'<span class="flr-site">[<% this.siteName %><% this.from %><% ( this.source === "ph" ? "\u624b\u673a" : "" ) %>\u7f51\u53cb]</span>',"<% } %>","<% } %>",'<% if (this.type === "trunk") { %>',"<% if ( this.title ) { %>",'<a class="name" href="'+e+'&f=gentienickname" target="_blank" statistic=""><% this.nickname %></a>','<a href="<% this.titleURL %>" class="name-title" target="_blank" statistic="GTnews_tieArea_redName">[<% this.title %>]</a>',"<% }  else if (this.anonymous) { %>",'<span class="name-desp"><% this.siteName %><% this.from %><% ( this.source === "ph" ? "\u624b\u673a" : "" ) %>\u7f51\u53cb</span><span class="name-ip">ip:<% this.ip %></span>',"<% } else { %>",'<a class="name" href="'+e+'&f=gentienickname" target="_blank" statistic="GTnews_authNickname"><% this.nickname %></a>','<span class="name-desp">[<% this.siteName %><% this.from %><% ( this.source === "ph" ? "\u624b\u673a" : "" ) %>\u7f51\u53cb]</span>',"<% } %>","<% } %>"].join(""),s=['<p class="tie-cnt">',"<% Tie.tpl.util.showFace(this.cnt) %>","</p>"].join(""),a=["<% if (this.voice && Tie.tpl.util.audioEnable) { %>",'<div class="tie-voice">','<em class="icon icon-voice" statis="GTtie_voice"></em>','<audio src="" val="<% this.voice.url %>"></audio>',"<span class=\"voice-length\"><% this.voice.time %>''</span>","</div>","<% } %>"].join(""),o='<div style="clear:both"></div>',r=["<% if (this.essayURL) { %>",'<div class="tie-from"><% Tie.setting.esyFrmTxt %>','<a href="<% this.essayURL %>" class="from-link" target="_blank" title="<% this.essayTitle %>" statis="GTtie_relatedPost">',"<% (Tie.tpl.util.narrowScreen) ? Tie.tpl.util.longStr(this.essayTitle, 8) : this.essayTitle %>","</a>","</div>","<% } %>"].join(""),l=['<div class="<% Tie.setting.floorCls.toolBar %> <% this.auditStatus ? "z-audit" : "" %>">','<ul class="<% Tie.setting.floorCls.oprtBar %>" data-post-id="<% this.id %>" data-post-order="<% this.order %>">','<% if (Tie.tpl.util.isShowOprator("up")) { %>',"<li>",'<span class="add-one">+1</span>','<a href="javascript:void(0);" class="tie-operate operate-top <% Tie.setting.oprtBtnCls.up %>" target="_self"><% Tie.setting.oprtBtnTxt.up %><span class="u-num" data-post-up="<% this.up %>"><% this.up %></span></a>',"</li>","<% } %>",'<% if (Tie.tpl.util.isShowOprator("down")) { %>',"<li>","<i>|</i>",'<span class="del-one">+1</span>','<a href="javascript:void(0)" class="tie-operate operate-down <% Tie.setting.oprtBtnCls.down %>" target="_self"><% Tie.setting.oprtBtnTxt.down %><span class="u-num" data-post-down="<% this.down %>"><% this.down %></span></a>',"</li>","<% } %>",'<% if (Tie.tpl.util.isShowOprator("reply")) { %>',"<li>","<i>|</i>",'<a href="javascript:void(0)" class="tie-operate <% Tie.setting.oprtBtnCls.reply %>" statistic="GTnews_tieArea_reply" target="_self"><% Tie.setting.oprtBtnTxt.reply %></a>','<div class="arrow" style="display:none;">','<span class="arrow-top"></span>','<span class="arrow-btm"></span>',"</div>","</li>","<% } %>",'<% if (Tie.tpl.util.isShowOprator("fav") && Tie.global.user) { %>','<li><i>|</i><a href="javascript:void(0)" class="tie-operate <% Tie.setting.oprtBtnCls.fav %>" statis="GTtie_star" target="_self"><% Tie.setting.oprtBtnTxt.fav %></a></li>',"<% } %>",'<% if (Tie.tpl.util.isShowOprator("inform")) { %>','<li><i>|</i><a href="javascript:void(0)" class="tie-operate <% Tie.setting.oprtBtnCls.inform %>" statis="GTtie_star" target="_self"><% Tie.setting.oprtBtnTxt.inform %></a></li>',"<% } %>",'<% if (Tie.tpl.util.isShowOprator("share") && this.type === "trunk") { %>','<li><i>|</i><a href="javascript:void(0)" class="tie-operate <% Tie.setting.oprtBtnCls.share %>" statistic="GTnews_tieArea_share" target="_self"><% Tie.setting.oprtBtnTxt.share %></a></li>',"<% } %>","</ul>",o,"</div>"].join(""),c=['<div class="tool-bar-i">','<span class="publis-success"><em class="icon icon-pub-suc"></em><% Tie.setting.pubSucsTxt %></span>','<a class="enter-my-tie" href="'+t+'" target="_blank"><% Tie.setting.myTieTxt %><em class="icon icon-enter-i"></em></a>',"</div>"].join(""),d=['<form method="post" action="https://reg.163.com/logins.jsp" target="tie_util_frame">','<input type="text" class="account-input <% Tie.setting.formCls.userBox %> <% Tie.setting.eventCls.acntInput %>" name="username" placeholder="<% Tie.tpl.util.isIE() ? "" : "\u5e10\u53f7" %>">',"<% if ( Tie.tpl.util.isIE() ) { %>",'<span class="account-empty-tip <% Tie.setting.eventCls.acntEmpty %>">\u5e10\u53f7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>',"<% } %>",'<input type="password" class="password-input <% Tie.setting.formCls.pwdBox %> <% Tie.setting.eventCls.pwdInput %>" name="password" placeholder="<% Tie.tpl.util.isIE() ? "" : "\u5bc6\u7801" %>">',"<% if ( Tie.tpl.util.isIE() ) { %>",'<span class="password-empty-tip <% Tie.setting.eventCls.pwdEmpty %>">\u5bc6\u7801&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>',"<% } %>",'<input type="hidden" name="product" value="content">','<input type="hidden" name="url" value="http://www.163.com/special/0077450P/login_frame.html">','<input type="hidden" name="url2" value="http://www.163.com/special/0077450P/login_frame.html">','<input type="hidden" name="noRedirect" value="1">','<input type="hidden" name="savelogin" value="1">',"</form>",'<div class="links-area z-unlogin">','<a href="http://reg.163.com/reg0.shtml?product=tie&url=<% Tie.tpl.util.escapeXSS(document.location.href) %>" target="_blank" statistic="GTnews_postArea_register">\u6ce8\u518c</a>','<em class="link-split">|</em>','<a href="http://tie.163.com/" target="_blank" statistic="GTnews_postArea_plaza">\u8ddf\u8d34\u5e7f\u573a</a>','<em class="link-split">|</em>','<a href="http://m.163.com/newsapp/" target="_blank" statistic="GTnews_postArea_wordsLink">\u624b\u673a\u53d1\u8ddf\u8d34</a>',"</div>",'<div class="submit-btn <% Tie.setting.eventCls.submitBtn %>">\u767b\u5f55\u5e76\u53d1\u8d34</div>'].join(""),p=['<div class="photo-area">',"<% if ( Tie.global.user.avatar ) { %>",'<img src="<% Tie.global.user.avatar %>" alt="\u5934\u50cf" class="avatar">',"<% } else { %>",'<span class="dflt-avatar"></span>',"<% } %>",'<span class="nickname"><% Tie.tool.subChineseStr(Tie.global.user.nickname, 5, true) %></span>',"</div>",'<div class="links-area">','<a href="'+t+'&f=articles" target="_blank" statistic="GTnews_postArea_myTie">\u6211\u7684\u8ddf\u8d34</a>','<em class="link-split">|</em>','<a href="http://tie.163.com/?f=articles" target="_blank" statistic="GTnews_postArea_plaza">\u8ddf\u8d34\u5e7f\u573a</a>','<em class="link-split phone-send">|</em>','<a href="http://m.163.com/newsapp/" class="phone-send" target="_blank" statistic="GTnews_postArea_wordsLink">\u624b\u673a\u53d1\u8ddf\u8d34</a>','<em class="link-split">|</em>','<a href="https://reg.163.com/Logout.jsp?username=<% Tie.global.user.userId %>&url=<% Tie.tpl.util.escapeXSS(document.location.href) %>" target="_self" statistic="GTnews_postArea_logout">\u9000\u51fa</a>',"</div>",'<div class="submit-btn <% Tie.setting.eventCls.submitBtn %>">\u9a6c\u4e0a\u53d1\u8868</div>'].join(""),u=['<div class="tie-hot" id="<% Tie.setting.barId.hotList %>">','<div class="<% Tie.setting.listCls %>"></div>','<div class="empty-tip">','<p class="tip-cnt">',"<span><% Tie.setting.emptyTipTxt.hotList %></span>","</p>","</div>","</div>"].join(""),h=['<div class="tie-newest" id="<% Tie.setting.barId.newList %>">','<div class="<% Tie.setting.listCls %>"></div>','<div class="empty-tip">','<p class="tip-cnt"><% Tie.setting.emptyTipTxt.newList %></p>',"</div>","<% if ( !Tie.global.config.showPaging ) { %>",'<a href="<% Tie.global.threadInfo.commentPageURL %>" class="show-all-tie" target="_blank" statistic="GTnews_tieArea_more"><span class="icon i-more"></span><span><% Tie.setting.showAllTxt %></span></a>',"<% } %>","</div>"].join(""),f=['<a href="http://tie.163.com/?f=0tie" class="show-all-tie" target="_blank" statistic="GTnews_tieArea_noTiePlaza" id="no-tie"><span class="icon i-more"></span><span><% Tie.setting.noTieTxt%></span></a>'].join(""),m={
readMode:['<div class="tie-input-bar z-read-mode <% Tie.setting.eventCls.inputBar %>">','<div class="input-tip">\u6587\u660e\u4e0a\u7f51\uff0c\u767b\u5f55\u53d1\u8d34</div>','<div class="input-btn">','<span class="icon i-write-tie"></span>','<span class="btn-txt"><% Tie.global.user ? "\u9a6c\u4e0a\u53d1\u8868" : "\u767b\u5f55\u5e76\u53d1\u8d34" %></span>',"</div>","</div>"].join(""),writeMode:['<div class="tie-input-bar z-write-mode <% Tie.setting.eventCls.inputBar %> <% Tie.setting.stateCls.inputFold %>">',"<form>",'<textarea name="content" class="<% Tie.setting.formCls.cntBox %>"><% this.content %></textarea>','<input type="hidden" name="parentId" value="<% this.parentId %>" class="<% Tie.setting.formCls.pidBox %>">',"</form>",'<div class="submit-row">',"<% if ( Tie.global.user ) { %>",p,"<% } else { %>",d,"<% } %>","</div>",'<div class="icon i-check-tip"></div>',"</div>"].join("")},v='<p class="tie-reminder"><% Tie.setting.lawTxt %></p>',g=['<div class="tie-ad-bar" id="tie-box-ad-201711" style="display:none">','<a href="http://go.163.com/2017/1030/taidu/index.html" target="_blank">','<img src="https://static.ws.126.net/tie/2017/5/tie_box_ad_2.jpg">',"</a>",'<span class="ad_hover_href"></span>','<span class="ad_close_fixed">\u5173\u95ed</span>',"</div>"].join(""),b='<div class="icon i-hot-border"></div>';Tie.tpl={layout:['<div id="<% Tie.setting.wrapperId %>" class="tie-area">',g,m.writeMode,v,u,h,f,"</div>"].join(""),inputBar:m,noticeBar:v,pagingPart:["<% if ( this.total > 0 ) { %>",'<div class="tie-page">','<a href="#" class="page-btn" data-page-prev="prev">&lt;\u4e0a\u4e00\u9875</a>',"<% for ( var numArry = Tie.tpl.util.calPageNum(3), i = 0, len = numArry.length; i < len; i++ ) { %>","<% if ( (i === 1 && numArry[i] > 2) || (i === len-1 && numArry[i-1] < this.total-1) ) { %>",'<span class="page-dot">...</span>',"<% } %>","<% if ( numArry[i] === this.current ) { %>",'<a href="javascript:void(0)" class="page-num z-current"><% numArry[i] %></a>',"<% } else { %>",'<a href="javascript:void(0)" class="page-num" data-page-num="<% numArry[i] %>"><% numArry[i] %></a>',"<% } %>","<% } %>",'<a href="#" class="page-btn" data-page-next="next">\u4e0b\u4e00\u9875&gt;</a>',"</div>","<% } %>"].join(""),trunkPost:{upperPart:['<div class="<% Tie.setting.floorCls.trunk %> <% if (this.order === 1) { %><% Tie.setting.stateCls.onlyOne %><% } %>" data-post-id="<% this.id %>">',n,'<div class="tie-bdy">','<div class="bdy-inner">','<div class="tie-author">',i,'<span class="tie-time"><% this.pubTime %></span>',"</div>","<% if (this.auditStatus) { %>",'<p class="tie-checking"><% Tie.setting.auditTxt %></p>',"<% }; %>"].join(""),lowerPart:[s,a,"<% if (this.fresh) { %>",c,"<% } else { %>",r,l,"<% } %>","</div>","</div>",b,"</div>"].join("")},floorPost:{upperPart:'<div class="floor-tie<% Tie.tpl.util.parallelFloorCls(this.order, this.groupMemberSize) %>">',lowerPart:['<div class="floor-tie-self<% Tie.tpl.util.firstFloorCls(this.order) %>">','<div class="tie-author">','<span class="name-desp">',i,"</span>",'<span class="floor-NO"><% this.order %></span>',"</div>",s,a,l,"</div>","</div>"].join(""),middlePart:['<div class="floor-tie-self">','<div class="hide-middle-posts" data-trunk-id="<% this.trunkPstId %>">','<a href="javascript:void(0)" class="hide-posts-text" statistic="GTnews_tieArea_tieExpand">','<span class="hide-flr-num">\u5df2\u7ecf\u9690\u85cf<% this.hideMdlNum %>\u5c42\u91cd\u590d\u76d6\u697c</span>','<span class="expend-txt">[\u70b9\u51fb\u5c55\u5f00]</span>',"</a>","</div>","</div>","</div>"].join("")},util:{audioEnable:!1,longStr:function(t,e){return Tie.tool.subChineseStr(t,e,!0)},parallelFloorCls:function(t,e){var n=e-1,i=Math.round(Tie.global.config.nestedHierarchy/2),s="";return t<i||t>n-i||(s=Tie.setting.stateCls.parallelFlr),s},firstFloorCls:function(t){return 1===t?Tie.setting.stateCls.firstFlr:""},isShowOprator:function(t){t=t.toLowerCase();var e=Tie.global.config.operators.join(", ").toLowerCase();return"down"===t?"on"===Tie.global.threadInfo.status.against&&e.indexOf(t)>-1:e.indexOf(t)>-1},calPageNum:function(t){var e=[1],n=Tie.global.page.total,i=Tie.global.page.current,s=i-t,a=i+t;s<2&&(a+=Math.abs(s-2),s=2),a>n-1&&(s-=Math.abs(a-(n-1)),a=n-1),s<2&&(s=2),a>n-1&&(a=n-1);for(var o=s;o<=a;o++)e.push(o);return n>1&&e.push(n),e},isIE:function(t){var e=navigator.userAgent;return e.indexOf("MSIE")>=0&&e.indexOf("Opera")<0},showFace:function(t){var e=window.faceMap||{},n=/\[([\u4e00-\u9fa5]+)\]/g;return n.test(t)&&(t=t.replace(n,function(t,n){if(e[n]){var i=e[n];return"<img src='"+i+"'>"}return t})),t},escapeXSS:function(t){return t&&0!==t.length?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;"):""}}}}(),function(t){function e(t,e){var n,i=t.commentPageURL.replace(t.docId,e.docId+"/"+e.commentId),s=i,a=e.cnt,o=t.title,r={};return o=o.replace(/<[^>]+>/g,"").replace(/"/g,"\u201c"),a=a.replace(/<[^>]+>/g,"").replace(/"/g,"\u201c"),n=a,o.length>32&&(o=o.substr(0,16)+"..."),a.length>32&&(a=a.substr(0,32)+"..."),n.length>16&&(n=n.substr(0,16)+"..."),r.url=i,r.title=encodeURIComponent("\u300e"+n+"\u300f-- \u6765\u81ea\u7f51\u6613\u65b0\u95fb\u300a"+o+"\u300b@\u7f51\u6613\u8ddf\u8d34"),r.digest=encodeURIComponent(a),r.otitle=encodeURIComponent(o),r.url3g=s,r}function n(t,e,n){r.getData({url:r.render(s,r.extend({},t,e)),jsonp:"callback"},n)}var i,s="http://webshot.ws.126.net/api/v1/<% this.boardId %>/<% this.threadId %>/<% this.id %>.html",a=[{id:"weibo",name:"\u65b0\u6d6a\u5fae\u535a",url:"http://v.t.sina.com.cn/share/share.php?appkey=1755601839&title=<% this.title %>&url=<% this.url %>&pic=<% this.image %>&searchPic=false&source="+encodeURIComponent("\u7f51\u6613\u8ddf\u8d34")+"sourceUrlhttp://tie.163.com/plaza/recommend.html",statistic:"GTnews_tieArea_shareWeibo"},{id:"qzone",name:"QQ\u7a7a\u95f4",url:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=<% this.url %>&title=<% this.title %>&pics=<% this.image %>&summary=<% this.digest %>",statistic:"GTnews_tieArea_shareQzone"},{id:"yixin",name:"\u6613\u4fe1",url:"https://open.yixin.im/share?appkey=yxb7d5da84ca9642ab97d73cd6301664ad&type=webpage&title=<% this.otitle %>&pic=<% this.image %>&desc=<% this.digest %>&url=<% this.url3g %>%23sns_yixin",statistic:"GTnews_tieArea_shareYixin"}],o=['<div id="shareListWin" class="shareListWin">',"<% for (var i = 0, l = Tie.share.types.length; i < l; i++) { %>",'<a href="" class="shareSnsBtn <% Tie.share.types[i].id %>" target="_blank" data-share="<% Tie.share.types[i].id %>" statistic="<% Tie.share.types[i].statistic %>">&nbsp;</a>',"<% } %>",'<div class="arrow"><span class="arrow-top"></span><span class="arrow-btm"></span></div>',"</div>"].join(""),r=t.tool,l=t.setting;t.share={types:a,template:o,show:function(s,c,d){var p=d.position();i||(r(document.body).append(r.render(o)),i=r("#shareListWin"),r(".shareSnsBtn.weibo").on("click",function(e){t.operator.actionStatistic("GTnews_tieArea_shareWeibo")}),r(".shareSnsBtn.qzone").on("click",function(e){t.operator.actionStatistic("GTnews_tieArea_shareQzone")}),r(".shareSnsBtn.yixin").on("click",function(e){t.operator.actionStatistic("GTnews_tieArea_shareYixin")})),n(s,c,function(t){var n;t.url&&(n=e(s,c),n.image=t.url,r.each(i.children(),function(t,e){var i=r(e).attr("data-share");i&&r(e).attr("href",r.render(a[t].url,n))}))}),setTimeout(function(){var e=p.left-i.width()/2+d.width()/2,n=p.top-i.height()-5;t.view.wrapper.find("."+l.listCls).find("."+l.floorCls.toolBar).delCls(l.stateCls.visibleShare),i.css({left:e+"px",top:n+"px"}),d.parentToLevel(3).addCls(l.stateCls.visibleShare),i.lastTarget=d},200)},hide:function(){t.view.wrapper.find("."+l.listCls).find("."+l.floorCls.toolBar).delCls(l.stateCls.visibleShare),i&&i.css({left:"-999px",top:"-999px"}),i&&i.lastTarget&&i.lastTarget.parentToLevel(3).delCls(l.stateCls.visibleShare)}}}(window.Tie),function(t){function e(e,n){var i=d.render(t.setting.baseDataURL+"/users/myInfo",e);d.getData({url:i},function(t){"-6"===t.code&&(l||(alert("\u60a8\u7684\u8d26\u6237\u5df2\u7ecf\u88ab\u6ce8\u9500\u4e86\uff01"),l=!0),setTimeout(function(){l=!1},500),t=null),n(t)}),d.cookie.del(a.userInfo,a.global,"/")}var n,i,s,a={sInfo:"S_INFO",pInfo:"P_INFO",userInfo:"NTES_CMT_USER_INFO",global:".163.com"},o={newCDN:1,version:3,product:"tie",promark:"cGTVPrV",productKey:"4fa4f03ce54d4acd3386c548c1c203ef",swidth:300,host:"tie.163.com",includeBox:"tie-urs-wrap",page:"login",single:1,loginText:"\u767b\u5f55",gotoRegText:"\u6ce8\u518c",placeholder:{account:"\u7f51\u6613\u90ae\u7bb1/\u5e38\u7528\u90ae\u7bb1",pwd:"\u8bf7\u8f93\u5165\u5bc6\u7801"},notFastReg:0,needanimation:0,needUnLogin:1,defaultUnLogin:1,cssDomain:"https://static.ws.126.net/f2e/products/tie/",cssFiles:"urs_tie.css",errMsg:"",logincb:function(t){n.css({display:"none"}),c.loginSuccess()},loginstate:function(t){t.state?(n.css({display:"none"}),c.loginSuccess()):n.css({display:"block"})},resize:function(t){},initReady:function(){}},r=['<div class="tie-urs-area">','<div class="urs-mask"></div>','<div class="urs-wrap" id="tie-urs-wrap">','<div class="cls-btn" id="urs-cls-btn"></div>',"</div>","</div>"].join("");URS&&URS.setPkidAndPd({pkid:"cGTVPrV",pd:"tie",mode:2});var l=!1,c={init:function(n,i){var s=d.cookie.get(a.pInfo).split("|"),o=d.cookie.get(a.sInfo),r=d.cookie.get(a.userInfo),l=""!==o;l?r?(r=r.split("|"),d.base64Encode(s[0])===r[4]?(t.global.user={userId:r[0],nickname:r[1],avatar:r[2],anonymous:r[3],username:r[4]},i(t.global.user)):e(n,i)):e(n,i):i()},login:function(t,e){var n=e.username,s=e.savelogin?1:0;n=/\@/.test(n)?n:n+"@163.com",i.doLoginProxy({username:n,pwd:e.password,defaultUnLogin:s})},beforeLogin:function(e){var n=t.setting,i=e.find("."+n.formCls.userBox),s=e.find("."+n.formCls.pwdBox),a=e.parent().next(),o=e.parentToLevel(2),r=n.stateCls.checkAcnt,l=n.stateCls.checkPwd,c=!1;return o.delCls(r).delCls(l),i.val()?s.val()?c=!0:(o.addCls(l),s[0].focus(),a.html("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a")):(o.addCls(r),i[0].focus(),a.html("\u8d26\u6237\u4e0d\u80fd\u4e3a\u7a7a")),c},loginSuccess:function(e){c.init(t.global.config,function(e){if(t.global.user=e,t.refreshUserView(),void 0!==window.NTESCommonNavigator){var n=NTESCommonNavigator.core.Controller();n.refresh()}})},loadURS:function(){return i||(n=t.view.wrapper.append(r).child(-1),s=n.child(1).child(0),i=new window.URS(o),s.bind("click",function(t){n.css({display:"none"})})),i}},d=t.tool;t.model=t.model||{},t.model.user=c}(window.Tie),function(t,e){function n(t){var e=window.location.search;return e?decodeURIComponent((e.substring(e.indexOf("?")+1).match(new RegExp("(?:(?:^|&)"+t+"=)([^&]*)"))||["",""])[1]):""}function i(t,n){var i=t.length===n;return i||e.log("\u4f20\u9012\u7684\u53c2\u6570\u4e0d\u7b26\u5408\u8981\u6c42\uff01"),i}function s(t){return F&&(t+=/\?/.test(t)?"&":"?",t+=F),t}function a(t,n){var i=y.post.findById(n)||v;return e.render(t,i)}function o(t){return I.find("."+k.floorCls.oprtBar+"["+k.dataAtr.postId+"='"+t+"']")}function r(t){return t.parentToLevel(2).attr(k.dataAtr.postId)}function l(){var n=I.find("."+k.barCls.input);t.global.user?n.each(function(){var t,n,i=e(this);i.hasCls(k.stateCls.writeMode)&&(t=e.trim(i.find("."+k.formCls.cntBox).val()),n=e.trim(i.find("."+k.formCls.pidBox).val()),i.after(e.render(w.inputBar.writeMode,{content:t,parentId:n})),i.remove())}):_.init(b,function(e){e&&(t.global.user=x=e,l())})}function c(){x||t.global.user||(m=_.loadURS()),t.checkBindPhone()}function d(t){}function p(e){var n=window.wm||null;n&&n.getToken(t.setting.businessId,function(t){e(t)})}function u(){/^(\S+\.){2}163.com$/.test(v.host)&&(v.host=RegExp.$1+"163.com"),k.specChannels[v.host]&&(v.host=k.specChannels[v.host])}function h(n){var i=t.view.wrapper.find("."+k.barCls.input),s=k.eventCls.submitBtn,a=k.stateCls.checkAcnt,o=k.stateCls.checkPwd;k.stateCls.inputFold,k.eventCls.inputBar;e(n.target).hasCls(s)||!i.hasCls(a)&&!i.hasCls(o)||i.delCls(a).delCls(o)}function f(){e.getData({url:"https://news.163.com/special/00014P2P/common_article_tiead.js",jsonpCallback:"adimgcallback"},function(t){var n=e("#tie-box-ad-201711"),i=n.find("img"),s=n.find("a");t&&t.src?(n.show(),i.attr("src",t.src),s.attr("href",t.link)):n.hide()})}var m,v={},g=!1,b={},w=t.tpl,y={},T={},C={},k=t.setting,_=t.model.user,x=null,I={},S=!1,P=n("test"),j=1==P?k.testBaseDataURL:k.baseDataURL,B="offset=<% this.offset %>&limit=<% this.limit %>&showLevelThreshold=<% this.showLevelThreshold %>&headLimit=<% this.headLimit %>&tailLimit=<% this.tailLimit %>",N=j+"/threads/<% this.docId %>",L=N+"/comments/<% this.hot %>List?"+B,A=N+"/comments/<% this.xin %>List?"+B,E=N+"/comments",D=E+"/<% this.commentId %>/action/upvote",U=E+"/<% this.commentId %>/action/against",R=E+"/<% this.commentId %>/action/fav",M=E+"/<% this.commentId %>/action/cancleFav",F="ibc=jssdk",z={offset:0,limit:30,showLevelThreshold:70,headLimit:1,tailLimit:2};t.api={getThreadInfo:function(t){if(i(arguments,1)){var n=e.render(N,b);n=s(n),e.getData({url:n},t)}},getHotList:function(t,n,a){if(i(arguments,3)){var o={offset:(t-1)*n,limit:n,hot:g?"specHot":"hot"},r=e.render(L,e.extend(b,z,o));r=s(r),e.getData({url:r},a)}},buildHotView:function(t){this.getHotList(t||1,b.hotSize,function(t){var e=T.hotView.show(),n=e.find("."+k.listCls),i=(e.find("."+k.emptyTipCls),y.post.adaptData(t));n.html(y.post.buildView(i)),i.length<=0?e.hide():y.post.cache(i)})},getNewList:function(t,n,a){if(i(arguments,3)){var o={offset:(t-1)*n,limit:n,xin:g?"specNew":"new"},r=e.render(A,e.extend(b,z,o));r=s(r),e.getData({url:r},a)}},buildNewView:function(n){var n=n||1,i=T.newView;0!==v.tcount&&(i.show(),this.getNewList(n,b.newSize,function(s){var a=i.find("."+k.listCls),o=i.find("."+k.emptyTipCls),r=y.post.adaptData(s);e.extend(t.global.page={},{total:Math.ceil(s.newListSize/b.newSize),current:n}),a.html(y.post.buildView(r)),b.showPaging&&(a.next().hasCls(k.barCls.page)&&a.next().remove(),a.after(e.render(w.pagingPart,t.global.page))),r.length<=0?(o.show(),i.hide()):y.post.cache(r)}))},buildPage:function(){if(!S){if("off"===v.status.web)return void I.remove();T.hotView=I.find("#"+k.barId.hotList).hide(),T.newView=I.find("#"+k.barId.newList).hide(),T.noneTieView=I.find("#"+k.barId.noneTie),T.inputBar=I.find("."+k.barCls.input),b.isShowComments&&e.each(b.mods,function(n,i){var s=e.trim(i);t.api["build"+(s.substring(0,1).toUpperCase()+s.substring(1))]()}),v.tcount>0&&T.noneTieView.hide(),S=!0}}},t.operator={},t.operator.comment=function(t,n){var i=a(E,t.parentId||v.docId);i=s(i),e.getData({url:i,type:"POST",data:e.extend({},t,{parentId:t.parentId.split("_")[1]}),dataType:"json"},n)},t.operator.up=function(t,n,i){var o=a(D,t);o=s(o),e.getData({url:o,type:"POST",data:n,dataType:"json"},function(e){i&&i(t,e)})},t.operator.down=function(t,n,i){var o=a(U,t);o=s(o),e.getData({url:o,type:"POST",data:n,dataType:"json"},function(e){i&&i(t,e)})},t.operator.fav=function(t,n){var i=a(R,t);i=s(i),e.getData({url:i,type:"POST",dataType:"unknown"},function(e){var i=o(t).find("."+k.oprtBtnCls.fav);i.delCls(k.oprtBtnCls.fav).addCls(k.oprtBtnCls.cancelFav),i.html(k.oprtBtnTxt.cancelFav),n&&n(e)})},t.operator.cancelFav=function(t,n){var i=a(M,t);i=s(i),e.getData({url:i,type:"POST",dataType:"unknown"},function(e){var i=o(t).find("."+k.oprtBtnCls.cancelFav);i.delCls(k.oprtBtnCls.cancelFav).addCls(k.oprtBtnCls.fav),i.html(k.oprtBtnTxt.fav),n&&n(e)})},y={post:function(t,n,i){var s,a=n.user,o=this;e.extend(this,{id:t,oldId:n.postId&&n.postId.substring(n.postId.indexOf("_")+1),anonymous:n.anonymous,boardId:v.boardId,commentId:n.commentId,photo:a.avatar,pubTime:n.createTime,up:n.vote,down:n.against,nickname:a.nickname,authInfo:a.authInfo,from:a.location,threadId:n.postId.substring(0,n.postId.indexOf("_"))||v.docId,docId:n.postId.substring(0,n.postId.indexOf("_"))||v.docId,cnt:n.content,ip:n.ip||"",userId:a.id||a.userId,userNId:a.userId,voice:o.getVoice(n),source:n.source,shareCount:n.shareCount,favCount:n.favCount,productKey:n.productKey||b.productKey,siteName:n.siteName||"\u7f51\u6613",isUnicom:n.productKey!==b.productKey,type:"trunk",order:1,fresh:n.fresh||!1,groupMemberSize:1}),s=a.title,s&&e.extend(this,{title:s.titleName,titleURL:s.url||k.defaultUserTitleLink,titleInfo:s.info}),g?e.extend(this,{boardId:i.boardId,threadId:i.docId,essayTitle:i.title,essayURL:i.url}):e.extend(this,{id:this.threadId+"_"+this.id})}},y.post.fn=e.extend(y.post.prototype,{getVoice:function(t){var e=null;return e},checkCnt:function(){var t=!1,n="",i=i;return this.cnt=e.trim(this.cnt),this.cnt?/<|>/g.test(this.cnt)?n=i.msg.illegalChar:this.cnt.length>1e3||this.cnt.length<2?n=i.msg.postCntLong:t=!0:n=i.msg.postCntEmpty,{flag:t,msg:n}}}),y.post.init=function(t,n){return{fresh:!0,type:"trunk",pubTime:e.formatDate(),from:"",photo:n.avatar||b.faceUrl,cnt:t,nickname:n.nickname,auditStatus:v.isAudit}},y.post._store=[],y.post.cache=function(t){return t?void(e.isArray(t)?y.post._store=y.post._store.concat(t):y.post._store.push(t)):y.post._store},y.post.adaptData=function(t){var n,i,s,a,o,r,l=t.comments,c=[];n=g?t.commentIdsAndDocId:t.commentIds;for(var d=0;d<n.length;d++){g?(s=n[d].commentIds.split(","),s=e.map(s,function(t){return n[d].docId+"_"+t})):s=n[d].split(","),i=[];for(var p=s.length,u=0;u<p;u++)a=s[u],l[a]&&!l[a].isDel&&(g?(r=t.threads[n[d].docId],o=new y.post(a,l[a],r)):o=new y.post(a,l[a]),o.order=u+1,p!==u+1&&(o.type="quote"),o.groupMemberSize=p,i.push(o));c[d]=i}return c},y.post.buildQuoteNode=function(t,n){var i,s="",a=t.length,o=w.floorPost.upperPart,r=w.floorPost.lowerPart,l=w.floorPost.middlePart,c=e.render;if(a>=b.startHideMdl&&"off"===n){var d=c(o,t[0])+c(r,t[0]),p=c(o,{order:2})+d+c(l,{hideMdlNum:a-2}),u=c(o,t[a-1])+p+c(r,t[a-1]);s=u}else if(b.nestedHierarchy>a)for(var h=0;h<a;h++)i=t[h],s=c(o,i)+s+c(r,i);else for(var f=Math.round(b.nestedHierarchy/2),h=0;h<a;h++)i=t[h],s=h<f||h>a-f?c(o,i)+s+c(r,i):s+c(o,i)+c(r,i);return s},y.post.buildTrunkNode=function(t,n){var i=t.length,s=t[i-1],a=t.slice(0,i-1),n=n||"off";return e.render(w.trunkPost.upperPart,s)+y.post.buildQuoteNode(a,n)+e.render(w.trunkPost.lowerPart,s)},y.post.newTrunkNode=function(t,n){if(t){var i=y.post.findTopsInGroup(t);i.length;return e.render(w.trunkPost.upperPart,n)+y.post.buildQuoteNode(i,!1)+e.render(w.trunkPost.lowerPart,n)}return e.render(w.trunkPost.upperPart,n)+e.render(w.trunkPost.lowerPart,n)},y.post.buildView=function(t){for(var e="",n=0,i=t.length;n<i;n++)e+=y.post.buildTrunkNode(t[n]);return e},y.post.findGroupById=function(t,e){for(var n=null,i=0;i<t.length;i++){n=t[i];var s=n.length-1;if(n[s].id===e)return n}},y.post.findTopsInGroup=function(t,e){for(var n,e=e||y.post.cache(),i=null,s=0;s<e.length;s++){i=e[s];for(var a=0;a<i.length;a++)if(n=i[a],n.id===t)return i.slice(0,a+1)}},y.post.findById=function(t,e){for(var n,e=e||y.post.cache(),i=null,s=0;s<e.length;s++){i=e[s];for(var a=0;a<i.length;a++)if(n=i[a],n.id===t)return n}},C={create:function(t){var n=function(){this.init.apply(this,arguments)};return n.fn=n.prototype,n.fn.init=function(){},n.fn.eventSplitter=/^(\w+)\s*(.*)$/,n.fn.delegateEvents=function(){for(var t in this.events){var n=this.events[t],i=this[n],s=t.match(this.eventSplitter),a=s[1],o=e.render(s[2],k);""===o?this.el.on(a,i):this.el.on(a,o,i)}},n.fn.$=function(t){return e(t,this.el[0])},n.fn.refreshElements=function(){for(var t in this.elements)this[this.elements[t]]=this.$(t)},n.include=function(t){e.extend(this.fn,t)},t&&n.include(t),n}},C.viewCtrl=C.create({events:{"click .<% this.eventCls.inputBar %>":"changeInputState","click .<% this.floorCls.trunk %> .<% this.floorCls.middle %>":"expandMdlFlr","click .<% this.floorCls.trunk %> .<% this.oprtBtnCls.reply %>":"buildReplyBox","click .<% this.floorCls.trunk %> .<% this.oprtBtnCls.up %>":"upPost","click .<% this.floorCls.trunk %> .<% this.oprtBtnCls.down %>":"downPost","click .<% this.floorCls.trunk %> .<% this.oprtBtnCls.fav %>":"favPost","click .<% this.floorCls.trunk %> .<% this.oprtBtnCls.cancelFav %>":"cancelFavPost","click .<% this.floorCls.trunk %> .<% this.oprtBtnCls.share %>":"shareWin","click .<% this.barCls.page %> .<% this.pageCls.actionBtn %>, .<% this.barCls.page %> .<% this.pageCls.numBtn %>":"changePage","click .<% this.eventCls.submitBtn %>":"submitPost","click .<% this.eventCls.acntEmpty %>":"hideUserInputTip","click .<% this.eventCls.pwdEmpty %>":"hideUserInputTip","blur .<% this.eventCls.acntInput %>":"showUserInputTip","blur .<% this.eventCls.pwdInput %>":"showUserInputTip","click .<% this.barCls.input %>":"lazyLoadURS","click .tie-ad-bar .ad_close_fixed":"hideAD","click a":"statistic","keyup .<% this.eventCls.pwdInput %>":"enterLogin"},init:function(n){try{document.domain="163.com"}catch(i){e.log(i)}this.el=n,this.refreshElements(),this.delegateEvents(),e(document.body).on("click",function(n){var i=e(n.target);i.hasCls(k.oprtBtnCls.share)||t.share.hide()})},changeInputState:function(t){var n=e(this),i=k.stateCls.inputFold;k.stateCls.writeMode;n.hasCls(i)&&n.delCls(i),h(t)},showCntTip:function(t){!e.trim(e(this).val())&&e(this).next().show()},submitPost:function(n){var i,s,a,o,r=e(this);x||t.global.user?(s=r.parent().prev(),a=e.getFormData(s),k.callback.beforeSubmitPost(a)&&!t.requireBindPhone()&&(s.child(0).val(""),o=window.open("about:blank","_blank"),a.parentId&&(a.fromDocId=v.docId),p(function(n){a.token=n,t.operator.comment(a,function(t){if(t&&t.code&&40110==t.code)return void(t.message&&alert(t.message));var n;"commentPage"===b.submitType?v.isAudit&&e.cookie.set(e.render(k.cookie.newTieId),t.postId,"3m",k.cookie.domain,"/"):(n=y.post.init(a.content,x),T.hotView.find("."+k.listCls).prepend(y.post.newTrunkNode(a.parentId,n))),d(a.parentId?k.statistic.replySubmit:k.statistic.postSubmit)})}),e.cookie.set(k.cookie.toCommentPage,1,.6,k.cookie.domain,"/"),o.location.href=v.commentPageURL)):(i=r.prev().prev(),_.beforeLogin(i)&&_.login(i.attr("action"),e.getFormData(i),function(e){"success"===e.status?_.init(b,function(e){t.global.user=x=e,x&&l(),_.loginSuccess(x),d(k.statistic.loginSubmit)}):_.loginFailure(r,x)},i))},expandMdlFlr:function(t){t.preventDefault();var n=e(this),i=n.parents()[5],i=e(i),s=i.attr(k.dataAtr.postId),a=y.post.findGroupById(y.post.cache(),s);d(n.child(0).attr("statistic")),i.before(y.post.buildTrunkNode(a,"on")),i.remove()},buildReplyBox:function(t){var n,i,s,a=e(this),o=r(a),l=k.stateCls,d=k.listCls;a.tglCls(l.active),i=a.hasCls(l.active),I.find("."+d).find("."+k.barCls.input).remove(),I.find("."+d).find("."+k.oprtBtnCls.reply).delCls(l.active),I.find("."+d).find("."+k.floorCls.arrow).hide(),I.find("."+d).find("."+k.floorCls.toolBar).delCls(l.visible),i&&(a.addCls(l.active),a.parentToLevel(3).addCls(l.visible),a.next().show(),n=a.parentToLevel(3),n.after(e.render(w.inputBar.writeMode,{parentId:o,state:"reply"})),s=n.next(),s.find("."+k.formCls.cntBox)[0].focus()),c()},upPost:function(n){var i=r(e(this)),s=e(this).prev();p(function(n){t.operator.up(i,{token:n},function(t,n){if(n&&n.code&&40110==n.code)return void(n.message&&alert(n.message));var i=o(t).find("."+k.oprtBtnCls.up);i.each(function(t){var n=e(this),i=n.child(0),s=parseInt(i.attr(k.dataAtr.postUp))+1+"";i.html(s),i.attr(k.dataAtr.postUp,s),n.addCls(k.stateCls.visited).delCls(k.oprtBtnCls.up)}),s.addCls(k.stateCls.visible)})})},enterPost:function(t){e(this).addCls("hover-txt")},leavePost:function(t){e(this).delCls("hover-txt")},downPost:function(n){var i=r(e(this)),s=e(this).prev();p(function(n){t.operator.down(i,{token:n},function(t,n){if(n&&n.code&&40110==n.code)return void(n.message&&alert(n.message));var i=o(t).find("."+k.oprtBtnCls.down);i.each(function(t){var n=e(this),i=n.child(0),s=parseInt(i.attr(k.dataAtr.postDown))+1+"";i.html(s),i.attr(k.dataAtr.postDown,s),n.addCls(k.stateCls.visited).delCls(k.oprtBtnCls.down)}),s.addCls(k.stateCls.visible)})})},favPost:function(n){var i=r(e(this));t.operator.fav(i,function(){})},cancelFavPost:function(n){var i=r(e(this));t.operator.cancelFav(i)},shareWin:function(n){var i=e(this),s=r(i),a=y.post.findById(s);t.share.show(v,a,i)},changePage:function(n){n.preventDefault();var i=e(n.target),s=t.global.page,a=s.current;i.attr(k.dataAtr.page.prev)?s.current>1&&a--:i.attr(k.dataAtr.page.next)?s.current<s.total&&a++:i.attr(k.dataAtr.page.num)&&(a=parseInt(i.attr(k.dataAtr.page.num))),s.current!==a&&t.api.buildNewView(a)},showUserInputTip:function(t){e.trim(e(this).val())||e(this).next().show()},hideUserInputTip:function(t){e(this).hide().prev()[0].focus()},lazyLoadURS:function(t){c()},hideAD:function(t){e("#tie-box-ad-201711").hide()},statistic:function(t){e(this).attr("statistic")&&d(e(this).attr("statistic"))},enterLogin:function(n){if(13===n.keyCode){var i=e(this).parent(),s=e(this);_.beforeLogin(i)&&_.login(i.attr("action"),e.getFormData(i),function(e){"success"===e.status?_.init(b,function(e){t.global.user=x=e,x&&l(),_.loginSuccess(x)}):_.loginFailure(s,x)},i)}}}),t.refreshUserView=l,t.operator.actionStatistic=d,t.view=t.view||{},t.init=function(n,i){e.extend(b,k.defaultConfig,n),1==P&&(b.productKey="aac69c917e1787ad7bd86cd86afe6efc",e.cookie.set("NTES_CMT_USER_INFO","40852398|qi0428ru||false|cWkwNDI4cnVAMTYzLmNvbQ==","","126.net","/"),e.cookie.set("NTES_SESS","rlIyj0uFmQNetrGqlQU_9z42ZjQl3LLZxNxBMFgrxv9lzSAkzfcxNL7sGtPCq6mglKt4wdVv92is2i2vMKAGIXoKIHFUm1p3WBIoor55SMk29QibTTG21TX85wkopAsuGOpVEyXfbj4Uc9u7Ei_iYLrIqM9Qu8z.bNCJtZZIpEVEAwkJ6ZlfZqYhoFsCziwhF","","126.net","/"),e.cookie.set("NTES_PASSPORT","pCw_Aelc7fjyNSsubA3F5Iy_f_Sg2O7J_yKx.P5LTBSSGTk4G2l_fIC5bguzh7KoxXVMHeekubLdH7nS1zpS5MFViZ4yRDuefdWKyFjuTpndl0q92CSmA3UIMnAMvfTrrbgkJq6gO7IPJUF0N1qPN5s6nSKHtwOxj_SEiCZnjnM70","","126.net","/")),t.model=y,t.api.getThreadInfo(function(n){v=n,v.joinCount=v.cmtCount,v.productKey=b.productKey,window.tieChannel?v.host=window.tieChannel+".163.com":v.host=v.url.substring(7,v.url.indexOf("/",9)),u(),v.commentPageURL="http://comment.tie.163.com/"+v.docId+".html",g=0===v.docId.indexOf("SPEC"),e.extend(t.global=t.global||{},{config:b,threadInfo:v}),t.view.hideInputCheckTips=h,_.init(b,function(n){t.global.user=x=n,t.view.wrapper=I=e(b.target).append(e.render(w.layout)).find("#"+k.wrapperId),e.loadScript("//news.163.com/special/00014P2P/face_map.js","gbk"),new C.viewCtrl(I),t.api.buildPage(),f(),i&&i(v),"function"==typeof window.containerHandle&&window.containerHandle(t),S=!1})})}}(window.Tie,window.Tie.tool),function(t){function e(t,e){var n=o.render("https://comment.api.163.com/api/v1/products/<% this.productKey %>"+t+c,{productKey:"a2869674571f77b5a0867c3d71db5856"});return e&&(n=n+"&"+o.serialize(e)),n}function n(){r&&(r.prev().remove(),r.remove())}function i(){var i=t.operator.actionStatistic;r.on("focus","#phone-bind-NO",function(){var t=o("#error-bind-tips");t.hide().html("")}),r.on("focus","#sms-bind-code",function(){var t=o("#error-bind-tips");t.hide().html("")}),r.on("input","input[type='text']",function(){o(this).val().length>0?o(this).next().hide():o(this).next().show()}),r.on("click",".close-btn",function(){n(),i("blindPopup_close")}),r.on("click",".skip-btn",function(){n();var e=l+"_"+t.global.user.userId;o.cookie.set(e,1,"6M",t.setting.cookie.domain,"/"),i("blindPopup_skipBtn")}),r.on("click",".bind-btn",function(){r.css({height:"380px"}),r.html(v[2]),i("blindPopup_blindBtn")}),r.on("click",".code-btn",function(){var t=o(this),n=90,s=o.trim(o("#phone-bind-NO").val()),a=o("#error-bind-tips");p.test(s)?u&&o.getData({url:e(d.getSmsCode,{phone:s})},function(e){200===e.code?(u=!1,h=setInterval(function(){t.html("\u91cd\u65b0\u83b7\u53d6\uff08"+n--+"\uff09").addCls("z-disable"),0===n&&(clearInterval(h),u=!0,t.html("\u83b7\u53d6\u9a8c\u8bc1\u7801").delCls("z-disable"))},1e3)):a.show().html("<i></i>"+e.message)}):a.show().html("<i></i>"+m.phone),i("blindPopup_PINBtn")}),r.on("click",".submit-btn",function(){var t=o.trim(o("#phone-bind-NO").val()),n=o.trim(o("#sms-bind-code").val()),s=o("#error-bind-tips"),a="";p.test(t)&&/\d{6}/.test(n)?(s.hide(),o.getData({url:e(d.bindPhone,{phone:t,captcha:n})},function(t){200===t.code?(r.html(v[4]),s.hide()):s.show().html("<i></i>"+t.message)})):(p.test(t)?""===n?a=m.smsNoCode:/\d{6}/.test(n)||(a=m.smsCode):a=m.phone,s.show().html("<i></i>"+a)),i("blindPopup_okBtn")})}function s(){var e=l+"_"+t.global.user.userId,n=o.cookie.get(e),s=!0;return f&&!f.isBind&&t.global.user&&(2===f.switchStatus||1===f.switchStatus&&!n)?(r=o(document.body).append("<div class='phone-bind-mask'></div><div id='phone-bind-20170911' class='rename-alert-msg'></div>").child(-1),r.html(v[1]),i()):s=!1,s}function a(){!t.bindSwitch&&t.global.user&&o.getData({url:e(d.getSwitch)},function(e){t.bindSwitch=f=e})}var o=t.tool,r=null,l="SKIP_BIND_PHONE",c="?ibc=jssdk",d={getSwitch:"/users/bindPhStatus",getSmsCode:"/users/realname/smscaptcha",bindPhone:"/users/realname/bind"},p=/^1[0-9]{10}$/,u=!0,h=null,f=null,m={phone:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7",smsNoCode:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",smsCode:"\u9a8c\u8bc1\u7801\u4e0d\u6b63\u786e"},v={1:['<div class="rename-header">','<a href="javascript:;" class="close-btn"></a>',"<h3>\u624b\u673a\u7ed1\u5b9a</h3>","</div>",'<p class="des">\u8fd9\u4f4d\u6613\u53cb\u8bf7\u5148\u4f4f\u624b\uff0c\u636e\u8bf4\u7ed1\u5b9a\u624b\u673a\u53f7\u624d\u662f\u6b63\u786e\u7684\u53d1\u8d34\u59ff\u52bf\u54e6\u3002</p>','<div class="rename-btns">','<a class="skip-btn" href="javascript:void(0);">\u53d6\u6d88</a>','<a class="bind-btn" href="javascript:void(0);">\u53bb\u7ed1\u5b9a</a>',"</div>"].join(""),2:['<div class="rename-header">','<a href="javascript:void(0);" class="close-btn"></a>',"<h3>\u624b\u673a\u7ed1\u5b9a</h3>","</div>",'<div class="rename-form">','<div class="input-txt">','<input type="text" id="phone-bind-NO" maxlength="11"/>','<span class="input-tips">\u8bf7\u8f93\u5165\u624b\u673a\u53f7</span>',"</div>",'<div class="input-txt last clearfix">','<input type="text" class="code-input" id="sms-bind-code" maxlength="6"/>','<span class="input-tips">\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801</span>','<a class="code-btn" href="javascript:void(0);">\u83b7\u53d6\u9a8c\u8bc1\u7801</a>',"</div>",'<p class="error-tips" id="error-bind-tips" style="display: none;"><i></i>\u624b\u673a\u53f7\u7801\u6216\u9a8c\u8bc1\u7801\u683c\u5f0f\u9519\u8bef</p>','<a class="submit-btn">\u786e\u5b9a</a>','<a class="no-code" href="javascript:void(0);">',"<span>\u6536\u4e0d\u5230\u9a8c\u8bc1\u7801\uff1f</span>",'<div class="tips-sec hidden">',"<p>1.\u8bf7\u786e\u8ba4\u624b\u673a\u53f7\u662f\u5426\u6b63\u786e</p>","<p>2.\u8bf7\u786e\u8ba4\u624b\u673a\u6ca1\u6709\u5904\u4e8e\u505c\u673a/\u65e0\u4fe1\u53f7\u72b6\u6001</p>","<p>3.\u8bf7\u68c0\u67e5\u77ed\u4fe1\u662f\u5426\u88ab\u5b89\u5168\u8f6f\u4ef6\u62e6\u622a</p>","<em></em>","</div>","</a>","</div>"].join(""),3:['<div class="rename-header">','<a href="javascript:;" class="close-btn"></a>',"<h3>\u7ed1\u5b9a\u63d0\u793a</h3>","</div>",'<p class="des">\u4f60\u7684\u6d4f\u89c8\u5668\u592a\u5dee\u4e86\uff0c\u4f60\u7684\u6d4f\u89c8\u5668\u592a\u5dee\u4e86\uff0c\u4f60\u7684\u6d4f\u89c8\u5668\u592a\u5dee\u4e86\uff0c\u53bb\u66f4\u65b0\uff01</p>','<div class="rename-btns">','<a class="submit-btn">\u786e\u5b9a</a>',"</div>"].join(""),4:['<div class="rename-header">','<a href="javascript:;" class="close-btn"></a>',"</div>",'<div class="rename-success">',"<span></span>","<p>\u7ed1\u5b9a\u6210\u529f</p>","</div>"].join("")};t.checkBindPhone=a,t.requireBindPhone=s}(window.Tie);
