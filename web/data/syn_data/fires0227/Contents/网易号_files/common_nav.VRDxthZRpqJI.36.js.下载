(function(){var e,t,n,i,o,r,s,a,u,c,l,d,m=[].slice,h=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},f={}.hasOwnProperty,p=function(e,t){function n(){this.constructor=e}for(var i in t)f.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},g=function(e,t){return function(){return e.apply(t,arguments)}};n={bind:function(e,t){var n,i,o,r,s;for(i=e.split(" "),n=this.hasOwnProperty("_callbacks")&&this._callbacks||(this._callbacks={}),r=0,s=i.length;r<s;r++)o=i[r],n[o]||(n[o]=[]),n[o].push(t);return this},one:function(e,t){return this.bind(e,function(){return this.unbind(e,arguments.callee),t.apply(this,arguments)})},trigger:function(){var e,t,n,i,o,r,s;if(e=1<=arguments.length?m.call(arguments,0):[],n=e.shift(),i=this.hasOwnProperty("_callbacks")&&(null!=(s=this._callbacks)?s[n]:void 0)){for(o=0,r=i.length;o<r&&(t=i[o],t.apply(this,e)!==!1);o++);return!0}},unbind:function(e,t){var n,i,o,r,s,a;if(!e)return this._callbacks={},this;if(o=null!=(a=this._callbacks)?a[e]:void 0,!o)return this;if(!t)return delete this._callbacks[e],this;for(i=r=0,s=o.length;r<s;i=++r)if(n=o[i],n===t){o=o.slice(),o.splice(i,1),this._callbacks[e]=o;break}return this}},i={trace:!0,logPrefix:"(App)",log:function(){var e;if(e=1<=arguments.length?m.call(arguments,0):[],this.trace)return this.logPrefix&&e.unshift(this.logPrefix),"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log.apply(console,e),this}},d=["included","extended"],r=function(){function e(){"function"==typeof this.init&&this.init.apply(this,arguments)}return e.include=function(e){var t,n,i;if(!e)throw new Error("include(obj) requires obj");for(t in e)n=e[t],h.call(d,t)<0&&(this.prototype[t]=n);return null!=(i=e.included)&&i.apply(this),this},e.extend=function(e){var t,n,i;if(!e)throw new Error("extend(obj) requires obj");for(t in e)n=e[t],h.call(d,t)<0&&(this[t]=n);return null!=(i=e.extended)&&i.apply(this),this},e.proxy=function(e){var t=this;return function(){return e.apply(t,arguments)}},e.prototype.proxy=function(e){var t=this;return function(){return e.apply(t,arguments)}},e}(),o=function(t){function i(e){i.__super__.constructor.apply(this,arguments),e&&this.load(e),this.cid=this.constructor.uid("c-")}return p(i,t),i.extend(n),i.records={},i.crecords={},i.attributes=[],i.configure=function(){var e,t;return t=arguments[0],e=2<=arguments.length?m.call(arguments,1):[],this.className=t,this.records={},this.crecords={},e.length&&(this.attributes=e),this.attributes&&(this.attributes=l(this.attributes)),this.attributes||(this.attributes=[]),this.unbind(),this},i.toString=function(){return""+this.className+"("+this.attributes.join(", ")+")"},i.find=function(e){var t;if(t=this.records[e],!t&&(""+e).match(/c-\d+/))return this.findCID(e);if(!t)throw new Error("Unknown record");return t.clone()},i.findCID=function(e){var t;if(t=this.crecords[e],!t)throw new Error("Unknown record");return t.clone()},i.exists=function(e){try{return this.find(e)}catch(t){return!1}},i.refresh=function(e,t){var n,i,o,r;for(null==t&&(t={}),t.clear&&(this.records={},this.crecords={}),i=this.fromJSON(e),u(i)||(i=[i]),o=0,r=i.length;o<r;o++)n=i[o],n.id||(n.id=n.cid),this.records[n.id]=n,this.crecords[n.cid]=n;return this.trigger("refresh",this.cloneArray(i)),this},i.select=function(e){var t,n,i;return i=function(){var i,o;i=this.records,o=[];for(t in i)n=i[t],e(n)&&o.push(n);return o}.call(this),this.cloneArray(i)},i.findByAttribute=function(e,t){var n,i,o;o=this.records;for(n in o)if(i=o[n],i[e]===t)return i.clone();return null},i.findAllByAttribute=function(e,t){return this.select(function(n){return n[e]===t})},i.each=function(e){var t,n,i,o;i=this.records,o=[];for(t in i)n=i[t],o.push(e(n.clone()));return o},i.all=function(){return this.cloneArray(this.recordsValues())},i.first=function(){var e;return e=this.recordsValues()[0],null!=e?e.clone():void 0},i.last=function(){var e,t;return t=this.recordsValues(),e=t[t.length-1],null!=e?e.clone():void 0},i.count=function(){return this.recordsValues().length},i.deleteAll=function(){var e,t,n,i;n=this.records,i=[];for(e in n)t=n[e],i.push(delete this.records[e]);return i},i.destroyAll=function(){var e,t,n,i;n=this.records,i=[];for(e in n)t=n[e],i.push(this.records[e].destroy());return i},i.update=function(e,t,n){return this.find(e).updateAttributes(t,n)},i.create=function(e,t){var n;return n=new this(e),n.save(t)},i.destroy=function(e,t){return this.find(e).destroy(t)},i.change=function(e){return"function"==typeof e?this.bind("change",e):this.trigger("change",e)},i.fetch=function(e){return"function"==typeof e?this.bind("fetch",e):this.trigger("fetch",e)},i.toJSON=function(){return this.recordsValues()},i.fromJSON=function(e){var t,n,i,o;if(e){if("string"==typeof e&&(e=JSON.parse(e)),u(e)){for(o=[],n=0,i=e.length;n<i;n++)t=e[n],o.push(new this(t));return o}return new this(e)}},i.fromForm=function(){var e;return(e=new this).fromForm.apply(e,arguments)},i.recordsValues=function(){var e,t,n,i;t=[],i=this.records;for(e in i)n=i[e],t.push(n);return t},i.cloneArray=function(e){var t,n,i,o;for(o=[],n=0,i=e.length;n<i;n++)t=e[n],o.push(t.clone());return o},i.idCounter=0,i.uid=function(e){var t;return null==e&&(e=""),t=e+this.idCounter++,this.exists(t)&&(t=this.uid(e)),t},i.prototype.isNew=function(){return!this.exists()},i.prototype.isValid=function(){return!this.validate()},i.prototype.validate=function(){},i.prototype.load=function(e){var t,n;for(t in e)n=e[t],"function"==typeof this[t]?this[t](n):this[t]=n;return this},i.prototype.attributes=function(){var e,t,n,i,o;for(t={},o=this.constructor.attributes,n=0,i=o.length;n<i;n++)e=o[n],e in this&&("function"==typeof this[e]?t[e]=this[e]():t[e]=this[e]);return this.id&&(t.id=this.id),t},i.prototype.eql=function(e){return!!(e&&e.constructor===this.constructor&&e.cid===this.cid||e.id&&e.id===this.id)},i.prototype.save=function(e){var t,n;return null==e&&(e={}),e.validate!==!1&&(t=this.validate())?(this.trigger("error",t),!1):(this.trigger("beforeSave",e),n=this.isNew()?this.create(e):this.update(e),this.trigger("save",e),n)},i.prototype.updateAttribute=function(e,t,n){return this[e]=t,this.save(n)},i.prototype.updateAttributes=function(e,t){return this.load(e),this.save(t)},i.prototype.changeID=function(e){var t;return t=this.constructor.records,t[e]=t[this.id],delete t[this.id],this.id=e,this.save()},i.prototype.destroy=function(e){return null==e&&(e={}),this.trigger("beforeDestroy",e),delete this.constructor.records[this.id],delete this.constructor.crecords[this.cid],this.destroyed=!0,this.trigger("destroy",e),this.trigger("change","destroy",e),this.unbind(),this},i.prototype.dup=function(e){var t;return t=new this.constructor(this.attributes()),e===!1?t.cid=this.cid:delete t.id,t},i.prototype.clone=function(){return a(this)},i.prototype.reload=function(){var e;return this.isNew()?this:(e=this.constructor.find(this.id),this.load(e.attributes()),e)},i.prototype.toJSON=function(){return this.attributes()},i.prototype.toString=function(){return"<"+this.constructor.className+" ("+JSON.stringify(this)+")>"},i.prototype.fromForm=function(t){var n,i,o,r,s;for(i={},s=e(t).serializeArray(),o=0,r=s.length;o<r;o++)n=s[o],i[n.name]=n.value;return this.load(i)},i.prototype.exists=function(){return this.id&&this.id in this.constructor.records},i.prototype.update=function(e){var t,n;return this.trigger("beforeUpdate",e),n=this.constructor.records,n[this.id].load(this.attributes()),t=n[this.id].clone(),t.trigger("update",e),t.trigger("change","update",e),t},i.prototype.create=function(e){var t,n;return this.trigger("beforeCreate",e),this.id||(this.id=this.cid),n=this.dup(!1),this.constructor.records[this.id]=n,this.constructor.crecords[this.cid]=n,t=n.clone(),t.trigger("create",e),t.trigger("change","create",e),t},i.prototype.bind=function(e,t){var n,i,o=this;return this.constructor.bind(e,n=function(e){if(e&&o.eql(e))return t.apply(o,arguments)}),this.constructor.bind("unbind",i=function(t){if(t&&o.eql(t))return o.constructor.unbind(e,n),o.constructor.unbind("unbind",i)}),n},i.prototype.one=function(e,t){var n,i=this;return n=this.bind(e,function(){return i.constructor.unbind(e,n),t.apply(i,arguments)})},i.prototype.trigger=function(){var e,t;return e=1<=arguments.length?m.call(arguments,0):[],e.splice(1,0,this),(t=this.constructor).trigger.apply(t,e)},i.prototype.unbind=function(){return this.trigger("unbind")},i}(r),t=function(t){function o(t){this.release=g(this.release,this);var n,i,r;this.options=t,r=this.options;for(n in r)i=r[n],this[n]=i;this.el||(this.el=document.createElement(this.tag)),this.el=e(this.el),this.$el=this.el,this.className&&this.el.addClass(this.className),this.attributes&&this.el.attr(this.attributes),this.events||(this.events=this.constructor.events),this.elements||(this.elements=this.constructor.elements),this.events&&this.delegateEvents(this.events),this.elements&&this.refreshElements(),o.__super__.constructor.apply(this,arguments)}return p(o,t),o.include(n),o.include(i),o.prototype.eventSplitter=/^(\S+)\s*(.*)$/,o.prototype.tag="div",o.prototype.release=function(){return this.trigger("release"),this.el.remove(),this.unbind()},o.prototype.$=function(t){return e(t,this.el)},o.prototype.delegateEvents=function(e){var t,n,i,o,r,s,a=this;s=[];for(n in e){if(o=e[n],"function"==typeof o)o=function(e){return function(){return e.apply(a,arguments),!0}}(o);else{if(!this[o])throw new Error(""+o+" doesn't exist");o=function(e){return function(){return a[e].apply(a,arguments),!0}}(o)}i=n.match(this.eventSplitter),t=i[1],r=i[2],""===r?s.push(this.el.bind(t,o)):s.push(this.el.delegate(r,t,o))}return s},o.prototype.refreshElements=function(){var e,t,n,i;n=this.elements,i=[];for(e in n)t=n[e],i.push(this[t]=this.$(e));return i},o.prototype.delay=function(e,t){return setTimeout(this.proxy(e),t||0)},o.prototype.html=function(e){return this.el.html(e.el||e),this.refreshElements(),this.el},o.prototype.append=function(){var e,t,n;return t=1<=arguments.length?m.call(arguments,0):[],t=function(){var n,i,o;for(o=[],n=0,i=t.length;n<i;n++)e=t[n],o.push(e.el||e);return o}(),(n=this.el).append.apply(n,t),this.refreshElements(),this.el},o.prototype.appendTo=function(e){return this.el.appendTo(e.el||e),this.refreshElements(),this.el},o.prototype.prepend=function(){var e,t,n;return t=1<=arguments.length?m.call(arguments,0):[],t=function(){var n,i,o;for(o=[],n=0,i=t.length;n<i;n++)e=t[n],o.push(e.el||e);return o}(),(n=this.el).prepend.apply(n,t),this.refreshElements(),this.el},o.prototype.replace=function(t){var n,i;return i=[this.el,e(t.el||t)],n=i[0],this.el=i[1],n.replaceWith(this.el),this.delegateEvents(this.events),this.refreshElements(),this.el},o}(r),e=("undefined"!=typeof window&&null!==window?window.jQuery:void 0)||("undefined"!=typeof window&&null!==window?window.Zepto:void 0)||function(e){return e},a=Object.create||function(e){var t;return t=function(){},t.prototype=e,new t},u=function(e){return"[object Array]"===Object.prototype.toString.call(e)},c=function(e){var t;if(!e)return!0;for(t in e)return!1;return!0},l=function(e){return Array.prototype.slice.call(e,0)},s=this.Spine={},"undefined"!=typeof module&&null!==module&&(module.exports=s),s.version="1.0.8",s.isArray=u,s.isBlank=c,s.$=e,s.Events=n,s.Log=i,s.Module=r,s.Controller=t,s.Model=o,r.extend.call(s,n),r.create=r.sub=t.create=t.sub=o.sub=function(e,t){var n;return n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t}(this),e&&n.include(e),t&&n.extend(t),"function"==typeof n.unbind&&n.unbind(),n},o.setup=function(e,t){var n;return null==t&&(t=[]),n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return p(t,e),t}(this),n.configure.apply(n,[e].concat(m.call(t))),n},s.Class=r}).call(this),function(){var e=window.NTES||{};e.event||(e.event={}),e.plugin=e.plugin||{},e.event.Mouseenter=function(e,t,n){var i,o=document.createElement("div"),r="onmouseenter"in o,s=e,a="",u=n;switch(s){case"mouseenter":a="mouseover";break;case"mouseleave":a="mouseout";break;default:return null}return s=r?s:a,i=r?t:function(e){var n=e.relatedTarget;for(!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement==e.target?e.toElement:e.fromElement);n&&n!=this;)try{n=n.parentNode}catch(i){n=this}n!=this&&t.call(this,e)},u.addEvent(s,i),{eventName:s,eventHandler:i}}}(),function(e){var t=function(){var t=this;t.selector=".js_N_navSelect",t.unfoldClassName="ntes-nav-select-unfold",t.menus=e(t.selector),t.eventsCache=[],t.init(),t.prevIndex=0},n=!1;t.prototype={constructor:t,init:function(){var t=this;NTES.each(t.menus,function(i,o){var r=e(o),s={},a=NTES.event.Mouseenter("mouseenter",function(o){e(this);return t.timerList&&n?"":(n=!0,void(t.timerList&&t.prevIndex===i?(clearTimeout(t.timerList),t.timerList=void 0):t.timerList=setTimeout(function(){n&&(t.unfoldMenu(i),t.timerList=void 0)},70)))},r),u=NTES.event.Mouseenter("mouseleave",function(i){e(this);n=!1,t.timerList,t.timerList=setTimeout(function(){n||(t.foldMenu(),t.timerList=void 0)},70)},r),c=function(n){var i=e(this);i.className.indexOf(t.unfoldClassName)===-1?i.addCss(t.unfoldClassName):i.removeCss(t.unfoldClassName)},l=function(n){e(this);switch(n.keyCode){case 39:t.unfoldMenu(i);break;case 40:t.unfoldMenu(i);break;case 37:t.foldMenu();break;case 38:t.foldMenu();break;case 27:t.foldMenu()}};r.addEvent("click",c).addEvent("keydown",l),s[a.eventName]=a.eventHandler,s[u.eventName]=u.eventHandler,s.click=c,s.keydown=l,t.eventsCache.push(s)})},unfoldMenu:function(t){var n=this;e(n.menus[n.prevIndex]).removeCss(n.unfoldClassName),e(n.menus[t]).addCss(n.unfoldClassName),n.prevIndex=t},foldMenu:function(){var t=this;e(t.menus[t.prevIndex]).removeCss(t.unfoldClassName)},destory:function(e,t){var n=this;if(!e)return void NTES.each(n.menus,function(e,t){var i=n.eventsCache[e];for(var o in i)t.removeEvent(o,i[o])});var i=n._getItem(e),o=i?n.eventsCache[i.index]:null;if(i){for(var r in o)i.item.removeEvent(r,o[r]);t&&t()}},_getItem:function(t){var n=this,i=n.menus,o=0,r=i.length,s=e(t);if(!s)return null;for(s=s.get(0);o<r;o++)if(i[o].get(0)==s)return{item:i[o],index:o};return null}},e.plugin=e.plugin||{},e.plugin.NTESSelectMenu=t}(NTES),function(){var e=this,t=function(){};e.NTESCommonNavigator=e.NTESCommonNavigator||{},e.console=e.console||{log:t,error:t,trace:t,info:t},e.NTESCommonNavigator.namespace=function(){var t,n,i,o,r=arguments,s=null;for(t=0,o=r.length;t<o;t++)for(i=(""+r[t]).split("."),s=e.NTESCommonNavigator,n="NTESCommonNavigator"==i[0]?1:0;n<i.length;n+=1)s[i[n]]=s[i[n]]||{},s=s[i[n]];return s}}.call(this),NTESCommonNavigator.namespace("NTESCommonNavigator.core"),NTESCommonNavigator.core.Constant={Path:{WB_PATH:"http://t.163.com/service/newMessage/",DEFAULT_MAIL_PATH:"http://email.163.com#from=163nav_icon"},Domain:{DOMAIN:["126.com","yeah.net","163.com","188.com","vip.163.com","vip.126.com"],API:["mail.126.com","mail.yeah.net","mail.163.com","mail.188.com","vip.163.com","vip.126.com"]},PRODUCTS:{reg:{name:"\u7f51\u6613\u5e10\u53f7\u4e2d\u5fc3",url:"http://reg.163.com/Main.jsp?username=pInfo"},"163.com":{name:"\u6211\u7684\u90ae\u7bb1",url:"https://mail.163.com/entry/cgi/ntesdoor?t=1&verifycookie=1&lightweight=1&df=163navi"},"126.com":{name:"\u6211\u7684\u90ae\u7bb1",url:"https://mail.126.com/entry/cgi/ntesdoor?t=1&verifycookie=1&lightweight=1&style=-1&df=163navi"},"vip.126.com":{name:"\u6211\u7684\u90ae\u7bb1",url:"http://reg.vip.126.com/enterMail.m"},"yeah.net":{name:"\u6211\u7684\u90ae\u7bb1",url:"https://mail.yeah.net/entry/cgi/ntesdoor?t=1&verifycookie=1&lightweight=1&style=-1&def=163navi"},"188.com":{name:"\u6211\u7684\u90ae\u7bb1",url:"http://reg.mail.188.com/servlet/enter"},"vip.163.com":{name:"\u6211\u7684\u90ae\u7bb1",url:"http://reg.vip.163.com/enterMail.m?enterVip=true-----------"},lofter:{name:"\u6211\u7684LOFTER",url:"http://www.lofter.com/?act=qb163rk_20141031_02"},photo:{name:"\u6211\u7684\u76f8\u518c",url:"http://photo.163.com/?username=pInfo"},yuehui:{name:"\u6211\u7684\u540c\u57ce\u7ea6\u4f1a",url:"http://yuehui.163.com/"},blog:{name:"\u6211\u7684\u535a\u5ba2",url:"http://blog.163.com/passportIn.do?entry=163"},ht:{name:"\u6211\u7684\u82b1\u7530",url:"http://love.163.com?keyfrom=163site.mynavi"},note:{name:"\u6211\u7684\u4e91\u7b14\u8bb0",url:"http://note.youdao.com/web?entry=163.com"},caipiaoyys:{name:"\u6211\u7684\u5f69\u7968",url:"http://caipiao.163.com/#from=www_top_entry"},guijinshu:{name:"\u6211\u7684\u8d35\u91d1\u5c5e",url:"http://fa.163.com/?from=tgnwscj"},cx:{name:"\u6211\u7684\u8f66\u9669",url:"http://baoxian.163.com/car/?from=www_top_entry"},baoxian:{name:"\u6211\u7684\u4fdd\u9669",url:"http://baoxian.163.com/?from=www_top_entry"},shop:{name:"\u7f51\u6613\u5546\u57ce",url:"http://mall.163.com/#from=www_top_entry"},easyread:{name:"\u7f51\u6613\u4e91\u9605\u8bfb",url:"http://yuedu.163.com/#f=topnav"},yunketang:{name:"\u4e91\u8bfe\u5802",url:"http://study.163.com/?utm_source=163.com&utm_medium=web_ursproduct&utm_campaign=business"},kaola:{name:"\u6211\u7684\u8003\u62c9",url:"http://rd.da.netease.com/redirect?t=ZKQJgA&p=IQyfy3&proId=1024&target=http%3A%2F%2Fwww.kaola.com%2F%3Ftag%3Dbe3d8d027a530881037ef01d304eb505"}},DEFAULT_PRODUCTS:["lofter","photo","ht","yuehui","blog","note","caipiaoyys","guijinshu","cx","baoxian","shop","easyread","yunketang","kaola"],LOG_IN_OUT_URL:"https://reg.163.com/Logout.jsp"},NTESCommonNavigator.namespace("NTESCommonNavigator.core"),NTESCommonNavigator.core.Event={Base:{DATA_LOADED:"event_core_data_loaded",DATA_FAILED:"event_core_data_failed",DATA_CHANGED:"event_core_data_changed",LOGIN_SUCCESS:"event_core_login_sucess",LOGIN_FAIL:"event_core_login_fail"},Model:{MAIL_INFO_LOADED:"event_model_mail_info_loaded",LOFTER_INFO_LOADED:"event_model_lofter_info_loaded"}},NTESCommonNavigator.namespace("NTESCommonNavigator.base"),NTESCommonNavigator.base.Class=function(){var e=Spine.Class.create();Spine.Events;return e.include(Spine.Events),e.include({extend:e.extend}),new e},NTESCommonNavigator.namespace("NTESCommonNavigator.base"),NTESCommonNavigator.base.UI=function(){var e=NTESCommonNavigator.base.Class(),t=function(){};return t(),e.extend({}),e},function(){var e={"&":"&amp;","'":"&#39;",'"':"&quot;","<":"&lt;",">":"&gt;"};NTESCommonNavigator.namespace("NTESCommonNavigator.utils"),NTESCommonNavigator.utils.mix={encode:function(t){return t.replace(/[&"'<>]/g,function(t){return e[t]})}}}(),NTESCommonNavigator.namespace("NTESCommonNavigator.utils"),NTESCommonNavigator.utils.Suggestion=function(){function e(){var e=document.getElementById("js_passportUserNameList"),t=i.getXY(o.usernameInputElement).x,n=i.getXY(o.usernameInputElement).y;e.style.left=t+"px",e.style.top=n+o.usernameInputElement.offsetHeight+"px"}function t(e){var t=document.createElement("div");t.innerHTML=e,document.body.appendChild(t.firstChild),t=null}var n=NTESCommonNavigator.base.Class();String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"gm"),t)};var i={getXY:function(e){for(var t=0,n=0;e!=document.body&&null!=e;)n+=e.offsetLeft,t+=e.offsetTop,e=e.offsetParent;return{x:n,y:t}}},o={usernameInputElement:!1,usernameInputElementX:!1,usernameInputElementY:!1,usernameInputHeight:!1,usernameListElement:!1,currentSelectIndex:-1,hasShow:!1,domainSelectElmentString:'<div id = "js_passportUserNameList" class="ntes-domain-selector"  style="display: none;"><div class="ntes-domain-selector-main"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td class="ntes-domain-selector-title">\u8bf7\u9009\u62e9\u6216\u7ee7\u7eed\u8f93\u5165...</td></tr><tr><td><td /></tr></tbody></table></div><iframe src="javascript:\'\';"  style=" z-index:1008;width:100%;height:0px;display:block  " frameborder="0"></iframe></div><div style="display: none;"></div><div id="passport_111"></div>',domainSelectElement:!1,domainArray:["163.com","126.com","yeah.net","vip.163.com","vip.126.com","popo.163.com","188.com","vip.188.com","qq.com","yahoo.com","sina.com"],helpDivString:'<div style="width:100%;" id="passport_helper_div"></div>',resizeFunc:function(){var e=document.getElementById("js_passportUserNameList"),t=i.getXY(o.usernameInputElement).x,n=i.getXY(o.usernameInputElement).y;e.style.left=t+"px",e.style.top=n+o.usernameInputElement.offsetHeight+"px"},bind:function(e){this.usernameInputElement=e;var t=i.getXY(this.usernameInputElement);this.usernameInputElementX=t.x,this.usernameInputElementY=t.y,this.handle()},handle:function(){t(this.domainSelectElmentString),t(this.helpDivString),this.domainSelectElement=document.getElementById("js_passportUserNameList"),this.usernameListElement=this.domainSelectElement.firstChild.firstChild.rows[1].firstChild,this.currentSelectIndex=0,this.usernameInputElement.onblur=function(e){return o.preventEvent(e),setTimeout(function(){o.doSelect()},200),!1};try{this.usernameInputElement.addEventListener("keypress",this.keypressProc,!1),this.usernameInputElement.addEventListener("keyup",this.keyupProc,!1)}catch(n){try{this.usernameInputElement.attachEvent("onkeydown",this.checkKeyDown),this.usernameInputElement.attachEvent("onkeypress",this.keypressProc),this.usernameInputElement.attachEvent("onkeyup",this.keyupProc)}catch(n){}}e(),navigator.userAgent.indexOf("MSIE")>0?window.attachEvent("onresize",e):window.onresize=e},preventEvent:function(e){try{e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()}catch(e){}},checkKeyDown:function(e){this.currentSelectIndex=0;var t=e.keyCode;if(38==t||40==t)return o.preventEvent(e),o.clearFocus(),38==t?o.upSelectIndex():o.downSelectIndex(),o.setFocus(),!1},keyupProc:function(e){this.currentSelectIndex=0;var t=e.keyCode;o.changeUsernameSelect(),13==t&&o.doSelect();var n;return(n=navigator.userAgent.indexOf("Safari"))>0&&(38!=t&&40!=t||(o.preventEvent(e),o.clearFocus(),38==t?o.upSelectIndex():o.downSelectIndex(),o.setFocus())),!1},keypressProc:function(e){this.currentSelectIndex=0;var t=e.keyCode;13==t?o.preventEvent(e):38==t||40==t?(o.preventEvent(e),o.clearFocus(),38==t?o.upSelectIndex():o.downSelectIndex(),o.setFocus()):108!=t&&110!=t&&111!=t&&115!=t||setTimeout(function(){o.changeUsernameSelect()},20)},clearFocus:function(e){var e=this.currentSelectIndex;try{var t=this.findTdElement(e);t.style.backgroundColor="white"}catch(n){}},findTdElement:function(e){try{for(var t=this.usernameListElement.firstChild.rows,n=0;n<t.length;++n)if(t[n].firstChild.idx==e)return t[n].firstChild}catch(i){}return!1},upSelectIndex:function(){var e=this.currentSelectIndex;if(null!=this.usernameListElement.firstChild){var t,n=this.usernameListElement.firstChild.rows;for(t=0;t<n.length&&n[t].firstChild.idx!=e;++t);0==t?this.currentSelectIndex=n.length-1:this.currentSelectIndex=n[t-1].firstChild.idx}},downSelectIndex:function(){var e=this.currentSelectIndex;if(null!=this.usernameListElement.firstChild){for(var t=this.usernameListElement.firstChild.rows,n=0;n<t.length&&t[n].firstChild.idx!=e;++n);n>=t.length-1?this.currentSelectIndex=t[0].firstChild.idx:this.currentSelectIndex=t[n+1].firstChild.idx}},setFocus:function(){var e=this.currentSelectIndex;try{var t=this.findTdElement(e);t.style.backgroundColor="#D5F1FF"}catch(n){}},changeUsernameSelect:function(){var t=this.usernameInputElement.value;if(t=t.replaceAll("<",""),""==t.trim())this.domainSelectElement.style.display="none",this.hasShow=!1;else{var n,i="",r="";(n=t.indexOf("@"))<0?(i=t,r=""):(i=t.substr(0,n),r=t.substr(n+1,t.length));var s=[];if(""==r)for(var a=0;a<this.domainArray.length;++a)s.push(i+"@"+this.domainArray[a]);else for(var a=0;a<this.domainArray.length;++a)0==this.domainArray[a].indexOf(r)&&s.push(i+"@"+this.domainArray[a]);if(s.length>0){e(),this.domainSelectElement.style.display="block",this.hasShow=!0;var u=document.createElement("TABLE");u.cellSpacing=0,u.cellPadding=3;var c=document.createElement("TBODY");u.appendChild(c);for(var a=0;a<s.length;++a){var l=document.createElement("TR"),d=document.createElement("TD");d.nowrap="true",d.align="left",d.innerHTML=s[a],d.idx=a,d.onmouseover=function(){o.clearFocus(),o.currentSelectIndex=this.idx,o.setFocus(),this.style.cursor="hand"},d.onmouseout=function(){},d.onclick=function(e){return o.doSelect(),o.preventEvent(e),!1},l.appendChild(d),c.appendChild(l)}this.usernameListElement.innerHTML="",this.usernameListElement.appendChild(u);for(var m=0,h=0;h<s.length;++h)s[h].length>m&&(m=s[h].length);m=10*m,m<185&&(m=185),u.style.width=m+"px",this.domainSelectElement.style.width=u.style.width,this.setFocus()}else this.domainSelectElement.style.display="none",this.hasShow=!1,this.currentSelectIndex=-1}},doSelect:function(){if(this.domainSelectElement.style.display="none",this.hasShow=!1,""!=this.usernameInputElement.value.trim()){var e=this.findTdElement(this.currentSelectIndex);e&&(this.usernameInputElement.value=e.innerHTML,this.usernameInputElement.value=this.usernameInputElement.value.replaceAll("<",""))}}};return n.extend({getInstance:function(){return o}}),n},NTESCommonNavigator.namespace("NTESCommonNavigator.utils"),NTESCommonNavigator.utils.Login=function(){var e=NTESCommonNavigator.base.Class(),t=NTESCommonNavigator.core.Event.Base;try{document.domain="163.com"}catch(n){}var i=NTESCommonNavigator.utils.Suggestion().getInstance(),o={listenFrame:!0,loginAction:"https://reg.163.com/logins.jsp",loginRedirect:"http://reg.163.com/redirect.jsp",successAction:"",failedAction:"",success:{},failed:{},errorMsg:{412:"\u60a8\u5c1d\u8bd5\u7684\u6b21\u6570\u5df2\u7ecf\u592a\u591a,\u8bf7\u8fc7\u4e00\u6bb5\u65f6\u95f4\u518d\u8bd5",414:"\u60a8\u7684IP\u767b\u5f55\u5931\u8d25\u6b21\u6570\u8fc7\u591a,\u8bf7\u7a0d\u540e\u518d\u8bd5",415:"\u60a8\u4eca\u5929\u767b\u5f55\u9519\u8bef\u6b21\u6570\u5df2\u7ecf\u592a\u591a,\u8bf7\u660e\u5929\u518d\u8bd5",416:"\u60a8\u7684IP\u4eca\u5929\u767b\u5f55\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",417:"\u60a8\u7684IP\u4eca\u5929\u767b\u5f55\u6b21\u6570\u8fc7\u591a\uff0c\u8bf7\u660e\u5929\u518d\u8bd5",418:"\u60a8\u4eca\u5929\u767b\u5f55\u6b21\u6570\u8fc7\u591a,\u8bf7\u660e\u5929\u518d\u8bd5",419:"\u60a8\u7684\u767b\u5f55\u64cd\u4f5c\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5",420:"\u7528\u6237\u540d\u4e0d\u5b58\u5728",422:"\u5e10\u53f7\u88ab\u9501\u5b9a\uff0c\u8bf7\u60a8\u89e3\u9501\u540e\u518d\u767b\u5f55",424:"\u8be5\u9753\u53f7\u670d\u52a1\u5df2\u5230\u671f\uff0c\u8bf7\u60a8\u7eed\u8d39",425:"\u5916\u57df\u5e10\u53f7\u5e76\u4e14\u5728\u6fc0\u6d3b\u6709\u6548\u671f\u4ee5\u5185",426:"\u5916\u57df\u5e10\u53f7\u5e76\u4e14\u5df2\u7ecf\u8fc7\u4e86\u6fc0\u6d3b\u6709\u6548\u671f\u9650",427:"\u8d85\u65f6\uff0c\u5df2\u8d85\u8fc75\u5206\u949f\u6709\u6548\u671f",428:"\u9700\u8981\u8fdb\u5165\u4e2d\u95f4\u63d0\u9192\u9875\u9762",460:"\u5bc6\u7801\u4e0d\u6b63\u786e",500:"\u7cfb\u7edf\u7e41\u5fd9\uff0c\u8bf7\u60a8\u7a0d\u540e\u518d\u8bd5",503:"\u7cfb\u7edf\u7ef4\u62a4\uff0c\u8bf7\u60a8\u7a0d\u540e\u518d\u8bd5",1e3:"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u7528\u6237\u540d"},commit:function(e){e&&(!this.frame&&this.createElements(),this.username.value=e.username,this.password.value=e.password,this.type.value=e.type,this.product.value=e.product,this.savelogin.value=e.savelogin,this.url.value=this.successAction,this.url2.value=this.failedAction,this.noRedirect.value=1,this.form.submit())},verifyLogin:function(){if(this.verifyCookie&&this.verifyCookie())for(var e in this.success)"function"==typeof this.success[e]&&this.success[e].call(this,arguments[0]);else for(var e in this.failed)"function"==typeof this.failed[e]&&(arguments[0]&&(arguments[0].errorMsg=this.errorMsg[this.errorMsg[arguments[0].errorType]?arguments[0].errorType:1e3]),this.failed[e].call(this,arguments[0]))},getSearches:function(e){e=e||window.location.search;for(var t=e.substring(1),n=t.split("&"),i={},o=0;o<n.length;o++){var r=n[o].split("=");r[0]&&(i[r[0]]=r[1]||null)}return i},createElements:function(){this.frame=this.createFrame(),this.form=this.createForm(),this.username=this.createInput("username"),this.password=this.createInput("password"),this.type=this.createInput("type"),this.product=this.createInput("product"),this.savelogin=this.createInput("savelogin"),this.url=this.createInput("url"),this.url2=this.createInput("url2"),this.noRedirect=this.createInput("noRedirect"),this.form.appendChild(this.username),this.form.appendChild(this.password),this.form.appendChild(this.type),this.form.appendChild(this.product),this.form.appendChild(this.savelogin),this.form.appendChild(this.url),this.form.appendChild(this.url2),this.form.appendChild(this.noRedirect),document.body.appendChild(this.form),document.body.appendChild(this.frame)},createInput:function(e){var t=this.toElement("<input/>");return t.setAttribute("name",e),t},toElement:function(){var e=document.createElement("div");return function(t){e.innerHTML=t;var n=e.firstChild;return e.removeChild(n),n}}(),createFrame:function(){var e,t=this,n="login_util_frame",i=0;return e=t.toElement('<iframe src="javascript:false;" name="'+n+'" />'),e.setAttribute("id",n),e.setAttribute("border","no"),e.style.display="none",e.onload=e.onreadystatechange=function(){t.listenFrame&&(this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||((i||this.contentWindow.location.search)&&t.verifyLogin(t.getSearches(this.contentWindow.location.search)),i++))},e},createForm:function(){var e,t=this;return e=t.toElement('<form method="post"></form>'),e.setAttribute("id","login_util_form"),e.setAttribute("action",this.loginAction),e.setAttribute("target",this.frame.name),e.style.display="none",e}};o.verifyCookie=function(){var e=NTES.cookie.get("S_INFO"),t=NTES.cookie.get("P_INFO");return e&&"2"!=t[2]},o.successAction="http://www.163.com/special/0077450P/login_frame.html",o.failedAction="http://www.163.com/special/0077450P/login_frame.html",o.success.userProduct=function(e){r.loginSuccess(e)},o.failed.userProduct=function(e){r.loginFailed(e)};var r={logined:!1,mailReg:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/i,trimReg:/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,formEl:NTES("#js_N_login_wrap"),fieldEl:NTES("#js_N_login_wrap input"),submitEl:NTES("#js_N_login_wrap .ntes-loginframe-btn"),tipEl:NTES("#js_N_login_wrap .ntes-loginframe-tips"),nameTmp:"",passTmp:"",passportLoaded:!1};return r.nameField=r.fieldEl[0],r.passField=r.fieldEl[1],r.saveField=r.fieldEl[2],r.tipText=r.tipEl[0].innerHTML,r.passField.type="password",i.bind(r.nameField),r.filter={"163.com":{read:1,name:"163",url:"https://mail.163.com/entry/cgi/ntesdoor?t=1&verifycookie=1&lightweight=1"},"126.com":{read:1,name:"126",url:"https://mail.126.com/entry/cgi/ntesdoor?t=1&verifycookie=1&lightweight=1&style=-1"},"yeah.net":{read:1,name:"yeah",url:"https://mail.yeah.net/entry/cgi/ntesdoor?t=1&verifycookie=1&lightweight=1&style=-1"},"188.com":{read:0,name:"188",url:"http://reg.mail.188.com/servlet/enter"},"vip.126.com":{read:0,name:"vip",url:"http://reg.vip.126.com/enterMail.m"},"vip.163.com":{read:0,name:"vip",url:"http://reg.vip.163.com/enterMail.m?enterVip=true-----------"}},r.trim=function(e){return e?(e+"").replace(r.trimReg,""):""},r.verifyFields=function(e,t){var n=r.nameField,i=r.passField;return 0==e.length?(r.addClass(n.parentNode,"tips-error"),this.loginFailed(),n.focus(),!1):0!=t.length||(r.addClass(i.parentNode,"tips-error"),i.focus(),this.loginFailed(),!1)},r.submit=function(){var e,t=r.trim(r.nameField.value),n=r.passField.value,i=r.saveField.checked?1:0;r.nameTmp=t,r.passTmp=n,r.verifyFields(t,n)&&(e={username:t,password:n,savelogin:i,product:"163",type:1},o.commit(e))},r.loginSuccess=function(n){r.logined=!0,e.trigger(t.LOGIN_SUCCESS)},r.loginFailed=function(n){if(r.logined=!1,e.trigger(t.LOGIN_FAIL),r.showError(n&&n.errorMsg?n.errorMsg:r.tipText),n)switch(parseInt(n.errorType)){case 420:setTimeout(function(){r.nameField.focus()},1e3);break;case 428:window.open(n.url?[unescape(n.url),"url="+location.href].join("&"):o.loginRedirect,"_self");
break;case 460:setTimeout(function(){r.passField.focus()},1e3)}},r.showError=function(e){r.tipEl[0].innerHTML=e},r.hasClass=function(e,t){var n="*"+e.className.replace(/\s+/gi,"*")+"*";return n.indexOf("*"+t+"*")!=-1},r.addClass=function(e,t){if(!r.hasClass(e,t)){var n=e.className+" "+t;e.className=r.trim(n)}},r.removeClass=function(e,t){if(r.hasClass(e,t)){var n="*"+e.className.replace(/\s+/gi,"*")+"*";n=n.replace(new RegExp("\\*"+t+"\\*","ig")," ").replace(/\*/gi," "),e.className=r.trim(n)}},r.submitEl.addEvent("click",function(){r.submit()}),r.formEl.addEvent("keydown",function(e){if(13==e.keyCode&&!o.verifyCookie()){if(i.hasShow)return void setTimeout(function(){r.passField.focus()},250);r.submit()}}),NTES.event.addEvent(r.fieldEl,"keyup",function(){var e=r.trim(r.nameField.value),t=r.passField.value;r.nameTmp==e&&r.passTmp==t||(r.removeClass(this.parentNode,"tips-error"),r.showError(r.tipText))}),e.extend({}),e},NTESCommonNavigator.namespace("NTESCommonNavigator.utils"),NTESCommonNavigator.utils.ChangeCookie=function(){var e=NTESCommonNavigator.base.Class(),t=document.createElement("div"),n="",i="163",o="",r="http://reg.163.com/chgcookie.jsp?",s="http://www.163.com/special/0077450P/login_frame.html",a='<iframe src="javascript:false;" name="changeCookie" frameborder="0" style="width:0;height:0;display:none;"></iframe>',u=function(e){try{document.body.removeChild(e)}catch(t){}},c=function(e){var c=null;t.innerHTML=a,o=NTES.cookie.get("USERTRACK"),n=String(NTES.cookie.get("P_INFO")).split("|")[0],document.body.appendChild(c=t.firstChild),c.onload=c.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||setTimeout(function(){NTES.cookie.get("S_INFO")&&e&&e(),u(c),c=null},400)},c.src=r+["username="+n,"product="+i,"userip="+o,"retUrl="+s,"loginUrl="+s].join("&")};return e.extend({invoke:function(e){NTES.ready(function(){c(e)})}}),e},NTESCommonNavigator.namespace("NTESCommonNavigator.data"),NTESCommonNavigator.data.UserInfo=function(){var e=NTESCommonNavigator.base.Class(),t=NTESCommonNavigator.utils.mix,n=NTESCommonNavigator.core.Event.Base,i=null,o=null,r=NTES,s="",a="",u=s,c=function(){l()},l=function(){i=Spine.Model.setup("UserInfo",["userName","userMail","userDomain","userIp","userLogin","userProduct"]),i.include({validate:function(){}}),o=i.create()},d=function(){var i=[],c=[],l="";s=String(r.cookie.get("P_INFO")),a=String(r.cookie.get("S_INFO")),NTES_PASSPORT=String(r.cookie.get("NTES_PASSPORT")),i=s.split("|"),c=a.split("|"),l=i[0]||"",o=o.load({userName:t.encode(l.split("@")[0]),userMail:t.encode(l),userDomain:t.encode(l?l.split("@")[1]||"":""),userIp:t.encode(r.cookie.get("USERTRACK")||""),userLogin:!(!l||!a&&!NTES_PASSPORT),userProduct:t.encode(i[7]||"")}).save(),s==u&&s||"null"===a||(e.trigger(n.DATA_CHANGED,o),u=s)},m=function(){return o},h=function(){return s},f=function(){return a};return c(),e.extend({refresh:function(){return d(),e},getUserInfo:function(){return m()},getPInfo:function(){return h()},getSInfo:function(){return f()}}),e},NTESCommonNavigator.namespace("NTESCommonNavigator.data"),NTESCommonNavigator.data.MailInfo=function(){var e=NTESCommonNavigator.base.Class(),t=NTESCommonNavigator.core.Constant,n=t.Domain.DOMAIN,i=t.Domain.API,o=NTESCommonNavigator.core.Event.Base,r="//msg.",s="/cgi/mc?funcid=getusrnewmsgcnt&product=index163&template=newmsgres_setcookie.htm&callback=fAccountCountCall&username=",a="",u="",c=null,l=null,d=function(){m()},m=function(){c=Spine.Model.setup("MailInfo",["newCount","totalCount","userName"]),c.include({validate:function(){}}),l=c.create(),h({})},h=function(e){var t=parseInt(e.newCount)||0,n=parseInt(e.totalCount)||0;l=l.load({newCount:t,totalCount:n,userName:e.userName||""}).save()},f=function(t,c){t&&p(t),c&&g(c);for(var d=!1,m=0;m<n.length;m++)if(a===n[m]){d=!0,NTES.ajax.importJs(r+i[m]+s+u),window.fAccountCountCall=function(t,n,i){h({newCount:t,totalCount:n,userName:i}),e.trigger(o.DATA_LOADED,l)};break}d||(NTES.ajax.importJs(r+"mail.163.com"+s+u),window.fAccountCountCall=function(t,n,i){h({newCount:t,totalCount:n,userName:i}),e.trigger(o.DATA_LOADED,l)})},p=function(e){e&&(u=e)},g=function(e){e&&(a=e)},v=function(){return l};return d(),e.extend({refresh:function(e,t){f(e,t)},getMailInfo:function(){return v()},setUserMail:function(e){p(e)},setUserDomain:function(e){g(e)}}),e},NTESCommonNavigator.namespace("NTESCommonNavigator.data"),NTESCommonNavigator.data.LofterInfo=function(){var e=NTESCommonNavigator.base.Class(),t=(NTESCommonNavigator.core.Constant,NTESCommonNavigator.core.Event.Base),n=null,i=null,o="",r="",s=function(){a()},a=function(){n=Spine.Model.setup("LofterInfo",["count"]),n.include({validate:function(){}}),i=n.create(),u({})},u=function(e){e=parseInt(e)||0,i=i.load({count:e}).save()},c=function(n){n&&l(n),o="//www.lofter.com/newNotice.do?email="+r+"&from=163top&callback=lofterInfoCallback",NTES.ajax.importJs(o,function(){"undefined"!=typeof window.lofterInfoCount&&(u(window.lofterInfoCount),e.trigger(t.DATA_LOADED,i))},"UTF-8")},l=function(e){if("string"==typeof e)return void(r=e);throw"invalid arguments for setUsermail"},d=function(){return r};return getLofterInfo=function(){return i},window.lofterInfoCallback=function(e){window.lofterInfoCount=e},s(),e.extend({refresh:function(e){c(e)},setUserMail:function(e){e&&l(e)},getUserMail:function(){return d()},getLofterInfo:function(){return getLofterInfo()}}),e},NTESCommonNavigator.namespace("NTESCommonNavigator.ui"),NTESCommonNavigator.ui.NavBar=function(){var e=NTESCommonNavigator.base.UI(),t=NTES,n=NTESCommonNavigator.utils.mix,i=".ntes-nav-msg-num",o=t("#js_N_navHighlight"),r=t("#js_N_navLoginBefore"),s=t("#js_N_NavLoginAfter"),a=t("#js_N_navUsername"),u=t("#js_N_navLogout"),c=t("#js_N_logined_warp"),l=t("#js_logined_suggest"),d=t("#js_login_suggest_wrap"),m=(t("#js_N_navHighlight"),t("#js_mail_url")),h=t("#js_N_navMailMsg"),f=NTESCommonNavigator.core.Constant,p=f.PRODUCTS,g=f.DEFAULT_PRODUCTS,v=f.LOG_IN_OUT_URL,y=null,N=null,E=null,S=function(){C(),y=new NTES.plugin.NTESSelectMenu},C=function(){var e=!1;window.addEvent("scroll",function(){document.documentElement.scrollTop+document.body.scrollTop>0?e||(o.addCss("ntes-nav-login-scroll"),c.addCss("ntes-nav-logined-scroll"),e=!0):e&&(o.removeCss("ntes-nav-login-scroll"),c.removeCss("ntes-nav-logined-scroll"),e=!1)}),t(h.parentNode).addEvent("click",function(){h.style.display="none"})},T=function(e){if(N=e,!N)return void _();var t=N.userName,i=N.userDomain,o=N.userMail,c=/&df=163navi/i,l=p[i]?p[i].url:f.Path.DEFAULT_MAIL_PATH;l=l.replace(c,"&df=163nav_icon"),a.innerHTML=t.length<12?o:t.substr(0,12)+"...@"+i,u.href=v+"?url="+n.encode(location.href),m.href=l,w(N.userProduct),r.style.display="none",s.style.display="block"},w=function(e){for(var t=e?~e.indexOf(",")?e.split(","):e.split("&"):[],i=0,o=t.length>g.length?g.length:t.length,r="",s=["reg"],a=[];i<o;i++)r=t[i],!!p[r]&&s.push(r);for(1==s.length&&(s=s.concat(g)),~f.Domain.DOMAIN.indexOf(N.userDomain)&&s.splice(1,0,N.userDomain);s.length;)r=s[0],a.push((1==s.length?"<li class='last'>":"<li>")+"<a href='"+p[r].url+"'><span>"+p[r].name+"</span></a></li>"),s.shift();l.innerHTML=a.join("").replace(/pInfo/g,n.encode(N.userMail))},_=function(){a.innerHTML="",l.innerHTML="",m.href=f.Path.DEFAULT_MAIL_PATH,u.href="javascript: void(0)",r.style.display="block",s.style.display="none",N=null,I(null)},b=function(e,n,o){var r=t(i,e).get(0);o||(n>99&&(n="99+"),n<0&&(n=0)),r&&e&&(n?(r.innerHTML=n,e.style.display="block"):(r.innerHTML="",e.style.display="none"))},I=function(e){b(h,e?e.newCount:0),E=e},A=function(){d.style.display="block",setTimeout(function(){d.style.display=""},4e3)};return S(),e.extend({login:function(e){T(e)},logout:function(){_()},setMailInfo:function(e){I(e)},unFoldUserCenter:function(){A()}}),e},NTESCommonNavigator.namespace("NTESCommonNavigator.ui"),NTESCommonNavigator.ui.Login=function(){var e=NTESCommonNavigator.base.UI(),t=NTES,n=t("#js_N_navHighlight"),i=(t("#js_loginframe_username"),t.util),o=(i.extend,1e3),r=t("#js_passportUserNameList"),s=t("#js_N_navHighlight .ntes-nav-login-title"),a=t("#js_N_navHighlight .ntes-nav-loginframe-pop"),u=!1,c=t(document.body),l=null,d=!1;return animateType={shake:"ue-shake"},currentAnimateType="",init=function(){u=isElmHasShow(a),n.addCss("ntes-nav-login-normal"),s.addEvent("click",onShowLoginClick),s.addEvent("mouseover",onShowLoginBtnMouseover),s.addEvent("mouseout",onShowLoginBtnMouseout),a.addEvent("mouseover",onShowloginPopMouseover),c.addEvent("click",onBodyClick),window.addEvent("scroll",onBodyScroll),r=r?r.get(0):null},isElmHasShow=function(e){return"none"!=t.style.getCurrentStyle(e,"display")},onShowLoginClick=function(e){return isElmHasShow(a)?hidePop():showPop(),!1},clearTimer=function(){l&&(clearTimeout(l),l=null)},setTimer=function(e){l=setTimeout(function(){e&&e()},o)},onShowLoginBtnMouseover=function(e){clearTimer(),showPop()},onShowLoginBtnMouseout=function(e){clearTimer(),setTimer(function(){hidePop()})},onShowloginPopMouseover=function(e){clearTimer()},onBodyClick=function(e){if(u){for(var t=e.target||e.srcElement,n=a.get(0),i=s.get(0);t;){if(t==n||t==i||t==r)return;t=t.parentNode}return hidePop(),!1}},onBodyScroll=function(e){u&&hidePop()},success=function(e){hidePop()},fail=function(e){animatePop("shake")},hidePop=function(){a.get(0).style.display="none",u=!1,n.addCss("ntes-nav-login-normal"),n.removeCss("ntes-nav-login-active"),a.removeCss("ue-animation"),currentAnimateType&&a.removeCss(currentAnimateType)},showPop=function(){if(!d){new URS(window.login_config);d=!0}a.get(0).style.display="block",u=!0,n.addCss("ntes-nav-login-active"),n.removeCss("ntes-nav-login-normal"),a.addCss("ue-animation")},animatePop=function(e){var t=animateType[e]||"";currentAnimateType&&a.removeCss(currentAnimateType),t&&a.addCss(t),currentAnimateType=t,currentAnimateType&&setTimeout(function(){a.removeCss(currentAnimateType)},1e3)},setUserName=function(e){},init(),e.extend({show:function(){showPop()},hide:function(){hidePop()},success:function(){success()},fail:function(){fail()},setUserName:function(e){setUserName(e)}}),e},NTESCommonNavigator.namespace("NTESCommonNavigator.core"),NTESCommonNavigator.core.Model=function(){var e=NTESCommonNavigator.base.Class(),t=NTESCommonNavigator.core.Event.Base,n=NTESCommonNavigator.core.Event.Model,i=NTESCommonNavigator.data.UserInfo(),o=NTESCommonNavigator.data.MailInfo(),r=NTESCommonNavigator.data.LofterInfo(),s=NTESCommonNavigator.utils.ChangeCookie(),a=function(){o.bind(t.DATA_LOADED,l),r.bind(t.DATA_LOADED,d),i.bind(t.DATA_CHANGED,c)},u=function(){var e=i.getUserInfo();o.refresh(e.userMail,e.userDomain),r.refresh(e.userMail)},c=function(n){n.userLogin&&(i.getSInfo()?u():s.invoke(function(){u()})),e.trigger(t.DATA_CHANGED,n)},l=function(t){e.trigger(n.MAIL_INFO_LOADED,t)},d=function(t){e.trigger(n.LOFTER_INFO_LOADED,t)},m=function(){return i.getUserInfo()};return a(),e.extend({refresh:function(){i.refresh()},getUserInfo:function(){return m()}}),e},NTESCommonNavigator.namespace("NTESCommonNavigator.core"),NTESCommonNavigator.core.View=function(e){var t=NTESCommonNavigator.base.Class(),n=NTESCommonNavigator.ui.NavBar(),i=NTESCommonNavigator.ui.Login(),o=NTESCommonNavigator.core.Event.Model,r=NTESCommonNavigator.core.Event.Base,s=function(){e.bind(o.MAIL_INFO_LOADED,a),e.bind(o.LOFTER_INFO_LOADED,u),e.bind(r.DATA_CHANGED,c)},a=function(e){n.setMailInfo(e)},u=function(e){},c=function(e){e.userLogin?n.login(e):n.logout()},l=function(){i.success(),n.unFoldUserCenter()},d=function(){i.fail()};return s(),t.extend({loginSuccess:function(){l()},loginFail:function(){d()}}),t},NTESCommonNavigator.namespace("NTESCommonNavigator.core"),NTESCommonNavigator.core.Controller=function(){var e=NTESCommonNavigator.base.Class(),t=NTESCommonNavigator.core.Model(),n=NTESCommonNavigator.core.View(t),i=NTESCommonNavigator.core.Event.Base,o=NTESCommonNavigator.core.Event.Model,r=function(){t.bind(i.DATA_CHANGED,u),t.bind(o.MAIL_INFO_LOADED,s),t.bind(o.LOFTER_INFO_LOADED,a)},s=function(t){e.trigger(o.MAIL_INFO_LOADED,t)},a=function(t){e.trigger(o.LOFTER_INFO_LOADED,t)},u=function(t){e.trigger(i.DATA_CHANGED,t)},c=function(){t.refresh(),n.loginSuccess()};return window._$needUrsBgp=1,window.login_config={newCDN:1,product:"163",promark:"MODXOXd",productKey:"5092c4b74f2a3fbfe2216e18ebe7ff8d",mode:"embed",swidth:"190",hintTxt:"\u6309\u4f4f\u6ed1\u5757 \u62d6\u52a8\u5b8c\u6210\u62fc\u56fe",host:"reg.163.com",isHttps:1,includeBox:"urs-login-block",page:"login",placeholder:{account:"\u7f51\u6613\u90ae\u7bb1/\u5e38\u7528\u90ae\u7bb1",pwd:"\u8bf7\u8f93\u5165\u5bc6\u7801"},needUnLogin:1,defaultUnLogin:0,needPrepare:1,single:1,regUrl:"https://reg.163.com/reg/reg.jsp?product=urs",cssDomain:"https://temp.163.com/special/00804C4H/",cssFiles:"urs_style.css?t=20170613",frameSize:{width:260,height:214},autoSuffix:1,version:3,needUrsBgp:1,logincb:function(e){c()},regcb:function(e){}},URS&&URS.setPkidAndPd({pkid:"MODXOXd",pd:"163",mode:"2"}),r(),e.extend({refresh:function(){t.refresh()},getUserInfo:function(){return t.getUserInfo()}}),e};
