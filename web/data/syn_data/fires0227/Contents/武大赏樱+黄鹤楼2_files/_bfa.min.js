/**
 * Ctrip JavaScript Code
 * http://www.ctrip.com/
 * Copyright(C) 2008 - 2018, Ctrip All rights reserved
 * @version v2.6.9
 */
!function(f,a){try{if(f.$_bf&&!0===f.$_bf.loaded)return;var r="2.6.9",l=f;l.$_bf=l.$_bf||{},l.$_bf.version=r,l.$_bf.loaded=!0;var n=(g=l.document).location,p=p||{};p.RESOURCE_URL="https://webresource.c-ctrip.com",p.PROTOCOL=-1!=n.protocol.indexOf("file:")?"http:":n.protocol,p.ENV=l.$_bf.env||"online",p.ishttps="https:"==p.PROTOCOL,p.CFG={domain:n.hostname.split(".").slice(-2).join(".")||"ctrip.com",referrer:!1,cv1:!1,orderID:"",cookiePath:"/",surl:"https://s.c-ctrip.com/",href:n.href,dCollect:{},delay:0,debug:!1,useractionSample:100,third_modules:[{shouldLoad:function(){return!0},src:p.RESOURCE_URL+"/resaresonline/risk/ubtrms/latest/default/rms.js",option:{mask:"yyyymmdd",delay:300}},{shouldLoad:function(){var t=location.protocol||"";return("http:"==t||"https:"==t)&&!p.$v("bf_ubt_markting_off")},src:p.RESOURCE_URL+"/ResUnionOnline/R1/common/marinRedirect.js",option:{mask:"yyyymmdd",delay:50}}]};var e=Object.prototype.toString,i=Object.prototype.hasOwnProperty,c=function(){},o={undefined:"undefined",number:"number","boolean":"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error","[object Object]":"object"},s={};function d(t,e){var n=65535&t,i=65535&e;return(((t>>16&65535)*i+n*(e>>16&65535)&65535)<<16>>>0)+n*i}p.now=Date.now||function(){return(new Date).getTime()},p.type=function(t){return o[typeof t]||o[e.call(t)]||(t?"object":"null")},p.isArray=function(t){return"array"===p.type(t)},p.isFunction=function(t){return"function"===p.type(t)},p.isNumber=function(t){return"number"==typeof t&&isFinite(t)},p.isEmpty=function(t){return t===a||"-"==t||""==t},p.getRand=function(){return(""+Math.random()).slice(-8)},p.keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},p.extend=function(){var t,e,n,i=arguments[0]||{},r=1,o=arguments.length;for("boolean"==typeof i&&(i,i=arguments[r]||{},r++),"object"==typeof i||p.isFunction(i)||(i={}),r===o&&(i=this,r--);r<o;r++)if(null!=(n=arguments[r]))for(e in n)i[e],i!==(t=n[e])&&t!==a&&(i[e]=t);return i},p.hash=function(t){var e,n=1,i=0;if(!p.isEmpty(t))for(n=0,e=t.length-1;0<=e;e--)n=0!=(i=266338304&(n=(n<<6&268435455)+(i=t.charCodeAt(e))+(i<<14)))?n^i>>21:n;return n},p.$=function(t){return g.getElementById(t)},p.$v=function(t){var e=p.$(t);return e&&e.value||""},p.encode=function(t){return encodeURIComponent(t)},p.decode=function(t){return decodeURIComponent(t)},p.contains=function(t,e){return-1<t.indexOf(e)},p.getCookie=function(t,e,n){var i=new RegExp("(^| )"+t+"=([^;]*)(;|$)"),r=g.cookie.match(i);return r?n?p.decode(r[2]):r[2]:e||""},p.getCookieObj=function(t,e){var n,i={__k:t},r=[],o=p.getCookie(t,"",e);if(o){r=o.split("&")||[];for(var a=0;a<r.length;a++)1<(n=r[a].split("=")).length&&(i[n[0]]=n[1])}return i},p.setCookie=function(t,e,n){var i=p.CFG.domain?";domain="+p.CFG.domain:"",r="";0<=n&&(r=";expires="+new Date(p.now()+n).toUTCString());g.cookie=t+"="+p.encode(e)+i+";path=/"+r},p.get=function(t,e){var n,i={};switch(e=e||{},i.v=e.v||"",i.w=e.w||"default",i.l=e.l||0,i.t=e.t||"string",i.w){case"input":n=p.$v(t);break;case"cookie":n=p.getCookie(t,i.v);break;case"function":n=p.isFunction(i.v)?i.v():"";break;case"object":break;default:n=i.v}switch(i.t){case"number":return parseInt(i.v,10)||0;case"boolean":return!!n;default:return i.l?String(n).substring(0,i.l):n}},p.getXpath=function(t){var e=[],n=0;function i(t){var e=0;if(!t.parentNode)return"";for(var n=t.parentNode.firstChild;n;){if(n==t)return 0==e?"":"["+(e+1)+"]";1==n.nodeType&&n.tagName==t.tagName&&e++,n=n.nextSibling}return""}for(;t&&(e[n++]=t.nodeName+i(t),"HTML"!=t.tagName.toUpperCase());)t=t.parentNode;return(e=e.reverse()).join("/")},p.send=function(t,e){if(p.CFG.debug)var n="http://localhost/bf.gif";else n=p.CFG.surl+"bf.gif";n+="?"+t+"&mt="+p.now()+"&jv="+r,p.isFunction(e)||(e=c);var i=new Image;i.width=1,i.height=1,i.onload=i.onreadystatechange=function(t){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e(1),this.onload=this.onreadystatechange=null)},i.onerror=function(){i=i.onerror=i.onload=null,e(0,{status:4,message:"UNKNOWN"})},i.src=n},p.on=g.addEventListener?function(t,e,n,i){t.addEventListener(e,n,i||!1)}:g.attachEvent?function(t,e,n){t.attachEvent("on"+e,n)}:c,p.off=g.addEventListener?function(t,e,n,i){t.removeEventListener(e,n,i||!1)}:g.attachEvent?function(t,e,n){t.detachEvent("on"+e,n)}:c,p.isSupportStorage=function(){var t=!1;if("undefined"!=typeof Storage)try{f.localStorage.setItem("_tmptest","tmpval"),t=!0,f.localStorage.removeItem("_tmptest")}catch(e){}return!!t}(),p.isSupportCookie=!0;var u=/d{1,4}|m{1,2}|yy(?:yy)?/g;function h(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}p.getDateVer=function(t){var e=new Date,n=e.getFullYear(),i=e.getMonth(),r=e.getDate(),o={d:r,dd:h(r,2),m:i+1,mm:h(i+1),yy:e.getYear(),yyyy:n};return t.replace(u,function(t){return o[t]||t})},p.loadScript=function(t,e){(e=e||{})&&e.mask&&(t+="?v="+p.getDateVer(e.mask));try{var n=!1,i=document.createElement("script");i.type="text/javascript",i.charset="utf-8",i.async=!0,i.setAttribute("defer","defer"),i.setAttribute("crossorigin","anonymous"),e.id&&(i.id=e.id),i.onload=i.onreadystatechange=function(t){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(this.onload=this.onreadystatechange=null,n=!0,p.isFunction(e.onScriptLoad)&&e.onScriptLoad())},i.src=t;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(i,r)}catch(o){}};var g;n=(g=l.document).location;function t(){var t="RID-"+function u(t){var e,n,i=t.length,r="charCodeAt",o=i%4,a=i-o,s=1540483477;e=0^i;for(var c=0;c<a;)n=t[r](c++),n|=t[r](c++)<<8,n|=t[r](c++)<<16,n=d(n=((n=d(n|=t[r](c++)<<24,s))^n>>>24)>>>0,s),e=((e=d(e,s))^n)>>>0;switch(o){case 3:e=(e^t[r](c+2)<<16)>>>0;case 2:e=(e^t[r](c+1)<<8)>>>0;case 1:e=d(e^=t[r](c),s)}return e=((e=d(e=(e^e>>>13)>>>0,s))^e>>>15)>>>0}(n.pathname+n.search);return p.getCookie(t)}p.CLI=(I=l.screen,A=l.navigator,P=I?I.colorDepth+"-bit":"",F=(A&&A.language?A.language:A&&A.browserLanguage?A.browserLanguage:"").toLowerCase(),B=A&&A.javaEnabled()?1:0,{s:I,c:P,l:F,j:B,rid:t(),getRefer:function(){if(p.CFG.referrer)return p.CFG.referrer;var t="";try{t=g&&g.referrer}catch(e){}if(!t)try{l.opener&&(t=l.opener.location&&l.opener.location.href)}catch(e){}return p.CFG.referrer=String(t).substring(0,500),p.CFG.referrer},getHash:function(){for(var t=l.history.length,e=[A.appName,A.appVersion,F,A.platform,A.userAgent,B,I.width+I.height,P,g.cookie?g.cookie:"",g.referrer?g.referrer:""].join(""),n=e.length;0<t;)e+=t--^n++;return p.hash(e)}}),function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function r(e){var n=0,i=[],r=0;this.n=function(){if(0!=r)return i[i.length-r--];if(n>=e.length)return null;var t=e.charCodeAt(n++);return t<=127?t:t<=2047?(i[1]=128|63&t,r=1,192|t>>6&31):55296<=t&&t<=57343?null:(i[0]=128|t>>6&63,i[1]=128|63&t,r=2,224|t>>12&15)}}function o(t){var e=new function s(t){var e,n=[],i=-1;for(;null!=(e=t.n());)if(0==e[0])-1!=i&&255!=n[i]||(n.push(128),i=n.length-1),n.push(e[1]),n[i]++;else{i=-1,n.push(e[0]);var r=e[1];if(r<=127)n.push(r);else{for(var o=[];0<r;)o.push(127&r),r>>=7;for(var a=o.length-1;0<=a;a--)n.push(128|o[a]);n[n.length-1]&=127}}i=0,this.n=function(){return i>=n.length?null:n[i++]}}(new function n(t){var e,a,s,c=[],u=[],f=[],l=0;for(;null!=(e=t.n());)f.push(e);function d(t,e){for(var n=0,i=0;i<3;i++)n=131*n+t[e+i];return n}this.n=function(){if(l<f.length-3+1){for(var t=d(f,l),e=s=a=0;e<u.length;e++)if(t==u[e]){var n,i;for(n=e,i=l;n<c.length&&i<f.length&&!(c[n]!=f[i]||63<=i-l);n++,i++);s<=n-e&&3<=n-e&&(s=n-e,a=e)}if(0!=s)return l+=s,[s,c.length-(a+s)];var r=[0,f[l]];return function o(t){c.push(t),1024<c.length&&(c.shift(),u.shift());if(3<=c.length){var e=c.length-3;u[e]=d(c,e)}}(f[l++]),r}return l<f.length?[0,f[l++]]:null}}(t));this.n=function(){return e.n()}}function a(e){var n=[],i=0;this.n=function(){if(0<i)return n[4-i--];var t=[e.n(),e.n(),e.n()];return null==t[0]?null:(n[0]=s(t[0]>>2),n[1]=s(null==t[1]?t[0]<<4&63:63&(t[0]<<4|t[1]>>4)),n[2]=null==t[1]?"~":s(null==t[2]?t[1]<<2&63:63&(t[1]<<2|t[2]>>6)),n[3]=null==t[2]?"~":s(63&t[2]),i=3,n[0])}}function s(t){return e.charAt(t)}p.compress=function(t){for(var e,n=new a(new o(new r(t))),i=[];null!=(e=n.n());)i[i.length]=e;return i.join("")}}(),function(){"use strict";if("object"==typeof JSON&&"function"==typeof JSON.stringify)return p.JSON={stringify:JSON.stringify};function t(t){return t<10?"0"+t:t}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var f,l,d,e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function h(t){return e.lastIndex=0,e.test(t)?'"'+t.replace(e,function(t){var e=n[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}p.JSON={},p.JSON.stringify=function(t,e,n){var i;if(l=f="","number"==typeof n)for(i=0;i<n;i+=1)l+=" ";else"string"==typeof n&&(l=n);if((d=e)&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return function u(t,e){var n,i,r,o,a,s=f,c=e[t];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(t)),"function"==typeof d&&(c=d.call(e,t,c)),typeof c){case"string":return h(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(f+=l,a=[],"[object Array]"===Object.prototype.toString.apply(c)){for(o=c.length,n=0;n<o;n+=1)a[n]=u(n,c)||"null";return r=0===a.length?"[]":f?"[\n"+f+a.join(",\n"+f)+"\n"+s+"]":"["+a.join(",")+"]",f=s,r}if(d&&"object"==typeof d)for(o=d.length,n=0;n<o;n+=1)"string"==typeof d[n]&&(r=u(i=d[n],c))&&a.push(h(i)+(f?": ":":")+r);else for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(r=u(i,c))&&a.push(h(i)+(f?": ":":")+r);return r=0===a.length?"{}":f?"{\n"+f+a.join(",\n"+f)+"\n"+s+"}":"{"+a.join(",")+"}",f=s,r}}("",{"":t})}}(),function(){"use strict";if(!(document.visibilityState||document.webkitVisibilityState||document.mozVisibilityState)){document.hidden=!1,document.visibilityState="visible";var t=null,e=function(){document.createEvent?(t||(t=document.createEvent("HTMLEvents")).initEvent("visibilitychange",!0,!0),document.dispatchEvent(t)):"object"==typeof Visibility&&Visibility._onChange.call(Visibility,{})},n=function(){document.hidden=!1,document.visibilityState="visible",e()},i=function(){document.hidden=!0,document.visibilityState="hidden",e()};document.addEventListener?(f.addEventListener("focus",n,!0),f.addEventListener("blur",i,!0)):(document.attachEvent("onfocusin",n),document.attachEvent("onfocusout",i))}}(),function(t){"use strict";var n=function(t){return null!=t},r=f.Visibility={onVisible:function(n){if(!r.isSupported()||!r.hidden())return n(),r.isSupported();var i=r.change(function(t,e){r.hidden()||(r.unbind(i),n())});return i},change:function(t){if(!r.isSupported())return!1;r._lastCallback+=1;var e=r._lastCallback;return r._callbacks[e]=t,r._setListener(),e},unbind:function(t){delete r._callbacks[t]},afterPrerendering:function(n){if(!r.isSupported()||"prerender"!=r.state())return n(),r.isSupported();var i=r.change(function(t,e){"prerender"!=e&&(r.unbind(i),n())});return i},hidden:function(){return r._prop("hidden",!1)},state:function(){return r._prop("visibilityState","visible")},isSupported:function(){return n(r._prefix())},_doc:f.document,_prefixes:["webkit","moz"],_chechedPrefix:null,_listening:!1,_lastCallback:-1,_callbacks:{},_hiddenBefore:!1,_init:function(){r._hiddenBefore=r.hidden()},_prefix:function(){if(null!==r._chechedPrefix)return r._chechedPrefix;if(n(r._doc.visibilityState))return r._chechedPrefix="";for(var t,e=0;e<r._prefixes.length;e++)if(t=r._prefixes[e]+"VisibilityState",n(r._doc[t]))return r._chechedPrefix=r._prefixes[e]},_name:function(t){var e=r._prefix();return""==e?t:e+t.substr(0,1).toUpperCase()+t.substr(1)},_prop:function(t,e){return r.isSupported()?r._doc[r._name(t)]:e},_onChange:function(t){for(var e=r.state(),n=r._callbacks.length,i=0;i<n;i++)r._callbacks[i].call(r._doc,t,e);r._hiddenBefore=r.hidden()},_setListener:function(){if(!r._listening){var t=r._prefix()+"visibilitychange",e=function(){r._onChange.apply(Visibility,arguments)};r._doc.addEventListener?r._doc.addEventListener(t,e,!1):r._doc.attachEvent(t,e),r._listening=!0,r._hiddenBefore=r.hidden()}}};r._init()}(),p.isIE=/msie\s[5-9]\./i.test(navigator.userAgent),p.fingerprintGen=function(){"use strict";var e=/([0-9.\s]+)/g,o=p.isIE;return{debug:!1,version:"1.1.0",murmur_hash:function(t,e){var n,i,r,o,a,s,c,u;for(n=3&t.length,i=t.length-n,r=e||31,a=3432918353,s=461845907,u=0;u<i;)c=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,r=27492+(65535&(o=5*(65535&(r=(r^=c=(65535&(c=(c=(65535&c)*a+(((c>>>16)*a&65535)<<16)&4294967295)<<15|c>>>17))*s+(((c>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(c=0,n){case 3:c^=(255&t.charCodeAt(u+2))<<16;case 2:c^=(255&t.charCodeAt(u+1))<<8;case 1:r^=c=(65535&(c=(c=(65535&(c^=255&t.charCodeAt(u)))*a+(((c>>>16)*a&65535)<<16)&4294967295)<<15|c>>>17))*s+(((c>>>16)*s&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,((r^=r>>>16)>>>0).toString(36)},trimVersion:function(t){return(t||"").replace(e,"")},trythese:function(){for(var t,e=0,n=arguments.length;e<n;e++){var i=arguments[e];try{t=i();break}catch(r){}}return t},get:function(t,e,n){return t&&t[e]?e+"="+(n||t[e]):""},display:function(t){var e=f.screen;return t.push(e.width+"x"+e.height+"|"+e.colorDepth),e.availHeight&&t.push("avail"+e.availWidth+"x"+e.availHeight),e.deviceYDPI&&t.push("DPI"+e.deviceXDPI+"x"+e.deviceYDPI),e.bufferDepth&&t.push("bufferDepth"+e.bufferDepth),e.offscreenBuffering&&t.push("offscreenBuffering"+e.offscreenBuffering),e.logicalXDPI&&t.push("logicalDPI"+e.logicalXDPI+"x"+e.logicalYDPI),e.systemXDPI&&t.push("systemDPI"+e.systemXDPI+"x"+e.systemYDPI),t.push(this.get(e,"orientation",1)),t.push(this.get(e,"pixelDepth")),t.push(this.get(e,"updateInterval")),t.push(this.get(e,"fontSmoothingEnabled",1)),t},timezone:function(t){return t.push("timezone"+(new Date).getTimezoneOffset()),t},connection:function(t){return t.push(this.get(f,"maxConnectionsPerServer")),t.push(this.get(navigator,"hardwareConcurrency")),navigator.connection&&navigator.connection.type&&t.push("conntype"+navigator.connection.type),t},language:function(t){t.push(navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||"")},storage:function(t){for(var e=["sessionStorage","localStorage","indexedDB","openDatabase"],n=0,i=e.length;n<i;n++)t.push(this.get(f,e[n],1));return t},getIEPlugins:function(t){var e,n=((e=document.createElement("span")).id="clientCaps",e.style.behavior="url('#default#clientcaps')",document.body.appendChild(e),e);if(n&&n.isComponentInstalled){var i={DS:"{44BBA848-CC51-11CF-AAFA-00AA00B6015C}",DHDB:"{9381D8F2-0288-11D0-9501-00AA00B911A5}",DHDBFJ:"{4F216970-C90C-11D1-B5C7-0000F8051515}",ICW:"{5A8D6EE0-3E18-11D0-821E-444553540000}",IE:"{89820200-ECBD-11CF-8B85-00AA005B4383}",IECFJ:"{08B0E5C0-4FCB-11CF-AAA5-00401C608555}",WMP:"{22D6F312-B0F6-11D0-94AB-0080C74C7E95}",NN:"{44BBA842-CC51-11CF-AAFA-00AA00B6015B}",OBP:"{3AF36230-A269-11D1-B5BF-0000F8051515}",OE:"{44BBA840-CC51-11CF-AAFA-00AA00B6015C}",TS:"{CC2A9BA0-3BDD-11D0-821E-444553540000}",MVM:"{08B0E5C0-4FCB-11CF-AAA5-00401C608500}",DDE:"{44BBA855-CC51-11CF-AAFA-00AA00B6015F}",DOTNET:"{6FAB99D0-BAB8-11D1-994A-00C04F98BBC9}",YHOO:"{E5D12C4E-7B4F-11D3-B5C9-0050045C3C96}",SWDNEW:"{166B1BCA-3F9C-11CF-8075-444553540000}",DOTNETFM:"{89B4C1CD-B018-4511-B0A1-5476DBF70820}",MDFH:"{8EFA4753-7169-4CC3-A28B-0A1643B8A39B}",FLH:"{D27CDB6E-AE6D-11CF-96B8-444553540000}",SW:"{2A202491-F00D-11CF-87CC-0020AFEECF20}",SWD:"{233C1507-6A77-46A4-9443-F871F945D258}",RP:"{CFCDAA03-8BE4-11CF-B84B-0020AFBBCCFA}",QT:"{DE4AF3B0-F4D4-11D3-B41A-0050DA2E6C21}",IEHE:"{DE5AED00-A4BF-11D1-9948-00C04F98BBC9}"};for(var r in i)if(i.hasOwnProperty(r)){var o=i[r];if(n.isComponentInstalled(o,"componentid")){var a=n.getComponentVersion(o,"componentid");t.push(r+":"+a)}}for(var s=["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","{D27CDB6E-AE6D-11CF-96B8-444553540000}"],c=0;c<s.length;c++)try{new ActiveXObject(s[c]),t.push(s[c])}catch(u){}}},agent:function(t){if(t.push(navigator.userAgent),o)this.getIEPlugins(t),t.push(this.get(f,"__IE_DEVTOOLBAR_CONSOLE_COMMAND_LINE",1));else{for(var e=navigator.plugins,n="pls",i=0;i<e.length;i++){var r=e[i];if(n+=r.filename||r.name||i,30<i)break}t.push(n)}return t.push(this.get(navigator,"platform")),"undefined"!=typeof navigator.doNotTrack&&t.push(navigator.doNotTrack||0),t},canvas:function(t){var e=document.createElement("canvas");if("undefined"==typeof e.getContext)t.push("UNSUPPORTED_CANVAS");else{e.width=780,e.height=150;var n="Englishä¸­æ–‡Õ€Õ¡ÕµÕ¥Ö€Õ¥Õ¶Ø§ç¹é«”è¼¸å…¥Ù„Ø¹Ø±Ø¨ÙŠØ©ÒšÐ°Ð·Ð°Ò›ÑˆÐ°`~1!2@3#4$5%6^7&8*9(0)-_=+[{]}|;:',<.>/?ðŸ˜ƒ",i=e.getContext("2d");i.save(),i.rect(0,0,10,10),i.rect(2,2,6,6),t.push(!1===i.isPointInPath(5,5,"evenodd")?"yes":"no"),i.restore(),i.save();var r=i.createLinearGradient(0,0,200,0);r.addColorStop(0,"rgb(200,0,0)"),r.addColorStop(.5,"rgb(0,200,0)"),r.addColorStop(1,"rgb(200,0,0)"),i.fillStyle=r,i.fillRect(0,0,200,150),i.restore(),i.save(),i.translate(250,0),i.globalCompositeOperation="multiply",i.fillStyle="rgb(255,0,255)",i.beginPath(),i.arc(50,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(0,255,255)",i.beginPath(),i.arc(100,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,255,0)",i.beginPath(),i.arc(75,100,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,0,255)",i.arc(75,75,75,0,2*Math.PI,!0),i.arc(75,75,25,0,2*Math.PI,!0),i.fill("evenodd"),i.restore(),i.save(),i.fillStyle="#360",i.font="13px 'sans'",i.textBaseLine="top",i.fillText(n,5,18),i.fillStyle="#360",i.font="14px 'Microsoft Yahei'",i.textBaseLine="top",i.fillText(n,5,31),i.fillStyle="#360",i.font="15px 'Consolas'",i.textBaseLine="top",i.fillText(n,5,44),i.fillStyle="#360",i.font="9px 'Arial'",i.textBaseLine="top",i.fillText(n,5,56),i.fillStyle="#360",i.font="10px 'Verdana'",i.textBaseLine="top",i.fillText(n,5,69),i.fillStyle="#360",i.font="11px 'Webdings'",i.textBaseLine="top",i.fillText(n,5,80),i.restore(),i.save(),i.beginPath(),i.strokeStyle="blue",i.lineWidth=5,i.shadowOffsetX=2,i.shadowOffsetY=2,i.shadowColor="rgb(85,85,85)",i.shadowBlur=3,i.arc(500,15,10,0,2*Math.PI,!0),i.stroke(),i.closePath(),i.restore(),t.push(e.toDataURL())}return t},getCpuClass:function(t){return t.push(navigator.cpuClass||""),t},run:function(){var t=[],e=[],n=[],i=[];try{this.display(e),this.timezone(e),this.connection(e),this.language(e)}catch(r){}try{this.storage(n),this.agent(n)}catch(r){}try{this.canvas(i),this.getCpuClass(i)}catch(r){}return t.push(this.murmur_hash(e.join(""))),t.push(this.murmur_hash(n.join(""))),t.push(this.murmur_hash(i.join(""))),t.join("-")}}.run()};var v,m={},y=1;function b(r,o){if("undefined"!=typeof _bfp&&p.isFunction(_bfp)){var a={};a.canvas=document.createElement("canvas"),a.doNotCaptureKeyboard=1,setTimeout(function(){var t=(a=_bfp(a)).cwrap("mixfp","string",["string"]),e=a.cwrap("authEncrypt","string",["string"]),n=p.encode(t(r)),i=p.encode(e(v.get_("vid")));v.track("fp",{vid:i,key:"securefp",val:n,duid:"",env:"online"}),o&&p.isFunction(o)&&o(p.JSON.stringify({vid:i,securefp:n}))},0)}else o&&p.isFunction(o)&&o(p.JSON.stringify({vid:"",securefp:""}))}var _={_env:/((test[a-z]?|dev|uat|ui|local)\.sh\.(ctrip|huixuan)travel)|(qa\.nt\.ctripcorp)/i,_bfa:/^\d.+(\.\d+){2,}$/,_bfs:/^\d+\.\d+$/,_var:/\$\{(\w+)\}/g};function C(t){var e=p.keys(t),n=e.length;if(8<n)return 8;for(var i=0;i<n;i++){var r=t[e[i]];if("string"==typeof r)t[e[i]]=r.substring(0,200);else if("number"!=typeof r)return 110}return 1}var S=function(t){this.isPVSend=!1,this.isPSSend=!1,this.isEventInit=!1,this.enterTime=p.now(),this.commonData=[],this.pid=0,this.eSkip=0,this.options=t||{},this.envInit_(),this.init()};S.prototype={constructor:S,_QUEUE:[],init:function(){this.isPVSend=!1,this.bfa=null,this.bfs=null,this.bfi=null,this._isNewVisitor=0,this._isNewSession=0,this.isLogin=0,this.readBfa(),this.sessRead(),this.readBfi(),function o(t){if("string"!=typeof t)return 0;var e=document.location.hostname,n=e.substring(0,e.indexOf(t));if(n)for(var i=n.split("."),r=i.length-1;0<r;r--)t="."+i[r]+t,document.cookie="_bfa=;domain="+t+";path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie="_bfi=;domain="+t+";path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie="_bfs=;domain="+t+";path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;"}(p.CFG.domain)},envInit_:function(){var t=n.hostname;"test"==p.ENV||_._env.test(t)?p.CFG.surl=p.PROTOCOL+"//s.uat.qa.nt.ctripcorp.com/":"offline"==p.ENV&&(p.CFG.surl=p.PROTOCOL+"//ubt.sh.ctriptravel.com/");var e=this.domainInit(t);e&&(p.CFG.domain=e)},inputInit:function(){try{var r={},o=this;if(document.body.innerHTML.replace(/\bbf_ubt_([^ '"]*)/gi,function(t,e){var n=p.$v(t);if(n){var i=e.split("_");i[0]&&"tl"==i[0]?("offline"==p.ENV?"callid"==i[1]&&o.sendData({k:"pvctm",v:'{"callid":"'+n+'"}'}):o._setPVCustom(i[1],n),r[i[1]]=n):(r[i[0]]=n,o.set_(i[0].toLowerCase(),n))}}),"offline"==p.ENV&&r.eid){var t={k:"offline_order",v:'{"uid":"'+(r.uid||"")+'","orderid":"'+(r.orderid||"")+'","callid":"'+r.callid+'","eid":"'+r.eid+'","pid":${page_id},"order_type":"'+(r.ordertype||"")+'"}'};o.sendData(t)}}catch(e){}},domainInit:function(t){return function r(){var t,e,n="_bfp=cookie",i=g.location.hostname.split(".");for(t=i.length-1;0<=t;t--)if(e="."+i.slice(t).join("."),g.cookie=n+";domain="+e+";",-1<g.cookie.indexOf(n))return g.cookie=n.split("=")[0]+"=;domain="+e+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",e}()},uniqueId_:function(){return p.getRand()^2147483647&p.CLI.getHash()},plus_:function(t){return parseInt(t,10)+1},setItem:function(t,e,n){if(!p.isSupportCookie)return!1;p.setCookie(t,e,n)},getItem:function(t,e,n){return p.isSupportCookie?p.getCookie(t,e,!0):""},readBfa:function(){var t=this.getItem("_bfa","",!0);if(t&&_._bfa.test(t)){var e=t.split(".");6<e.length&&(this.bfa=e)}if(!this.bfa){var n=this.enterTime;this.bfa=[1,n,this.uniqueId_().toString(36),1,n,n,0,0],this._isNewVisitor=1}},sessRead:function(){var t=this.getItem("_bfs","",!0);!this._isNewVisitor&&t&&_._bfs.test(t)?(this.bfs=t.split("."),this.bfs[1]=this.plus_(this.bfs[1])):(this._isNewSession=1,this.bfs=[1,1],this.bfa[4]=this.bfa[5],this.bfa[5]=this.enterTime,this.bfa[6]=this.plus_(this.bfa[6])),this.bfa[7]=this.plus_(this.bfa[7]),this.sessWrite()},sessWrite:function(){this.setItem("_bfa",this.bfa.join("."),63072e6),this.setItem("_bfs",this.bfs.join("."),18e5)},readBfi:function(){var t,e,n,i={};if(e=this.getItem("_bfi","",!0)){t=e.split("&")||[];for(var r=0;r<t.length;r++)1<(n=t[r].split("=")).length&&(i[n[0]]=n[1])}this.ppi=i&&i.p1?i.p1:0,this.ppv=i&&i.v1?i.v1:0,this.bfi=i},updateBfi:function(){if(this.isPVSend){var t=this.get_("pvid"),e="p1="+this.pid+"&p2="+this.ppi+"&v1="+t+"&v2="+this.ppv;this.setItem("_bfi",e)}},_set:function(t,e,n){switch(n=n||c,t){case"uid":this.options.duid=e;break;case"loginName":this.options.login_uid=e;break;default:return n(0)}return n(e)},get_:function(t){if(this.bfa){var e=this.bfa;switch(t){case"vid":return e[1]+"."+e[2];case"sid":return parseInt(e[6],10)||0;case"pvid":return parseInt(e[7],10)||0;case"fullpv":return e[1]+"."+e[2]+"."+e[6]+"."+e[7];default:return""}}},set_:function(t,e){switch(t){case"domain":this._setDomain(e);break;case"clickv1":this._setClickV1(e);break;case"collect":this._delCollect(e);break;case"referrer":this._setReferrer(e);break;case"orderid":this._setOrderID(e)}},getPid:function(t){return this.pid&&!t||(this.pid=parseInt(p.$v("page_id"),10)||0),this.pid},formatABtestValue:function(t){return/;$/.test(t)||(t+=";"),t},getABtest:function(){if(this.d_abtest)return this.d_abtest;for(var t=p.$("ab_testing_tracker"),e=[],n="";t;)n+=this.formatABtestValue(t.value),e.push(t),t.removeAttribute("id"),t.removeAttribute("name"),t=p.$("ab_testing_tracker");for(var i=0;i<e.length;i++)e[i].setAttribute("id","ab_testing_tracker");try{var r="";(r=document.location.hash)&&-1!==r.indexOf("abtest=")&&(n+=this.formatABtestValue(decodeURIComponent(r.replace(/.*(abtest=)/i,"").replace(/#.*/i,""))))}catch(o){}return this.d_abtest=n.substring(0,280),this.d_abtest},getPVparams:function(t){if(!t&&this.d_pvparams)return this.d_pvparams;var e=p.getCookieObj("Session"),n=p.getCookieObj("CtripUserInfo"),i=p.getCookieObj("StartCity_Pkg"),r=p.getCookieObj("Union"),o=p.getCookie("DUID"),a={engine:e&&e.SmartLinkCode?e.SmartLinkCode:"",keyword:e&&e.SmartLinkQuary?e.SmartLinkQuary:"",start_city:i&&i.PkgStartCity?i.PkgStartCity:"",alliance_id:r&&r.AllianceID?r.AllianceID:"",alliance_sid:r&&r.SID?r.SID:"",alliance_ouid:r&&r.OUID?r.OUID:"",user_grade:n&&n.VipGrade?n.VipGrade:"",duid:o||(n&&n.U?n.U:""),zdata:p.get("zdatactrip",{w:"cookie",v:""}),callid:p.get("bf_ubt_tl_callid",{w:"input",v:""})};"string"==typeof this.options.duid&&(a.duid="custom:"+this.options.duid.substring(0,50)),"string"==typeof this.options.login_uid&&(a.login_uid=this.options.login_uid.substring(0,50));try{if(!a.alliance_id&&!a.alliance_sid&&p.isSupportStorage&&(r=localStorage.getItem("UNION"))){var s=JSON.parse(r);if((r=s.data)&&(s.st||s.timeout)){var c=0;(c=s.st?new Date(s.st):new Date(s.timeout.replace(/-/g,"/")))&&c>=p.now()&&(a.alliance_id=r.AllianceID||r.ALLIANCEID||"",a.alliance_sid=r.SID||"",a.alliance_ouid=r.OUID||"")}}}catch(u){}return a.duid&&(this.isLogin=1),this.d_pvparams=a},getCommon:function(t){return(t||this.commonData.length<4)&&(this.commonData=[this.getPid(),this.get_("vid"),this.get_("sid"),this.get_("pvid"),p.get("CorrelationId",{w:"input",v:""}),this.getABtest()||"",p.get("bf_ubt_offline_mid",{w:"input",v:""}),r,p.fingerprint,"","","","","","online"]),this.commonData},getOinfo:function(){var t=!1;return 160<f.outerHeight-f.innerHeight&&(t=!0),160<f.outerWidth-f.innerWidth&&(t=!0),p.JSON.stringify({tz:-(new Date).getTimezoneOffset(),dt:t,rg:p.get("_RSG",{w:"cookie",v:"",l:32}),lang:document.documentElement.getAttribute("lang")||""})},getUinfo:function(){var t=this.getPVparams(!0),e=[],n="";try{n+="cl="+document.cookie.length,n+=",ckl="+(document.cookie.match(/[^=]+=[^;]*;?/g)||[]).length}catch(i){}return e[0]=13,e[1]=parseInt(this.ppi,10)||0,e[2]=parseInt(this.ppv,10)||0,e[3]=String(p.CFG.href).substring(0,600),e[4]=p.CLI.s.width,e[5]=p.CLI.s.height,e[6]=n,e[7]=p.CLI.l,e[8]=t.engine,e[9]=t.keyword,e[10]=p.CLI.getRefer(),e[11]=this.getABtest(),e[12]=this._isNewVisitor,e[13]=this.isLogin,e[14]=t.login_uid||p.get("login_uid",{w:"cookie",v:""}),e[15]=t.user_grade,e[16]=p.get("corpid",{w:"cookie",v:""}),e[17]=t.start_city,e[18]=t.alliance_id,e[19]=t.alliance_sid,e[20]=t.alliance_ouid,e[21]=p.CFG.orderID,e[22]=t.duid,e[23]=t.zdata,e[24]=t.callid,e[25]=p.get("bid",{w:"cookie",v:""}),e[26]="",e[27]="",e[28]="",e[29]="online",e[30]=f.devicePixelRatio||1,e[31]=this._isNewSession,e[32]=this.getOinfo(),e[33]=p.get("bf_ubt_product",{w:"input",v:"",l:30}),e[34]="",e[35]=p.CLI.rid,e},replaceParam:function(t){var e=this.getPVparams(),n={duid:encodeURIComponent(e.duid),page_id:this.getPid(),is_login:this.isLogin};return t.replace(_._var,function(t,e){return e in n?n[e]:t})},dataHandler:function(t){if("string"==typeof t)return t;if("object"==typeof t){if(t.c&&t.d){t.d.pr_t&&(t.d.pr_t[2]=this.replaceParam(t.d.pr_t[2]));var e={c:this.getCommon(),d:t.d};return"ac=g&d="+p.encode(p.JSON.stringify(e))}if(t.k&&t.v){var n=this.getPVparams(),i=p.encode(this.replaceParam(t.v));return"ac=tl&pi="+this.getPid()+"&key="+t.k+"&val="+i+"&pv="+this.get_("fullpv")+"&duid="+encodeURIComponent(n.duid)+"&env=online&v=6"}}return!1},sendData:function(t){if(this.isPVSend){var e=this.dataHandler(t);e&&p.send(e,t.callback||c)}else this._QUEUE.push(t)},sendPV:function(e){var n=this;if(this.isPVSend)return!0;try{var t={c:this.getCommon(!0),d:{uinfo:this.getUinfo()}},i="ac=g&d="+p.encode(p.JSON.stringify(t));p.send(i,function(t){t&&(n.isPVSend=!0,n.queueSend_()),p.isFunction(e)&&e(t)})}catch(r){r.message||r.description||"&line:"+name.lineNumber||name.line}},queueSend_:function(){this.updateBfi();var t=this._QUEUE,e=t.length;if(e){for(var n=0;n<e;n++){var i=t[n],r=this.dataHandler(i);r&&p.send(r,i.callback||c)}this._QUEUE=[]}return p.PVCTM&&this.sendData({k:"pvctm",v:p.JSON.stringify(p.PVCTM)}),!0},getPS:function(){for(var t=["navigationStart","redirectStart","unloadEventStart","unloadEventEnd","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],e=l.performance.timing,n=[6],i=0;i<t.length;i++)n.push(e[t[i]]);return n.push(l.performance.navigation.type||0),n.push(l.performance.navigation.redirectCount||0),n},sendPS:function(){if(!(p.CFG.dCollect.performance||!l.performance||this.getPid()<0)){var n=0,i=this;!function(){if(l.performance.timing.loadEventEnd&&!this.isPSSend){var t={c:i.getCommon(),d:{ps:i.getPS()}},e="ac=g&d="+p.encode(p.JSON.stringify(t));p.send(e),i.isPSSend=!0}else n<300&&(n++,setTimeout(arguments.callee,300))}()}},bindSend:function(t){var n=this;if(this.isEventInit)return!0;if(this.isEventInit=!0,this.inputInit(),this.sendPV(t),Visibility.change(function(t,e){"visible"==e&&n.updateBfi()}),this.sendPS(),p.isArray(s.pid))for(var e=0;e<s.pid.length;e++)s.pid[e](!1,this.getPid())},getCommonObj:function(){var t=this.getCommon();return{pid:t[0],vid:t[1],sid:t[2],pvid:t[3],ver:r,ifr:0}},pack:function(t,e){if("restiming"!==e)return!1;t=[[1,"ctrip"],this.getCommonObj(),[[["ubt",e,1],t]]];var n="a=z&d="+p.compress(p.JSON.stringify(t))+"&t="+p.now();p.send(n)},_asynRefresh:function(t,e){if("object"==typeof t){if("undefined"!=typeof t.page_id&&(this.pid=parseInt(t.page_id,10)||0),"undefined"!=typeof t.url&&p.contains(t.url,"http")&&(p.CFG.href=t.url),"undefined"!=typeof t.orderid)this._setOrderID(t.orderid,!0);else{var n=p.$v("bf_ubt_orderid");n&&this._setOrderID(n,!0)}t.refer&&this._setReferrer(t.refer),"string"==typeof t.uid&&(this.options.duid=t.uid),"string"==typeof t.loginName&&(this.options.login_uid=t.loginName)}this.isEventInit?(this.init(),this.sendPV(e)):this.bindSend(e)},_setEnv:function(t){p.ENV=t||"online",this.envInit_()},_setDebug:function(t){p.CFG.debug=!!t},_setDomain:function(t){p.CFG.domain=t},_setClickV1:function(t){p.CFG.cv1=t||""},_delCollect:function(t){},_setReferrer:function(t){p.CFG.referrer=t},_setOrderID:function(t,e){!t||p.CFG.orderID&&!e||(p.CFG.orderID=t)},_setPVCustom:function(t,e){p.PVCTM||(p.PVCTM={}),p.PVCTM[t]=e},_getFullPV:function(t){var e=this.get_("fullpv");return t&&p.isFunction(t)&&t(e),e},_getStatus:function(t){var e={vid:this.get_("vid"),sid:this.get_("sid"),pvid:this.get_("pvid"),pid:this.getPid(),abtest:this.getABtest(),pv:this.isPVSend,ps:this.isPSSend};return t&&p.isFunction(t)&&t(e),e},_getFP:function(t,e){return t&&p.isFunction(t)?(e?function n(i){var r="$_bf_uniq_F"+y++;f[r]=function(t){if(t.data){var e=t.data.token;if(m[t.data.scriptUrl])b(e,i);else{var n=t.data.scriptUrl;p.isIE&&(n="/code/ubt/fp-em-ie.js"),p.loadScript(p.RESOURCE_URL+n,{onScriptLoad:function(){b(e,i),m[t.data.scriptUrl]=!0}})}f[r]=null}},p.loadScript("//m.ctrip.com/restapi/soa2/11470/getToken.json?t="+ +new Date+"&callback="+r,{})}(t):t(p.fingerprint),1):0},_getPageid:function(t){this.isEventInit?t(!1,this.getPid()):(s.pid||(s.pid=[]),s.pid.push(t))},_tracklog:function(t,e,n){if("string"!=typeof e||e.length<1)return n("value must be a string."),!1;this.sendData({k:t,v:e,callback:n||!1})},_privateTrace:function(t,e,n){if("string"!=typeof e||e.length<1)return n("value must be a string."),!1;var i=this.getPVparams();this.sendData({c:!0,d:{pr_t:[7,t,e,i.duid,"","online"]},callback:n||!1})},_trackError:function(t,e){if("object"!=p.type(t))return!1;if(this.eSkip&&"undefined"==typeof t.skip)return this.eSkip=!1;!0===t.skip&&(this.eSkip=!0);for(var n=["version","message","line","file","category","framework","time","repeat","islogin","name","column"],i=[7,"",0,"","","",p.now()-this.enterTime,1,this.isLogin,"",0],r=1,o=n.length;r<o;r++){var a=n[r];if(t[a]){var s=t[a]+"";switch(a){case"message":case"file":s=s.substring(0,500);break;case"category":case"framework":case"name":s=s.substring(0,100);break;case"time":case"column":s=parseInt(s,10);break;default:s=parseInt(s,10)||0}i[r]=s}}var c="";t.stack?c=t.stack:"undefined"!=typeof cQuery&&p.isFunction(cQuery.trace)&&(c=cQuery.trace(),p.isArray(c)&&(c=c.join(""))),c=c.slice(i.join("").length-2e3),i.push(c),this.sendData({c:!0,d:{error:i},callback:e||!1})},_trackUserBlock:function(t,e){if("object"!=typeof t)return!1;var n=[];n[0]=6,n[1]=this.isLogin,n[2]=String(t.message||"").substring(0,300),n[3]=String(t.value||"").substring(0,300),n[4]=String(t.type||"").substring(0,50),n[5]=String(t.dom||"").substring(0,100),n[6]=String(t.form||"").substring(0,100),n[7]=parseInt(t.count||0,10)||0,this.sendData({c:!0,d:{ub:n},callback:e||!1})},_trackMatrix:function(t,e,n,i,r){i="number"==typeof i?i:p.now();var o=0;if("string"==typeof t&&"object"==typeof e&&"number"==typeof n&&1==(o=C(e))){var a={name:t,tags:e,value:n,ts:i},s=[[1,"matrix"],this.getCommon(),[a]],c="ac=a&d="+p.compress(p.JSON.stringify(s));p.send(c),o=1}p.isFunction(r)&&r(o)},_trackMetric:function(t){var e=0;if("object"==typeof t){var n=p.extend({name:"",tag:!1,value:0,callback:c,sample:100},t),i=v.get_("vid");if(i&&!(p.hash(i)%100>1*n.sample)&&"string"==typeof n.name&&"object"==typeof n.tag&&"number"==typeof n.value){if(1==(e=C(n.tag))){var r={name:n.name,tags:n.tag,value:n.value,ts:p.now()||0},o=[[1,"matrix"],this.getCommon(),[r]],a="ac=a&d="+p.compress(p.JSON.stringify(o));p.send(a),e=1}p.isFunction(n.callback)&&n.callback(e)}}},_trackKeyboard:function(t,e,n){p.keyCollector(t,e,n)},track:function(t,e){var n=this.getCommon(),i=(e={c:{pid:n[0],vid:n[1],sid:n[2],pvid:n[3],tid:n[4],abtest:n[5],offline_mid:n[6],UBT_version:n[7],bf:n[8],agent:""},dataType:t,priority:0,d:[e]},"ac=f&d="+p.encode(p.JSON.stringify(e)));p.send(i)}},p.renderAPI=function(){var e=new function(){this.push=function(t){for(var e=arguments,n=0,i=e.length,r=0;r<i;r++)try{if("function"==typeof e[r])e[r]();else{var o=e[r][0];if("_"==o.substring(0,1))return v[o].apply(v,e[r].slice(1)),1}}catch(a){n++}return n}},n=alert,i=0;!function(){try{l.alert=function(t){i++,e.push(["_trackUserBlock",{message:t,value:"alert",type:"function.alert",dom:"",form:"",count:i}]),n(t)}}catch(t){}}();var t=l.__bfi;if(t&&p.isArray(t))for(var r=l.__bfi.length,o=0;o<r;o++)e.push(l.__bfi[o]);else l.__bfi=[];l.__bfi.push=e.push,l.$_bf._getFullPV=function(){return v.get_("fullpv")},l.$_bf.tracklog=function(t,e,n){v._tracklog(t,e,n)},l.$_bf.trackError=function(t,e){v._trackError(t,e)},l.$_bf._getStatus=function(){return v._getStatus()},l.$_bf.asynRefresh=function(t,e){v._asynRefresh(t,e)};var a=1,s=!1;if(function u(){if(!s){if(p._union_){if("wait"!=p.$v("page_id")){if(0!=v.getPid())return s=!0,v.bindSend();if("complete"===document.readyState)return s=!0,v.bindSend();var t=!1;try{t=null==f.frameElement&&document.documentElement}catch(e){}if(t&&t.doScroll)try{return t.doScroll("left"),s=!0,v.bindSend()}catch(e){}}a=1}if(5<a&&(p._union_=!0),40<a)return v.bindSend();a++,setTimeout(u,500)}}(),p.on(l,"beforeunload",function(){v.bindSend()}),"null"==p.type(f.onerror)){var c={};f.onerror=function(){if("undefined"!=typeof cQuery&&cQuery.config&&cQuery.config("allowDebug"));else try{var t=arguments,e={message:""+t[0],file:""+t[1],line:t[2],category:"inner-error",framework:"normal",time:p.now()-v.enterTime,repeat:1},n=e.message+e.file+e.line;c[n]||(v._trackError(e),c[n]=!0)}catch(i){}}}},function(){var a={},s={keydown:1,keyup:2,keypress:3},i={text:!0,password:!0};function r(t){var e,n=(t=t||f.event).target||t.srcElement,i=n.id||n.name,r=t.keyCode;(e=a[i].filter)&&(r=e(t));var o=[s[t.type]||9,r,p.now()-a[i].ts];a[i].data.push(o.join(","))}var o=function(n,t,e){(n="string"==typeof n?document.getElementById(n):n)&&1==n.nodeType&&i[n.type]&&(key=n.id||n.name,key&&(a[key]={ts:0,info:[1,0,0,1,key],data:[],fn:t||c,filter:e},p.on(n,"focus",function(t){!function e(t){a[key].ts=p.now(),p.on(t,"keydown",r,!0),p.on(t,"keyup",r,!0)}(n,key)}),p.on(n,"blur",function(){!function e(t){p.off(t,"keydown",r,!0),p.off(t,"keyup",r,!0)}(n,key),o.send(key)})))};o.send=function(t){a[t].info[1]=a[t].ts;var e=a[t].info.join(",")+"|"+a[t].data.join("|");__bfi.push(["_tracklog","ubt_tl_keycollect",e]),a[t].fn(e),a[t].data=[]},p.keyCollector=o}(),p.userAction=function(){if(f.top==f.self){var t=v.get_("vid");if(!t||p.hash(t)%100>p.CFG.useractionSample)return!1;var d=document.documentElement;n.prototype={constructor:n,_init:function(){var e=this;p.on(document,"click",function(t){e.collectClick(t)},!0)},_sendData:function(t){if(p.CFG.debug)var e="http://localhost/bf.gif?ac=a&d=";else e=p.CFG.surl+"bf.gif?ac=a&d=";e+=p.compress(t)+"&jv=1.0.0";var n=new Image;n.onload=function(){n=n.onload=null},n.src=e},_getTagIndex:function(t){var e=0;if(t.parentNode)for(var n=t.parentNode.firstChild;n&&n!=t;)1==n.nodeType&&n.tagName==t.tagName&&e++,n=n.nextSibling;return 0<e?"["+ ++e+"]":""},_getXpath:function(t){for(var e,n=[],i=0;t&&9!=t.nodeType;){var r=t.nodeName+this._getTagIndex(t)+(t.id?"[@id='"+t.id+"']":"");1==t.nodeType&&(e=t.getAttribute("data-ubt-key"))&&(r+="[@cid='"+e+"']"),n[i++]=r,t=t.parentNode}return n.reverse().join("/")},_push:function(t,e,n){var i={action:t,xpath:e,ts:n||+new Date};this._queue.push(i),this._checkSend()},_checkSend:function(t){if(t||0<this._queue.length){var e=[[2,"useraction"],v.getCommon(),this._queue];this._sendData(p.JSON.stringify(e)),this._queue=[]}},_getFocus:function(){var t=document.activeElement;return t&&(t.type||t.href||~t.tabIndex)?t:null},collectViewport:function(t){var e="[@w='"+(d.clientWidth||document.body.clientWidth)+"'][h='"+(d.clientHeight||document.body.clientHeight)+"']";this._push("viewport","HTML/BODY"+e)},collectScroll:function(t){var e="[@x='"+Math.max(d.scrollLeft,document.body.scrollLeft)+"'][@y='"+Math.max(d.scrollTop,document.body.scrollTop)+"']";this._push("scroll","HTML/BODY"+e)},collectClick:function(t){var e=t.target||t.srcElement,n=e.nodeName.toUpperCase();if(e.getBoundingClientRect){var i=e.getBoundingClientRect(),r="",o=Math.max(d.scrollLeft,document.body.scrollLeft)||0,a=Math.max(d.scrollTop,document.body.scrollTop)||0,s=t.pageX||t.clientX+o||0,c=t.pageY||t.clientY+a||0,u=parseInt((d.clientWidth||document.body.clientWidth)/2,10)||0,f=0,l=0;"SELECT"==n&&c-i.top-a<0?(f=s,l=c-a,r+="[@x='"+parseInt(s+i.left+o-u,10)+"'][@y='"+parseInt(c+i.top,10)+"']",r+="[@rx='"+f+"']",r+="[@ry='"+l+"']"):(r+="[@x='"+(s-u)+"'][@y='"+c+"']",r+="[@rx='"+(f=parseInt(s-i.left-o,10))+"']",r+="[@ry='"+(l=parseInt(c-i.top-a,10))+"']"),0<f&&0<l&&this._push("click",this._getXpath(e)+r)}}};var e=new n;p.on(l,"beforeunload",function(){e._checkSend(!0)})}function n(){this._queue=[],this._init()}},p.restiming=function(){var t=v.get_("vid");if(t&&!(p.hash(t)%100<90&&-1===f.location.hostname.indexOf(".trip.com")))try{if("performance"in f&&"getEntriesByType"in f.performance&&f.performance.getEntriesByType("resource")instanceof Array){var r=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"];function c(t){if("string"!=typeof t)return"";for(var e=r.exec(t),n={},i=14;i--;)e[i]&&(n[o[i]]=e[i]);return n}var u=/^([a-z]+\d*|webresource\.english)\.((c-)?c?trip.com)/i;p.on(f,"load",function(){for(var t,e=f.performance.getEntriesByType("resource"),n=e.length,i=[],r=0;r<n;r++){var o=e[r],a=c(o.name);if("string"==typeof a.host&&u.test(a.host)&&!(0==(t=o).connectStart||t.connectEnd-t.connectStart<6||t.responseEnd-t.responseStart<6||t.domainLookupStart==t.domainLookupEnd&&t.domainLookupEnd==t.fetchStart&&t.fetchStart==t.connectStart&&t.fetchStart==t.connectEnd)){var s=o.name;if(i.push({entryType:o.entryType||"",initiatorType:o.initiatorType||"",name:s,nextHopProtocol:"",startTime:o.startTime||0,redirectStart:o.redirectStart||0,redirectEnd:o.redirectEnd||0,fetchStart:o.fetchStart||0,domainLookupStart:o.domainLookupStart||0,domainLookupEnd:o.domainLookupEnd||0,connectStart:o.connectStart||0,connectEnd:o.connectEnd||0,secureConnectionStart:o.secureConnectionStart||0,requestStart:o.requestStart||0,responseStart:o.responseStart||0,responseEnd:o.responseEnd||0,transferSize:o.transferSize||0,encodedBodySize:o.encodedBodySize||0,decodedBodySize:o.decodedBodySize||0}),2<i.length)break}}0<i.length&&v.pack(i,"restiming")})}}catch(e){}};var k=1,E=null,D=function(){if(!document.body&&k<10&&(k+=1,E=setTimeout(D,50)),null!==E&&clearTimeout(E),p.fingerprint=p.fingerprintGen(),v=new S,p.restiming(),p.userAction(),p.renderAPI(),p.CFG.third_modules&&p.CFG.third_modules.length)for(var t,e=0,n=p.CFG.third_modules.length;e<n;e++)(t=p.CFG.third_modules[e]).shouldLoad()&&p.loadScript(t.src,t.option)};D()}catch(w){}var I,A,P,F,B}(window);