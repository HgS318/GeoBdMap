(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["collect-main-profile-statusLite"],{"0322":function(t,e,i){"use strict";var a=i("e814"),s=i.n(a),o=i("383a"),n={methods:{gomore:function(t){var e=this,i={text:"举报",method:function(){window.location.href="http://service.account.weibo.com/reportspamobile?rid=".concat(t.id,"&type=1&from=20000")}},a={text:"删除",method:function(){o["a"].$emit("mvMsgbox",{title:"确定要删除这条微博吗？",type:"confirm"},function(){e.$http.post("profile/delMyblog",{mid:t.id}).then(function(i){if(o["a"].$emit("mvMsgbox",!1),!(i.data&&i.data.ok>0))throw new Error(i.data);var a=e,s="deleteWeibo";while(a)"function"===typeof a[s]?(a[s](t.id),a=null):a=a.$parent;o["a"].$emit("mvToast",{type:"warn",text:"删除成功"})}).catch(function(t){o["a"].$emit("mvMsgbox",!1),o["a"].$emit("mvToast",{type:"error",text:t.msg||"操作失败"})})})}},n={text:"分享",method:function(){window.navigator.share({title:t.status_title||"微博",text:"来自 ".concat(t.user.screen_name," 的微博"),url:"https://m.weibo.cn/detail/".concat(t.id)}).then(function(){o["a"].$emit("mvToast",{type:"ok",text:"分享成功"})})}},r={text:"复制链接",method:function(){var e="https://m.weibo.cn/detail/".concat(t.id),i=document.createElement("input");i.setAttribute("readonly","readonly"),i.setAttribute("value",e),document.body.appendChild(i),i.select(),i.setSelectionRange(0,9999),document.execCommand("copy")?(document.execCommand("copy"),o["a"].$emit("mvToast",{type:"ok",backdrop:!1,text:"复制成功"})):o["a"].$emit("mvToast",{type:"error",backdrop:!1,text:"复制失败"}),document.body.removeChild(i)}},m={text:"编辑微博",method:function(){if(t.retweeted_status)e.$router.push({name:"repost",query:{id:t.retweeted_status.id,editId:t.id}});else{var i={editId:t.id},a=t.pic_ids.join(",");a&&(i.pids=a),e.$router.push({name:"composer",query:i})}}},c={text:"查看编辑记录",method:function(){e.$router.push({path:"/p/231440_-_".concat(t.id,"?title=编辑记录")})}},l={text:t.favorited?"取消收藏":"收藏",method:function(){var i="mblogDeal/".concat(t.favorited?"delFavMblog":"addFavMblog");e.$http.post(i,{id:t.id}).then(function(e){if(!e.data||!e.data.ok)throw new Error;t.favorited=!t.favorited,o["a"].$emit("mvToast",{type:"ok",text:e.data.msg})},function(t){o["a"].$emit("mvToast",{type:"error",text:t.msg||"请求失败"})})}},u=[],d=this.$store.state.config.config;if(d.login&&(u.push(l),s()(d.uid,10)===t.user.id?u.push(a):u.push(i)),document.queryCommandSupported("copy")){var p=document.createElement("input");p.setAttribute("value","test"),p.setSelectionRange(0,9999),document.execCommand("copy")&&u.push(r)}t.can_edit&&u.push(m),t.edit_count&&u.push(c),window.navigator.share&&u.push(n),o["a"].$emit("mvActionSheet",u,"取消")}}};e["a"]=n},"117b":function(t,e,i){"use strict";var a=i("f85a"),s=i.n(a);s.a},"390c":function(t,e,i){"use strict";var a=i("d88ea"),s=i.n(a);s.a},a020:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("footer",{staticClass:"f-footer-ctrl"},[t.showRt?i("div",{directives:[{name:"mactive",rawName:"v-mactive"}],staticClass:"m-diy-btn m-box-center-a",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.repost(e)}}},[t.showRt?i("i",{staticClass:"lite-iconf lite-iconf-report"}):t._e(),i("h4",[t._v("\n      "+t._s(t._f("numFormat")(0===t.item.reposts_count?"转发":t.item.reposts_count))+"\n    ")])]):t._e(),i("div",{directives:[{name:"mactive",rawName:"v-mactive"}],staticClass:"m-diy-btn m-box-center-a",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.comment(e)}}},[i("i",{staticClass:"lite-iconf lite-iconf-comments"}),i("h4",[t._v("\n      "+t._s(t._f("numFormat")(0===t.item.comments_count?"评论":t.item.comments_count))+"\n    ")])]),i("div",{directives:[{name:"mactive",rawName:"v-mactive"}],staticClass:"m-diy-btn m-box-center-a",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.like(e)}}},[i("i",{staticClass:"lite-iconf",class:{"lite-iconf-liked":t.liked,"lite-iconf-like":!t.liked}}),i("h4",[t._v(t._s(t._f("numFormat")(0===t.like_counts?"赞":t.like_counts)))])]),t.showTriangle?i("aside",{directives:[{name:"mactive",rawName:"v-mactive"}],on:{click:function(e){return t.gomore(t.item)}}},[i("i",{staticClass:"m-font m-font-dot-more"})]):t._e()])},s=[],o=i("cebc"),n=i("2f62"),r=i("383a"),m=i("0322"),c={mixins:[m["a"]],data:function(){return{liked:!1,like_counts:0}},props:["item","showTriangle"],created:function(){this.liked=this.item.liked,this.like_counts=this.item.attitudes_count},watch:{item:function(){this.liked=this.item.liked,this.like_counts=this.item.attitudes_count}},methods:Object(o["a"])({},Object(n["b"])(["setCurWeiboData"]),{repost:function(){this.setCurWeiboData(this.item),this.$router.push({name:"repost",query:{id:this.item.id}})},comment:function(){this.item.comments_count?(this.setCurWeiboData(this.item),this.$router.push({name:"detail",params:{id:this.item.id}})):this.$router.push({name:"comment",query:{id:this.item.id}})},like:function(){var t=this,e=this.liked?"api/attitudes/destroy":"api/attitudes/create";this.$http.post(e,{id:this.item.id,attitude:"heart"}).then(function(e){e.data&&e.data.ok>0?(t.liked?(t.like_counts-=1,t.liked=!1):(t.like_counts+=1,t.liked=!0),t.item.attitudes_count=t.like_counts,t.item.liked=t.liked):e.data.msg&&r["a"].$emit("mvToast",{type:"error",text:e.data.msg})},function(t){throw new Error(t)})},showRt:function(){return!(this.item.visible&&this.item.visible.type>0)}})},l=c,u=i("0c7c"),d=Object(u["a"])(l,a,s,!1,null,null,null);e["default"]=d.exports},cef8:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.item.id?i("div",{staticClass:"card m-panel card9 f-weibo"},[i("div",{staticClass:"card-wrap"},[t.item.title?i("div",{staticClass:"card-title f-card-title"},[i("div",{staticClass:"m-ctrl-box"},[i("div",{staticClass:"m-diy-btn m-box-col m-box-center m-box-center-a"},[t.item.title.icon_url?[t.hidImg?i("img",{attrs:{"data-img":t.item.title.icon_url}}):i("img",{attrs:{src:t.item.title.icon_url}})]:t._e(),t.noveltyScheme?i("a",{directives:[{name:"mvlink",rawName:"v-mvlink",value:t.noveltyScheme,expression:"noveltyScheme"}],domProps:{innerHTML:t._s(t.item.title.text)}}):i("h4",{domProps:{innerHTML:t._s(t.item.title.text)}})],2)])]):t._e(),i("header",{directives:[{name:"mvlink",rawName:"v-mvlink"}],staticClass:"weibo-top m-box"},[t.item.user?i("div",{staticClass:"m-avatar-box m-box-center"},[i("router-link",{staticClass:"m-img-box",attrs:{to:"/profile/"+t.item.user.id}},[t.hidImg?i("img",{attrs:{"data-img":t.item.user.profile_image_url}}):i("img",{attrs:{src:t.item.user.profile_image_url}}),i("weibo-verified",{attrs:{user:t.item.user}})],1)],1):t._e(),i("div",{staticClass:"m-box-dir m-box-col m-box-center"},[t.item.user?i("div",{staticClass:"m-text-box"},[i("router-link",{attrs:{to:"/profile/"+t.item.user.id}},[i("h3",{staticClass:"m-text-cut"},[t._v("\n              "+t._s(t.item.user.screen_name)+"\n              "),t.item.user.remark?i("span",{staticClass:"c-text-remark"},[t._v("("+t._s(t.item.user.remark)+")")]):t._e(),i("weibo-icon",{attrs:{user:t.item.user}})],1)]),i("h4",{staticClass:"m-text-cut"},[i("span",{staticClass:"time"},[t._v(t._s(t._f("fromNow")(t.item.created_at)))]),t.item.source?i("span",{staticClass:"from",domProps:{innerHTML:t._s(" 来自 "+t.item.source)}}):t._e(),t.item.edit_count&&t.item.edit_count>0?i("span",{staticClass:"time"},[t._v("已编辑")]):t._e()])],1):t._e()]),t.followBtn?i("btnFollowUser",{attrs:{btn:t.followBtn},on:{changeSubType:t.follow}}):0+t.item.reads==t.item.reads?i("span",{staticClass:"m-add-box lite-reads",on:{mouseenter:function(e){e.stopPropagation(),e.preventDefault(),t.showAllReadNum=!0},touchstart:function(e){e.stopPropagation(),e.preventDefault(),t.showAllReadNum=!0},mouseleave:function(e){e.stopPropagation(),e.preventDefault(),t.showAllReadNum=!1},touchend:function(e){e.stopPropagation(),e.preventDefault(),t.showAllReadNum=!1},touchcancel:function(e){e.stopPropagation(),e.preventDefault(),t.showAllReadNum=!1}}},[t.showAllReadNum?[i("h4",[t._v(t._s(t.item.reads))])]:[i("h4",[t._v(t._s(t._f("numFormat")(t.item.reads)))]),i("h4",[t._v("阅读")])]],2):t._e()],1)]),i("article",{staticClass:"weibo-main"},[i("div",{staticClass:"card-wrap"},[i("div",{staticClass:"weibo-og",on:{click:function(e){return t.getBlogLink(t.item,e)}}},[i("div",{directives:[{name:"ahref",rawName:"v-ahref"}],staticClass:"weibo-text",domProps:{innerHTML:t._s(t.item.text)}}),i("weibo-media",{attrs:{item:t.item,hidImg:t.hidImg}})],1)]),t.item.retweeted_status?i("div",{staticClass:"weibo-rp",on:{click:function(e){return t.getBlogLink(t.item.retweeted_status,e)}}},[i("div",{staticClass:"card-wrap"},[t.item.user?i("div",{staticClass:"weibo-text"},[!t.item.retweeted_status.deleted&&t.item.retweeted_status.user?i("span",[i("router-link",{attrs:{to:"/profile/"+t.item.retweeted_status.user.id}},[t._v("\n              @"+t._s(t.item.retweeted_status.user.screen_name))]),t._v(":\n          ")],1):t._e(),i("span",{directives:[{name:"ahref",rawName:"v-ahref"}],domProps:{innerHTML:t._s(t.item.retweeted_status.text)}})]):t._e(),i("weibo-media",{attrs:{item:t.item.retweeted_status,hidImg:t.hidImg}})],1),t.showRpRCL?i("weiboRCL",{attrs:{item:t.item.retweeted_status}}):t._e()],1):t._e()]),t.showOgRCL?i("weiboRCL",{attrs:{item:t.item,showTriangle:t.showTriangle}}):t._e()],1):t._e()},s=[],o=i("5176"),n=i.n(o),r=(i("4917"),i("28a5"),i("a481"),i("cebc")),m=i("2f62"),c={data:function(){return{liked:!1,like_counts:0,showAllReadNum:!1}},props:["item","hidImg","showTriangle","showOgRCL","showRpRCL"],computed:Object(r["a"])({},Object(m["c"])(["followerInfo"]),{cover:function(){var t=this.item.cardid,e=t.replace(/[^0-9]/gi,"");if(t){if(e>=492&&e<700||e>=730)return{"background-image":"url(//vip.storage.weibo.com/feed_cover/".concat(t,"_mobile_new.png)"),"background-size":"auto 2.5rem","background-position":"90.53% top"};if(e<492||e>=700&&e<=729)return{"background-image":"url(//imgs.t.sinajs.cn/t6/skin/public/feed_cover/".concat(t,"_os7_d6p.png)")}}return""},followBtn:function(){return this.item.buttons&&this.item.buttons.length?this.item.buttons.filter(function(t){return"follow"===t.type})[0]:null},noveltyScheme:function(){var t=this.item.title;if(t.structs&&t.structs[0]&&t.structs[0].scheme){var e=t.structs[0].scheme;return{scheme:e}}return!1}}),methods:Object(r["a"])({},Object(m["b"])(["setCurWeiboData","setFollowerInfo"]),{mapPath:function(t,e){var i=t.split("://");if(i&&i[1]){var a=i[1].substring(i[1].indexOf("/")),s=this.$router.match(a);if(s.matched.length>0){e.preventDefault();var o=s.params||{};s.params.topic&&(o=n()(s.query,{type:"topic",value:s.params.topic})),this.$router.push({path:s.path,params:o,query:s.query})}}},getBlogLink:function(t,e){var i=this,a=window.navigator.userAgent.toLowerCase(),s="sinaweibo://detail?mblogid=".concat(t.id),o="".concat(i.$http.defaults.baseURL,"/detail/").concat(t.id),n=a.indexOf("weibo")>-1?s:o,r=e.target;if((r&&(r.className&&r.className.indexOf("weibo-text")>-1||r.className.indexOf("m-auto-list")>-1||r.className.indexOf("weibo-media-wraps")>-1)||r.parentNode&&r.parentNode.className&&r.nodeName&&"weibo-text"===r.parentNode.className&&"a"!==r.nodeName.toLocaleLowerCase()||"weibo-rp"===r.parentNode.className&&"a"!==r.nodeName.toLocaleLowerCase()||"weibo-og"===r.parentNode.className&&"a"!==r.nodeName.toLocaleLowerCase())&&i.$route.params.id!==t.id&&!t.deleted&&t.user){var m=r;while("weibo-og"!==m.className&&"weibo-rp"!==m.className)m=m.parentNode;m.classList.add("m-active"),setTimeout(function(){m.classList.remove("m-active"),/micromessenger/.test(a)||a.indexOf("qq/")>-1||a.indexOf("qzone")>-1||a.indexOf("weibo")>-1?window.location.href=n:(i.setCurWeiboData(t),i.$router.push({name:"detail",params:{id:t.id}}))},100)}},follow:function(){this.item.buttons=null,this.setFollowerInfo(this.item.user)}}),beforeDestroy:function(){this.followerInfo&&this.setFollowerInfo(null)},components:{weiboVerified:i("21a9").default,weiboIcon:i("a2a3").default,weiboMedia:i("fea8").default,weiboRCL:i("a020").default,btnFollowUser:i("3b25").default}},l=c,u=(i("117b"),i("0c7c")),d=Object(u["a"])(l,a,s,!1,null,null,null);e["default"]=d.exports},d88ea:function(t,e,i){},f85a:function(t,e,i){},fea8:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.item.pics?i("div",{staticClass:"weibo-media-wraps weibo-media f-media",class:"media-"+t.type},[t.item.pics.length>0?i("ul",{staticClass:"m-auto-list"},t._l(t.item.pics,function(e,a){return i("li",{key:a,class:"m-auto-box"+t.cols},[i("div",{staticClass:"m-img-box m-imghold-4-3"},[e.videoSrc?i("span",{staticClass:"feed-mark live-mark"},[i("i",{staticClass:"lite-iconf lite-iconf-live"})]):t.isLongImg(e)||t.isAniImg(e.url)?i("span",{staticClass:"feed-mark"},[t._v(t._s(t.isAniImg(e.url)?"动图":"长图"))]):t._e(),t.hidImg?i("img",{staticClass:"f-bg-img",attrs:{"data-img":e.url},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.thumbnails(e,a,t.item.pics)}}}):i("img",{staticClass:"f-bg-img",attrs:{src:e.url},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.thumbnails(e,a,t.item.pics)}}}),t.item.mblog_vip_type>0&&(a>0&&t.payType()>0||1==t.item.pics.length&&t.payType()>0)?i("span",{staticClass:"pay-icon"},[i("img",{attrs:{src:"https://h5.sinaimg.cn/upload/1087/691/2018/05/04/timeline_card_v.png"}})]):t._e()])])}),0):t._e()]):t.item.page_info?i("div",{staticClass:"weibo-media f-media"},[i("small-page",{attrs:{item:t.item.page_info,hidImg:t.hidImg,vipType:t.item.mblog_vip_type}})],1):t._e(),"detail"===t.$route.name&&t.item.tag_info?i("div",{staticClass:"weibo-media f-media"},[i("small-page",{attrs:{item:t.item.tag_info,vipType:t.item.mblog_vip_type}})],1):t._e()])},s=[],o=i("e814"),n=i.n(o),r=(i("6b54"),i("5176")),m=i.n(r),c=i("0928"),l=i.n(c),u=i("383a"),d={data:function(){return{}},props:["item","hidImg"],computed:{type:function(){return"b"},cols:function(){return!this.item.pics||1!==this.item.pics.length&&2!==this.item.pics.length&&4!==this.item.pics.length?"3":"2"},styles:function(){var t=150,e=this.item.pics[0].geo.width,i=this.item.pics[0].geo.height;return{singleImg:{width:"".concat(e>t?t/16:e/16,"rem"),height:"".concat(e>t?t*i/e/16:i/16,"rem")}}}},components:{"small-page":i("2e47").default},methods:{isLongImg:function(t){var e=t.geo.width,i=t.geo.height;return i>3*e||i>100&&e>4*i},isAniImg:function(t){var e=new URL(t);return/\.gif$/.test(e.pathname)},thumbnails:function(t,e,i){var a="sinaweibo://detail?mblogid=".concat(this.item.id,"&luicode=20000061");if(this.item.mblog_vip_type>0&&1===this.item.mblog_vip_type)l.a.start({scheme:a});else{var s=t.target||t.srcElement,o=this.formatThumbItem(s,i);u["a"].$emit("mvGallery",e,o)}},formatThumbItem:function(t,e){var i=this.closest(t,function(t){return t.classList.contains("weibo-media")}),a=e.map(function(t,e){var a={src:t.large.url,w:t.large.geo.width||500,h:t.large.geo.height||500,msrc:t.url,el:i.getElementsByClassName("f-bg-img")[e]};return t.videoSrc&&m()(a,{videoSrc:t.videoSrc}),a});return a},closest:function(t,e){return t&&(e(t)?t:this.closest(t.parentNode,e))},payType:function(){var t=this.item.mblog_vip_type,e=n()(t,10).toString(2).length;return n()(t,10).toString(2)[e-1]}}},p=d,f=(i("390c"),i("0c7c")),h=Object(f["a"])(p,a,s,!1,null,"58545971",null);e["default"]=h.exports}}]);
//# sourceMappingURL=collect-main-profile-statusLite.714a7dec.js.map