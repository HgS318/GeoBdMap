(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["statusLite"],{1784:function(t,e,i){},"2b45":function(t,e,i){},"2d7b":function(t,e,i){"use strict";var a=i("2b45"),o=i.n(a);o.a},"40ef":function(t,e,i){},"7bc1":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"lite-page-wrap"},[i("div",{class:{"main-pos":t.showComments}},[t.showTopBar?i("pageTop",{attrs:{title:"微博正文",back:!0,more:!0,gomore:t.showmore}}):t._e(),i("div",{staticClass:"main",style:{marginTop:t.showTopBar?"2.75rem":0}},[i("weibo",{attrs:{item:t.curWeiboData,showOgRCL:t.showOgRCL,showRpRCL:t.showRpRCL}})],1),t.showRCL?i("rclList",{attrs:{item:t.curWeiboData}}):t._e(),t.showEmpty?i("empty-failed",{attrs:{msg:t.msg}}):t._e(),i("pop-video-new"),i("pop-video"),i("pageEdit",{ref:"edit",on:{newWeibo:t.unshiftNewWeibo,isFocus:t.isFocus}}),t.showAppTips?i("appTips",{attrs:{scheme:t.scheme,appTips:t.appTips}}):t._e()],1),t.showComments?i("secondComment"):t._e()],1)},o=[],s=i("cebc"),n=(i("ac6a"),i("2f62")),r=i("0322");i("29c6").default;var c={mixins:[r["a"]],name:"detail",data:function(){return{showTopBar:!0,showRCL:!1,item:{},showOgRCL:!1,showRpRCL:!0,showEmpty:!1,msg:{msg:"暂无数据"},showAppTips:!1,scheme:null,appTips:{text:"微博内打开",barHeight:0}}},mounted:function(){var t=this;this.getComposerCallBack().then(function(e){if(e)if(e.id===e.rootid)t.unshiftNewWeibo(e);else{var i=t.curWeiboData.comment;i&&i.length>0&&t.curWeiboData.comment.forEach(function(i,a){if(e.rootid===i.id){var o=t.curWeiboData.comment[a].comments;o&&o.length>0?(o.unshift(e),t.curWeiboData.commentLists.unshift(e),t.curWeiboData.comment[a].total_number++,t.curWeiboData.comments_count++):(t.$set(t.curWeiboData.comment[a],"comments",[e]),t.$set(t.curWeiboData.comment[a],"total_number",1),t.curWeiboData.comments_count++)}}),t.curWeiboData.repost&&(t.curWeiboData.repost.unshift(e),t.curWeiboData.reposts_count++)}}),this.getData(function(){t.curWeiboData&&t.curWeiboData.id?(t.curWeiboData.isLongText&&t.spreadLongText(t.curWeiboData.id),t.curWeiboData.retweeted_status&&t.curWeiboData.retweeted_status.isLongText&&t.spreadLongText(t.curWeiboData.retweeted_status.id),t.showRCL=!0,t.showAppTips=!1,t.scheme="sinaweibo://detail?mblogid=".concat(t.curWeiboData.id,"&luicode=20000061"),t.appTips.barHeight=t.$refs.edit.$el.offsetHeight):t.showEmpty=!0})},computed:Object(s["a"])({},Object(n["c"])(["curWeiboData"]),{showComments:function(){return this.$route.query.cid}}),watch:{"$route.params.id":function(t){t&&this.getData()}},methods:Object(s["a"])({},Object(n["b"])(["setCurWeiboData","getComposerCallBack"]),{initCurWeiboData:function(t){return Object(s["a"])({},t,{rootComment:[],commentLists:[]})},unshiftNewWeibo:function(t){this.curWeiboData.comment?(this.curWeiboData.comment.unshift(t),this.curWeiboData.comments_count++):(this.$set(this.curWeiboData,"comment",[t]),this.$set(this.curWeiboData,"comments_count",1))},getData:function(t){var e=this,i=window.$render_data;if(e.curWeiboData&&e.$route.params.id===e.curWeiboData.id)t&&t();else{if(e.curWeiboData&&e.$route.params.id!==e.curWeiboData.id&&e.setCurWeiboData({}),i&&i.status&&i.status.id===e.$route.params.id)return e.setCurWeiboData(e.initCurWeiboData(window.$render_data.status)),e.item=e.curWeiboData,void(t&&t());e.getWB(t)}},getWB:function(t){var e=this;this.$http.get("statuses/show",{params:{id:this.$route.params.id}}).then(function(i){i.data&&i.data.ok>0?(e.setCurWeiboData(e.initCurWeiboData(i.data.data)),e.$data.item=e.curWeiboData):e.showEmpty=!0,t&&t()})},showmore:function(){this.gomore(this.curWeiboData)},spreadLongText:function(t){var e=this,i=this.curWeiboData;this.$http.get("statuses/extend",{params:{id:t}}).then(function(t){if(t.data&&t.data.ok>0){var a=t.data.data;i&&i.isLongText&&(i.text=a.longTextContent),i&&i.retweeted_status&&i.retweeted_status.isLongText&&(i.retweeted_status.text=a.longTextContent)}e.setCurWeiboData(i),e.$data.item=i})},isFocus:function(t){this.showAppTips=!t,this.showAppTips=!1}}),components:{pageTop:i("99bd").default,weibo:i("cef8").default,rclList:i("ad74").default,emptyFailed:i("ee2f").default,popVideo:function(){return Promise.resolve().then(i.bind(null,"8eec"))},popVideoNew:function(){return Promise.resolve().then(i.bind(null,"6af8"))},pageEdit:i("af64").default,appTips:i("e698").default,secondComment:i("d427").default}},m=c,u=(i("7f2b"),i("0c7c")),d=Object(u["a"])(m,a,o,!1,null,null,null);e["default"]=d.exports},"7f2b":function(t,e,i){"use strict";var a=i("a17b"),o=i.n(a);o.a},"8f43":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"card m-avatar-box lite-page-list",on:{click:t.jumpProfile}},[i("div",{staticClass:"card-wrap"},[i("div",{staticClass:"card-main"},[i("div",{staticClass:"m-box"},[i("div",{staticClass:"m-img-box"},[i("img",{attrs:{src:t.item.user.profile_image_url}}),i("weibo-verified",{attrs:{user:t.item.user}})],1),i("div",{staticClass:"m-box-col m-box-dir m-box-center lite-line"},[i("div",{staticClass:"m-box"},[i("div",{staticClass:"m-box-col m-box-dir"},[i("div",{staticClass:"m-text-box"},[i("h4",{staticClass:"m-text-cut",domProps:{textContent:t._s(t.item.user.screen_name)}})])])])])])])])])])},o=[],s={data:function(){return{}},props:["item"],components:{weiboVerified:i("21a9").default},created:function(){},methods:{jumpProfile:function(){this.$router.push({path:"/profile/".concat(this.item.user.id)})}}},n=s,r=i("0c7c"),c=Object(r["a"])(n,a,o,!1,null,null,null);e["default"]=c.exports},"8ffa":function(t,e,i){},"92e8":function(t,e,i){"use strict";(function(t){i("a481"),i("6b54");var a=i("7618"),o=(i("3b2b"),1/0),s="[object Symbol]",n=/[&<>"]/g,r=RegExp(n.source),c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},m="object"==("undefined"===typeof t?"undefined":Object(a["a"])(t))&&t&&t.Object===Object&&t,u="object"==("undefined"===typeof self?"undefined":Object(a["a"])(self))&&self&&self.Object===Object&&self,d=m||u||Function("return this")();function l(t){return function(e){return null==t?void 0:t[e]}}var p=l(c),h=Object.prototype,f=h.toString,b=d.Symbol,v=b?b.prototype:void 0,g=v?v.toString:void 0;function _(t){if("string"==typeof t)return t;if(C(t))return g?g.call(t):"";var e=t+"";return"0"==e&&1/t==-o?"-0":e}function x(t){return!!t&&"object"==Object(a["a"])(t)}function C(t){return"symbol"==Object(a["a"])(t)||x(t)&&f.call(t)==s}function w(t){return null==t?"":_(t)}function D(t){return t=w(t),t&&r.test(t)?t.replace(n,p):t}e["a"]=D}).call(this,i("24aa"))},"99bd":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"lite-topbar lite-page-top"},[t.back?i("div",{staticClass:"nav-left",on:{click:function(e){return t.goback()}}},[i("i",{staticClass:"m-font m-font-arrow-left"})]):t._e(),i("div",{staticClass:"nav-main"},[i("h4",{domProps:{textContent:t._s(t.title)}})]),i("div",{staticClass:"nav-right"},[t.more?i("i",{staticClass:"m-font m-font-dot-more",on:{click:function(e){return t.gomore()}}}):t._e()])])},o=[],s=i("cebc"),n=(i("a481"),i("2f62")),r=i("21b6"),c={mixins:[r["a"]],props:{title:String,back:Boolean,more:Boolean,goback:{type:Function,default:function(){""!==this.$route.hash&&this.$route.hash.replace("/#/i",""),this.$route.query.cid&&(this.curWeiboData.rootComment=[],this.curWeiboData.commentLists=[],this.curWeiboData.page=1),this.goBack()}},gomore:Function},computed:Object(s["a"])({},Object(n["c"])(["curWeiboData"])),methods:Object(s["a"])({},Object(n["b"])(["setCurWeiboData"]))},m=c,u=i("0c7c"),d=Object(u["a"])(m,a,o,!1,null,null,null);e["default"]=d.exports},a0b7:function(t,e,i){},a17b:function(t,e,i){},a9a7:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"card m-avatar-box lite-page-list",on:{click:function(e){return t.cmtItem(e)}}},[i("div",{staticClass:"card-wrap"},[i("div",{staticClass:"card-main"},[i("div",{staticClass:"m-box"},[i("a",{on:{click:function(e){return e.stopPropagation(),t.toProfileUrl(t.item.user.id)}}},[i("div",{staticClass:"m-img-box"},[i("img",{attrs:{src:t.item.user.profile_image_url}}),i("weibo-verified",{attrs:{user:t.item.user}})],1)]),i("div",{staticClass:"m-box-col m-box-dir m-box-center lite-line"},[i("div",{staticClass:"m-box"},[i("div",{staticClass:"m-box-col m-box-dir"},[i("div",{staticClass:"m-text-box"},[i("h4",{staticClass:"m-text-cut",domProps:{textContent:t._s(t.item.user.screen_name)}}),i("h3",{directives:[{name:"ahref",rawName:"v-ahref"}],domProps:{innerHTML:t._s(t.item.text)}})])])]),i("div",{staticClass:"lite-bot m-text-cut"},[i("div",{staticClass:"m-box-center-a time"},[t._v("\n                "+t._s(t._f("fromNow")(t.item.created_at))+"\n              ")])])])])])])])])},o=[],s=i("cebc"),n=i("2f62"),r=i("383a"),c=i("92e8"),m={data:function(){return{}},props:["item","mid"],components:{weiboVerified:i("21a9").default},methods:Object(s["a"])({},Object(n["b"])(["updateComposer"]),{toProfileUrl:function(t){this.$router.push({path:"/profile/".concat(t)})},cmtItem:function(t){var e=t.target,i=e.nodeName.toLocaleLowerCase(),a=e.parentNode.nodeName.toLocaleLowerCase();if("a"!==i&&"a"!==a){var o=this,s=[{text:"查看该微博",method:function(){o.$router.push({name:"detail",params:{id:o.item.id}})}},{text:"转发",method:function(){o.updateComposer("//@".concat(o.item.user.screen_name,":").concat(Object(c["a"])(o.item.raw_text))),o.$router.push({name:"repost",query:{id:o.item.id}})}},{text:"举报",method:function(){window.location.href="http://service.account.weibo.com/reportspamobile?rid=".concat(o.item.id,"&type=1&from=20000")}}];r["a"].$emit("mvActionSheet",s,"取消")}}})},u=m,d=i("0c7c"),l=Object(d["a"])(u,a,o,!1,null,null,null);e["default"]=l.exports},ad74:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"lite-page-tab"},t._l(t.nav,function(e,a){return i("div",{key:a,staticClass:"tab-item",class:{cur:e.type==t.curtab},on:{click:function(i){return t.clickCurTab(e.type)}}},[i("i",[t._v(t._s(e.title)),i("em")]),e.type==t.curtab?i("i",[t._v(t._s(t.curWeiboData[e.type+"s_count"]))]):i("i",[t._v(t._s(t._f("numFormat")(t.curWeiboData[e.type+"s_count"])))])])}),0),i("div",{directives:[{name:"inf-scroll",rawName:"v-inf-scroll",value:t.loadmorePage,expression:"loadmorePage"}],staticClass:"comment-content",staticStyle:{"margin-top":"-1px","padding-bottom":"3.44rem"},attrs:{"first-check":!0}},["repost"==t.curtab?[t.curWeiboData.repostHotList?t._l(t.curWeiboData.repostHotList,function(e){return i("weibo-repost",{key:e.id,attrs:{item:e,mid:t.curWeiboData.id}})}):t._e(),t.curWeiboData.repostHotList&&t.curWeiboData.repostHotList.length?i("div",{staticClass:"commment-more"},[i("a",{attrs:{href:"/single/rcList?id="+t.mid+"&type=repost&hot=1&tab=1"}},[t._v("更多热门转发>>")])]):t._e(),t._l(t.curWeiboData.repost,function(e){return i("weibo-repost",{key:e.id,attrs:{item:e,mid:t.curWeiboData.id}})})]:t._e(),"comment"==t.curtab?t._l(t.curWeiboData.comment,function(e,a){return i("weibo-comment",{key:e.id,attrs:{item:e,index:a,rootItem:t.curWeiboData},on:{deleteComment:t.deleteComment}})}):t._e(),"attitude"==t.curtab?t._l(t.curWeiboData.attitude,function(t){return i("weibo-attitude",{key:t.id,attrs:{item:t}})}):t._e(),t.noText?i("div",{staticClass:"empty",domProps:{textContent:t._s(t.noText)}}):t._e(),i("mv-nextpage",{attrs:{requesting:t.requesting}})],2)])},o=[],s=i("5176"),n=i.n(s),r=(i("a481"),i("ac6a"),i("cebc")),c=i("2f62"),m={repost:"api/statuses/repostTimeline",comment:"comments/hotflow",attitude:"api/attitudes/show"},u=0,d=0,l=!1,p={data:function(){return{nav:[{title:"转发",type:"repost"},{title:"评论",type:"comment"},{title:"赞",type:"attitude"}],requesting:!1,noText:""}},mounted:function(){var t=this.curWeiboData[this.curtab];t&&t.length>0&&this.$route.params.id===this.curWeiboData.id||(this.firstLoad(),this.$set(this.curWeiboData,this.curtab,[]),this.$set(this.curWeiboData,"attitude",[]))},computed:Object(r["a"])({},Object(c["c"])(["curWeiboData"]),{curtab:function(){if(this.$route.hash){var t=this.$route.hash.substring(1),e=[];if(this.nav.forEach(function(t){e.push(t.type)}),-1!==e.indexOf(t))return t}return"comment"}}),watch:{"curWeiboData.id":function(){this.setCurTab(this.curtab),u=0},"curWeiboData.comment":function(t){t&&t.length&&"comment"===this.curtab&&(this.noText="")},"curWeiboData.attitude":function(t){t&&t.length&&"attitude"===this.curtab&&(this.noText="")}},methods:Object(r["a"])({},Object(c["b"])(["setCurWeiboData"]),{deleteComment:function(t){this.curWeiboData.comments_count--,this.curWeiboData.comment.splice(t,1)},clickCurTab:function(t){"comment"===t&&this.curtab===t&&this.$router.push({name:"comment",query:{id:this.curWeiboData.id}}),this.setCurTab(t)},setCurTab:function(t){this.$router.replace({hash:t}),l=!1,this.noText="";var e=document.scrollingElement||document.body,i=e.scrollTop;this.$nextTick(function(){e.scrollTop=i}),this.firstLoad(),this.$set(this.curWeiboData,this.curtab,[])},firstLoad:function(){var t=this;l=!1,this.requesting=!0;var e=this.curtab,i={};"comment"===e?i={id:this.curWeiboData.id,mid:this.curWeiboData.id,max_id_type:0}:n()(i,{id:this.curWeiboData.id,page:1}),this.$http.get(m[e],{params:i}).then(function(i){var a=t.curWeiboData,o=i.data.data;t.requesting=!1,i.data&&i.data.ok>0?(u=o.max_id||u,d=o.max_id_type||d,o.data&&o.data.length>0&&(t.$set(a,e,o.data),t.$set(a,"".concat(e,"s_count"),o.total_number),t.$set(a,"".concat(e,"Page"),1),t.$set(a,"".concat(e,"MaxPage"),o.max)),o.hot_data&&o.hot_data.length>0&&t.$set(a,"repostHot",o.hot_data)):"repost"===t.curtab?t.noText="快来转发精彩内容吧":"comment"===t.curtab?t.noText="快来发表你的评论吧":t.noText=i.data.msg||"接口错误"}).catch(function(){t.requesting=!1})},loadmorePage:function(){var t=this;if(!(this.requesting||l||this.noText)){var e=this.curtab,i=this.curWeiboData["".concat(e,"Page")]+1,a=this.curWeiboData["".concat(e,"MaxPage")];if("comment"!==e&&i<=a||"comment"===e&&0!==u){this.requesting=!0;var o={};"comment"===e?o={id:this.curWeiboData.id,mid:this.curWeiboData.id,max_id:u,max_id_type:d}:n()(o,{id:this.curWeiboData.id,page:i}),this.$http.get(m[e],{params:o}).then(function(a){if(t.requesting=!1,a.data.ok>0){var o=t.curWeiboData,s=a.data.data;u=s.max_id,d=s.max_id_type,s.data&&s.data.length>0&&(o[e]=o[e].concat(s.data),o["".concat(e,"s_count")]=s.total_number,o["".concat(e,"Page")]=i,o["".concat(e,"MaxPage")]=s.max),s.hot_data&&s.hot_data.length>0&&(o.repostHot=o.repostHot.concat(s.hot_data))}else l=!0}).catch(function(){t.requesting=!1})}}}}),components:{weiboRepost:i("a9a7").default,weiboComment:i("f175").default,weiboAttitude:i("8f43").default}},h=p,f=(i("b8f1"),i("0c7c")),b=Object(f["a"])(h,a,o,!1,null,"36b85f94",null);e["default"]=b.exports},af64:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"lite-page-editor"},[t.focus?i("miniComposer",{attrs:{prefix:t.placeholder,placeholder:t.placeholder,content:t.content,show:t.focus,mid:t.mid,reply:t.cid},on:{"update:content":function(e){t.content=e},"update:show":function(e){t.focus=e},success:t.composerSuccess}}):i("div",{staticClass:"m-box"},[i("div",{staticClass:"box-left m-box-col m-box-center-a",on:{click:t.onFocus}},[i("span",{staticClass:"m-box-center-a main-text m-text-cut",class:{focus:!t.content}},[t._v(t._s(t.content||t.placeholder||"发表评论"))])]),t.showRcl?i("div",{staticClass:"box-right m-box-center-a"},[t.showRt?i("i",{directives:[{name:"mactive",rawName:"v-mactive"}],staticClass:"lite-iconf lite-iconf-report",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.repost(e)}}}):t._e(),i("i",{directives:[{name:"mactive",rawName:"v-mactive"}],staticClass:"lite-iconf lite-iconf-like",class:{"lite-iconf-liked":t.liked,"lite-iconf-like":!t.liked},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.like(e)}}}),t.enableShare?i("i",{directives:[{name:"mactive",rawName:"v-mactive"}],staticClass:"lite-iconf lite-iconf-share",on:{click:t.onShare}}):t._e()]):t._e()])],1)},o=[],s=i("cebc"),n=i("2f62"),r=i("383a"),c=i("685a"),m={props:{showRcl:{type:Boolean,default:!0},placeholder:{type:String}},data:function(){return{focus:!1,content:"",liked:!1,enableShare:!!window.navigator.share}},created:function(){var t=this.curWeiboData;t&&t.id&&(this.liked=t.liked,this.$set(t,"attitude",[]))},watch:{focus:function(){this.$emit("isFocus",this.focus)}},computed:Object(s["a"])({},Object(n["c"])(["curWeiboData","config"]),{cid:function(){return this.$route.query.cid&&this.curWeiboData.rootComment?this.curWeiboData.rootComment.id:""},mid:function(){return this.curWeiboData&&this.curWeiboData.id?this.curWeiboData.id:""}}),methods:Object(s["a"])({},Object(n["b"])(["setCurWeiboData"]),{onFocus:function(){"iOS"===c["a"].os?this.cid?this.$router.push({name:"reply",query:{id:this.mid,reply:this.cid,content:"回复@".concat(this.curWeiboData.rootComment.user.screen_name,":"),withReply:1}}):this.$router.push({name:"comment",query:{id:this.mid}}):this.focus=!0},onShare:function(){var t=this.curWeiboData;window.navigator.share({title:t.status_title||"微博",text:"来自 ".concat(t.user.screen_name," 的微博"),url:window.location.href}).then(function(){r["a"].$emit("mvToast",{type:"ok",text:"分享成功"})}).catch(function(){r["a"].$emit("mvToast",{type:"error",text:"分享失败"})})},composerSuccess:function(t){this.$emit("newWeibo",t),this.focus=!1,r["a"].$emit("mvToast",{text:"发送成功"})},showRt:function(){return!(this.curWeiboData.visible&&this.curWeiboData.visible.type>0)},repost:function(){this.setCurWeiboData(this.curWeiboData),this.$router.push({name:"repost",query:{id:this.curWeiboData.id}})},like:function(){var t=this,e=this.liked,i=e?"api/attitudes/destroy":"api/attitudes/create";this.$http.post(i,{id:this.curWeiboData.id,attitude:"heart"}).then(function(i){if(i.data&&i.data.ok>0)if(e){if(t.liked=!1,t.curWeiboData.attitudes_count-=1,t.curWeiboData.liked=!1,t.curWeiboData.attitude&&t.curWeiboData.attitude.length>0)for(var a in t.curWeiboData.attitude)if(+t.config.uid===t.curWeiboData.attitude[a].user.id)return void t.curWeiboData.attitude.splice(a,1)}else i.data.data&&(t.liked=!0,t.curWeiboData.attitudes_count+=1,t.curWeiboData.attitude.unshift(i.data.data),t.curWeiboData.liked=!0);else i.data.msg&&r["a"].$emit("mvToast",{type:"error",text:i.data.msg})},function(t){throw new Error(t)})}}),components:{miniComposer:function(){return Promise.all([i.e("vendor"),i.e("chat-composer-miniComposer"),i.e("composer-miniComposer"),i.e("miniComposer")]).then(i.bind(null,"3fc9"))}}},u=m,d=(i("2d7b"),i("0c7c")),l=Object(d["a"])(u,a,o,!1,null,"1ef5d305",null);e["default"]=l.exports},b8f1:function(t,e,i){"use strict";var a=i("40ef"),o=i.n(a);o.a},d427:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.showTopBar?i("pageTop",{attrs:{title:t.curWeiboData.comTitle,back:!0}}):t._e(),i("div",{class:{mask:t.showComments}}),i("div",{directives:[{name:"inf-scroll",rawName:"v-inf-scroll",value:t.getSecondCommentData,expression:"getSecondCommentData"}],staticClass:"lite-page-comment",style:{marginTop:t.showTopBar?"2.75rem":0},attrs:{"first-check":"true"}},[t.curWeiboData.rootComment?i("div",{staticClass:"card m-avatar-box lite-page-list"},[i("div",{staticClass:"card-wrap"},[i("div",{staticClass:"card-main"},[i("div",{staticClass:"m-box"},[i("a",{on:{click:function(e){return t.toProfileUrl(t.curWeiboData.rootComment.user.id)}}},[t.curWeiboData.rootComment.user?i("div",{staticClass:"m-img-box"},[i("img",{attrs:{src:t.curWeiboData.rootComment.user.profile_image_url}}),i("weibo-verified",{attrs:{user:t.curWeiboData.rootComment.user}})],1):t._e()]),i("div",{staticClass:"m-box-col m-box-dir m-box-center"},[i("div",{staticClass:"m-box"},[i("div",{staticClass:"m-box-col m-box-dir"},[i("div",{staticClass:"m-text-box"},[t.curWeiboData.rootComment.user&&t.curWeiboData.rootComment.user.screen_name?i("h4",{staticClass:"m-text-cut",domProps:{textContent:t._s(t.curWeiboData.rootComment.user.screen_name)}}):t._e(),t.curWeiboData.rootComment.text?i("h3",{domProps:{innerHTML:t._s(t.curWeiboData.rootComment.text)}}):t._e()])])]),i("div",{staticClass:"lite-bot m-text-cut"},[i("div",{staticClass:"m-box-center-a time"},[t._v("\n                  "+t._s(t._f("fromNow")(t.curWeiboData.rootComment.created_at))+"\n                ")]),i("aside",{on:{click:function(e){return e.stopPropagation(),t.reply(t.curWeiboData.rootComment)}}},[i("i",{staticClass:"lite-iconf lite-iconf-comments"}),i("em")]),i("aside",{on:{click:function(e){return e.stopPropagation(),t.like(t.curWeiboData.rootComment)}}},[i("i",{staticClass:"lite-iconf",class:{"lite-iconf-liked":t.curWeiboData.rootComment.liked,"lite-iconf-like":!t.curWeiboData.rootComment.liked}}),t.curWeiboData.rootComment.like_count?i("em",{domProps:{textContent:t._s(t.curWeiboData.rootComment.like_count)}}):t._e()])]),i("div",{staticClass:"lite-bot-link",on:{click:function(e){return t.scanMBlog()}}},[t._v("\n                查看原微博\n              ")])])])])])]):t._e(),t._l(t.curWeiboData.commentLists,function(e,a){return i("div",{key:e.id,staticClass:"card m-avatar-box lite-page-list list-bg",on:{click:function(i){return t.cmtItem(i,e,a)}}},[i("div",{staticClass:"card-wrap"},[i("div",{staticClass:"card-main"},[i("div",{staticClass:"m-box"},[i("a",{on:{click:function(i){return t.toProfileUrl(e.user.id)}}},[e.user?i("div",{staticClass:"m-img-box"},[i("img",{attrs:{src:e.user.profile_image_url}}),i("weibo-verified",{attrs:{user:e.user}})],1):t._e()]),i("div",{staticClass:"m-box-col m-box-dir m-box-center lite-line"},[i("div",{staticClass:"m-box"},[i("div",{staticClass:"m-box-col m-box-dir"},[i("div",{staticClass:"m-text-box"},[e.user&&e.user.screen_name?i("h4",{staticClass:"m-text-cut",domProps:{textContent:t._s(e.user.screen_name)}}):t._e(),i("h3",{directives:[{name:"ahref",rawName:"v-ahref"}],domProps:{innerHTML:t._s(e.text)}})])])]),i("div",{staticClass:"lite-bot m-text-cut"},[i("div",{staticClass:"m-box-center-a time"},[t._v("\n                  "+t._s(t._f("fromNow")(e.created_at))+"\n                ")]),i("aside",{on:{click:function(i){return i.stopPropagation(),t.like(e)}}},[i("i",{staticClass:"lite-iconf",class:{"lite-iconf-liked":e.liked,"lite-iconf-like":!e.liked}}),e.like_count?i("em",{domProps:{textContent:t._s(e.like_count)}}):t._e()])])])])])])])}),i("mv-nextpage",{attrs:{requesting:t.loading}})],2),i("pageEdit",{attrs:{placeholder:t.curWeiboData.replyPlace,showRcl:!1},on:{newWeibo:t.unshiftNewWeibo}})],1)},o=[],s=i("cebc"),n=i("2f62"),r=i("383a"),c={data:function(){return{showTopBar:!0,comTitle:"",commentLists:[],page:1,maxpage:1,maxId:0,maxIdType:0,cid:"",loading:!1,replyPlace:"",rootComment:{},liked:!1,like_count:0}},created:function(){var t=this;setTimeout(function(){if(t.curWeiboData){var e=t.curWeiboData;t.$route.query.cid&&(e.cid=t.$route.query.cid),t.$route.params.index>=0&&(e.currentIndex=t.$route.params.index),t.$route.params.comment&&(e.rootComment=t.$route.params.comment,e.comTitle="".concat(t.$route.params.comment.total_number,"条回复"),e.replyPlace="回复@".concat(t.$route.params.comment.user.screen_name,":")),t.$set(e,"commentLists",[]),t.firstGetSecCommentData()}},0)},computed:Object(s["a"])({},Object(n["c"])(["curWeiboData","config"]),{showComments:function(){return this.$route.query.cid},isDeliverData:function(){return this.$route.params.comment?this.$route.params.comment:""},mid:function(){return this.curWeiboData&&this.curWeiboData.id?this.curWeiboData.id:""}}),methods:Object(s["a"])({},Object(n["b"])(["setCurWeiboData"]),{unshiftNewWeibo:function(t){this.curWeiboData.commentLists.unshift(t);var e=this.curWeiboData.commentLists.length;this.curWeiboData.comTitle="".concat(e,"条回复"),this.curWeiboData.comment[this.curWeiboData.currentIndex].total_number=e,this.curWeiboData.comment[this.curWeiboData.currentIndex].comments.unshift(t),this.curWeiboData.comments_count++},firstGetSecCommentData:function(){var t=this;this.loading=!0,this.$http.get("comments/hotFlowChild",{params:{cid:this.curWeiboData.cid,max_id:this.maxId,max_id_type:this.maxIdType}}).then(function(e){if(e.data&&e.data.ok>0&&e.data.data){var i=t.curWeiboData;i.maxId=e.data.max_id,i.maxIdType=e.data.max_id_type,i.maxpage=e.data.max,t.loading=!1,i.page=1,t.commentLists=e.data.data,i.commentLists=t.commentLists,t.$route.params.comment||(i.rootComment=e.data.rootComment[0]),i.comTitle="".concat(e.data.total_number,"条回复"),i.replyPlace="回复@".concat(e.data.rootComment[0].user.screen_name,":")}else t.loading=!1},function(){this.loading=!1})},getSecondCommentData:function(){var t=this;if(!0!==this.loading){var e=this.curWeiboData.page+1,i=this.curWeiboData.maxpage;this.curWeiboData.cid&&e<=i&&(this.loading=!0,this.$http.get("comments/hotFlowChild",{params:{cid:this.curWeiboData.cid,max_id:this.curWeiboData.maxId,max_id_type:this.curWeiboData.maxIdType}}).then(function(i){var a=t.curWeiboData;i.data&&i.data.ok>0&&i.data.data&&(a.maxId=i.data.max_id,a.maxIdType=i.data.max_id_type,a.maxpage=i.data.max,t.loading=!1,a.page=e,a.commentLists=a.commentLists.concat(i.data.data),t.isDeliverData||(a.rootComment=i.data.rootComment[0]),a.comTitle="".concat(i.data.total_number,"条回复"),a.replyPlace="回复@".concat(i.data.rootComment[0].user.screen_name,":"))},function(){this.loading=!1}))}},like:function(t){var e=this,i=t,a="api/likes/update",o="api/likes/destroy",s=i.liked?o:a;this.$http.post(s,{id:i.id,type:"comment"}).then(function(t){if(t.data&&t.data.ok>0)i.liked?(i.like_count-=1,i.liked=!1):(i.like_count+=1,i.liked=!0),e.curWeiboData.commentLists=e.commentLists;else if(t.data.msg)throw new Error(t.data.msg)},function(t){throw new Error(t)})},jumpScheme:function(t){window.location.href=t},scanMBlog:function(){this.$route.query.cid&&(this.curWeiboData.commentLists=[],this.curWeiboData.page=1),this.$router.go(-1)},toProfileUrl:function(t){this.$router.push({path:"/profile/".concat(t)})},reply:function(t){this.$router.push({name:"reply",query:{id:this.mid,reply:this.curWeiboData.cid,content:"回复@".concat(t.user.screen_name,":"),withReply:1}})},cmtItem:function(t,e,i){var a=t.target,o=a.nodeName.toLocaleLowerCase(),s=a.parentNode.nodeName.toLocaleLowerCase();if("a"!==o&&"a"!==s){var n=this,c=[{text:"回复",method:function(){n.$router.push({name:"reply",query:{id:n.mid,reply:e.id,content:"回复@".concat(e.user.screen_name,":")}})}}];e.user.id!==+this.config.uid&&this.curWeiboData.user.id!==+this.config.uid||c.push({text:"删除",method:function(){r["a"].$emit("mvMsgbox",{title:"确定要删除这条评论吗？",type:"confirm"},function(){n.$http.post("comments/destroy",{cid:e.id}).then(function(t){t.data.ok?(n.deleteSeComment(i),r["a"].$emit("mvToast",{text:"删除成功"})):r["a"].$emit("mvToast",{text:"删除失败",type:"error"}),r["a"].$emit("mvMsgbox",!1)})})}}),e.user.id!==+this.config.uid&&c.push({text:"举报",method:function(){window.location.href="http://service.account.weibo.com/reportspamobile?rid=".concat(e.id,"&type=2&from=20000")}}),r["a"].$emit("mvActionSheet",c,"取消")}},deleteSeComment:function(t){var e=this,i=e.curWeiboData;i.currentIndex>=0&&(i.comment[i.currentIndex].comments&&i.comment[i.currentIndex].comments.splice(t,1),i.commentLists.splice(t,1),i.comments_count--,i.comment[i.currentIndex].total_number--,i.comTitle="".concat(i.comment[i.currentIndex].total_number,"条回复"))}}),components:{pageTop:i("99bd").default,weiboVerified:i("21a9").default,pageEdit:i("af64").default}},m=c,u=i("0c7c"),d=Object(u["a"])(m,a,o,!1,null,null,null);e["default"]=d.exports},e698:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("aside",{staticClass:"OpenInAppButton m-container-max",style:{bottom:t.posBottom}},[i("a",{staticClass:"btn",attrs:{href:"javascript:;",ontouchstart:""},domProps:{textContent:t._s(t.appTips.text)},on:{click:t.openApp}})]):t._e()},o=[],s=i("0928"),n=i.n(s),r=i("685a"),c=i("2b0a"),m={props:{scheme:{type:String,required:!0},appTips:{type:Object,default:function(){return{text:"微博内打开",barHeight:0}}},showAppTips:{type:Boolean,default:!1}},mixins:[c["a"]],data:function(){return{show:!1,posBottom:0,openAppParams:{scheme:""}}},mounted:function(){var t=navigator.userAgent.toLowerCase();this.openAppParams.scheme=this.scheme,this.posBottom="".concat(this.appTips.barHeight/16+1.75,"rem"),this.openAppParams.url="https://m.weibo.cn/feature/openapp?yingyongbao=1&scheme=".concat(this.openAppParams.scheme),t.indexOf("wkbrowser")>-1?this.show=!1:this.show=this.showAppTips,this.checkMiniProgram()},watch:{"appTips.barHeight":function(){this.posBottom="".concat(this.appTips.barHeight/16+1.75,"rem")},showAppTips:function(t){if(t){var e=navigator.userAgent.toLowerCase();this.openAppParams.scheme=this.scheme,e.indexOf("wkbrowser")>-1?this.show=!1:this.show=t,this.checkMiniProgram()}}},methods:{openApp:function(){this.addLog("act_code=39&ext=pos:bottom");var t=navigator.userAgent.toLowerCase(),e=encodeURIComponent(this.openAppParams.scheme);/micromessenger/.test(t)?window.location.href="https://m.weibo.cn/feature/openapp?yingyongbao=1&scheme=".concat(e):t.indexOf("qq/")>-1||t.indexOf("qzone")>-1?window.location.href="https://weibo.cn/appurl?scheme=".concat(e):(this.openAppParams.isDownload=!0,this.openAppParams.closeUnilink=!0,n.a.start(this.openAppParams))},ready:function(){"miniprogram"===window.__wxjs_environment&&(this.show=!1)},checkMiniProgram:function(){var t=this,e=window.wx;"Wechat"===r["a"].browser&&r["a"].versionCompare(r["a"].version,"7.0.0")<0?window.WeixinJSBridge&&window.WeixinJSBridge.invoke?this.ready():document.addEventListener("WeixinJSBridgeReady",this.ready,!1):e&&e.miniProgram.getEnv(function(e){e.miniprogram&&(t.show=!1)})}}},u=m,d=(i("ebb0"),i("0c7c")),l=Object(d["a"])(u,a,o,!1,null,"cac215ec",null);e["default"]=l.exports},ebb0:function(t,e,i){"use strict";var a=i("a0b7"),o=i.n(a);o.a},ee2f:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.msg&&t.msg.msg?i("div",{staticClass:"empty_failed"},[i("svg",{attrs:{"enable-background":"new 0 0 200 200",viewBox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"m86.9 49c4.1 0 7.5 1.1 9.9 3.5 4.1 4 4.5 11 1.9 19.3-.6 2 .2 2.5 1.3 2.5 1.2 0 2.7-.6 2.7-.6 0 0 0 0 0 0 8.6-3.5 16.6-5.4 23.2-5.4 6.5 0 11.5 1.8 14.2 5.6 2.9 4.1 2.6 9.8 0 16.5-1.2 3.1.4 3.5 2.7 4.2 9.6 2.9 20.3 10.1 20.3 22.6 0 20.7-30.3 46.9-75.8 46.9-34.8-.1-70.3-16.7-70.3-44.1 0-14.3 9.2-30.8 25-46.4 15.6-15.4 33.1-24.6 44.9-24.6m0-2c-12.7 0-30.9 9.9-46.4 25.2-16.4 16.3-25.5 33.3-25.5 47.8 0 28.8 36.7 46 72.2 46 21.2 0 41.1-5.7 56.1-16 13.6-9.3 21.7-21.6 21.7-32.9 0-16.6-16.6-22.9-21.7-24.5-.6-.2-1.4-.4-1.7-.6 0-.1.1-.4.3-1 3.1-7.7 3-13.9-.2-18.4-3-4.2-8.5-6.5-15.8-6.5-6.8 0-15.1 1.9-23.9 5.5h-.1c-.5.2-.9.3-1.2.4 2.9-9.4 2.1-16.7-2.4-21.2-2.8-2.5-6.6-3.8-11.4-3.8z",fill:"#d2d2d2"}}),i("path",{attrs:{d:"m131.7 46.2c9.6-.8 19 1.8 25.9 8.9 6.3 6.5 8.9 15.3 8.4 24.2.7.2 1.3.3 2 .5.6-9.6-2.2-19.1-9-26.1-7.4-7.6-17.7-10.4-27.9-9.4.2.6.4 1.2.6 1.9z",fill:"#fbb285"}}),i("path",{attrs:{d:"m131 16.3c17.4-1.3 34.9 4.1 47.7 17.2 12 12.4 17.1 28.8 16.2 45.3.7.2 1.3.4 2 .7 1-17.2-4.2-34.5-16.8-47.4-13.3-13.7-31.6-19.3-49.8-17.8.2.7.4 1.3.7 2z",fill:"#fbb285"}})]),i("p",{domProps:{textContent:t._s(t.msg.msg)}})]):t._e()},o=[],s={props:["msg"]},n=s,r=(i("f516"),i("0c7c")),c=Object(r["a"])(n,a,o,!1,null,null,null);e["default"]=c.exports},f175:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"card m-avatar-box lite-page-list",on:{click:function(e){return e.stopPropagation(),t.cmtItem(e)}}},[i("div",{staticClass:"card-wrap"},[i("div",{staticClass:"card-main"},[i("div",{staticClass:"m-box"},[i("div",{staticClass:"m-img-box",on:{click:function(e){return e.stopPropagation(),t.toProfileUrl(t.item.user.id)}}},[i("img",{attrs:{src:t.item.user.profile_image_url}}),i("weibo-verified",{attrs:{user:t.item.user}})],1),i("div",{staticClass:"m-box-col m-box-dir m-box-center lite-line"},[i("div",{staticClass:"m-box"},[i("div",{staticClass:"m-box-col m-box-dir"},[i("div",{staticClass:"m-text-box"},[i("h4",{staticClass:"m-text-cut",domProps:{textContent:t._s(t.item.user.screen_name)}}),i("h3",{directives:[{name:"ahref",rawName:"v-ahref"}],domProps:{innerHTML:t._s(t.item.text)}}),t.item.isLikedByMblogAuthor?i("div",{staticClass:"like-blog"},[t._m(0)]):t._e(),t.item.pic&&t.item.pic.url?i("span",{staticClass:"comment-con-img",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.showImg(e)}}},[i("img",{attrs:{src:t.item.pic.url}})]):t._e(),t.item.comments&&t.item.comments.length>0?i("div",{staticClass:"cmt-sub-txt",on:{click:function(e){return e.stopPropagation(),t.jumpSecondComment(e,t.item,t.index)}}},[t._l(t.item.comments,function(e){return i("p",{key:e.id},[e.user.screen_name?i("a",{domProps:{textContent:t._s(e.user.screen_name)},on:{click:function(i){return i.stopPropagation(),t.$router.push({path:"/profile/"+e.user.id})}}}):t._e(),e.reply_original_text?t._e():i("span",[t._v(":")]),e.text?i("span",{directives:[{name:"ahref",rawName:"v-ahref"}],domProps:{innerHTML:t._s(e.text)}}):t._e()])}),t.item.total_number>2?i("p",[i("span",{staticClass:"total"},[t._v("\n                        共"+t._s(t.item.total_number)+"条回复"),i("i",{staticClass:"m-font m-font-arrow-right"})])]):t._e()],2):t._e(),t.item.total_number>=1&&!t.item.comments?i("div",{staticClass:"cmt-sub-txt",on:{click:function(e){return e.stopPropagation(),t.jumpSecondComment(e,t.item,t.index)}}},[t._l(t.item.more_info_users,function(e){return i("span",{key:e.id},[e.screen_name?i("a",{domProps:{textContent:t._s(e.screen_name)},on:{click:function(i){return i.stopPropagation(),t.$router.push({path:"/profile/"+e.id})}}}):t._e(),t._v("等人\n                    ")])}),t.item.total_number>=1?i("span",[i("span",{staticClass:"total"},[t._v("\n                        共"+t._s(t.item.total_number)+"条回复"),i("i",{staticClass:"m-font m-font-arrow-right"})])]):t._e()],2):t._e()])])]),i("div",{staticClass:"lite-bot m-text-cut"},[i("div",{staticClass:"m-box-center-a time"},[t._v("\n                "+t._s(t._f("fromNow")(t.item.created_at))+"\n              ")]),i("aside",{on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.comment(e)}}},[i("i",{staticClass:"lite-iconf lite-iconf-comments"}),i("em")]),i("aside",{on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.like(e)}}},[i("i",{staticClass:"lite-iconf",class:{"lite-iconf-liked":t.liked,"lite-iconf-like":!t.liked}}),i("em",[t._v(t._s(t._f("numFormat")(0===t.like_count?"":t.like_count)))])])])])])])])])])},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("aside",[i("i",{staticClass:"lite-iconf lite-iconf-like"}),i("span",[t._v("博主 赞了这条评论")])])}],s=i("cebc"),n=i("685a"),r=i("383a"),c=i("2f62"),m={data:function(){return{liked:!1,like_count:0}},props:{item:{required:!0},rootItem:{required:!0},index:{default:0}},components:{weiboVerified:i("21a9").default},created:function(){this.liked=this.item.liked||0,this.like_count=this.item.like_count||0},computed:Object(s["a"])({},Object(c["c"])(["config"])),methods:{cmtItem:function(t){var e=t.target,i=e.nodeName.toLocaleLowerCase(),a=e.parentNode.nodeName.toLocaleLowerCase();if("a"!==i&&"a"!==a){var o=this,s=[{text:"回复",method:function(){o.comment()}}];this.item.user.id!==+this.config.uid&&this.rootItem.user.id!==+this.config.uid||s.push({text:"删除",method:function(){r["a"].$emit("mvMsgbox",{title:"确定要删除这条评论吗？",type:"confirm"},function(){o.$http.post("comments/destroy",{cid:o.item.id}).then(function(t){t.data.ok?(r["a"].$emit("mvToast",{text:"删除成功"}),o.$emit("deleteComment",o.index)):r["a"].$emit("mvToast",{text:"删除失败",type:"error"}),r["a"].$emit("mvMsgbox",!1)})})}}),this.item.user.id!==+this.config.uid&&s.push({text:"举报",method:function(){window.location.href="http://service.account.weibo.com/reportspamobile?rid=".concat(o.item.id,"&type=2&from=20000")}}),r["a"].$emit("mvActionSheet",s,"取消")}},toProfileUrl:function(t){this.$router.push({path:"/profile/".concat(t)})},showImg:function(t){var e=[],i=this.item.pic;if(e.push(i.large),window.wx)window.wx.invoke("imagePreview",{urls:e,current:i.large});else if("Weibo"===n["a"].browser&&n["a"].versionCompare(n["a"].version,"4.3.0")>=0)window.WeiboJSBridge.invoke("openImage",{urls:e,url:i.large},function(){});else{var a=0,o=0,s=new Image;s.src=i.large.url;var c=setInterval(function(){if(s.width>0||s.height>0){a=s.width,o=s.height;var e=[{src:i.large.url,w:a,h:o,msrc:i.url,el:t.target||t.srcElement}];r["a"].$emit("mvGallery",0,e),clearInterval(c)}},10)}},like:function(){var t=this,e=this.liked?"api/likes/destroy":"api/likes/update";this.$http.post(e,{id:this.item.id,type:"comment"}).then(function(e){if(e.data&&e.data.ok>0)t.liked?(t.like_count-=1,t.liked=!1):(t.like_count+=1,t.liked=!0);else if(e.data.msg)throw new Error(e.data.msg)},function(t){throw new Error(t)})},jumpSecondComment:function(t,e,i){var a=t.target;"a"!==a.nodeName.toLocaleLowerCase()&&this.$router.push({query:{cid:e.id},params:{comment:e,index:i}})},jumpScheme:function(t){window.location.href=t},comment:function(){this.$router.push({name:"reply",query:{id:this.rootItem.id,reply:this.item.id,content:"回复@".concat(this.item.user.screen_name,":"),withReply:1}})}}},u=m,d=(i("f8ce"),i("0c7c")),l=Object(d["a"])(u,a,o,!1,null,"de2e8de6",null);e["default"]=l.exports},f516:function(t,e,i){"use strict";var a=i("1784"),o=i.n(a);o.a},f8ce:function(t,e,i){"use strict";var a=i("8ffa"),o=i.n(a);o.a}}]);
//# sourceMappingURL=statusLite.f2d6a6db.js.map